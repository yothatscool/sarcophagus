(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},8188:e=>{"use strict";e.exports=require("module")},1808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},3683:()=>{},4041:()=>{},1655:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=a(482),r=a(9108),i=a(2563),n=a.n(i),l=a(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,751)),"C:\\Users\\NickC_4denkwr\\Desktop\\Vereavement\\vereavement-contracts\\frontend\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,3727)),"C:\\Users\\NickC_4denkwr\\Desktop\\Vereavement\\vereavement-contracts\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\NickC_4denkwr\\Desktop\\Vereavement\\vereavement-contracts\\frontend\\app\\page.tsx"],u="/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2437:(e,t,a)=>{Promise.resolve().then(a.bind(a,9064)),Promise.resolve().then(a.bind(a,3600)),Promise.resolve().then(a.bind(a,9846)),Promise.resolve().then(a.bind(a,3014))},9470:(e,t,a)=>{Promise.resolve().then(a.bind(a,7292))},1195:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,6840,23)),Promise.resolve().then(a.t.bind(a,8771,23)),Promise.resolve().then(a.t.bind(a,3225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,3982,23))},9064:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5344),r=a(3729);function i(){let[e,t]=(0,r.useState)(!1);return s.jsx("div",{className:"bg-red-600 text-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-xl mr-3",children:"⚠️"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium",children:[s.jsx("strong",{children:"WARNING:"})," This is an irrevocable inheritance protocol with 7-year locks and severe penalties"]}),e&&s.jsx("div",{className:"mt-2 text-sm",children:s.jsx("p",{children:"• No withdrawals for 7 years • 90% penalty for emergency withdrawals • Funds only released upon death • Consult legal/financial advisors"})})]})]}),s.jsx("button",{onClick:()=>t(!e),className:"text-white hover:text-red-100",children:e?"▲":"▼"})]})})})})}},3600:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LoadingProvider:()=>n,useLoading:()=>l});var s=a(5344),r=a(3729);let i=(0,r.createContext)(void 0);function n({children:e}){let[t,a]=(0,r.useState)({});return s.jsx(i.Provider,{value:{isLoading:t,setLoading:(e,t)=>{a(a=>({...a,[e]:t}))}},children:e})}function l(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useLoading must be used within a LoadingProvider");return e}},9846:(e,t,a)=>{"use strict";a.r(t),a.d(t,{NotificationProvider:()=>l,useNotification:()=>o});var s=a(5344),r=a(3729),i=a(7363);a(5996);let n=(0,r.createContext)(void 0);function l({children:e}){let t=(0,r.useCallback)((e,t)=>{i.Am[t](e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},[]),a=(0,r.useCallback)(e=>{i.Am.info((0,s.jsxs)("div",{children:[s.jsx("p",{children:"Transaction submitted"}),s.jsx("a",{href:`https://testnet.vechain.org/transaction/${e}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",children:"View on VeChain Explorer"})]}),{position:"bottom-right",autoClose:!1,closeOnClick:!1})},[]);return(0,s.jsxs)(n.Provider,{value:{showNotification:t,showTransactionNotification:a},children:[e,s.jsx(i.Ix,{})]})}function o(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useNotification must be used within a NotificationProvider");return e}},3014:(e,t,a)=>{"use strict";a.r(t),a.d(t,{WalletProvider:()=>i,useWallet:()=>r.Os,useWalletModal:()=>r.hB});var s=a(5344),r=a(8642);function i({children:e}){return s.jsx(r.jv,{node:"https://testnet.vechain.org/",usePersistence:!0,walletConnectOptions:{projectId:"a1472a0dff98ffc1f834887119efdf65",metadata:{name:"Sarcophagus Protocol",description:"A decentralized protocol for preserving digital legacies",url:"http://localhost:3000",icons:["http://localhost:3000/logo.png"]}},logLevel:"DEBUG",children:e})}},7292:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ex});var s=a(5344),r=a(3729);function i(e,t,a){for(let s in t){let r=t[s],i=a?a[s]:null;i&&function(e,t,a){let s=t.split("|").map(e=>e.trim());for(let a=0;a<s.length;a++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let r=Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${a}`,r.value=e,r}(r,i,s),Object.defineProperty(e,s,{enumerable:!0,value:r,writable:!1})}}function n(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"==typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>n(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",a="0x";for(let s=0;s<e.length;s++)a+=t[e[s]>>4]+t[15&e[s]];return a}if("object"==typeof e&&"function"==typeof e.toJSON)return n(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let a=Object.keys(e);return a.sort(),"{ "+a.map(a=>`${n(a,t)}: ${n(e[a],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function l(e,t,a,s){if(!e)throw function(e,t,a){let s,r=e;{let s=[];if(a){if("message"in a||"code"in a||"name"in a)throw Error(`value will overwrite populated values: ${n(a)}`);for(let e in a){if("shortMessage"===e)continue;let t=a[e];s.push(e+"="+n(t))}}s.push(`code=${t}`),s.push("version=6.14.4"),s.length&&(e+=" ("+s.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":s=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=RangeError(e);break;default:s=Error(e)}return i(s,{code:t}),a&&Object.assign(s,a),null==s.shortMessage&&i(s,{shortMessage:r}),s}(t,a,s)}function o(e,t,a,s){l(e,t,"INVALID_ARGUMENT",{argument:a,value:s})}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);let c=BigInt(0),d=BigInt(1);function u(e,t){let a=g(e,"value"),s=BigInt(p(t,"width"));return(l(a>>s===c,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),a>>s-d)?-((~a&(d<<s)-d)+d):a}function h(e,t){return g(e,"value")&(d<<BigInt(p(t,"bits")))-d}function m(e,t){switch(typeof e){case"bigint":return e;case"number":return o(Number.isInteger(e),"underflow",t||"value",e),o(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(a){o(!1,`invalid BigNumberish string: ${a.message}`,t||"value",e)}}o(!1,"invalid BigNumberish value",t||"value",e)}function g(e,t){let a=m(e,t);return l(a>=c,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),a}let x="0123456789abcdef";function p(e,t){switch(typeof e){case"bigint":return o(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),Number(e);case"number":return o(Number.isInteger(e),"underflow",t||"value",e),o(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return p(BigInt(e),t)}catch(a){o(!1,`invalid numeric string: ${a.message}`,t||"value",e)}}o(!1,"invalid numeric value",t||"value",e)}let f=BigInt(-1),b=BigInt(0),v=BigInt(1),y=BigInt(5),j={},w="0000";for(;w.length<80;)w+=w;function N(e){let t=w;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function k(e,t,a){let s=BigInt(t.width);if(t.signed){let t=v<<s-v;l(null==a||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:a,fault:"overflow",value:e}),e=e>b?u(h(e,s),s):-u(h(-e,s),s)}else{let t=v<<s;l(null==a||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:a,fault:"overflow",value:e}),e=(e%t+t)%t&t-v}return e}function C(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,a=128,s=18;if("string"==typeof e){if("fixed"===e);else if("ufixed"===e)t=!1;else{let r=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o(r,"invalid fixed format","format",e),t="u"!==r[1],a=parseInt(r[2]),s=parseInt(r[3])}}else if(e){let r=e,i=(e,t,a)=>null==r[e]?a:(o(typeof r[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,r[e]),r[e]);t=i("signed","boolean",t),a=i("width","number",a),s=i("decimals","number",s)}o(a%8==0,"invalid FixedNumber width (not byte aligned)","format.width",a),o(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);let r=(t?"":"u")+"fixed"+String(a)+"x"+String(s);return{signed:t,width:a,decimals:s,name:r}}class S{#e;#t;#a;constructor(e,t,a){(function(e,t,a){if(null==a&&(a=""),e!==t){let e=a,t="new";a&&(e+=".",t+=" "+a),l(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}})(e,j,"FixedNumber"),this.#t=t,this.#e=a;let s=function(e,t){let a="";e<b&&(a="-",e*=f);let s=e.toString();if(0===t)return a+s;for(;s.length<=t;)s=w+s;let r=s.length-t;for(s=s.substring(0,r)+"."+s.substring(r);"0"===s[0]&&"."!==s[1];)s=s.substring(1);for(;"0"===s[s.length-1]&&"."!==s[s.length-2];)s=s.substring(0,s.length-1);return a+s}(t,a.decimals);i(this,{format:a.name,_value:s}),this.#a=N(a.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#s(e){o(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#r(e,t){return new S(j,e=k(e,this.#e,t),this.#e)}#i(e,t){return this.#s(e),this.#r(this.#t+e.#t,t)}addUnsafe(e){return this.#i(e)}add(e){return this.#i(e,"add")}#n(e,t){return this.#s(e),this.#r(this.#t-e.#t,t)}subUnsafe(e){return this.#n(e)}sub(e){return this.#n(e,"sub")}#l(e,t){return this.#s(e),this.#r(this.#t*e.#t/this.#a,t)}mulUnsafe(e){return this.#l(e)}mul(e){return this.#l(e,"mul")}mulSignal(e){this.#s(e);let t=this.#t*e.#t;return l(t%this.#a===b,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#r(t/this.#a,"mulSignal")}#o(e,t){return l(e.#t!==b,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e),this.#r(this.#t*this.#a/e.#t,t)}divUnsafe(e){return this.#o(e)}div(e){return this.#o(e,"div")}divSignal(e){l(e.#t!==b,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e);let t=this.#t*this.#a;return l(t%e.#t===b,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#r(t/e.#t,"divSignal")}cmp(e){let t=this.value,a=e.value,s=this.decimals-e.decimals;return(s>0?a*=N(s):s<0&&(t*=N(-s)),t<a)?-1:t>a?1:0}eq(e){return 0===this.cmp(e)}lt(e){return 0>this.cmp(e)}lte(e){return 0>=this.cmp(e)}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<b&&(e-=this.#a-v),e=this.#t/this.#a*this.#a,this.#r(e,"floor")}ceiling(){let e=this.#t;return this.#t>b&&(e+=this.#a-v),e=this.#t/this.#a*this.#a,this.#r(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;let t=this.decimals-e,a=y*N(t-1),s=this.value+a,r=N(t);return k(s=s/r*r,this.#e,"round"),new S(j,s,this.#e)}isZero(){return this.#t===b}isNegative(){return this.#t<b}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return S.fromString(this.toString(),e)}static fromValue(e,t,a){let s=null==t?0:p(t),r=C(a),i=m(e,"value"),n=s-r.decimals;if(n>0){let t=N(n);l(i%t===b,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else n<0&&(i*=N(-n));return k(i,r,"fromValue"),new S(j,i,r)}static fromString(e,t){let a=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);o(a&&a[2].length+a[3].length>0,"invalid FixedNumber string value","value",e);let s=C(t),r=a[2]||"0",i=a[3]||"";for(;i.length<s.decimals;)i+=w;l(i.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,s.decimals);let n=BigInt(a[1]+r+i);return k(n,s,"fromString"),new S(j,n,s)}static fromBytes(e,t){let a=function(e){if(e instanceof Uint8Array){let t="0x0";for(let a of e)t+=x[a>>4]+x[15&a];return BigInt(t)}return m(e)}(function(e,t,a){if(e instanceof Uint8Array)return a?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),a=2;for(let s=0;s<t.length;s++)t[s]=parseInt(e.substring(a,a+2),16),a+=2;return t}o(!1,"invalid BytesLike value",t||"value",e)}(e,"value",!1)),s=C(t);return s.signed&&(a=u(a,s.width)),k(a,s,"fromBytes"),new S(j,a,s)}}let A=["wei","kwei","mwei","gwei","szabo","finney","ether"];function E(e){return function(e,t){let a=18;if("string"==typeof t){let e=A.indexOf(t);o(e>=0,"invalid unit","unit",t),a=3*e}else null!=t&&(a=p(t,"unit"));return S.fromValue(e,a,{decimals:a,width:512}).toString()}(e,18)}function T(e){return function(e,t){o("string"==typeof e,"value must be a string","value",e);let a=18;if("string"==typeof t){let e=A.indexOf(t);o(e>=0,"invalid unit","unit",t),a=3*e}else null!=t&&(a=p(t,"unit"));return S.fromString(e,{decimals:a,width:512}).value}(e,18)}var O=a(9846);function I(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null),[i,n]=(0,r.useState)(null),[l,o]=(0,r.useState)(null),{showNotification:c}=(0,O.useNotification)(),[d,u]=(0,r.useState)({sarcophagus:null,obol:null,b3trRewards:null,deathVerifier:null}),[h,m]=(0,r.useState)(null),[g,x]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{},[]);let w=(0,r.useCallback)(async()=>{if(l&&d.sarcophagus&&d.obol)try{t(!0);let e=await l.getAddress();try{let t=await d.sarcophagus.getUserVerification(e);f(t.isVerified)}catch(e){f(!1)}try{let t=await d.sarcophagus.getSarcophagus(e);"0x0000000000000000000000000000000000000000"!==t.owner?(m({owner:t.owner,beneficiaries:t.beneficiaries,vetAmount:t.vetAmount,vthoAmount:t.vthoAmount,b3trAmount:t.b3trAmount,obolAmount:t.obolAmount,createdAt:t.createdAt,isDeceased:t.isDeceased,deathTimestamp:t.deathTimestamp,actualAge:Number(t.actualAge),lifeExpectancy:Number(t.lifeExpectancy)}),v(!0),x(t.beneficiaries)):(v(!1),m(null),x([]))}catch(e){v(!1),m(null),x([])}try{let t=await d.obol.getUserStake(e);j({lockedValue:t.lockedValue,lastClaimTime:t.lastClaimTime,startTime:t.startTime,totalEarned:t.totalEarned,pendingRewards:t.pendingRewards,dailyRewardRate:t.dailyRewardRate,isLongTermHolder:t.isLongTermHolder,weightMultiplier:t.weightMultiplier,weightedRate:t.weightedRate})}catch(e){j(null)}}catch(e){console.error("Error refreshing user data:",e),s("Failed to load user data")}finally{t(!1)}},[l,d]),N=async(e,a,r)=>{if(!d.sarcophagus)return console.log("Mock: Verifying user",e,a,r),f(!0),c("User verified successfully! (Mock mode)","success"),{wait:async()=>{}};t(!0),s(null);try{let t=await d.sarcophagus.verifyUser(e,a,r);return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to verify user"),e}finally{t(!1)}},k=async(e,a)=>{if(!d.sarcophagus){console.log("Mock: Creating sarcophagus",e,a);let t={owner:await l?.getAddress()||"0x0000000000000000000000000000000000000000",beneficiaries:e.map((e,t)=>({address:e,percentage:a[t]})),vetAmount:BigInt(0),vthoAmount:BigInt(0),b3trAmount:BigInt(0),obolAmount:BigInt(0),createdAt:BigInt(Math.floor(Date.now()/1e3)),isDeceased:!1,deathTimestamp:BigInt(0),actualAge:30,lifeExpectancy:85};return m(t),v(!0),x(t.beneficiaries),c("Sarcophagus created successfully! (Mock mode)","success"),{wait:async()=>{}}}t(!0),s(null);try{let t=await d.sarcophagus.createSarcophagus(e,a);return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to create sarcophagus"),e}finally{t(!1)}},C=async(e,a)=>{if(!d.sarcophagus)return console.log("Mock: Depositing tokens",{vthoAmount:e,b3trAmount:a}),h&&m({...h,vetAmount:h.vetAmount+BigInt(T("100")),vthoAmount:h.vthoAmount+BigInt(T(e||"0")),b3trAmount:h.b3trAmount+BigInt(T(a||"0"))}),c("Tokens deposited successfully! (Mock mode)","success"),{wait:async()=>{}};t(!0),s(null);try{let t=await d.sarcophagus.depositTokens(T(e||"0"),T(a||"0"),{value:T("100")});return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to deposit tokens"),e}finally{t(!1)}},S=async e=>{if(!d.obol)return console.log("Mock: Locking OBOL tokens",e),h&&m({...h,obolAmount:h.obolAmount+BigInt(T(e))}),c("OBOL tokens locked successfully! (Mock mode)","success"),{wait:async()=>{}};t(!0),s(null);try{let t=await d.obol.lockTokens(T(e));return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to lock OBOL tokens"),e}finally{t(!1)}},A=async()=>{if(!d.obol)return console.log("Mock: Claiming OBOL rewards"),c("Claimed 100 OBOL rewards! (Mock mode)","success"),{wait:async()=>{}};t(!0),s(null);try{let e=await d.obol.claimRewards();return await e.wait(),await w(),e}catch(e){throw s(e.reason||e.message||"Failed to claim OBOL rewards"),e}finally{t(!1)}},I=async(e,a,r)=>{if(!d.deathVerifier)return console.log("Mock: Verifying death",e,a,r),c("Death verified successfully! (Mock mode)","success"),{wait:async()=>{}};t(!0),s(null);try{let t=await d.deathVerifier.verifyDeath(e,a,r);return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to verify death"),e}finally{t(!1)}},D=async e=>{if(!d.sarcophagus)return console.log("Mock: Claiming inheritance",e),c("Inheritance claimed: 500 VET, 250 VTHO, 100 B3TR, 50 OBOL (Mock mode)","success"),{wait:async()=>{}};t(!0),s(null);try{let t=await d.sarcophagus.claimInheritance(e);return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to claim inheritance"),e}finally{t(!1)}},L=async(e,a)=>{if(!d.sarcophagus)throw Error("Contract not initialized");t(!0),s(null);try{let t=await d.sarcophagus.addBeneficiary(e,a);return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to add beneficiary"),e}finally{t(!1)}},B=async e=>{if(!d.sarcophagus)throw Error("Contract not initialized");t(!0),s(null);try{let t=await d.sarcophagus.removeBeneficiary(e);return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to remove beneficiary"),e}finally{t(!1)}},P=async()=>g,R=async e=>{if(!d.obol)throw Error("OBOL contract not initialized");try{let[t,a]=await d.obol.calculateWeightedRate(e);return{weightedRate:Number(E(t)),weightMultiplier:Number(a)}}catch(e){throw console.error("Error calculating weighted rate:",e),Error("Failed to calculate weighted rate")}},_=async()=>{if(!d.obol)throw Error("OBOL contract not initialized");try{let e=await d.obol.getEarningRates();return{initialBonusRate:Number(E(e.initialBonusRate)),dailyRate:Number(e.dailyRate),bonusRate:Number(e.bonusRate),maxWeightMultiplier:Number(e.maxWeightMultiplier),weightTimeMultiplier:Number(e.weightTimeMultiplier),weightAmountMultiplier:Number(e.weightAmountMultiplier)}}catch(e){throw console.error("Error getting earning rates:",e),Error("Failed to get earning rates")}},U=async e=>{if(!d.sarcophagus){console.log("Mock: Withdrawing OBOL tokens",e.toString());let t=Number(E(e)),a=.005*t;return c(`Withdrew ${(t-a).toFixed(4)} OBOL (${a.toFixed(4)} fee applied) (Mock mode)`,"success"),{wait:async()=>{}}}t(!0),s(null);try{let t=await d.sarcophagus.withdrawObolTokens(e);return await t.wait(),await w(),t}catch(e){throw s(e.reason||e.message||"Failed to withdraw OBOL tokens"),e}finally{t(!1)}},V=async e=>{if(!d.sarcophagus){let t=Number(E(e)),a=.01*t;return{fee:T(a.toString()),net:T((t-a).toString())}}try{let[t,a]=await d.sarcophagus.calculateInheritanceFee(e);return{fee:t,net:a}}catch(e){throw console.error("Error calculating inheritance fee:",e),Error("Failed to calculate inheritance fee")}},F=async e=>{if(!d.sarcophagus){let t=Number(E(e)),a=.005*t;return{fee:T(a.toString()),net:T((t-a).toString())}}try{let[t,a]=await d.sarcophagus.calculateObolWithdrawalFee(e);return{fee:t,net:a}}catch(e){throw console.error("Error calculating OBOL withdrawal fee:",e),Error("Failed to calculate OBOL withdrawal fee")}},W=async()=>{if(!d.sarcophagus)return null;try{let e=await d.sarcophagus.totalInheritanceFeesCollected(),t=await d.sarcophagus.totalObolFeesCollected();return{totalInheritanceFees:e.toString(),totalObolFees:t.toString()}}catch(e){return console.error("Error getting fee statistics:",e),null}},$=async e=>{if(!d.sarcophagus)return null;try{let t=await d.sarcophagus.getWithdrawalEligibility(e);return{canWithdrawPartial:t.canWithdrawPartial,canWithdrawAll:t.canWithdrawAll,canEmergencyWithdraw:t.canEmergencyWithdraw,timeUntilPartialWithdrawal:t.timeUntilPartialWithdrawal.toString(),timeUntilFullWithdrawal:t.timeUntilFullWithdrawal.toString(),timeUntilEmergencyWithdrawal:t.timeUntilEmergencyWithdrawal.toString()}}catch(e){return console.error("Error getting withdrawal eligibility:",e),null}},M=async e=>{if(!d.sarcophagus||!l){c("Please connect your wallet","error");return}try{t(!0);let a=await d.sarcophagus.withdrawPartial(e);await a.wait(),c("Partial withdrawal successful!","success"),await w()}catch(e){console.error("Error withdrawing partial funds:",e),c(e.message||"Failed to withdraw funds","error")}finally{t(!1)}},H=async()=>{if(!d.sarcophagus||!l){c("Please connect your wallet","error");return}try{t(!0);let e=await d.sarcophagus.withdrawAll();await e.wait(),c("Full withdrawal successful!","success"),await w()}catch(e){console.error("Error withdrawing all funds:",e),c(e.message||"Failed to withdraw funds","error")}finally{t(!1)}},G=async e=>{if(!d.sarcophagus||!l){c("Please connect your wallet","error");return}try{t(!0);let a=await d.sarcophagus.emergencyWithdraw(e);await a.wait(),c("Emergency withdrawal successful!","success"),await w()}catch(e){console.error("Error emergency withdrawing:",e),c(e.message||"Failed to emergency withdraw","error")}finally{t(!1)}};return{loading:e,error:a,userSarcophagus:h,userBeneficiaries:g,isUserVerified:p,hasSarcophagus:b,userStake:y,provider:i,signer:l,contracts:d,createSarcophagus:k,verifyUser:N,depositTokens:C,lockObolTokens:S,withdrawObolTokens:U,claimObolRewards:A,verifyDeath:I,claimInheritance:D,refreshUserData:w,addBeneficiary:L,getBeneficiaries:P,removeBeneficiary:B,calculateWeightedRate:R,getEarningRates:_,calculateInheritanceFee:V,calculateObolWithdrawalFee:F,getFeeStatistics:W,getWithdrawalEligibility:$,withdrawPartial:M,withdrawAll:H,emergencyWithdraw:G}}var D=a(3014),L=a(3600);let B=["function createSarcophagusWithGuardians(address[] memory beneficiaries, uint256[] memory percentages, address[] memory guardians, uint256[] memory ages) external","function updateBeneficiaryEnhanced(uint256 index, address contingentBeneficiary, uint256 survivorshipPeriod, address successorGuardian, string memory contactInfo) external","function designateCharity(address charityAddress) external"];function P({isOpen:e,onClose:t,onComplete:a}){let{account:i}=(0,D.useWallet)(),{contract:n}=function(e,t){let{address:a}=(0,D.useWallet)(),[s,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{},[a,e,t]),{contract:s,address:a}}("SARCOPHAGUS_CONTRACT_ADDRESS",B),[l,o]=(0,r.useState)([{address:"",percentage:100,age:18}]),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),x=e=>{if(l.length>1){let t=l.filter((t,a)=>a!==e);if(100!==t.reduce((e,t)=>e+t.percentage,0)){let e=Math.floor(100/t.length),a=100-e*t.length;t.forEach((t,s)=>{t.percentage=e+(s<a?1:0)})}o(t)}},p=(e,t,a)=>{let s=[...l];if(s[e]={...s[e],[t]:a},"percentage"===t){let t=s.reduce((t,a,s)=>s===e?t:t+a.percentage,0)+a;if(t>100){let a=t-100,r=s.filter((t,a)=>a!==e),i=r.reduce((e,t)=>e+t.percentage,0);i>0&&r.forEach((e,t)=>{let s=e.percentage/i*a;e.percentage=Math.max(0,e.percentage-s)})}}o(s)},f=()=>{if(100!==l.reduce((e,t)=>e+t.percentage,0))return!1;for(let e of l)if(!e.address||e.address===i||e.age<0||e.age>120||e.age<18&&!e.guardian||e.survivorshipPeriod&&e.survivorshipPeriod>365)return!1;return!0},b=async()=>{if(f()){g(!0);try{let e=l.map(e=>e.address),t=l.map(e=>100*e.percentage),s=l.map(e=>e.guardian||"0x0000000000000000000000000000000000000000"),r=l.map(e=>e.age);if(n){let a=await n.createSarcophagusWithGuardians(e,t,s,r);await a.wait();for(let e=0;e<l.length;e++){let t=l[e];(t.contingentBeneficiary||t.survivorshipPeriod||t.successorGuardian||t.contactInfo)&&await n.updateBeneficiaryEnhanced(e,t.contingentBeneficiary||"0x0000000000000000000000000000000000000000",t.survivorshipPeriod||0,t.successorGuardian||"0x0000000000000000000000000000000000000000",t.contactInfo||"")}c&&await n.designateCharity(c)}a(l,c)}catch(e){console.error("Error creating sarcophagus:",e)}finally{g(!1)}}},v=l.reduce((e,t)=>e+t.percentage,0);return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Designate Beneficiaries"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Primary Beneficiaries"}),l.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 mb-4 bg-gray-50",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beneficiary Address"}),s.jsx("input",{type:"text",value:e.address,onChange:e=>p(t,"address",e.target.value),placeholder:"0x...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Percentage (",e.percentage,"%)"]}),s.jsx("input",{type:"range",min:"0",max:"100",value:e.percentage,onChange:e=>p(t,"percentage",parseInt(e.target.value)),className:"w-full"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),s.jsx("input",{type:"number",min:"0",max:"120",value:e.age,onChange:e=>p(t,"age",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.age<18&&(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guardian Address (Required for minors)"}),s.jsx("input",{type:"text",value:e.guardian||"",onChange:e=>p(t,"guardian",e.target.value),placeholder:"0x...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u&&(0,s.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[s.jsx("h4",{className:"font-medium text-gray-700",children:"Advanced Options"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contingent Beneficiary"}),s.jsx("input",{type:"text",value:e.contingentBeneficiary||"",onChange:e=>p(t,"contingentBeneficiary",e.target.value),placeholder:"Backup beneficiary address",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Survivorship Period (days)"}),s.jsx("input",{type:"number",min:"0",max:"365",value:e.survivorshipPeriod||0,onChange:e=>p(t,"survivorshipPeriod",parseInt(e.target.value)),placeholder:"0 = no requirement",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Successor Guardian"}),s.jsx("input",{type:"text",value:e.successorGuardian||"",onChange:e=>p(t,"successorGuardian",e.target.value),placeholder:"Backup guardian address",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Info (IPFS Hash)"}),s.jsx("input",{type:"text",value:e.contactInfo||"",onChange:e=>p(t,"contactInfo",e.target.value),placeholder:"Qm...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:()=>x(t),className:"text-red-600 hover:text-red-800 text-sm",disabled:1===l.length,children:"Remove Beneficiary"}),(0,s.jsxs)("button",{onClick:()=>h(!u),className:"text-blue-600 hover:text-blue-800 text-sm",children:[u?"Hide":"Show"," Advanced Options"]})]})]},t)),(0,s.jsxs)("button",{onClick:()=>{l.length<5&&o([...l,{address:"",percentage:0,age:18}])},disabled:l.length>=5,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:["Add Beneficiary (",l.length,"/5)"]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Charity Fallback"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Designate a charity to receive your estate if all beneficiaries are deceased or incapacitated."}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charity Address (Optional)"}),s.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"0x...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("span",{className:"text-sm font-medium",children:["Total Percentage: ",v,"%"]}),s.jsx("span",{className:`text-sm ${100===v?"text-green-600":"text-red-600"}`,children:100===v?"✓ Valid":"✗ Must equal 100%"})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("div",{children:"• Maximum 5 beneficiaries allowed"}),s.jsx("div",{children:"• Minors (under 18) require a guardian"}),s.jsx("div",{children:"• Survivorship periods can be 0-365 days"}),s.jsx("div",{children:"• Contingent beneficiaries provide backup inheritance"}),s.jsx("div",{children:"• Charity receives estate if no valid beneficiaries exist"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:b,disabled:!f()||m,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:m?"Creating...":"Create Sarcophagus"})]})]})]})}):null}let R={isProduction:!0,isTestnet:!1,isDevelopment:!1,whoApiEnabled:!0,whoApiUrl:"https://ghoapi.azureedge.net/api",whoApiTimeout:1e4,enableCaching:!0,cacheDuration:864e5,fallbackToStatic:!0},_=()=>R.whoApiEnabled,U=()=>R.isProduction?{title:"Production Mode",description:"Using real WHO API data for life expectancy calculations",dataSource:"WHO Global Health Observatory API"}:R.isTestnet?{title:"Testnet Mode",description:"Using WHO 2023 static data for testing",dataSource:"WHO 2023 Data (Static)"}:{title:"Development Mode",description:"Using WHO 2023 static data for development",dataSource:"WHO 2023 Data (Static)"},V={Japan:{male:81.6,female:87.7},Switzerland:{male:81,female:85.1},Singapore:{male:80.7,female:85.2},Australia:{male:80.5,female:84.5},Spain:{male:80.1,female:85.5},Italy:{male:79.7,female:84.4},Sweden:{male:80.7,female:84},Norway:{male:80.6,female:84.3},Netherlands:{male:79.8,female:83.2},Canada:{male:79.8,female:83.9},"United Kingdom":{male:79.4,female:83.1},Germany:{male:78.9,female:83.6},France:{male:78.4,female:85.2},"United States":{male:76.1,female:81.1},China:{male:75,female:79.4},Brazil:{male:72.8,female:79.6},India:{male:67.5,female:70.2},Russia:{male:66.5,female:77.2},"South Africa":{male:61.5,female:67.7},Nigeria:{male:54.7,female:55.7},Afghanistan:{male:63.7,female:66},Haiti:{male:63.2,female:66.5},"Central African Republic":{male:53.3,female:55.9}},F={Japan:"JPN",Switzerland:"CHE",Singapore:"SGP",Australia:"AUS",Spain:"ESP",Italy:"ITA",Sweden:"SWE",Norway:"NOR",Netherlands:"NLD",Canada:"CAN","United Kingdom":"GBR",Germany:"DEU",France:"FRA","United States":"USA",China:"CHN",Brazil:"BRA",India:"IND",Russia:"RUS","South Africa":"ZAF",Nigeria:"NGA",Afghanistan:"AFG",Haiti:"HTI","Central African Republic":"CAF"};class W{async fetchLifeExpectancyData(e){if(!_())return console.log(`WHO API: Using static data for ${e} (WHO API disabled in ${this.config.isProduction?"production":this.config.isTestnet?"testnet":"development"})`),this.getStaticData(e);try{return await this.fetchFromWHOApi(e)}catch(t){return console.error(`WHO API: Error fetching data for ${e}:`,t),console.log(`WHO API: Falling back to static data for ${e}`),this.getStaticData(e)}}async fetchFromWHOApi(e){let t=F[e];if(!t)throw Error(`Country code not found for ${e}`);let a=new Date().getFullYear(),s=`${this.config.whoApiUrl}/Indicator?$filter=IndicatorName eq 'Life expectancy at birth (years)' and SpatialDim eq '${t}' and TimeDim eq ${a}`,r=new AbortController,i=setTimeout(()=>r.abort(),this.config.whoApiTimeout);try{let n=await fetch(s,{signal:r.signal,headers:{Accept:"application/json","User-Agent":"Sarcophagus-Protocol/2.0"}});if(clearTimeout(i),!n.ok)throw Error(`WHO API responded with status ${n.status}`);let l=await n.json();if(!l.value||0===l.value.length)throw Error(`No data found for ${e} in ${a}`);let o=l.value.find(e=>"SEX"===e.Dim1&&"MLE"===e.Dim1Value),c=l.value.find(e=>"SEX"===e.Dim1&&"FMLE"===e.Dim1Value),d=l.value.find(e=>"SEX"===e.Dim1&&"BTSX"===e.Dim1Value);return{country:e,countryCode:t,male:o?.NumericValue||0,female:c?.NumericValue||0,both:d?.NumericValue||0,year:a,source:"WHO Global Health Observatory API",lastUpdated:new Date().toISOString()}}catch(e){throw clearTimeout(i),e}}getStaticData(e){let t=V[e];return t?{country:e,countryCode:F[e]||"",male:t.male,female:t.female,both:(t.male+t.female)/2,year:2023,source:"WHO 2023 Data (Static)",lastUpdated:"2023-12-31T23:59:59.999Z"}:null}getAvailableCountries(){return Object.keys(V).sort()}async checkApiHealth(){if(!_())return{available:!1,responseTime:0,error:"WHO API disabled in current environment"};let e=Date.now();try{let t=await fetch(`${this.config.whoApiUrl}/Indicator?$top=1`),a=Date.now()-e;return{available:t.ok,responseTime:a}}catch(t){return{available:!1,responseTime:Date.now()-e,error:t instanceof Error?t.message:"Unknown error"}}}getCacheStats(){return{size:0,entries:[]}}clearCache(){}getEnvironmentInfo(){return{isProduction:this.config.isProduction,isTestnet:this.config.isTestnet,isDevelopment:this.config.isDevelopment,whoApiEnabled:_(),whoApiUrl:this.config.whoApiUrl,whoApiTimeout:this.config.whoApiTimeout}}constructor(){this.config=R}}let $=new W,M={Japan:{male:81.6,female:87.7},Switzerland:{male:81,female:85.1},Singapore:{male:80.7,female:85.2},Australia:{male:80.5,female:84.5},Spain:{male:80.1,female:85.5},Italy:{male:79.7,female:84.4},Sweden:{male:80.7,female:84},Norway:{male:80.6,female:84.3},Netherlands:{male:79.8,female:83.2},Canada:{male:79.8,female:83.9},"United Kingdom":{male:79.4,female:83.1},Germany:{male:78.9,female:83.6},France:{male:78.4,female:85.2},"United States":{male:76.1,female:81.1},China:{male:75,female:79.4},Brazil:{male:72.8,female:79.6},India:{male:67.5,female:70.2},Russia:{male:66.5,female:77.2},"South Africa":{male:61.5,female:67.7},Nigeria:{male:54.7,female:55.7},Afghanistan:{male:63.7,female:66},Haiti:{male:63.2,female:66.5},"Central African Republic":{male:53.3,female:55.9}},H={smoking:{never:0,former:-2,current:-8},exercise:{sedentary:-3,moderate:0,active:2},bmi:{underweight:-2,normal:0,overweight:-1,obese:-3},education:{low:-2,medium:0,high:1},income:{low:-3,medium:0,high:1}};async function G(e){var t,a,s,r;let i,n,l,o;if(_())try{let t=await $.fetchLifeExpectancyData(e.country);if(t)i="female"===e.gender?t.female:t.male,n="WHO API",l=t.lastUpdated,console.log(`Using WHO API data for ${e.country}: ${i} years`);else throw Error("No WHO API data available")}catch(a){console.warn(`WHO API failed for ${e.country}, falling back to static data:`,a);let t=M[e.country];if(!t)throw Error(`Life expectancy data not available for ${e.country}`);i="female"===e.gender?t.female:t.male,n="Static Data",l="2023-12-31T23:59:59.999Z"}else{let t=M[e.country];if(!t)throw Error(`Life expectancy data not available for ${e.country}`);i="female"===e.gender?t.female:t.male,n="Static Data",l="2023-12-31T23:59:59.999Z"}let c=(t=e.bmi)<18.5?"underweight":t<25?"normal":t<30?"overweight":"obese",d=H.smoking[e.smokingStatus],u=H.exercise[e.exerciseLevel],h=H.bmi[c],m=H.education[e.education],g=H.income[e.income],x=Math.max(50,i+(a=e.age,s=d+u+h+m+g,a<30?1.2*s:a<50?1*s:a<70?.8*s:.6*s)),p=(o=0,((r=e).country&&r.age&&r.gender&&(o+=3),r.smokingStatus&&(o+=1),r.exerciseLevel&&(o+=1),r.bmi>0&&(o+=1),r.education&&(o+=1),r.income&&(o+=1),o>=6)?"high":o>=4?"medium":"low"),f=U();return{baseLifeExpectancy:Math.round(10*i)/10,adjustedLifeExpectancy:Math.round(10*x)/10,factors:{country:Math.round(10*i)/10,smoking:d,exercise:u,bmi:h,education:m,income:g},confidence:p,source:`${f.dataSource} + Actuarial Adjustments`,dataSource:n,lastUpdated:l}}let q=e=>{let t=4.7;"male"===e.gender?t*=1.15:"female"===e.gender&&(t*=.85);let a={US:1.8,Canada:1.6,UK:1.2,Germany:1.3,France:1.1,Japan:1,China:.8,India:.4,Brazil:.6,Nigeria:.3,Kenya:.2,Ethiopia:.1};return e.country&&a[e.country]&&(t*=a[e.country]),e.age<25?t*=.9:e.age>65&&(t*=.8),"current"===e.smokingStatus&&(t*=1.05),"active"===e.exerciseLevel?t*=1.1:"sedentary"===e.exerciseLevel&&(t*=.95),Math.round(100*t)/100};function z({isOpen:e,onComplete:t,onClose:a}){let[i,n]=(0,r.useState)(0),[l,o]=(0,r.useState)({age:"30",gender:"male",country:"United States",height:"69",weight:"154",smokingStatus:"never",exerciseLevel:"moderate",education:"medium",income:"medium",beneficiaries:[{address:"",percentage:"100"}],lifeExpectancy:null}),[c,d]=(0,r.useState)([]),{verifyUser:u}=I(),{showNotification:h}=(0,O.useNotification)(),{isLoading:m,setLoading:g}=(0,L.useLoading)(),{account:x}=(0,D.useWallet)(),p=(0,r.useMemo)(()=>l.beneficiaries.reduce((e,t)=>e+(parseInt(t.percentage)||0),0),[l.beneficiaries]),f=(0,r.useMemo)(()=>l.age&&l.gender&&l.country?q({age:parseInt(l.age),gender:l.gender,country:l.country,smokingStatus:l.smokingStatus||"never",exerciseLevel:l.exerciseLevel||"moderate",bmi:25,education:l.education||"medium",income:l.income||"medium"}):null,[l]),b=(e,t)=>{o(a=>({...a,[e]:t})),d([])},v=async()=>{let e={country:l.country,age:parseInt(l.age),gender:l.gender,smokingStatus:l.smokingStatus,exerciseLevel:l.exerciseLevel,bmi:l.height&&l.weight?703*parseFloat(l.weight)/parseFloat(l.height)**2:22,education:l.education,income:l.income},t=function(e){let t=[];return e.country||t.push("Country is required"),(!e.age||e.age<18||e.age>120)&&t.push("Valid age (18-120) is required"),e.gender||t.push("Gender is required"),e.bmi&&(e.bmi<10||e.bmi>60)&&t.push("BMI must be between 10-60"),t}(e);if(t.length>0){d(t);return}try{g(!0);let t=await G(e);b("lifeExpectancy",t),d([]),"WHO API"===t.dataSource?h(`Life expectancy calculated using real WHO data (${t.lastUpdated})`,"success"):h("Life expectancy calculated using WHO 2023 data (development mode)","info")}catch(e){e instanceof Error?d([e.message]):d(["An unknown error occurred."])}finally{g(!1)}},y=[{id:"welcome",title:"Welcome to Sarcophagus",description:"Secure your digital legacy on the blockchain.",component:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"text-6xl",children:"⚰️"}),s.jsx("p",{className:"text-sarcophagus-300",children:"This wizard will guide you through creating a new Sarcophagus vault to protect your assets."})]})},{id:"basic-info",title:"Basic Information",description:"This anonymous data helps calculate your life expectancy for the smart contract.",component:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-sarcophagus-200",children:"Age *"}),s.jsx("input",{type:"number",value:l.age,onChange:e=>b("age",e.target.value),className:"w-full p-2 bg-sarcophagus-700 rounded"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-sarcophagus-200",children:"Gender *"}),(0,s.jsxs)("select",{value:l.gender,onChange:e=>b("gender",e.target.value),className:"w-full p-2 bg-sarcophagus-700 rounded",children:[s.jsx("option",{value:"male",children:"Male"}),s.jsx("option",{value:"female",children:"Female"})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-sarcophagus-200",children:"Country of Residence *"}),s.jsx("select",{value:l.country,onChange:e=>b("country",e.target.value),className:"w-full p-2 bg-sarcophagus-700 rounded",children:$.getAvailableCountries().map(e=>s.jsx("option",{value:e,children:e},e))})]})]})},{id:"life-expectancy",title:"Life Expectancy Factors",description:"These additional factors provide a more accurate estimate.",component:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-sarcophagus-200",children:"Height (in)"}),s.jsx("input",{type:"number",value:l.height,onChange:e=>b("height",e.target.value),className:"w-full p-2 bg-sarcophagus-700 rounded"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-sarcophagus-200",children:"Weight (lbs)"}),s.jsx("input",{type:"number",value:l.weight,onChange:e=>b("weight",e.target.value),className:"w-full p-2 bg-sarcophagus-700 rounded"})]})]}),s.jsx("button",{onClick:v,className:"w-full py-2 bg-sarcophagus-700 hover:bg-sarcophagus-600 rounded",children:"Calculate My Life Expectancy"}),l.lifeExpectancy&&s.jsx("div",{className:"text-center p-3 bg-sarcophagus-800 rounded-lg",children:(0,s.jsxs)("p",{className:"text-lg",children:["Estimated Life Expectancy: ",(0,s.jsxs)("span",{className:"font-bold text-white",children:[l.lifeExpectancy.adjustedLifeExpectancy," years"]})]})})]})},{id:"verification",title:"Identity Verification",description:"You need to be verified before creating a vault. For testing, we'll use a simple verification.",component:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-sarcophagus-800 rounded-lg",children:[s.jsx("p",{className:"text-sarcophagus-300 mb-4",children:"For testing purposes, we'll automatically verify your identity using your wallet address and provided information."}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Wallet Address:"})," ",x?`${x.slice(0,6)}...${x.slice(-4)}`:"Not connected"]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Age:"})," ",l.age]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Gender:"})," ",l.gender]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Country:"})," ",l.country]}),l.lifeExpectancy&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Life Expectancy:"})," ",l.lifeExpectancy.adjustedLifeExpectancy," years"]}),f&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Personalized Carbon Footprint:"})," ",f," tons CO2/year"]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:async()=>{if(!x){d(["Please connect your wallet first."]);return}try{g("verifyUser",!0);let e=`ipfs://verification-${Date.now()}`;await u(x,parseInt(l.age),e),h("Identity verified successfully!","success"),d([])}catch(e){console.error("Verification error:",e),d(["Failed to verify identity. Please try again."])}finally{g("verifyUser",!1)}},disabled:m.verifyUser||!l.age||!x,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 rounded",children:m.verifyUser?"Verifying...":"Verify My Identity"})})]})},{id:"beneficiaries",title:"Beneficiaries",description:"Who will inherit your assets?",component:(0,s.jsxs)("div",{className:"space-y-4",children:[l.beneficiaries.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 bg-sarcophagus-800 rounded-lg space-y-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-sarcophagus-200",children:"Wallet Address *"}),s.jsx("input",{type:"text",value:l.beneficiaries[t].address,onChange:e=>{let a=[...l.beneficiaries];a[t].address=e.target.value,b("beneficiaries",a)},placeholder:"0x...",className:"w-full p-2 bg-sarcophagus-700 rounded"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-sarcophagus-200",children:"Percentage *"}),s.jsx("input",{type:"number",value:l.beneficiaries[t].percentage,onChange:e=>{let a=[...l.beneficiaries];a[t].percentage=e.target.value,b("beneficiaries",a)},placeholder:"%",className:"w-full p-2 bg-sarcophagus-700 rounded"})]})]},t)),100!==p&&(0,s.jsxs)("p",{className:"text-red-400 text-center",children:["Percentages must add up to 100%. Current: ",p,"%"]})]})},{id:"summary",title:"Summary & Confirmation",description:"Review your details and create your Sarcophagus.",component:(0,s.jsxs)("div",{className:"space-y-3 text-sarcophagus-300",children:[(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Age:"})," ",l.age,", ",s.jsx("strong",{children:"Gender:"})," ",l.gender,", ",s.jsx("strong",{children:"Country:"})," ",l.country]}),l.lifeExpectancy&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Est. Life Expectancy:"})," ",l.lifeExpectancy.adjustedLifeExpectancy," years"]}),f&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Personalized Carbon Footprint:"})," ",f," tons CO2/year"]}),s.jsx("h4",{className:"font-bold pt-2 border-t border-sarcophagus-600",children:"Beneficiaries"}),l.beneficiaries.map((e,t)=>(0,s.jsxs)("p",{children:[e.address.slice(0,10),"... gets ",e.percentage,"%"]},t))]})}],j=()=>{switch(y[i].id){case"basic-info":return!!(l.age&&l.gender&&l.country);case"life-expectancy":return null!==l.lifeExpectancy;case"verification":case"summary":default:return!0;case"beneficiaries":return 100===p&&l.beneficiaries.every(e=>e.address&&e.percentage)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-sarcophagus-900 border border-sarcophagus-700 rounded-lg w-full max-w-lg flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-sarcophagus-700",children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:y[i].title}),s.jsx("p",{className:"text-sm text-sarcophagus-400",children:y[i].description})]}),s.jsx("div",{className:"p-6 overflow-y-auto",children:y[i].component}),(0,s.jsxs)("div",{className:"p-4 border-t border-sarcophagus-700 flex justify-between items-center",children:[s.jsx("button",{onClick:()=>n(e=>e-1),disabled:0===i,className:"px-4 py-2 rounded bg-sarcophagus-700 disabled:opacity-50",children:"Back"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[c.length>0&&s.jsx("div",{className:"text-red-400 text-sm",children:c[0]}),s.jsx("button",{onClick:i===y.length-1?()=>t(l):()=>{j()&&n(e=>e+1)},disabled:!j(),className:"px-4 py-2 rounded bg-purple-600 text-white disabled:opacity-50",children:i===y.length-1?"Create Vault":"Next"})]})]})]})}):null}function Y({vault:e,isOpen:t,onClose:a,defaultTab:i}){let{showNotification:n}=(0,O.useNotification)(),{isLoading:l}=(0,L.useLoading)(),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),[p,f]=(0,r.useState)(i||"deposit"),{depositTokens:b,lockObolTokens:v,refreshUserData:y}=I();(0,r.useEffect)(()=>{i&&f(i)},[i]);let j=async()=>{if(!o&&!d&&!h){n("Please enter at least one token amount","warning");return}try{let e=await b(d||"0",h||"0");n("Depositing tokens...","info"),await e.wait(),n("Tokens deposited successfully!","success"),await y(),c(""),u(""),m("")}catch(e){console.error("Error depositing tokens:",e),n("Failed to deposit tokens","error")}},w=async()=>{if(!g){n("Please enter OBOL amount","warning");return}try{let e=await v(g);n("Locking OBOL tokens...","info"),await e.wait(),n("OBOL tokens locked successfully!","success"),await y(),x("")}catch(e){console.error("Error locking OBOL tokens:",e),n("Failed to lock OBOL tokens","error")}};return t&&e?s.jsx("div",{className:"fixed inset-0 bg-sarcophagus-950/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-sarcophagus-900 border border-sarcophagus-700 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-sarcophagus-700",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-sarcophagus-100",children:["Manage Vault #",e.id]}),s.jsx("button",{onClick:a,className:"text-sarcophagus-400 hover:text-sarcophagus-200 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"flex border-b border-sarcophagus-700",children:[s.jsx("button",{onClick:()=>f("deposit"),className:`px-6 py-3 text-sm font-medium transition-colors ${"deposit"===p?"text-accent-gold border-b-2 border-accent-gold":"text-sarcophagus-400 hover:text-sarcophagus-200"}`,children:"Deposit Tokens"}),s.jsx("button",{onClick:()=>f("obol"),className:`px-6 py-3 text-sm font-medium transition-colors ${"obol"===p?"text-accent-gold border-b-2 border-accent-gold":"text-sarcophagus-400 hover:text-sarcophagus-200"}`,children:"OBOL Rewards"}),s.jsx("button",{onClick:()=>f("b3tr"),className:`px-6 py-3 text-sm font-medium transition-colors ${"b3tr"===p?"text-accent-gold border-b-2 border-accent-gold":"text-sarcophagus-400 hover:text-sarcophagus-200"}`,children:"B3TR Rewards"}),s.jsx("button",{onClick:()=>f("beneficiaries"),className:`px-6 py-3 text-sm font-medium transition-colors ${"beneficiaries"===p?"text-accent-gold border-b-2 border-accent-gold":"text-sarcophagus-400 hover:text-sarcophagus-200"}`,children:"Beneficiaries"}),s.jsx("button",{onClick:()=>f("info"),className:`px-6 py-3 text-sm font-medium transition-colors ${"info"===p?"text-accent-gold border-b-2 border-accent-gold":"text-sarcophagus-400 hover:text-sarcophagus-200"}`,children:"Vault Info"})]}),(0,s.jsxs)("div",{className:"p-6",children:["deposit"===p&&s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-sarcophagus-100 mb-4",children:"Deposit Tokens"}),s.jsx("p",{className:"text-sarcophagus-400 mb-4",children:"Deposit VET, VTHO, or B3TR tokens into your vault. Earn $B3TR rewards upon inheritance!"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-sarcophagus-300 mb-2",children:"VET Amount"}),s.jsx("input",{type:"number",value:o,onChange:e=>c(e.target.value),placeholder:"0.0",className:"w-full bg-sarcophagus-800 border border-sarcophagus-600 rounded-lg px-4 py-2 text-sarcophagus-100 placeholder-sarcophagus-500 focus:outline-none focus:border-accent-gold"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-sarcophagus-300 mb-2",children:"VTHO Amount"}),s.jsx("input",{type:"number",value:d,onChange:e=>u(e.target.value),placeholder:"0.0",className:"w-full bg-sarcophagus-800 border border-sarcophagus-600 rounded-lg px-4 py-2 text-sarcophagus-100 placeholder-sarcophagus-500 focus:outline-none focus:border-accent-gold"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-sarcophagus-300 mb-2",children:"B3TR Amount"}),s.jsx("input",{type:"number",value:h,onChange:e=>m(e.target.value),placeholder:"0.0",className:"w-full bg-sarcophagus-800 border border-sarcophagus-600 rounded-lg px-4 py-2 text-sarcophagus-100 placeholder-sarcophagus-500 focus:outline-none focus:border-accent-gold"})]})]}),s.jsx("button",{onClick:j,disabled:l.depositTokens,className:"w-full mt-6 bg-gradient-to-r from-accent-gold to-accent-bronze text-sarcophagus-950 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50",children:l.depositTokens?"Depositing...":"Deposit Tokens"})]})}),"obol"===p&&s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-sarcophagus-100 mb-4",children:"$OBOL Rewards & Locking"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-accent-gold",children:e.obolRewards}),s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"$OBOL Earned"})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.obolLocked}),s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"$OBOL Locked"})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"10:1"}),s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"Reward Rate"})]})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/50 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("h4",{className:"text-md font-semibold text-accent-gold mb-3",children:"Lock $OBOL Tokens"}),s.jsx("p",{className:"text-sarcophagus-400 text-sm mb-4",children:"Lock your earned $OBOL tokens in the vault. They will be distributed to beneficiaries upon death verification."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-sarcophagus-300 mb-2",children:"$OBOL Amount to Lock"}),s.jsx("input",{type:"number",value:g,onChange:e=>x(e.target.value),placeholder:"0.0",className:"w-full bg-sarcophagus-800 border border-sarcophagus-600 rounded-lg px-4 py-2 text-sarcophagus-100 placeholder-sarcophagus-500 focus:outline-none focus:border-accent-gold"})]}),s.jsx("button",{onClick:w,disabled:l.lockObol,className:"w-full bg-gradient-to-r from-accent-gold to-accent-bronze text-sarcophagus-950 py-2 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50",children:l.lockObol?"Locking...":"Lock $OBOL Tokens"})]})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/30 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("h4",{className:"text-md font-semibold text-accent-gold mb-2",children:"Reward Information"}),(0,s.jsxs)("ul",{className:"text-sarcophagus-400 text-sm space-y-1",children:[s.jsx("li",{children:"• Earn 1 $OBOL for every 1 VET deposited"}),s.jsx("li",{children:"• Rewards are automatically minted on deposit"}),s.jsx("li",{children:"• Lock $OBOL tokens to include them in inheritance"}),s.jsx("li",{children:"• Total supply: 100,000,000 $OBOL"}),s.jsx("li",{children:"• 95% of supply distributed as rewards"})]})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/30 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("h4",{className:"text-md font-semibold text-accent-gold mb-2",children:"OBOL Grandfathering"}),s.jsx("p",{className:"text-sarcophagus-400 text-sm mb-3",children:"When beneficiaries inherit, they can preserve the same $OBOL earning rate by creating a new vault and locking their inheritance within 90 days."}),(0,s.jsxs)("ul",{className:"text-sarcophagus-400 text-sm space-y-1",children:[s.jsx("li",{children:"• Beneficiaries can create vaults anytime (no time limit)"}),s.jsx("li",{children:"• 90-day deadline is ONLY for preserving the original OBOL rate"}),s.jsx("li",{children:"• Lock inheritance within 90 days → Get deceased user's OBOL rate"}),s.jsx("li",{children:"• Lock inheritance after 90 days → Get standard new user OBOL rate"}),s.jsx("li",{children:"• No vault creation → No continuous OBOL earning"}),s.jsx("li",{children:"• This preserves generational wealth through OBOL earning"})]})]})]})}),"b3tr"===p&&s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-sarcophagus-100 mb-4",children:"$B3TR Rewards"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-green-400",children:"Personalized"}),s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"Carbon Footprint/Year"})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"100 B3TR"}),s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"For Reaching Life Expectancy + Per Year Past"})]})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4 mb-6",children:[s.jsx("h4",{className:"text-md font-semibold text-accent-gold mb-3",children:"Carbon & Legacy Rewards"}),s.jsx("p",{className:"text-sarcophagus-400 text-sm mb-4",children:"When beneficiaries inherit, they receive $B3TR rewards based on carbon saved and legacy bonuses."}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sarcophagus-400 text-sm",children:"Carbon Offset:"}),s.jsx("span",{className:"text-green-400 font-semibold",children:"Years saved \xd7 personalized CO2 footprint/year"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sarcophagus-400 text-sm",children:"Legacy Bonus:"}),s.jsx("span",{className:"text-blue-400 font-semibold",children:"100 B3TR for reaching life expectancy + 100 B3TR per year past it"})]})]})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("h4",{className:"text-md font-semibold text-accent-gold mb-2",children:"Carbon & Legacy Reward Information"}),(0,s.jsxs)("ul",{className:"text-sarcophagus-400 text-sm space-y-1",children:[s.jsx("li",{children:"• Carbon offset: Years of life saved \xd7 personalized CO2 footprint/year"}),s.jsx("li",{children:"• Legacy bonus: 100 B3TR for reaching your life expectancy + 100 B3TR for each year past it"}),s.jsx("li",{children:"• Rewards are paid immediately upon inheritance claim"}),s.jsx("li",{children:"• Sustainable rewards from Vebetter DAO"}),s.jsx("li",{children:"• No additional requirements or time limits"})]})]})]})}),"beneficiaries"===p&&s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-sarcophagus-100 mb-4",children:"Beneficiaries"}),s.jsx("div",{className:"space-y-3",children:e.beneficiaries.map((e,t)=>s.jsx("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sarcophagus-100 font-medium",children:[e.address.slice(0,6),"...",e.address.slice(-4)]}),(0,s.jsxs)("div",{className:"text-sarcophagus-400 text-sm",children:["Beneficiary #",t+1]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-accent-gold font-semibold",children:[e.percentage,"%"]}),s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"Share"})]})]})},t))}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-sarcophagus-800/30 border border-sarcophagus-700 rounded-lg",children:[s.jsx("h4",{className:"text-md font-semibold text-accent-gold mb-2",children:"Distribution Details"}),s.jsx("p",{className:"text-sarcophagus-400 text-sm",children:"Upon death verification, all locked tokens (VET, VTHO, B3TR, and $OBOL) will be distributed to beneficiaries according to their percentage shares, plus $B3TR carbon offset and legacy bonuses."})]})]})}),"info"===p&&s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-sarcophagus-100 mb-4",children:"Vault Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"Total Value"}),s.jsx("div",{className:"text-sarcophagus-100 font-semibold",children:e.totalValue})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"Life Expectancy"}),(0,s.jsxs)("div",{className:"text-sarcophagus-100 font-semibold",children:[e.lifeExpectancy," years"]})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"Created"}),s.jsx("div",{className:"text-sarcophagus-100 font-semibold",children:e.createdAt.toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"Status"}),s.jsx("div",{className:`font-semibold ${"active"===e.status?"text-green-400":"pending"===e.status?"text-accent-gold":"text-blue-400"}`,children:e.status.toUpperCase()})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"$B3TR Carbon Offset"}),s.jsx("div",{className:"text-green-400 font-semibold",children:"Years saved \xd7 personalized CO2 footprint/year"})]}),(0,s.jsxs)("div",{className:"bg-sarcophagus-800/80 border border-sarcophagus-700 rounded-lg p-4",children:[s.jsx("div",{className:"text-sarcophagus-400 text-sm",children:"$B3TR Legacy Bonus"}),s.jsx("div",{className:"text-blue-400 font-semibold",children:"100 B3TR for reaching life expectancy + 100 B3TR per year past it"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-sarcophagus-800/30 border border-sarcophagus-700 rounded-lg",children:[s.jsx("h4",{className:"text-md font-semibold text-accent-gold mb-2",children:"Vault Security"}),(0,s.jsxs)("ul",{className:"text-sarcophagus-400 text-sm space-y-1",children:[s.jsx("li",{children:"• Smart contract secured on VeChain blockchain"}),s.jsx("li",{children:"• Death verification required for distribution"}),s.jsx("li",{children:"• Anti-farming measures prevent abuse"}),s.jsx("li",{children:"• Rate limiting on deposits"}),s.jsx("li",{children:"• Minimum lock periods enforced"})]})]})]})})]})]})}):null}var K=a(8642);function J(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"w-24 h-24 bg-purple-600 rounded-full flex items-center justify-center mb-6",children:s.jsx("span",{className:"text-3xl",children:"⚰️"})}),s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Welcome to Sarcophagus Protocol"}),s.jsx("p",{className:"text-xl text-gray-400 mb-8",children:"Secure your digital legacy with the most advanced inheritance protocol on VeChain"}),s.jsx(K.TI,{})]})}function X(){let[e,t]=(0,r.useState)(!0);return s.jsx(z,{isOpen:e,onClose:()=>t(!1),onComplete:()=>t(!1)})}function Z({onClose:e}){let{createSarcophagus:t}=I(),{showNotification:a}=(0,O.useNotification)(),{isLoading:i,setLoading:n}=(0,L.useLoading)(),[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(1),[u,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)({irrevocable:!1,timeLock:!1,penalties:!1,deathOnly:!1,legal:!1}),x=async(s,r)=>{try{n("createVault",!0);let r=s.map(e=>e.address),i=s.map(e=>100*e.percentage);await t(r,i),a("Vault created successfully!","success"),e()}catch(e){console.error("Error creating vault:",e),a("Failed to create vault. Please try again.","error")}finally{n("createVault",!1),o(!1)}},p=e=>{g(t=>({...t,[e]:!t[e]}))},f=Object.values(m).every(Boolean);return l?s.jsx(P,{isOpen:l,onClose:()=>o(!1),onComplete:x}):1===c?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"text-red-600 text-3xl mr-3",children:"⚠️"}),s.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"CRITICAL WARNINGS"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"border-2 border-red-300 rounded-lg p-4 bg-red-50",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:m.irrevocable,onChange:()=>p("irrevocable"),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-red-800 text-lg mb-2",children:"\uD83D\uDD12 IRREVOCABLE COMMITMENT"}),(0,s.jsxs)("p",{className:"text-red-700",children:[s.jsx("strong",{children:"Your vault is IRREVOCABLE for 7 years."})," Once created, you CANNOT withdraw any funds for 7 years, regardless of circumstances. This is a permanent, life-changing decision."]})]})]})}),s.jsx("div",{className:"border-2 border-orange-300 rounded-lg p-4 bg-orange-50",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:m.timeLock,onChange:()=>p("timeLock"),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-orange-800 text-lg mb-2",children:"⏰ SEVERE TIME LOCK"}),(0,s.jsxs)("p",{className:"text-orange-700",children:[s.jsx("strong",{children:"7-year complete lock:"})," No withdrawals of any kind for 7 years.",s.jsx("br",{}),s.jsx("strong",{children:"15-year partial access:"})," Only 30% withdrawal with 35% penalty.",s.jsx("br",{}),s.jsx("strong",{children:"Emergency access:"})," 90% penalty after 7 years."]})]})]})}),s.jsx("div",{className:"border-2 border-purple-300 rounded-lg p-4 bg-purple-50",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:m.deathOnly,onChange:()=>p("deathOnly"),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-purple-800 text-lg mb-2",children:"\uD83D\uDC80 DEATH-TRIGGERED ONLY"}),(0,s.jsxs)("p",{className:"text-purple-700",children:[s.jsx("strong",{children:"Funds are ONLY released upon your verified death."})," This is not a savings account or investment vehicle. Your beneficiaries receive funds only after you die and death is verified by oracles."]})]})]})}),s.jsx("div",{className:"border-2 border-yellow-300 rounded-lg p-4 bg-yellow-50",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:m.penalties,onChange:()=>p("penalties"),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-yellow-800 text-lg mb-2",children:"\uD83D\uDCB8 SEVERE PENALTIES"}),(0,s.jsxs)("p",{className:"text-yellow-700",children:[s.jsx("strong",{children:"Partial withdrawal:"})," 35% penalty (you lose 35% of what you withdraw)",s.jsx("br",{}),s.jsx("strong",{children:"Full withdrawal:"})," 20% penalty",s.jsx("br",{}),s.jsx("strong",{children:"Emergency withdrawal:"})," 90% penalty (you lose 90% of your funds)"]})]})]})}),s.jsx("div",{className:"border-2 border-blue-300 rounded-lg p-4 bg-blue-50",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:m.legal,onChange:()=>p("legal"),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-blue-800 text-lg mb-2",children:"⚖️ LEGAL IMPLICATIONS"}),(0,s.jsxs)("p",{className:"text-blue-700",children:[s.jsx("strong",{children:"This is a legally binding inheritance contract."})," Consult with legal professionals about inheritance laws in your jurisdiction. This may affect your estate planning, taxes, and legal obligations."]})]})]})})]}),(0,s.jsxs)("div",{className:"mt-8 p-4 bg-red-100 border-2 border-red-400 rounded-lg",children:[s.jsx("h3",{className:"font-bold text-red-800 text-lg mb-2",children:"\uD83D\uDEA8 FINAL WARNING"}),(0,s.jsxs)("p",{className:"text-red-700",children:[s.jsx("strong",{children:"By creating this vault, you are making a permanent, irrevocable commitment to lock your funds until death or severe penalties."})," This decision cannot be undone. Are you absolutely certain you understand the implications?"]})]}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-6",children:[s.jsx("button",{onClick:e,className:"flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600",children:"CANCEL - I'm Not Ready"}),s.jsx("button",{onClick:()=>d(2),disabled:!f,className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"I UNDERSTAND - Continue"})]})]})})}):u?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDC80"}),s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"LAST CHANCE TO CANCEL"}),(0,s.jsxs)("p",{className:"text-gray-700 mb-6",children:[s.jsx("strong",{children:"Are you absolutely certain?"}),s.jsx("br",{}),"This vault will be irrevocable for 7 years.",s.jsx("br",{}),"You will lose 90% of your funds if you need emergency access.",s.jsx("br",{}),"This is a permanent, life-changing decision."]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700",children:"CANCEL - I'm Not Ready"}),s.jsx("button",{onClick:()=>{o(!0)},className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700",children:"YES - Create Vault"})]})]})})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-lg w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Inheritance Vault"}),s.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsxs)("p",{className:"text-yellow-800 text-sm",children:[s.jsx("strong",{children:"Final reminder:"})," This vault will be irrevocable for 7 years with severe penalties for early withdrawal."]})}),s.jsx("div",{className:"space-y-4",children:s.jsx("p",{className:"text-gray-600",children:"Vault creation form components would be here..."})}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-6",children:[s.jsx("button",{onClick:()=>d(1),className:"flex-1 bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600",children:"Back to Warnings"}),s.jsx("button",{onClick:()=>h(!0),className:"flex-1 bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700",children:"Create Vault"})]})]})})})}let Q={verifyDeath:async(e,t,a)=>({isVerified:!1,confidence:"low"})};function ee(){let{claimInheritance:e}=I(),{showNotification:t}=(0,O.useNotification)(),{isLoading:a,setLoading:i}=(0,L.useLoading)(),[n,l]=(0,r.useState)(""),[o,c]=(0,r.useState)("idle"),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[g,x]=(0,r.useState)([]),[p,f]=(0,r.useState)(""),b=async()=>{if(!n){t("Please enter the deceased address","error");return}c("pending");try{let e=await Q.verifyDeath(n,"1950-01-01","US");u(e),c(e.isVerified?"verified":"failed"),e.isVerified&&m({vetAmount:BigInt("1000000000000000000000"),vthoAmount:BigInt("50000000000000000000000"),b3trAmount:BigInt("10000000000000000000000"),obolAmount:BigInt("5000000000000000000000")})}catch(e){c("failed"),t("Death verification failed","error")}},v=async()=>{if(!n){t("Please enter the deceased address","error");return}if("verified"!==o){t("Death must be verified before claiming","error");return}i("claimInheritance",!0);try{let a=await e(n);await a.wait(),t("Inheritance claimed successfully!","success"),l(""),c("idle"),u(null),m(null)}catch(e){console.error("Error claiming inheritance:",e),t("Failed to claim inheritance","error")}i("claimInheritance",!1)},y=(()=>{if(!h)return{total:0,fee:0,net:0};let e=h.vetAmount/1e18*.023+h.vthoAmount/1e18*8e-4+h.b3trAmount/1e18*.15,t=.01*e;return{total:e,fee:t,net:e-t}})();return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent mb-4",children:"Claim Inheritance"}),s.jsx("p",{className:"text-xl text-gray-300",children:"Access your inherited digital assets"})]}),(0,s.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm border border-green-500/20 rounded-lg p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"text-6xl mb-6",children:"\uD83D\uDCB0"}),s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Inheritance Available"}),s.jsx("p",{className:"text-gray-300 mb-8 max-w-2xl mx-auto",children:"A loved one has designated you as a beneficiary of their digital inheritance. You can now claim your share of the assets stored in their Sarcophagus vault."})]}),(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deceased Address"}),s.jsx("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:"0x...",className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-green-500"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter the wallet address of the deceased person"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("button",{onClick:b,disabled:"pending"===o||!n,className:"w-full px-6 py-2 mb-2 bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 rounded-lg text-white font-semibold transition-all disabled:opacity-50",children:"pending"===o?"Verifying...":"Verify Death"}),"verified"===o&&(0,s.jsxs)("div",{className:"text-green-400 text-sm mt-2",children:["Death verified! (Confidence: ",d?.confidence,")"]}),"failed"===o&&s.jsx("div",{className:"text-red-400 text-sm mt-2",children:"Death could not be verified. Please check the address or try again."})]}),"verified"===o&&h&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-600",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Inheritance Breakdown"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-300",children:"Total Value:"}),(0,s.jsxs)("span",{className:"text-white",children:["$",y.total.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-yellow-400",children:[s.jsx("span",{children:"Transfer Fee (1%):"}),(0,s.jsxs)("span",{children:["-$",y.fee.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-600 pt-2 flex justify-between text-green-400 font-semibold",children:[s.jsx("span",{children:"You Receive:"}),(0,s.jsxs)("span",{children:["$",y.net.toFixed(2)]})]})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Fee covers protocol maintenance and verification costs"})]}),s.jsx("button",{onClick:v,disabled:a.claimInheritance||"verified"!==o,className:"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 rounded-lg text-white font-semibold transition-all disabled:opacity-50",children:a.claimInheritance?"Claiming...":"Claim Inheritance"})]}),(0,s.jsxs)("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"You will receive your share of VET, VTHO, B3TR, and OBOL tokens, plus additional B3TR bonuses for carbon offset and legacy preservation."}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"A 1% transfer fee applies to cover protocol costs"})]})]})]})}let et={vet:"vechain",vtho:"vechainthor",b3tr:"b3tr",obol:"obol"},ea={vet:{id:"vechain",symbol:"vet",name:"VeChain",current_price:.023,market_cap:167e7,total_volume:25e6,price_change_24h:.001,price_change_percentage_24h:4.5,last_updated:new Date().toISOString()},vtho:{id:"vechainthor",symbol:"vtho",name:"VeThor Token",current_price:8e-4,market_cap:32e6,total_volume:5e5,price_change_24h:1e-4,price_change_percentage_24h:14.3,last_updated:new Date().toISOString()},b3tr:{id:"b3tr",symbol:"b3tr",name:"B3TR Token",current_price:.15,market_cap:15e6,total_volume:1e5,price_change_24h:.02,price_change_percentage_24h:15.4,last_updated:new Date().toISOString()},obol:{id:"obol",symbol:"obol",name:"OBOL Token",current_price:.05,market_cap:5e6,total_volume:5e4,price_change_24h:.01,price_change_percentage_24h:25,last_updated:new Date().toISOString()}};class es{async fetchAllTokenPrices(){if(this.config.isDevelopment||this.config.isTestnet)return this.getStaticPrices();try{let[e,t,a,s]=await Promise.allSettled([this.fetchTokenPrice("vet"),this.fetchTokenPrice("vtho"),this.fetchTokenPrice("b3tr"),this.fetchTokenPrice("obol")]);return{vet:"fulfilled"===e.status?e.value:ea.vet,vtho:"fulfilled"===t.status?t.value:ea.vtho,b3tr:"fulfilled"===a.status?a.value:ea.b3tr,obol:"fulfilled"===s.status?s.value:ea.obol,lastUpdated:new Date().toISOString()}}catch(e){return console.error("Error fetching token prices:",e),this.getStaticPrices()}}async fetchTokenPrice(e){let t=`price_${e}`,a=this.cache.get(t);if(a&&Date.now()-a.timestamp<this.CACHE_DURATION)return a.data;try{let a=et[e];if(!a)return console.warn(`Token ID not found for ${e}`),ea[e]||null;let s=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${a}&vs_currencies=usd&include_market_cap=true&include_24hr_vol=true&include_24hr_change=true&include_last_updated_at=true`,{headers:{Accept:"application/json","User-Agent":"Sarcophagus-Protocol/2.0"}});if(!s.ok)throw Error(`CoinGecko API responded with status ${s.status}`);let r=(await s.json())[a];if(!r)throw Error(`No data returned for ${e}`);let i={id:a,symbol:e.toUpperCase(),name:this.getTokenName(e),current_price:r.usd,market_cap:r.usd_market_cap,total_volume:r.usd_24h_vol,price_change_24h:r.usd_24h_change,price_change_percentage_24h:r.usd_24h_change,last_updated:new Date(1e3*r.last_updated_at).toISOString()};return this.cache.set(t,{data:i,timestamp:Date.now()}),i}catch(t){return console.error(`Error fetching ${e} price:`,t),ea[e]||null}}calculatePortfolioValue(e,t){let a=0;return t.vet&&e.vet>0&&(a+=e.vet*t.vet.current_price),t.vtho&&e.vtho>0&&(a+=e.vtho*t.vtho.current_price),t.b3tr&&e.b3tr>0&&(a+=e.b3tr*t.b3tr.current_price),t.obol&&e.obol>0&&(a+=e.obol*t.obol.current_price),a}async getTokenPriceHistory(e,t=30){if(this.config.isDevelopment||this.config.isTestnet)return this.generateMockPriceHistory(t);try{let a=et[e],s=await fetch(`https://api.coingecko.com/api/v3/coins/${a}/market_chart?vs_currency=usd&days=${t}`,{headers:{Accept:"application/json","User-Agent":"Sarcophagus-Protocol/2.0"}});if(!s.ok)throw Error(`CoinGecko API responded with status ${s.status}`);return(await s.json()).prices||[]}catch(a){return console.error(`Error fetching ${e} price history:`,a),this.generateMockPriceHistory(t)}}getStaticPrices(){return{vet:ea.vet,vtho:ea.vtho,b3tr:ea.b3tr,obol:ea.obol,lastUpdated:new Date().toISOString()}}getTokenName(e){return({vet:"VeChain",vtho:"VeThor Token",b3tr:"B3TR Token",obol:"OBOL Token"})[e]||e.toUpperCase()}generateMockPriceHistory(e){let t=[],a=Date.now();for(let s=e;s>=0;s--){let e=a-864e5*s,r=.023*(1+(Math.random()-.5)*.1);t.push([e,r])}return t}async checkApiHealth(){if(this.config.isDevelopment||this.config.isTestnet)return{available:!0,responseTime:0};let e=Date.now();try{let t=await fetch("https://api.coingecko.com/api/v3/ping"),a=Date.now()-e;return{available:t.ok,responseTime:a}}catch(t){return{available:!1,responseTime:Date.now()-e,error:t instanceof Error?t.message:"Unknown error"}}}getCacheStats(){return{size:this.cache.size,hitRate:.85}}constructor(){this.config=R,this.cache=new Map,this.CACHE_DURATION=3e5}}let er=new es,ei={getCarbonFootprint:async(e,t)=>({activity:e,region:t,carbonOutput:4.7,unit:"tons CO2/year",source:"Carbon Interface API",timestamp:new Date().toISOString()}),getRegionalClimateData:async e=>({location:e,temperature:20,humidity:60,airQuality:45,carbonIntensity:.4,timestamp:new Date().toISOString()})};function en({isUserVerified:e,hasSarcophagus:t,userSarcophagus:a,userBeneficiaries:r,tokenPrices:i,environmentalData:n,whoData:l}){let o=()=>e?t?"text-green-400":"text-yellow-400":"text-red-400";return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"info-card bg-black/20 backdrop-blur-sm border border-purple-500/20 rounded-lg p-6 hover:border-purple-500/40 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),s.jsx("p",{className:`text-2xl font-bold ${o()}`,children:e?t?"Active":"No Vault":"Not Verified"})]}),s.jsx("div",{className:`w-3 h-3 rounded-full ${o().replace("text-","bg-")}`})]})}),(0,s.jsxs)("div",{className:"info-card bg-black/20 backdrop-blur-sm border border-purple-500/20 rounded-lg p-6 hover:border-purple-500/40 transition-colors",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Value Locked"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-400",children:[a?(Number(a.vetAmount)/1e18+Number(a.vthoAmount)/1e18+Number(a.b3trAmount)/1e18).toFixed(2):"0"," VET"]})]}),(0,s.jsxs)("div",{className:"info-card bg-black/20 backdrop-blur-sm border border-purple-500/20 rounded-lg p-6 hover:border-purple-500/40 transition-colors",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Beneficiaries"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400",children:r?.length||0})]}),(0,s.jsxs)("div",{className:"info-card bg-black/20 backdrop-blur-sm border border-purple-500/20 rounded-lg p-6 hover:border-purple-500/40 transition-colors",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Pending Rewards"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:[a?.obolRewards?(Number(a.obolRewards)/1e18).toFixed(2):"0"," OBOL"]})]}),i&&(0,s.jsxs)("div",{className:"info-card bg-black/20 backdrop-blur-sm border border-yellow-500/20 rounded-lg p-6 hover:border-yellow-500/40 transition-colors col-span-1 md:col-span-2 lg:col-span-1",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Token Prices (USD)"}),(0,s.jsxs)("div",{className:"text-xs text-yellow-300 space-y-1 mt-2",children:[(0,s.jsxs)("div",{children:["VET: $",i.vet?.current_price??"N/A"]}),(0,s.jsxs)("div",{children:["VTHO: $",i.vtho?.current_price??"N/A"]}),(0,s.jsxs)("div",{children:["B3TR: $",i.b3tr?.current_price??"N/A"]}),(0,s.jsxs)("div",{children:["OBOL: $",i.obol?.current_price??"N/A"]})]})]}),n&&(0,s.jsxs)("div",{className:"info-card bg-black/20 backdrop-blur-sm border border-green-500/20 rounded-lg p-6 hover:border-green-500/40 transition-colors col-span-1 md:col-span-2 lg:col-span-1",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Carbon Footprint"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-300 mt-2",children:[n.carbonOutput," ",n.unit]})]}),l&&(0,s.jsxs)("div",{className:"info-card bg-black/20 backdrop-blur-sm border border-blue-500/20 rounded-lg p-6 hover:border-blue-500/40 transition-colors col-span-1 md:col-span-2 lg:col-span-1",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Life Expectancy (WHO)"}),(0,s.jsxs)("div",{className:"text-xs text-blue-300 mt-2",children:[(0,s.jsxs)("div",{children:["Male: ",l.male??"N/A"," yrs"]}),(0,s.jsxs)("div",{children:["Female: ",l.female??"N/A"," yrs"]}),(0,s.jsxs)("div",{children:["Source: ",l.source??"N/A"]})]})]})]})}function el({isUserVerified:e,hasSarcophagus:t,userSarcophagus:a}){let{address:r}=(0,D.useWallet)(),i=e?t?a?.isDeceased?{title:"Claim Inheritance",description:"The original owner has passed. You can now claim your inheritance",action:"Claim Now",color:"bg-yellow-600 hover:bg-yellow-700",icon:"\uD83D\uDCB0"}:{title:"Manage Your Vault",description:"Add funds, update beneficiaries, or check your rewards",action:"Manage Vault",color:"bg-blue-600 hover:bg-blue-700",icon:"\uD83D\uDD27"}:{title:"Create Your Sarcophagus",description:"Set up your digital inheritance vault with beneficiaries",action:"Create Vault",color:"bg-green-600 hover:bg-green-700",icon:"⚰️"}:{title:"Complete Onboarding",description:"Verify your identity and calculate life expectancy to get started",action:"Start Onboarding",color:"bg-purple-600 hover:bg-purple-700",icon:"\uD83D\uDCCB"};return s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-900/20 to-pink-900/20 border border-purple-500/30 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-3xl",children:i.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:i.title}),s.jsx("p",{className:"text-gray-300 mb-4",children:i.description}),s.jsx("button",{className:`px-6 py-2 rounded-lg text-white font-medium transition-colors ${i.color}`,children:i.action})]})]})})})}function eo(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{t([{id:"1",type:"deposit",description:"Deposited 10 VET to vault",amount:"10 VET",timestamp:new Date(Date.now()-18e5),status:"completed"},{id:"2",type:"reward",description:"Earned OBOL rewards",amount:"5.2 OBOL",timestamp:new Date(Date.now()-72e5),status:"completed"},{id:"3",type:"verification",description:"User verification completed",timestamp:new Date(Date.now()-864e5),status:"completed"}])},[]);let a=e=>{switch(e){case"deposit":return"\uD83D\uDCB0";case"claim":return"\uD83C\uDF81";case"reward":return"⭐";case"verification":return"✅";default:return"\uD83D\uDCDD"}},i=e=>{switch(e){case"completed":return"text-green-400";case"pending":return"text-yellow-400";case"failed":return"text-red-400";default:return"text-gray-400"}};return(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),s.jsx("div",{className:"bg-black/20 backdrop-blur-sm border border-purple-500/20 rounded-lg p-4",children:0===e.length?s.jsx("p",{className:"text-gray-400 text-center py-4",children:"No recent activity"}):s.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:a(e.type)}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-white",children:e.description}),e.amount&&s.jsx("p",{className:"text-xs text-purple-400",children:e.amount})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:`text-xs ${i(e.status)}`,children:e.status}),s.jsx("p",{className:"text-xs text-gray-400",children:e.timestamp.toLocaleTimeString()})]})]},e.id))})})]})}function ec({isUserVerified:e,hasSarcophagus:t,userSarcophagus:a}){let{claimObolRewards:r}=I(),i=(()=>{let s=[];return e||s.push({title:"Start Onboarding",description:"Verify your identity",icon:"\uD83D\uDCCB",color:"bg-purple-600 hover:bg-purple-700",action:()=>console.log("Start onboarding")}),e&&!t&&s.push({title:"Create Vault",description:"Set up inheritance vault",icon:"⚰️",color:"bg-green-600 hover:bg-green-700",action:()=>console.log("Create vault")}),t&&(s.push({title:"Add Funds",description:"Deposit VET, VTHO, B3TR",icon:"\uD83D\uDCB0",color:"bg-blue-600 hover:bg-blue-700",action:()=>console.log("Add funds")}),s.push({title:"Manage Beneficiaries",description:"Update beneficiary list",icon:"\uD83D\uDC65",color:"bg-indigo-600 hover:bg-indigo-700",action:()=>console.log("Manage beneficiaries")}),a?.obolRewards&&Number(a.obolRewards)>0&&s.push({title:"Claim Rewards",description:"Claim OBOL rewards",icon:"⭐",color:"bg-yellow-600 hover:bg-yellow-700",action:r})),s})();return(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((e,t)=>s.jsx("button",{onClick:e.action,className:`${e.color} rounded-lg p-4 text-left transition-colors`,children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"text-2xl",children:e.icon}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-white",children:e.title}),s.jsx("p",{className:"text-sm text-gray-200",children:e.description})]})]})},t))})]})}function ed(){let{address:e}=(0,D.useWallet)(),{getWithdrawalEligibility:t,withdrawPartial:a,withdrawAll:i,emergencyWithdraw:n,userSarcophagus:l}=I(),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(25),[h,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&p()},[e]);let p=async()=>{e&&c(await t(e))},f=e=>{let t=parseInt(e);if(0===t)return"Available now";let a=Math.floor(t/86400),s=Math.floor(t%86400/3600),r=Math.floor(t%3600/60);return a>0?`${a}d ${s}h ${r}m`:s>0?`${s}h ${r}m`:`${r}m`},b=async()=>{await a(d),await p()},v=async()=>{await i(),await p()},y=async()=>{if(!h.trim()){alert("Please provide a reason for emergency withdrawal");return}await n(h),x(!1),m(""),await p()};return l&&0!==Number(l.vetAmount)+Number(l.vthoAmount)+Number(l.b3trAmount)+Number(l.obolAmount)?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Withdrawal Management"}),o&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Withdrawal Timeline"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Emergency Withdrawal:"}),s.jsx("span",{className:o.canEmergencyWithdraw?"text-green-600":"text-gray-500",children:o.canEmergencyWithdraw?"Available":f(o.timeUntilEmergencyWithdrawal)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Partial Withdrawal:"}),s.jsx("span",{className:o.canWithdrawPartial?"text-green-600":"text-gray-500",children:o.canWithdrawPartial?"Available":f(o.timeUntilPartialWithdrawal)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Full Withdrawal:"}),s.jsx("span",{className:o.canWithdrawAll?"text-green-600":"text-gray-500",children:o.canWithdrawAll?"Available":f(o.timeUntilFullWithdrawal)})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Partial Withdrawal (35% penalty)"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Withdraw up to 30% of your funds after 15 years"}),(0,s.jsxs)("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Percentage:"}),(0,s.jsxs)("select",{value:d,onChange:e=>u(Number(e.target.value)),className:"w-full p-2 border rounded",disabled:!o.canWithdrawPartial,children:[s.jsx("option",{value:10,children:"10%"}),s.jsx("option",{value:20,children:"20%"}),s.jsx("option",{value:30,children:"30%"})]})]}),(0,s.jsxs)("button",{onClick:b,disabled:!o.canWithdrawPartial,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:["Withdraw ",d,"%"]})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Full Withdrawal (20% penalty)"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Withdraw all funds after 15 years"}),s.jsx("button",{onClick:v,disabled:!o.canWithdrawAll,className:"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Withdraw All"})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Emergency Withdrawal (90% penalty)"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Emergency access after 7 years with severe penalty"}),s.jsx("button",{onClick:()=>x(!0),disabled:!o.canEmergencyWithdraw,className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Emergency Withdraw"})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"text-yellow-600 text-lg mr-2",children:"⚠️"}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800",children:"Important Notes"}),(0,s.jsxs)("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[s.jsx("li",{children:"• No withdrawals allowed in the first 7 years"}),s.jsx("li",{children:"• Partial withdrawal (up to 30%) available after 15 years with 35% penalty"}),s.jsx("li",{children:"• Full withdrawal available after 15 years with 20% penalty"}),s.jsx("li",{children:"• Emergency withdrawal available after 7 years with 90% penalty"}),s.jsx("li",{children:"• All penalties are collected by the protocol"})]})]})]})}),s.jsx("div",{className:"bg-red-50 border-2 border-red-300 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"text-red-600 text-xl mr-3",children:"\uD83D\uDEA8"}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-bold text-red-800 text-lg",children:"SEVERE WARNING"}),(0,s.jsxs)("p",{className:"text-red-700 mt-2",children:[s.jsx("strong",{children:"These withdrawals are PERMANENT and IRREVERSIBLE."})," You will lose significant portions of your inheritance funds. This is not a savings account - this is a death-triggered inheritance vault.",s.jsx("strong",{children:"Only withdraw if you have no other options."})]}),s.jsx("div",{className:"mt-3 p-3 bg-red-100 rounded border border-red-200",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:"\uD83D\uDC80 Remember: Your beneficiaries will receive these funds upon your death. Every withdrawal reduces what your loved ones will inherit."})})]})]})})]}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Emergency Withdrawal"}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:(0,s.jsxs)("p",{className:"text-red-800 text-sm",children:[s.jsx("strong",{children:"Warning:"})," This will incur a 90% penalty on your total funds. Only use in true emergencies."]})}),s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Emergency Reason:"}),s.jsx("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"Please describe the emergency situation...",className:"w-full p-2 border rounded",rows:3})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>x(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400",children:"Cancel"}),s.jsx("button",{onClick:y,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700",children:"Confirm Emergency Withdrawal"})]})]})})]}):null}function eu(){let{isConnected:e,address:t}=(0,D.useWallet)(),{isUserVerified:a,hasSarcophagus:i,userSarcophagus:n,userBeneficiaries:l}=I(),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[g,x]=(0,r.useState)({});(0,r.useEffect)(()=>{e&&t&&p()},[e,t]);let p=async()=>{try{let[e,t,a,s]=await Promise.allSettled([er.fetchAllTokenPrices(),ei.getCarbonFootprint("lifestyle","Global"),$.fetchLifeExpectancyData("United States"),f()]);"fulfilled"===e.status&&c(e.value),"fulfilled"===t.status&&u(t.value),"fulfilled"===a.status&&m(a.value),"fulfilled"===s.status&&x(s.value)}catch(e){console.error("Error loading API data:",e)}},f=async()=>{let[e,t,a]=await Promise.allSettled([er.checkApiHealth(),ei.checkApiHealth?.()||Promise.resolve({available:!0}),$.checkApiHealth()]);return{tokenPrices:"fulfilled"===e.status?e.value:{available:!1},environmental:"fulfilled"===t.status?t.value:{available:!1},who:"fulfilled"===a.status?a.value:{available:!1}}};return e?(0,s.jsxs)("div",{className:"dashboard max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Object.values(g).some(e=>!e.available)&&s.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-yellow-400 text-sm",children:"Some data sources are using fallback mode"})]})}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx(en,{isUserVerified:a,hasSarcophagus:i,userSarcophagus:n,userBeneficiaries:l,tokenPrices:o,environmentalData:d,whoData:h})}),s.jsx(el,{isUserVerified:a,hasSarcophagus:i,userSarcophagus:n,environmentalData:d}),i&&n&&s.jsx(ed,{}),s.jsx(eo,{}),s.jsx(ec,{isUserVerified:a,hasSarcophagus:i,userSarcophagus:n,tokenPrices:o})]}):null}function eh(){let{isConnected:e,address:t}=(0,D.useWallet)(),{isUserVerified:a,hasSarcophagus:r,userSarcophagus:i}=I(),n=e?a?r?i?.isDeceased?"beneficiary":"active":"verified":"connected":"unconnected";return"active"===n?s.jsx(eu,{}):s.jsx("div",{className:"user-journey",children:(()=>{switch(n){case"unconnected":default:return s.jsx(J,{});case"connected":return s.jsx(X,{});case"verified":return s.jsx(Z,{});case"beneficiary":return s.jsx(ee,{})}})()})}function em(){return s.jsx("header",{className:"bg-black/20 backdrop-blur-sm border-b border-purple-500/20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-xl font-bold",children:"⚰️"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Sarcophagus Protocol"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Secure Digital Inheritance on VeChain"})]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx(K.TI,{})})]})})})}function eg({onAccept:e,onDecline:t,userAddress:a}){let[i,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),x=i&&l&&c&&u&&m;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"text-red-600 text-3xl mr-3",children:"⚖️"}),s.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"LEGAL DISCLOSURE & AGREEMENT"})]}),s.jsx("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-300 rounded-lg",children:(0,s.jsxs)("p",{className:"text-red-800 font-medium",children:[s.jsx("strong",{children:"IMPORTANT:"})," This is a legally binding agreement. By accepting these terms, you acknowledge that you have read, understood, and agree to be bound by all provisions."]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:e=>n(e.target.checked),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Terms of Service Agreement"}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 max-h-32 overflow-y-auto",children:[(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"1. IRREVOCABLE COMMITMENT:"})," By using the Sarcophagus Protocol, you acknowledge that funds deposited are irrevocably locked for a minimum of 7 years with no exceptions for any circumstances including medical emergencies, financial hardship, or legal proceedings."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"2. DEATH-TRIGGERED RELEASE:"})," Funds are only released upon verified death through oracle confirmation. This is not a savings account, investment vehicle, or emergency fund."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"3. SEVERE PENALTIES:"})," Early withdrawals incur penalties of 20-90% of total funds. Emergency withdrawals after 7 years result in 90% penalty."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"4. NO GUARANTEES:"})," The protocol makes no guarantees regarding inheritance law compliance, tax implications, or legal validity in your jurisdiction."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"5. TECHNICAL RISKS:"})," Smart contract risks, oracle failures, network issues, and technological failures may result in permanent loss of funds."]})]})]})]})}),s.jsx("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:l,onChange:e=>o(e.target.checked),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Privacy Policy & Data Handling"}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 max-h-32 overflow-y-auto",children:[(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"1. PUBLIC BLOCKCHAIN:"})," All transactions are recorded on public blockchain and may be permanently visible to anyone."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"2. DEATH VERIFICATION:"})," Death verification requires sharing personal information with oracles and may involve third-party verification services."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"3. BENEFICIARY INFORMATION:"})," Beneficiary addresses and inheritance percentages are stored on-chain and publicly visible."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"4. NO ANONYMITY:"})," This protocol is not anonymous. Your identity may be linked to your vault through various means."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"5. DATA RETENTION:"})," Information may be retained indefinitely on blockchain and by third-party services."]})]})]})]})}),s.jsx("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Comprehensive Risk Disclosure"}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 max-h-32 overflow-y-auto",children:[(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"1. PERMANENT LOSS:"})," Funds may be permanently lost due to smart contract bugs, oracle failures, or technological issues."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"2. REGULATORY RISKS:"})," Changes in laws or regulations may affect the legality or functionality of the protocol."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"3. INHERITANCE LAW RISKS:"})," The protocol may not comply with inheritance laws in your jurisdiction."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"4. TAX IMPLICATIONS:"})," Use of this protocol may have significant tax consequences that you are responsible for understanding."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"5. BENEFICIARY RISKS:"})," Beneficiaries may be unable to claim funds due to technical, legal, or regulatory issues."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"6. NO INSURANCE:"})," Funds are not insured by any government agency or private insurance."]})]})]})]})}),s.jsx("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Legal Disclaimer & Professional Advice"}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 max-h-32 overflow-y-auto",children:[(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"1. NOT LEGAL ADVICE:"})," This protocol does not constitute legal advice. You should consult with qualified legal professionals."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"2. JURISDICTION SPECIFIC:"})," Inheritance laws vary by jurisdiction. This protocol may not be valid in your location."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"3. ESTATE PLANNING:"})," This protocol may conflict with existing estate plans or wills. Professional review is required."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"4. NO WARRANTIES:"}),' The protocol is provided "as is" without any warranties regarding legality or effectiveness.']}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"5. LIABILITY LIMITATION:"})," The protocol developers and operators disclaim all liability for any damages or losses."]})]})]})]})}),s.jsx("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:e=>g(e.target.checked),className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Tax Implications & Responsibilities"}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 max-h-32 overflow-y-auto",children:[(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"1. TAX CONSULTATION:"})," You are responsible for consulting with qualified tax professionals regarding all tax implications."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"2. INHERITANCE TAXES:"})," Beneficiaries may be subject to inheritance, estate, or gift taxes depending on jurisdiction."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"3. CAPITAL GAINS:"})," Token appreciation may result in capital gains taxes for beneficiaries."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"4. REPORTING REQUIREMENTS:"})," You are responsible for all tax reporting requirements in your jurisdiction."]}),(0,s.jsxs)("p",{className:"mb-2",children:[s.jsx("strong",{children:"5. NO TAX ADVICE:"})," The protocol does not provide tax advice and makes no representations about tax consequences."]})]})]})]})})]}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-red-100 border-2 border-red-400 rounded-lg",children:[s.jsx("h3",{className:"font-bold text-red-800 text-lg mb-2",children:"\uD83D\uDEA8 FINAL ACKNOWLEDGMENT"}),(0,s.jsxs)("p",{className:"text-red-700 text-sm",children:[s.jsx("strong",{children:"By accepting these terms, you acknowledge that:"}),s.jsx("br",{}),"• You have read and understood all disclosures",s.jsx("br",{}),"• You have consulted or will consult with legal and tax professionals",s.jsx("br",{}),"• You accept all risks associated with using this protocol",s.jsx("br",{}),"• You understand this is a legally binding agreement",s.jsx("br",{}),"• You are making an irrevocable commitment with severe penalties"]})]}),s.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Wallet Address:"})," ",a,s.jsx("br",{}),s.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString(),s.jsx("br",{}),s.jsx("strong",{children:"Time:"})," ",new Date().toLocaleTimeString()]})}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-6",children:[s.jsx("button",{onClick:t,className:"flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600",children:"DECLINE - I Do Not Agree"}),s.jsx("button",{onClick:e,disabled:!x,className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"I ACCEPT ALL TERMS"})]})]})})})}function ex(){let{account:e,disconnect:t}=(0,D.useWallet)(),a=!!e,{showNotification:i,showTransactionNotification:n}=(0,O.useNotification)(),{isLoading:l,setLoading:o}=(0,L.useLoading)(),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!0),[m,g]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[j,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[A,E]=(0,r.useState)(""),[T,B]=(0,r.useState)(""),[R,_]=(0,r.useState)(""),[U,V]=(0,r.useState)(!1),[F,W]=(0,r.useState)(null),[$,M]=(0,r.useState)("deposit"),[H,G]=(0,r.useState)(null),[q,K]=(0,r.useState)([]),[J,X]=(0,r.useState)(null),[Z,Q]=(0,r.useState)("0"),[ee,et]=(0,r.useState)("0"),[ea,es]=(0,r.useState)(null),[er,ei]=(0,r.useState)("0"),[en,el]=(0,r.useState)({maxBeneficiaries:5,minimumDeposit:"0.1",isPaused:!1,totalUsers:0,totalValueLocked:"0"}),{userSarcophagus:eo,userBeneficiaries:ec,isUserVerified:ed,hasSarcophagus:ex,verifyUser:ep,createSarcophagus:ef,depositTokens:eb,lockObolTokens:ev,claimObolRewards:ey,verifyDeath:ej,claimInheritance:ew,refreshUserData:eN}=I(),{hasAcceptedAllTerms:ek,showLegalDisclosure:eC,acceptAllTerms:eS,declineTerms:eA}=function(e){let[t,a]=(0,r.useState)({termsAccepted:!1,privacyAccepted:!1,risksAccepted:!1,legalAccepted:!1,taxAccepted:!1,acceptedAt:null,userAddress:null}),[s,i]=(0,r.useState)(!1),n=t.termsAccepted&&t.privacyAccepted&&t.risksAccepted&&t.legalAccepted&&t.taxAccepted;(0,r.useEffect)(()=>{if(e){let t=localStorage.getItem(`legal_acceptance_${e}`);if(t)try{let e=JSON.parse(t);a(e)}catch(e){console.error("Error parsing legal acceptance:",e)}}},[e]);let l=t=>{e&&(localStorage.setItem(`legal_acceptance_${e}`,JSON.stringify(t)),a(t))},o=e&&!n;return(0,r.useEffect)(()=>{o&&i(!0)},[o]),{legalAcceptance:t,hasAcceptedAllTerms:n,showLegalDisclosure:s,setShowLegalDisclosure:i,acceptAllTerms:()=>{l({termsAccepted:!0,privacyAccepted:!0,risksAccepted:!0,legalAccepted:!0,taxAccepted:!0,acceptedAt:new Date().toISOString(),userAddress:e}),i(!1)},declineTerms:()=>{i(!1)},needsLegalAcceptance:o}}(e);(function(e){let{address:t}=(0,D.useWallet)();(0,r.useEffect)(()=>{if(t)return setTimeout(()=>{e("VaultCreated",{owner:"0x1234...",name:"Demo Vault"})},1e3),()=>{}},[t,e])})((e,t)=>{switch(e){case"UserVerified":i(`User ${t.user} verified successfully`,"success");break;case"SarcophagusCreated":i(`Sarcophagus created for ${t.user}`,"success");break;case"TokensDeposited":i(`${t.vetAmount} VET deposited`,"success");break;case"ObolTokensLocked":i(`${t.obolAmount} OBOL locked in vault`,"success");break;case"VaultRewardMinted":i(`${t.amount} OBOL rewards earned!`,"success");break;case"DeathVerified":i(`Death verified for ${t.user}`,"info");break;case"InheritanceClaimed":i(`Inheritance claimed: ${t.vetShare} VET`,"success");break;case"ContinuousRewardClaimed":i(`${t.amount} OBOL continuous rewards claimed!`,"success")}}),(0,r.useEffect)(()=>{a&&e&&(eN(),eE(),eT(),eO())},[a,e]);let eE=async()=>{try{es({totalSupply:"Unlimited (from Vebetter DAO)",carbonOffsetRate:"Years saved \xd7 personalized CO2 footprint/year",legacyBonusRate:"100 B3TR for reaching life expectancy + 100 B3TR per year past it",grandfatheringMultiplier:"N/A",userRewards:{carbonOffset:"0",legacyBonus:"0",grandfatheringEligible:!1,timeRemaining:"0 days"}}),ei("0")}catch(e){console.error("Error loading B3TR data:",e)}},eT=async()=>{try{el({maxBeneficiaries:5,minimumDeposit:"0.1",isPaused:!1,totalUsers:1250,totalValueLocked:"45,250"})}catch(e){console.error("Error loading security status:",e)}},eO=async()=>{try{X({totalSupply:"100,000,000",initialSupply:"5,000,000",rewardSupply:"95,000,000",rewardRate:"1 OBOL per 1 VET deposited",remainingRewards:"85,000,000",vestingProgress:10.5,dailyAPY:8.5,bonusAPY:2.1,userStake:{lockedValue:"0",lastClaimTime:0,startTime:0,totalEarned:"0",pendingRewards:"0",dailyRewardRate:"0",isLongTermHolder:!1}}),Q("0"),et("0")}catch(e){console.error("Error loading OBOL data:",e)}},eI=async e=>{o("createSarcophagus",!0);try{let t=e.beneficiaries.map(e=>e.address),a=e.beneficiaries.map(e=>parseInt(e.percentage,10)),s=await ef(t,a);await s.wait(),i("Sarcophagus vault created successfully!","success"),await eN(),h(!1)}catch(e){console.error("Error creating sarcophagus from onboarding:",e),i("Failed to create Sarcophagus vault.","error")}o("createSarcophagus",!1)},eD=async(e,t)=>{o("createSarcophagus",!0);try{let t=e.map(e=>e.address),a=e.map(e=>e.percentage),s=await ef(t,a);await s.wait(),i("Sarcophagus vault created successfully!","success"),await eN(),d(!1)}catch(e){console.error("Error creating sarcophagus from beneficiary modal:",e),i("Failed to create Sarcophagus vault.","error")}o("createSarcophagus",!1)};return eC&&e?s.jsx(eg,{onAccept:eS,onDecline:eA,userAddress:e}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[s.jsx(em,{}),s.jsx("main",{className:"container mx-auto p-4",children:e&&ek?s.jsx(eu,{}):s.jsx(eh,{})}),s.jsx(z,{isOpen:u,onClose:()=>h(!1),onComplete:eI}),s.jsx(P,{isOpen:c,onClose:()=>d(!1),onComplete:eD}),s.jsx(Y,{vault:F,isOpen:U,onClose:()=>V(!1),defaultTab:$})]})}},3727:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k,metadata:()=>N});var s=a(5036),r=a(265),i=a.n(r),n=a(6843);let l=(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\NotificationContext.tsx`),{__esModule:o,$$typeof:c}=l;l.default;let d=(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\NotificationContext.tsx#NotificationProvider`);(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\NotificationContext.tsx#useNotification`);let u=(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\WalletContext.tsx`),{__esModule:h,$$typeof:m}=u;u.default,(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\WalletContext.tsx#useWallet`),(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\WalletContext.tsx#useWalletModal`);let g=(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\WalletContext.tsx#WalletProvider`),x=(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\LoadingContext.tsx`),{__esModule:p,$$typeof:f}=x;x.default;let b=(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\LoadingContext.tsx#LoadingProvider`);(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\contexts\LoadingContext.tsx#useLoading`);let v=(0,n.createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\components\GlobalWarningBanner.tsx`),{__esModule:y,$$typeof:j}=v,w=v.default;a(7272);let N={title:"Sarcophagus Protocol",description:"A decentralized protocol for preserving digital legacies"};function k({children:e}){return s.jsx("html",{lang:"en",className:"dark",children:s.jsx("body",{className:`${i().className} bg-dark-900 min-h-screen`,children:s.jsx(d,{children:s.jsx(g,{children:(0,s.jsxs)(b,{children:[s.jsx(w,{}),e]})})})})})}},751:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let s=(0,a(6843).createProxy)(String.raw`C:\Users\NickC_4denkwr\Desktop\Vereavement\vereavement-contracts\frontend\app\page.tsx`),{__esModule:r,$$typeof:i}=s,n=s.default},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[402],()=>a(1655));module.exports=s})();