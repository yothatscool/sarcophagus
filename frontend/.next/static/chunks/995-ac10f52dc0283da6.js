(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{8062:function(){},622:function(e,t,r){"use strict";var i=r(2265),n=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var i,l={},c=null,u=null;for(i in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!a.hasOwnProperty(i)&&(l[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===l[i]&&(l[i]=t[i]);return{$$typeof:n,type:e,key:c,ref:u,props:l,_owner:o.current}}t.jsx=l,t.jsxs=l},7437:function(e,t,r){"use strict";e.exports=r(622)},6510:function(e,t,r){"use strict";r.d(t,{$:function(){return o}});let i=r(310),n=["rgb(244, 67, 54)","rgb(233, 30, 99)","rgb(156, 39, 176)","rgb(103, 58, 183)","rgb(63, 81, 181)","rgb(33, 150, 243)","rgb(3, 169, 244)","rgb(0, 188, 212)","rgb(0, 150, 136)","rgb(76, 175, 80)","rgb(139, 195, 74)","rgb(205, 220, 57)","rgb(255, 193, 7)","rgb(255, 152, 0)","rgb(255, 87, 34)"],s=function(e){if(0===e.length)return 0;let t=0;for(let r=0;r<e.length;r++)t=(31*t+e.charCodeAt(r))%4294967296;return t};function o(e,t){t=t||n;let r=new i(s(e));t=t.slice();let o=()=>{let e=Math.floor(t.length*r.random());return t.splice(e,1)[0]},a=`<rect fill="${o()}" width="100" height="100"/>`,l="",c=[35,40,45,50,55,60],u=[0,10,20,30,40,50,60,70,80,90,100],h=[30,40,50,60,70];for(let e=0;e<3;e++){let e=c.splice(Math.floor(c.length*r.random()),1)[0],t=u.splice(Math.floor(u.length*r.random()),1)[0],i=h.splice(Math.floor(h.length*r.random()),1)[0],n=o();l+=`<circle r="${e}" cx="${t}" cy="${i}" fill="${n}"/>`}return`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" class="picasso" width="100" height="100" viewBox="0 0 100 100"><style>.picasso circle{mix-blend-mode:soft-light;}</style>${a}${l}</svg>`}},9026:function(e,t,r){"use strict";function i(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function n(){let e=i();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=i,t.getSubtleCrypto=n,t.isBrowserCryptoAvailable=function(){return!!i()&&!!n()}},2453:function(e,t,r){"use strict";var i=r(9792);function n(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==i&&void 0!==i.versions&&void 0!==i.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=n,t.isNode=s,t.isBrowser=function(){return!n()&&!s()}},498:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(5553);i.__exportStar(r(9026),t),i.__exportStar(r(2453),t)},9382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(5553);i.__exportStar(r(6962),t),i.__exportStar(r(6957),t)},6962:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},6957:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},3743:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(5553);i.__exportStar(r(7382),t),i.__exportStar(r(7475),t),i.__exportStar(r(80),t),i.__exportStar(r(9382),t)},80:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5553).__exportStar(r(5072),t)},5072:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class r{}t.IWatch=r},4845:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;let i=r(9382);t.toMiliseconds=function(e){return e*i.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/i.ONE_THOUSAND)}},7667:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}},7382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(5553);i.__exportStar(r(7667),t),i.__exportStar(r(4845),t)},7475:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error(`Watch already stopped for label: ${e}`);let r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},5450:function(e,t){"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function i(e){let t=r(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=i,t.getDocumentOrThrow=function(){return i("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return i("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return i("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return i("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return i("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},844:function(e,t,r){"use strict";t.D=void 0;let i=r(5450);t.D=function(){let e,t,r;try{e=i.getDocumentOrThrow(),t=i.getLocationOrThrow()}catch(e){return null}function n(...t){let r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){let i=r[e],n=["itemprop","property","name"].map(e=>i.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(n.length&&n){let e=i.getAttribute("content");if(e)return e}}return""}let s=((r=n("name","og:site_name","og:title","twitter:title"))||(r=e.title),r),o=n("description","og:description","twitter:description","keywords");return{description:o,url:t.origin,icons:function(){let r=e.getElementsByTagName("link"),i=[];for(let e=0;e<r.length;e++){let n=r[e],s=n.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=n.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{let i=t.pathname.split("/");i.pop(),r+=i.join("/")+"/"+e}i.push(r)}else if(0===e.indexOf("//")){let r=t.protocol+e;i.push(r)}else i.push(e)}}}return i}(),name:s}}},6261:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],c=new n((o+a)*3/4-a),u=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,s=[],o=0,a=i-n;o<a;o+=16383)s.push(function(e,t,i){for(var n,s=[],o=t;o<i;o+=3)s.push(r[(n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?s.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===n&&s.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},6593:function(e,t,r){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var i=r(6261),n=r(8755),s=r(4376);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,r)}function c(e,t,r,i){if("number"==typeof t)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t),e}(e,t,r,i):"string"==typeof t?function(e,t,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!l.isEncoding(r))throw TypeError('"encoding" must be a valid string encoding');var i=0|p(t,r),n=(e=a(e,i)).write(t,r);return n!==i&&(e=e.slice(0,n)),e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r,i=0|f(t.length);return 0===(e=a(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&s(t.data))return d(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(e<0)throw RangeError('"size" argument must not be negative')}function h(e,t){if(u(t),e=a(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|f(t.length);e=a(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=o())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return O(e).length;default:if(i)return P(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var n,s,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i,n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var s="",o=t;o<r;++o)s+=(i=e[o])<16?"0"+i.toString(16):i.toString(16);return s}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":return n=t,s=r,0===n&&s===this.length?i.fromByteArray(this):i.fromByteArray(this.slice(n,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function y(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,n){if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),isNaN(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return -1;r=e.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,i,n);if("number"==typeof t)return(t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,i,n);throw TypeError("val must be string, number or Buffer")}function b(e,t,r,i,n){var s,o=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var u=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*o}else -1!==u&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(c(e,s+d)!==c(t,d)){h=!1;break}if(h)return s}return -1}function w(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,l,c=e[n],u=null,h=c>239?4:c>223?3:c>191?2:1;if(n+h<=r)switch(h){case 1:c<128&&(u=c);break;case 2:(192&(s=e[n+1]))==128&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[n+1],o=e[n+2],(192&s)==128&&(192&o)==128&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function E(e,t,r,i,n,s){if(!l.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function A(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-r,2);n<s;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>(i?n:1-n)*8}function x(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-r,4);n<s;++n)e[r+n]=t>>>(i?n:3-n)*8&255}function I(e,t,r,i,n,s){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function T(e,t,r,i,s){return s||I(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}function _(e,t,r,i,s){return s||I(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}t.lW=l,t.h2=50,l.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return c(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return(u(e),e<=0)?a(null,e):void 0!==t?"string"==typeof r?a(null,e).fill(t,r):a(null,e).fill(t):a(null,e)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,i=l.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!l.isBuffer(o))throw TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0==arguments.length?w(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.h2;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,i,n){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var s=n-i,o=r-t,a=Math.min(s,o),c=this.slice(i,n),u=e.slice(t,r),h=0;h<a;++h)if(c[h]!==u[h]){s=c[h],o=u[h];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},l.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,o,a,l,c,u,h,d,f,p,g,y=this.length-t;if((void 0===r||r>y)&&(r=y),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var m=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;if(s%2!=0)throw TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))break;e[r+o]=a}return o}(this,e,t,r);case"utf8":case"utf-8":return l=t,c=r,k(P(e,this.length-l),this,l,c);case"ascii":return u=t,h=r,k(N(e),this,u,h);case"latin1":case"binary":return n=this,s=e,o=t,a=r,k(N(s),n,o,a);case"base64":return d=t,f=r,k(O(e),this,d,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,g=r,k(function(e,t){for(var r,i,n=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n.push(r%256),n.push(i);return n}(e,this.length-p),this,p,g);default:if(m)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),m=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(e,t){var r,i=this.length;if(e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var n=t-e;r=new l(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||v(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||v(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},l.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||v(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||v(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return(t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},l.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){var n=Math.pow(2,8*r)-1;E(this,e,t,r,n,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){var n=Math.pow(2,8*r)-1;E(this,e,t,r,n,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return _(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return _(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("sourceStart out of bounds");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,s=i-r;if(this===e&&r<t&&t<i)for(n=s-1;n>=0;--n)e[n+t]=this[n+r];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},l.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n,s=e.charCodeAt(0);s<256&&(e=s)}if(void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var o=l.isBuffer(e)?e:P(new l(e,i).toString()),a=o.length;for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};var S=/[^+\/0-9A-Za-z-_]/g;function P(e,t){t=t||1/0;for(var r,i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319||o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function N(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function O(e){return i.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function k(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}},8451:function(e){"use strict";var t={single_source_shortest_paths:function(e,r,i){var n,s,o,a,l,c,u,h={},d={};d[r]=0;var f=t.PriorityQueue.make();for(f.push(r,0);!f.empty();)for(o in s=(n=f.pop()).value,a=n.cost,l=e[s]||{})l.hasOwnProperty(o)&&(c=a+l[o],u=d[o],(void 0===d[o]||u>c)&&(d[o]=c,f.push(o,c),h[o]=s));if(void 0!==i&&void 0===d[i])throw Error(["Could not find a path from ",r," to ",i,"."].join(""));return h},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],i=t;i;)r.push(i),e[i],i=e[i];return r.reverse(),r},find_path:function(e,r,i){var n=t.single_source_shortest_paths(e,r,i);return t.extract_shortest_path_from_predecessor_list(n,i)},PriorityQueue:{make:function(e){var r,i=t.PriorityQueue,n={};for(r in e=e||{},i)i.hasOwnProperty(r)&&(n[r]=i[r]);return n.queue=[],n.sorter=e.sorter||i.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},8206:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(r,i){function n(r){e.removeListener(t,s),i(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&"function"==typeof e.on&&g(e,"error",n,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,r,i){if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=l(e))>0&&o.length>n&&!o.warned){o.warned=!0;var n,s,o,c=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=u.bind(i);return n.listener=r,i.wrapFn=n,n}function d(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else for(var c=l.length,u=p(l,c),r=0;r<c;++r)i(u[r],this,t);return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,n,s,o;if(a(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3633:function(e){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,i="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&(r=t.cmp,function(e){return function(t,i){return r({key:t,value:e[t]},{key:i,value:e[i]})}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);if(Array.isArray(t)){for(r=0,o="[";r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var r,o,a=s.push(t)-1,l=Object.keys(t).sort(n&&n(t));for(r=0,o="";r<l.length;r++){var c=l[r],u=e(t[c]);u&&(o&&(o+=","),o+=JSON.stringify(c)+":"+u)}return s.splice(a,1),"{"+o+"}"}}(e)}},8755:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=c}return(f?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,l,c=8*s-n-1,u=(1<<c)-1,h=u>>1,d=23===n?5960464477539062e-23:0,f=i?0:s-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,n),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;e[r+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;e[r+f]=255&o,f+=p,o/=256,c-=8);e[r+f-p]|=128*g}},4376:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},310:function(e){var t=function(e){void 0==e&&(e=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};t.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((4294901760&e)>>>16)*1812433253<<16)+(65535&e)*1812433253+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(e,t){var r,i,n;for(this.init_seed(19650218),r=1,i=0,n=this.N>t?this.N:t;n;n--){var s=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((4294901760&s)>>>16)*1664525<<16)+(65535&s)*1664525)+e[i]+i,this.mt[r]>>>=0,r++,i++,r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1),i>=t&&(i=0)}for(n=this.N-1;n;n--){var s=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((4294901760&s)>>>16)*1566083941<<16)+(65535&s)*1566083941)-r,this.mt[r]>>>=0,++r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var e,t,r=[0,this.MATRIX_A];if(this.mti>=this.N){for(this.mti==this.N+1&&this.init_seed(5489),t=0;t<this.N-this.M;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+this.M]^e>>>1^r[1&e];for(;t<this.N-1;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+(this.M-this.N)]^e>>>1^r[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^r[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return 1/9007199254740992*(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))},e.exports=t},9792:function(e){var t,r,i,n=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],c=!1,u=-1;function h(){c&&i&&(c=!1,i.length?l=i.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=a(h);c=!0;for(var t=l.length;t;){for(i=l,l=[];++u<t;)i&&i[u].run();u=-1,t=l.length}i=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},4646:function(e,t,r){let i=r(2562),n=r(8898),s=r(9704),o=r(7974);function a(e,t,r,s,o){let a=[].slice.call(arguments,1),l=a.length,c="function"==typeof a[l-1];if(!c&&!i())throw Error("Callback required as last argument");if(c){if(l<2)throw Error("Too few arguments provided");2===l?(o=r,r=t,t=s=void 0):3===l&&(t.getContext&&void 0===o?(o=s,s=void 0):(o=s,s=r,r=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(r=t,t=s=void 0):2!==l||t.getContext||(s=r,r=t,t=void 0),new Promise(function(i,o){try{let o=n.create(r,s);i(e(o,t,s))}catch(e){o(e)}})}try{let i=n.create(r,s);o(null,e(i,t,s))}catch(e){o(e)}}t.create=n.create,t.toCanvas=a.bind(null,s.render),t.toDataURL=a.bind(null,s.renderToDataURL),t.toString=a.bind(null,function(e,t,r){return o.render(e,r)})},2562:function(e){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},7829:function(e,t,r){let i=r(878).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=i(e),n=145===r?26:2*Math.ceil((r-13)/(2*t-2)),s=[r-7];for(let e=1;e<t-1;e++)s[e]=s[e-1]-n;return s.push(6),s.reverse()},t.getPositions=function(e){let r=[],i=t.getRowColCoords(e),n=i.length;for(let e=0;e<n;e++)for(let t=0;t<n;t++)(0!==e||0!==t)&&(0!==e||t!==n-1)&&(e!==n-1||0!==t)&&r.push([i[e],i[t]]);return r}},2419:function(e,t,r){let i=r(7976),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=i.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*n.indexOf(this.data[t]);r+=n.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},e.exports=s},8397:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){return(this.buffer[Math.floor(e/8)]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},643:function(e){function t(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,i){let n=e*this.size+t;this.data[n]=r,i&&(this.reservedBit[n]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},1347:function(e,t,r){let i=r(7976);function n(e){this.mode=i.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}n.getBitsLength=function(e){return 8*e},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=n},7002:function(e,t,r){let i=r(7773),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case i.L:return n[(e-1)*4+0];case i.M:return n[(e-1)*4+1];case i.Q:return n[(e-1)*4+2];case i.H:return n[(e-1)*4+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case i.L:return s[(e-1)*4+0];case i.M:return s[(e-1)*4+1];case i.Q:return s[(e-1)*4+2];case i.H:return s[(e-1)*4+3];default:return}}},7773:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw Error("Unknown EC Level: "+e)}}(e)}catch(e){return r}}},8415:function(e,t,r){let i=r(878).getSymbolSize;t.getPositions=function(e){let t=i(e);return[[0,0],[t-7,0],[0,t-7]]}},7087:function(e,t,r){let i=r(878),n=i.getBCHDigit(1335);t.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;i.getBCHDigit(s)-n>=0;)s^=1335<<i.getBCHDigit(s)-n;return(r<<10|s)^21522}},2221:function(e,t){let r=new Uint8Array(512),i=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)r[t]=e,i[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),t.log=function(e){if(e<1)throw Error("log("+e+")");return i[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[i[e]+i[t]]}},8933:function(e,t,r){let i=r(7976),n=r(878);function s(e){this.mode=i.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=n.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},e.exports=s},3223:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){let t=e.size,i=0,n=0,s=0,o=null,a=null;for(let l=0;l<t;l++){n=s=0,o=a=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===o?n++:(n>=5&&(i+=r.N1+(n-5)),o=t,n=1),(t=e.get(c,l))===a?s++:(s>=5&&(i+=r.N1+(s-5)),a=t,s=1)}n>=5&&(i+=r.N1+(n-5)),s>=5&&(i+=r.N1+(s-5))}return i},t.getPenaltyN2=function(e){let t=e.size,i=0;for(let r=0;r<t-1;r++)for(let n=0;n<t-1;n++){let t=e.get(r,n)+e.get(r,n+1)+e.get(r+1,n)+e.get(r+1,n+1);(4===t||0===t)&&i++}return i*r.N2},t.getPenaltyN3=function(e){let t=e.size,i=0,n=0,s=0;for(let r=0;r<t;r++){n=s=0;for(let o=0;o<t;o++)n=n<<1&2047|e.get(r,o),o>=10&&(1488===n||93===n)&&i++,s=s<<1&2047|e.get(o,r),o>=10&&(1488===s||93===s)&&i++}return i*r.N3},t.getPenaltyN4=function(e){let t=0,i=e.data.length;for(let r=0;r<i;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/i/5)-10)*r.N4},t.applyMask=function(e,r){let i=r.size;for(let n=0;n<i;n++)for(let s=0;s<i;s++)r.isReserved(s,n)||r.xor(s,n,function(e,r,i){switch(e){case t.Patterns.PATTERN000:return(r+i)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return i%3==0;case t.Patterns.PATTERN011:return(r+i)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2==0;case t.Patterns.PATTERN101:return r*i%2+r*i%3==0;case t.Patterns.PATTERN110:return(r*i%2+r*i%3)%2==0;case t.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,s,n))},t.getBestMask=function(e,r){let i=Object.keys(t.Patterns).length,n=0,s=1/0;for(let o=0;o<i;o++){r(o),t.applyMask(o,e);let i=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),i<s&&(s=i,n=o)}return n}},7976:function(e,t,r){let i=r(3424),n=r(6833);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!i.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw Error("Unknown mode: "+e)}}(e)}catch(e){return r}}},16:function(e,t,r){let i=r(7976);function n(e){this.mode=i.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let i=this.data.length-t;i>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*i+1))},e.exports=n},2001:function(e,t,r){let i=r(2221);t.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let n=0;n<e.length;n++)for(let s=0;s<t.length;s++)r[n+s]^=i.mul(e[n],t[s]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let n=0;n<t.length;n++)r[n]^=i.mul(t[n],e);let n=0;for(;n<r.length&&0===r[n];)n++;r=r.slice(n)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let n=0;n<e;n++)r=t.mul(r,new Uint8Array([1,i.exp(n)]));return r}},8898:function(e,t,r){let i=r(878),n=r(7773),s=r(8397),o=r(643),a=r(7829),l=r(8415),c=r(3223),u=r(7002),h=r(644),d=r(8331),f=r(7087),p=r(7976),g=r(6582);function y(e,t,r){let i,n;let s=e.size,o=f.getEncodedBits(t,r);for(i=0;i<15;i++)n=(o>>i&1)==1,i<6?e.set(i,8,n,!0):i<8?e.set(i+1,8,n,!0):e.set(s-15+i,8,n,!0),i<8?e.set(8,s-i-1,n,!0):i<9?e.set(8,15-i-1+1,n,!0):e.set(8,15-i-1,n,!0);e.set(s-8,8,1,!0)}t.create=function(e,t){let r,f;if(void 0===e||""===e)throw Error("No input text");let m=n.M;return void 0!==t&&(m=n.from(t.errorCorrectionLevel,n.M),r=d.from(t.version),f=c.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),function(e,t,r,n){let f;if(Array.isArray(e))f=g.fromArray(e);else if("string"==typeof e){let i=t;if(!i){let t=g.rawSplit(e);i=d.getBestVersionForData(t,r)}f=g.fromString(e,i||40)}else throw Error("Invalid data");let m=d.getBestVersionForData(f,r);if(!m)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<m)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+m+".\n")}else t=m;let b=function(e,t,r){let n=new s;r.forEach(function(t){n.put(t.mode.bit,4),n.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(n)});let o=(i.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t))*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);let a=(o-n.getLengthInBits())/8;for(let e=0;e<a;e++)n.put(e%2?17:236,8);return function(e,t,r){let n,s;let o=i.getSymbolTotalCodewords(t),a=o-u.getTotalCodewordsCount(t,r),l=u.getBlocksCount(t,r),c=o%l,d=l-c,f=Math.floor(o/l),p=Math.floor(a/l),g=p+1,y=f-p,m=new h(y),b=0,w=Array(l),v=Array(l),E=0,A=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<d?p:g;w[e]=A.slice(b,b+t),v[e]=m.encode(w[e]),b+=t,E=Math.max(E,t)}let x=new Uint8Array(o),I=0;for(n=0;n<E;n++)for(s=0;s<l;s++)n<w[s].length&&(x[I++]=w[s][n]);for(n=0;n<y;n++)for(s=0;s<l;s++)x[I++]=v[s][n];return x}(n,e,t)}(t,r,f),w=new o(i.getSymbolSize(t));return function(e,t){let r=e.size,i=l.getPositions(t);for(let t=0;t<i.length;t++){let n=i[t][0],s=i[t][1];for(let t=-1;t<=7;t++)if(!(n+t<=-1)&&!(r<=n+t))for(let i=-1;i<=7;i++)s+i<=-1||r<=s+i||(t>=0&&t<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===t||6===t)||t>=2&&t<=4&&i>=2&&i<=4?e.set(n+t,s+i,!0,!0):e.set(n+t,s+i,!1,!0))}}(w,t),function(e){let t=e.size;for(let r=8;r<t-8;r++){let t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(w),function(e,t){let r=a.getPositions(t);for(let t=0;t<r.length;t++){let i=r[t][0],n=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(i+t,n+r,!0,!0):e.set(i+t,n+r,!1,!0)}}(w,t),y(w,r,0),t>=7&&function(e,t){let r,i,n;let s=e.size,o=d.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),i=t%3+s-8-3,n=(o>>t&1)==1,e.set(r,i,n,!0),e.set(i,r,n,!0)}(w,t),function(e,t){let r=e.size,i=-1,n=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(6===a&&a--;;){for(let r=0;r<2;r++)if(!e.isReserved(n,a-r)){let i=!1;o<t.length&&(i=(t[o]>>>s&1)==1),e.set(n,a-r,i),-1==--s&&(o++,s=7)}if((n+=i)<0||r<=n){n-=i,i=-i;break}}}(w,b),isNaN(n)&&(n=c.getBestMask(w,y.bind(null,w,r))),c.applyMask(n,w),y(w,r,n),{modules:w,version:t,errorCorrectionLevel:r,maskPattern:n,segments:f}}(e,r,m,f)}},644:function(e,t,r){let i=r(2001);function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=i.mod(t,this.genPoly),n=this.degree-r.length;if(n>0){let e=new Uint8Array(this.degree);return e.set(r,n),e}return r},e.exports=n},6833:function(e,t){let r="[0-9]+",i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",n="(?:(?![A-Z0-9 $%*+\\-./:]|"+(i=i.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=RegExp(i,"g"),t.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=RegExp(n,"g"),t.NUMERIC=RegExp(r,"g"),t.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let s=RegExp("^"+i+"$"),o=RegExp("^"+r+"$"),a=RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},6582:function(e,t,r){let i=r(7976),n=r(16),s=r(2419),o=r(1347),a=r(8933),l=r(6833),c=r(878),u=r(8451);function h(e){return unescape(encodeURIComponent(e)).length}function d(e,t,r){let i;let n=[];for(;null!==(i=e.exec(r));)n.push({data:i[0],index:i.index,mode:t,length:i[0].length});return n}function f(e){let t,r;let n=d(l.NUMERIC,i.NUMERIC,e),s=d(l.ALPHANUMERIC,i.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=d(l.BYTE,i.BYTE,e),r=d(l.KANJI,i.KANJI,e)):(t=d(l.BYTE_KANJI,i.BYTE,e),r=[]),n.concat(s,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case i.NUMERIC:return n.getBitsLength(e);case i.ALPHANUMERIC:return s.getBitsLength(e);case i.KANJI:return a.getBitsLength(e);case i.BYTE:return o.getBitsLength(e)}}function g(e,t){let r;let l=i.getBestModeForData(e);if((r=i.from(t,l))!==i.BYTE&&r.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+i.toString(r)+".\n Suggested mode is: "+i.toString(l));switch(r!==i.KANJI||c.isKanjiModeEnabled()||(r=i.BYTE),r){case i.NUMERIC:return new n(e);case i.ALPHANUMERIC:return new s(e);case i.KANJI:return new a(e);case i.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},t.fromString=function(e,r){let n=function(e,t){let r={},n={start:{}},s=["start"];for(let o=0;o<e.length;o++){let a=e[o],l=[];for(let e=0;e<a.length;e++){let c=a[e],u=""+o+e;l.push(u),r[u]={node:c,lastCount:0},n[u]={};for(let e=0;e<s.length;e++){let o=s[e];r[o]&&r[o].node.mode===c.mode?(n[o][u]=p(r[o].lastCount+c.length,c.mode)-p(r[o].lastCount,c.mode),r[o].lastCount+=c.length):(r[o]&&(r[o].lastCount=c.length),n[o][u]=p(c.length,c.mode)+4+i.getCharCountIndicator(c.mode,t))}}s=l}for(let e=0;e<s.length;e++)n[s[e]].end=0;return{map:n,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];switch(n.mode){case i.NUMERIC:t.push([n,{data:n.data,mode:i.ALPHANUMERIC,length:n.length},{data:n.data,mode:i.BYTE,length:n.length}]);break;case i.ALPHANUMERIC:t.push([n,{data:n.data,mode:i.BYTE,length:n.length}]);break;case i.KANJI:t.push([n,{data:n.data,mode:i.BYTE,length:h(n.data)}]);break;case i.BYTE:t.push([{data:n.data,mode:i.BYTE,length:h(n.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),r),s=u.find_path(n.map,"start","end"),o=[];for(let e=1;e<s.length-1;e++)o.push(n.table[s[e]].node);return t.fromArray(o.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},t.rawSplit=function(e){return t.fromArray(f(e,c.isKanjiModeEnabled()))}},878:function(e,t){let r;let i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return i[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},3424:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},8331:function(e,t,r){let i=r(878),n=r(7002),s=r(7773),o=r(7976),a=r(3424),l=i.getBCHDigit(7973);function c(e,t){return o.getCharCountIndicator(e,t)+4}t.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!a.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=o.BYTE);let s=(i.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,t))*8;if(r===o.MIXED)return s;let l=s-c(r,e);switch(r){case o.NUMERIC:return Math.floor(l/10*3);case o.ALPHANUMERIC:return Math.floor(l/11*2);case o.KANJI:return Math.floor(l/13);case o.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,r){let i;let n=s.from(r,s.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let i=1;i<=40;i++)if(function(e,t){let r=0;return e.forEach(function(e){let i=c(e.mode,t);r+=i+e.getBitsLength()}),r}(e,i)<=t.getCapacity(i,r,o.MIXED))return i}(e,n);if(0===e.length)return 1;i=e[0]}else i=e;return function(e,r,i){for(let n=1;n<=40;n++)if(r<=t.getCapacity(n,i,e))return n}(i.mode,i.getLength(),n)},t.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;i.getBCHDigit(t)-l>=0;)t^=7973<<i.getBCHDigit(t)-l;return e<<12|t}},9704:function(e,t,r){let i=r(7708);t.render=function(e,t,r){var n;let s=r,o=t;void 0!==s||t&&t.getContext||(s=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),s=i.getOptions(s);let a=i.getImageWidth(e.modules.size,s),l=o.getContext("2d"),c=l.createImageData(a,a);return i.qrToImageData(c.data,e,s),n=o,l.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=a,n.width=a,n.style.height=a+"px",n.style.width=a+"px",l.putImageData(c,0,0),o},t.renderToDataURL=function(e,r,i){let n=i;void 0!==n||r&&r.getContext||(n=r,r=void 0),n||(n={});let s=t.render(e,r,n),o=n.type||"image/png",a=n.rendererOpts||{};return s.toDataURL(o,a.quality)}},7974:function(e,t,r){let i=r(7708);function n(e,t){let r=e.a/255,i=t+'="'+e.hex+'"';return r<1?i+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function s(e,t,r){let i=e+t;return void 0!==r&&(i+=" "+r),i}t.render=function(e,t,r){let o=i.getOptions(t),a=e.modules.size,l=e.modules.data,c=a+2*o.margin,u=o.color.light.a?"<path "+n(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+n(o.color.dark,"stroke")+' d="'+function(e,t,r){let i="",n=0,o=!1,a=0;for(let l=0;l<e.length;l++){let c=Math.floor(l%t),u=Math.floor(l/t);c||o||(o=!0),e[l]?(a++,l>0&&c>0&&e[l-1]||(i+=o?s("M",c+r,.5+u+r):s("m",n,0),n=0,o=!1),c+1<t&&e[l+1]||(i+=s("h",a),a=0)):n++}return i}(l,a,o.margin)+'"/>',d='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+c)+" "+c+'" shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"==typeof r&&r(null,d),d}},7708:function(e,t){function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,i=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:i,scale:i?4:n,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){let i=t.getScale(e,r);return Math.floor((e+2*r.margin)*i)},t.qrToImageData=function(e,r,i){let n=r.modules.size,s=r.modules.data,o=t.getScale(n,i),a=Math.floor((n+2*i.margin)*o),l=i.margin*o,c=[i.color.light,i.color.dark];for(let t=0;t<a;t++)for(let r=0;r<a;r++){let u=(t*a+r)*4,h=i.color.light;t>=l&&r>=l&&t<a-l&&r<a-l&&(h=c[s[Math.floor((t-l)/o)*n+Math.floor((r-l)/o)]?1:0]),e[u++]=h.r,e[u++]=h.g,e[u++]=h.b,e[u]=h.a}}},33:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,i){var n=i&&i.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var l=r.length;if(0===l)return e;for(var c="",u=0,h=-1,d=e&&e.length||0,f=0;f<d;){if(37===e.charCodeAt(f)&&f+1<d){switch(h=h>-1?h:0,e.charCodeAt(f+1)){case 100:case 102:if(u>=l||null==r[u])break;h<f&&(c+=e.slice(h,f)),c+=Number(r[u]),h=f+2,f++;break;case 105:if(u>=l||null==r[u])break;h<f&&(c+=e.slice(h,f)),c+=Math.floor(Number(r[u])),h=f+2,f++;break;case 79:case 111:case 106:if(u>=l||void 0===r[u])break;h<f&&(c+=e.slice(h,f));var p=typeof r[u];if("string"===p){c+="'"+r[u]+"'",h=f+2,f++;break}if("function"===p){c+=r[u].name||"<anonymous>",h=f+2,f++;break}c+=n(r[u]),h=f+2,f++;break;case 115:if(u>=l)break;h<f&&(c+=e.slice(h,f)),c+=String(r[u]),h=f+2,f++;break;case 37:h<f&&(c+=e.slice(h,f)),c+="%",h=f+2,f++,u--}++u}++f}return -1===h?e:(h<d&&(c+=e.slice(h)),c)}},5553:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return v},__asyncGenerator:function(){return w},__asyncValues:function(){return E},__await:function(){return b},__awaiter:function(){return u},__classPrivateFieldGet:function(){return T},__classPrivateFieldSet:function(){return _},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return f},__extends:function(){return n},__generator:function(){return h},__importDefault:function(){return I},__importStar:function(){return x},__makeTemplateObject:function(){return A},__metadata:function(){return c},__param:function(){return l},__read:function(){return g},__rest:function(){return o},__spread:function(){return y},__spreadArrays:function(){return m},__values:function(){return p}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function l(e,t){return function(r,i){t(r,i,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((i=i.apply(e,t||[])).next())})}function h(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){try{var r;(r=n[e](t)).value instanceof b?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:b(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function E(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function _(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},6475:function(e){"use strict";e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},8757:function(e,t,r){"use strict";let i=r(33);e.exports=s;let n=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function s(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let u=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let h=e.serializers||{},g=Array.isArray(t=e.browser.serialize)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(h),y=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(y=!1),"function"==typeof u&&(u.error=u.fatal=u.warn=u.info=u.debug=u.trace=u),!1===e.enabled&&(e.level="silent");let m=e.level||"info",b=Object.create(u);b.log||(b.log=d),Object.defineProperty(b,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(b,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(w,b,"error","log"),o(w,b,"fatal","error"),o(w,b,"warn","error"),o(w,b,"info","log"),o(w,b,"debug","log"),o(w,b,"trace","log")}});let w={transmit:i,serialize:g,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?f:p};return b.levels=s.levels,b.level=m,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=d,b.serializers=h,b._serialize=g,b._stdErrSerialize=y,b.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},g&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(g&&n){var s=Object.assign({},h,n),o=!0===e.browser.serialize?Object.keys(s):g;delete t.serializers,a([t],o,s,this._stdErrSerialize)}function u(e){this._childLevel=(0|e._childLevel)+1,this.error=l(e,t,"error"),this.fatal=l(e,t,"fatal"),this.warn=l(e,t,"warn"),this.info=l(e,t,"info"),this.debug=l(e,t,"debug"),this.trace=l(e,t,"trace"),s&&(this.serializers=s,this._serialize=o),i&&(this._logEvent=c([].concat(e._logEvent.bindings,t)))}return u.prototype=this,new u(this)},i&&(b._logEvent=c()),b}function o(e,t,r,o){let l=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?d:l[r]?l[r]:n[r]||n[o]||d,function(e,t,r){if(e.transmit||t[r]!==d){var o;t[r]=(o=t[r],function(){let l=e.timestamp(),u=Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var d=0;d<u.length;d++)u[d]=arguments[d];if(e.serialize&&!e.asObject&&a(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(h,function(e,t,r,n){e._serialize&&a(r,e._serialize,e.serializers,e._stdErrSerialize);let o=r.slice(),l=o[0],c={};n&&(c.time=n),c.level=s.levels.values[t];let u=(0|e._childLevel)+1;if(u<1&&(u=1),null!==l&&"object"==typeof l){for(;u--&&"object"==typeof o[0];)Object.assign(c,o.shift());l=o.length?i(o.shift(),o):void 0}else"string"==typeof l&&(l=i(o.shift(),o));return void 0!==l&&(c.msg=l),c}(this,r,u,l)):o.apply(h,u),e.transmit){let i=e.transmit.level||t.level,n=s.levels.values[i],o=s.levels.values[r];if(o<n)return;(function(e,t,r){let i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,l=t.val,u=e._logEvent.bindings;a(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(e){return -1===u.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,l),e._logEvent=c(u)})(this,{ts:l,methodLevel:r,methodValue:o,transmitLevel:i,transmitValue:s.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}})}}(e,t,r)}function a(e,t,r,i){for(let n in e)if(i&&e[n]instanceof Error)e[n]=s.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(let i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function l(e,t,r){return function(){let i=Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function c(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function u(){return{}}function h(e){return e}function d(){}function f(){return!1}function p(){return Date.now()}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers={mapHttpRequest:u,mapHttpResponse:u,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:u,res:u,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}},s.stdTimeFunctions=Object.assign({},{nullTime:f,epochTime:p,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},8259:function(e,t,r){"use strict";r.d(t,{Ix:function(){return F},Am:function(){return O}});var i=r(2265),n=function(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i)}return n}(e))&&(i&&(i+=" "),i+=t);return i};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var s=e=>"number"==typeof e&&!isNaN(e),o=e=>"string"==typeof e,a=e=>"function"==typeof e,l=e=>o(e)||s(e),c=e=>o(e)||a(e)?e:null,u=(e,t)=>!1===e||s(e)&&e>0?e:t,h=e=>(0,i.isValidElement)(e)||o(e)||a(e)||s(e);function d({enter:e,exit:t,appendPosition:r=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:o,position:a,preventExitTransition:l,done:c,nodeRef:u,isIn:h,playToast:d}){let f=r?`${e}--${a}`:e,p=r?`${t}--${a}`:t,g=(0,i.useRef)(0);return(0,i.useLayoutEffect)(()=>{let e=u.current,t=f.split(" "),r=i=>{i.target===u.current&&(d(),e.removeEventListener("animationend",r),e.removeEventListener("animationcancel",r),0===g.current&&"animationcancel"!==i.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",r),e.addEventListener("animationcancel",r)},[]),(0,i.useEffect)(()=>{let e=u.current,t=()=>{e.removeEventListener("animationend",t),n?function(e,t,r=300){let{scrollHeight:i,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=i+"px",n.transition=`all ${r}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(t,r)})})}(e,c,s):c()};h||(l?t():(g.current=1,e.className+=` ${p}`,e.addEventListener("animationend",t)))},[h]),i.createElement(i.Fragment,null,o)}}function f(e,t){return{content:p(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function p(e,t,r=!1){return(0,i.isValidElement)(e)&&!o(e.type)?(0,i.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):a(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function g({delay:e,isRunning:t,closeToast:r,type:s="default",hide:o,className:l,controlledProgress:c,progress:u,rtl:h,isIn:d,theme:f}){let p=o||c&&0===u,g={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};c&&(g.transform=`scaleX(${u})`);let y=n("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":h}),m=a(l)?l({rtl:h,type:s,defaultClassName:y}):n(y,l);return i.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},i.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${s}`}),i.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:m,style:g,[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{d&&r()}}))}var y=1,m=()=>`${y++}`,b=new Map,w=[],v=new Set,E=e=>v.forEach(t=>t(e)),A=()=>b.size>0,x=(e,{containerId:t})=>{var r;return null==(r=b.get(t||1))?void 0:r.toasts.get(e)};function I(e,t){var r;if(t)return!!(null!=(r=b.get(t))&&r.isToastActive(e));let i=!1;return b.forEach(t=>{t.isToastActive(e)&&(i=!0)}),i}function T(e,t){h(e)&&(A()||w.push({content:e,options:t}),b.forEach(r=>{r.buildToast(e,t)}))}function _(e,t){b.forEach(r=>{null!=t&&null!=t&&t.containerId&&(null==t?void 0:t.containerId)!==r.id||r.toggle(e,null==t?void 0:t.id)})}function S(e,t){return T(e,t),t.toastId}function P(e,t){return{...t,type:t&&t.type||e,toastId:t&&(o(t.toastId)||s(t.toastId))?t.toastId:m()}}function N(e){return(t,r)=>S(t,P(e,r))}function O(e,t){return S(e,P("default",t))}O.loading=(e,t)=>S(e,P("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),O.promise=function(e,{pending:t,error:r,success:i},n){let s;t&&(s=o(t)?O.loading(t,n):O.loading(t.render,{...n,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,r)=>{if(null==t){O.dismiss(s);return}let i={type:e,...l,...n,data:r},a=o(t)?{render:t}:t;return s?O.update(s,{...i,...a}):O(a.render,{...i,...a}),r},u=a(e)?e():e;return u.then(e=>c("success",i,e)).catch(e=>c("error",r,e)),u},O.success=N("success"),O.info=N("info"),O.error=N("error"),O.warning=N("warning"),O.warn=O.warning,O.dark=(e,t)=>S(e,P("default",{theme:"dark",...t})),O.dismiss=function(e){!function(e){if(!A()){w=w.filter(t=>null!=e&&t.options.toastId!==e);return}if(null==e||l(e))b.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=b.get(e.containerId);t?t.removeToast(e.id):b.forEach(t=>{t.removeToast(e.id)})}}(e)},O.clearWaitingQueue=(e={})=>{b.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},O.isActive=I,O.update=(e,t={})=>{let r=x(e,t);if(r){let{props:i,content:n}=r,s={delay:100,...i,...t,toastId:t.toastId||e,updateId:m()};s.toastId!==e&&(s.staleId=e);let o=s.render||n;delete s.render,S(o,s)}},O.done=e=>{O.update(e,{progress:1})},O.onChange=function(e){return v.add(e),()=>{v.delete(e)}},O.play=e=>_(!0,e),O.pause=e=>_(!1,e);var k="undefined"!=typeof window?i.useLayoutEffect:i.useEffect,C=({theme:e,type:t,isLoading:r,...n})=>i.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...n}),B={info:function(e){return i.createElement(C,{...e},i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return i.createElement(C,{...e},i.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return i.createElement(C,{...e},i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return i.createElement(C,{...e},i.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return i.createElement("div",{className:"Toastify__spinner"})}},R=e=>e in B,D=e=>{let{isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:o,playToast:l}=function(e){var t,r;let[n,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)(!1),l=(0,i.useRef)(null),c=(0,i.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:h,closeToast:d,onClick:f,closeOnClick:p}=e;function g(){s(!0)}function y(){s(!1)}function m(t){let r=l.current;if(c.canDrag&&r){c.didMove=!0,n&&y(),"x"===e.draggableDirection?c.delta=t.clientX-c.start:c.delta=t.clientY-c.start,c.start!==t.clientX&&(c.canCloseOnClick=!1);let i="x"===e.draggableDirection?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;r.style.transform=`translate3d(${i},0)`,r.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function w(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",w);let t=l.current;if(c.canDrag&&c.didMove&&t){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}t={id:e.toastId,containerId:e.containerId,fn:s},null==(r=b.get(t.containerId||1))||r.setToggle(t.id,t.fn),(0,i.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y),()=>{window.removeEventListener("focus",g),window.removeEventListener("blur",y)}},[e.pauseOnFocusLoss]);let v={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){c.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",w);let r=l.current;c.canCloseOnClick=!0,c.canDrag=!0,r.style.transition="none","x"===e.draggableDirection?(c.start=t.clientX,c.removalDistance=r.offsetWidth*(e.draggablePercent/100)):(c.start=t.clientY,c.removalDistance=r.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:r,bottom:i,left:n,right:s}=l.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=n&&t.clientX<=s&&t.clientY>=r&&t.clientY<=i?y():g()}};return u&&h&&(v.onMouseEnter=y,e.stacked||(v.onMouseLeave=g)),p&&(v.onClick=e=>{f&&f(e),c.canCloseOnClick&&d(!0)}),{playToast:g,pauseToast:y,isRunning:n,preventExitTransition:o,toastRef:l,eventHandlers:v}}(e),{closeButton:c,children:u,autoClose:h,onClick:d,type:f,hideProgressBar:y,closeToast:m,transition:w,position:v,className:E,style:A,progressClassName:x,updateId:I,role:T,progress:_,rtl:S,toastId:P,deleteToast:N,isIn:O,isLoading:k,closeOnClick:C,theme:D,ariaLabel:L}=e,U=n("Toastify__toast",`Toastify__toast-theme--${D}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":C}),M=a(E)?E({rtl:S,position:v,type:f,defaultClassName:U}):n(U,E),F=function({theme:e,type:t,isLoading:r,icon:n}){let s=null,o={theme:e,type:t};return!1===n||(a(n)?s=n({...o,isLoading:r}):(0,i.isValidElement)(n)?s=(0,i.cloneElement)(n,o):r?s=B.spinner():R(t)&&(s=B[t](o))),s}(e),$=!!_||!h,j={closeToast:m,type:f,theme:D},H=null;return!1===c||(H=a(c)?c(j):(0,i.isValidElement)(c)?(0,i.cloneElement)(c,j):function({closeToast:e,theme:t,ariaLabel:r="close"}){return i.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":r},i.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},i.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(j)),i.createElement(w,{isIn:O,done:N,position:v,preventExitTransition:r,nodeRef:s,playToast:l},i.createElement("div",{id:P,tabIndex:0,onClick:d,"data-in":O,className:M,...o,style:A,ref:s,...O&&{role:T,"aria-label":L}},null!=F&&i.createElement("div",{className:n("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!k})},F),p(u,e,!t),H,!e.customProgressBar&&i.createElement(g,{...I&&!$?{key:`p-${I}`}:{},rtl:S,theme:D,delay:h,isRunning:t,isIn:O,closeToast:m,hide:y,type:f,className:x,controlledProgress:$,progress:_||0})))},L=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),U=d(L("bounce",!0));d(L("slide",!0)),d(L("zoom")),d(L("flip"));var M={position:"top-right",transition:U,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code};function F(e){let t={...M,...e},r=e.stacked,[o,l]=(0,i.useState)(!0),d=(0,i.useRef)(null),{getToastToRender:p,isToastActive:g,count:y}=function(e){var t;let r;let{subscribe:n,getSnapshot:o,setProps:a}=(0,i.useRef)((r=e.containerId||1,{subscribe(t){let i,n,o,a,l,d,p,g,y,m,v,A;let x=(i=1,n=0,o=[],a=[],l=e,d=new Map,p=new Set,g=()=>{a=Array.from(d.values()),p.forEach(e=>e())},y=({containerId:e,toastId:t,updateId:i})=>{let n=d.has(t)&&null==i;return(e?e!==r:1!==r)||n},m=e=>{var t,r;null==(r=null==(t=e.props)?void 0:t.onClose)||r.call(t,e.removalReason),e.isActive=!1},v=e=>{if(null==e)d.forEach(m);else{let t=d.get(e);t&&m(t)}g()},A=e=>{var t,r;let{toastId:i,updateId:n}=e.props,s=null==n;e.staleId&&d.delete(e.staleId),e.isActive=!0,d.set(i,e),g(),E(f(e,s?"added":"updated")),s&&(null==(r=(t=e.props).onOpen)||r.call(t))},{id:r,props:l,observe:e=>(p.add(e),()=>p.delete(e)),toggle:(e,t)=>{d.forEach(r=>{var i;(null==t||t===r.props.toastId)&&(null==(i=r.toggle)||i.call(r,e))})},removeToast:v,toasts:d,clearQueue:()=>{n-=o.length,o=[]},buildToast:(e,t)=>{if(y(t))return;let{toastId:r,updateId:a,data:p,staleId:m,delay:b}=t,w=null==a;w&&n++;let x={...l,style:l.toastStyle,key:i++,...Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),toastId:r,updateId:a,data:p,isIn:!1,className:c(t.className||l.toastClassName),progressClassName:c(t.progressClassName||l.progressClassName),autoClose:!t.isLoading&&u(t.autoClose,l.autoClose),closeToast(e){d.get(r).removalReason=e,v(r)},deleteToast(){let e=d.get(r);if(null!=e){if(E(f(e,"removed")),d.delete(r),--n<0&&(n=0),o.length>0){A(o.shift());return}g()}}};x.closeButton=l.closeButton,!1===t.closeButton||h(t.closeButton)?x.closeButton=t.closeButton:!0===t.closeButton&&(x.closeButton=!h(l.closeButton)||l.closeButton);let I={content:e,props:x,staleId:m};l.limit&&l.limit>0&&n>l.limit&&w?o.push(I):s(b)?setTimeout(()=>{A(I)},b):A(I)},setProps(e){l=e},setToggle:(e,t)=>{let r=d.get(e);r&&(r.toggle=t)},isToastActive:e=>{var t;return null==(t=d.get(e))?void 0:t.isActive},getSnapshot:()=>a});b.set(r,x);let I=x.observe(t);return w.forEach(e=>T(e.content,e.options)),w=[],()=>{I(),b.delete(r)}},setProps(e){var t;null==(t=b.get(r))||t.setProps(e)},getSnapshot(){var e;return null==(e=b.get(r))?void 0:e.getSnapshot()}})).current;a(e);let l=null==(t=(0,i.useSyncExternalStore)(n,o,o))?void 0:t.slice();return{getToastToRender:function(t){if(!l)return[];let r=new Map;return e.newestOnTop&&l.reverse(),l.forEach(e=>{let{position:t}=e.props;r.has(t)||r.set(t,[]),r.get(t).push(e)}),Array.from(r,e=>t(e[0],e[1]))},isToastActive:I,count:null==l?void 0:l.length}}(t),{className:m,style:v,rtl:A,containerId:x,hotKeys:_}=t;function S(){r&&(l(!0),O.play())}return k(()=>{var e;if(r){let r=d.current.querySelectorAll('[data-in="true"]'),i=null==(e=t.position)?void 0:e.includes("top"),n=0,s=0;Array.from(r).reverse().forEach((e,t)=>{e.classList.add("Toastify__toast--stacked"),t>0&&(e.dataset.collapsed=`${o}`),e.dataset.pos||(e.dataset.pos=i?"top":"bot");let r=n*(o?.2:1)+(o?0:12*t);e.style.setProperty("--y",`${i?r:-1*r}px`),e.style.setProperty("--g","12"),e.style.setProperty("--s",`${1-(o?s:0)}`),n+=e.offsetHeight,s+=.025})}},[o,y,r]),(0,i.useEffect)(()=>{function e(e){var t;let r=d.current;_(e)&&(null==(t=r.querySelector('[tabIndex="0"]'))||t.focus(),l(!1),O.pause()),"Escape"===e.key&&(document.activeElement===r||null!=r&&r.contains(document.activeElement))&&(l(!0),O.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[_]),i.createElement("section",{ref:d,className:"Toastify",id:x,onMouseEnter:()=>{r&&(l(!1),O.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},p((e,t)=>{let s,o=t.length?{...v}:{...v,pointerEvents:"none"};return i.createElement("div",{tabIndex:-1,className:(s=n("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":A}),a(m)?m({position:e,rtl:A,defaultClassName:s}):n(s,c(m))),"data-stacked":r,style:o,key:`c-${e}`},t.map(({content:e,props:t})=>i.createElement(D,{...t,stacked:r,collapseAll:S,isIn:g(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}},2846:function(e,t,r){"use strict";r.d(t,{fl:function(){return _},iv:function(){return c},Ts:function(){return x},Qu:function(){return I}});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let i=globalThis,n=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class a{constructor(e,t,r){if(this._$cssResult$=!0,r!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(n&&void 0===e){let r=void 0!==t&&1===t.length;r&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o.set(t,e))}return e}toString(){return this.cssText}}let l=e=>new a("string"==typeof e?e:e+"",void 0,s),c=(e,...t)=>new a(1===e.length?e[0]:t.reduce((t,r,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[i+1],e[0]),e,s),u=(e,t)=>{if(n)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let r of t){let t=document.createElement("style"),n=i.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=r.cssText,e.appendChild(t)}},h=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(let r of e.cssRules)t+=r.cssText;return l(t)})(e):e,{is:d,defineProperty:f,getOwnPropertyDescriptor:p,getOwnPropertyNames:g,getOwnPropertySymbols:y,getPrototypeOf:m}=Object,b=globalThis,w=b.trustedTypes,v=w?w.emptyScript:"",E=b.reactiveElementPolyfillSupport,A=(e,t)=>e,x={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},I=(e,t)=>!d(e,t),T={attribute:!0,type:String,converter:x,reflect:!1,useDefault:!1,hasChanged:I};Symbol.metadata??=Symbol("metadata"),b.litPropertyMetadata??=new WeakMap;class _ extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=T){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let r=Symbol(),i=this.getPropertyDescriptor(e,r,t);void 0!==i&&f(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){let{get:i,set:n}=p(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:i,set(t){let s=i?.call(this);n?.call(this,t),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??T}static _$Ei(){if(this.hasOwnProperty(A("elementProperties")))return;let e=m(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(A("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(A("properties"))){let e=this.properties;for(let t of[...g(e),...y(e)])this.createProperty(t,e[t])}let e=this[Symbol.metadata];if(null!==e){let t=litPropertyMetadata.get(e);if(void 0!==t)for(let[e,r]of t)this.elementProperties.set(e,r)}for(let[e,t]of(this._$Eh=new Map,this.elementProperties)){let r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e))for(let r of new Set(e.flat(1/0).reverse()))t.unshift(h(r));else void 0!==e&&t.push(h(e));return t}static _$Eu(e,t){let r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map;for(let t of this.constructor.elementProperties.keys())this.hasOwnProperty(t)&&(e.set(t,this[t]),delete this[t]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return u(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){let r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(void 0!==i&&!0===r.reflect){let n=(void 0!==r.converter?.toAttribute?r.converter:x).toAttribute(t,r.type);this._$Em=e,null==n?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(e,t){let r=this.constructor,i=r._$Eh.get(e);if(void 0!==i&&this._$Em!==i){let e=r.getPropertyOptions(i),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:x;this._$Em=i,this[i]=n.fromAttribute(t,e.type)??this._$Ej?.get(i)??null,this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){let i=this.constructor,n=this[e];if(!(((r??=i.getPropertyOptions(e)).hasChanged??I)(n,t)||r.useDefault&&r.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:i,wrapped:n},s){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??t??this[e]),!0!==n||void 0!==s)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===i&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}let e=this.constructor.elementProperties;if(e.size>0)for(let[t,r]of e){let{wrapped:e}=r,i=this[t];!0!==e||this._$AL.has(t)||void 0===i||this.C(t,void 0,r,i)}}let e=!1,t=this._$AL;try{(e=this.shouldUpdate(t))?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}}_.elementStyles=[],_.shadowRootOptions={mode:"open"},_[A("elementProperties")]=new Map,_[A("finalized")]=new Map,E?.({ReactiveElement:_}),(b.reactiveElementVersions??=[]).push("2.1.0")},6699:function(e,t,r){"use strict";r.d(t,{$m:function(){return f},$p:function(){return d},EP:function(){return g},Ev:function(){return s},FL:function(){return h},Fn:function(){return E},IH:function(){return w},Iq:function(){return l},NI:function(){return a},Ou:function(){return u},SD:function(){return m},Vl:function(){return o},Xb:function(){return A},ac:function(){return v},gm:function(){return y},j:function(){return p},m_:function(){return c},mk:function(){return b},pp:function(){return T},u8:function(){return x},zP:function(){return I}});let i=BigInt(4294967296-1),n=BigInt(32);function s(e,t=!1){return t?{h:Number(e&i),l:Number(e>>n&i)}:{h:0|Number(e>>n&i),l:0|Number(e&i)}}function o(e,t=!1){let r=e.length,i=new Uint32Array(r),n=new Uint32Array(r);for(let o=0;o<r;o++){let{h:r,l:a}=s(e[o],t);[i[o],n[o]]=[r,a]}return[i,n]}let a=(e,t,r)=>e>>>r,l=(e,t,r)=>e<<32-r|t>>>r,c=(e,t,r)=>e>>>r|t<<32-r,u=(e,t,r)=>e<<32-r|t>>>r,h=(e,t,r)=>e<<64-r|t>>>r-32,d=(e,t,r)=>e>>>r-32|t<<64-r,f=(e,t)=>t,p=(e,t)=>e,g=(e,t,r)=>e<<r|t>>>32-r,y=(e,t,r)=>t<<r|e>>>32-r,m=(e,t,r)=>t<<r-32|e>>>64-r,b=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}}let v=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),E=(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,A=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),x=(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,I=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0),T=(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0},8183:function(e,t,r){"use strict";r.d(t,{fr:function(){return v}});var i=r(6699),n=r(5341);let s=BigInt(0),o=BigInt(1),a=BigInt(2),l=BigInt(7),c=BigInt(256),u=BigInt(113),h=[],d=[],f=[];for(let e=0,t=o,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],h.push(2*(5*i+r)),d.push((e+1)*(e+2)/2%64);let n=s;for(let e=0;e<7;e++)(t=(t<<o^(t>>l)*u)%c)&a&&(n^=o<<(o<<BigInt(e))-o);f.push(n)}let p=(0,i.Vl)(f,!0),g=p[0],y=p[1],m=(e,t,r)=>r>32?(0,i.SD)(e,t,r):(0,i.EP)(e,t,r),b=(e,t,r)=>r>32?(0,i.mk)(e,t,r):(0,i.gm)(e,t,r);class w extends n.kb{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,(0,n.k8)(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,n.Jq)(this.state)}clone(){return this._cloneInto()}keccak(){(0,n.Ux)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=m(s,o,1)^r[i],l=b(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=d[r],s=m(t,n,i),o=b(t,n,i),a=h[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=g[i],e[1]^=y[i]}(0,n.ru)(r)}(this.state32,this.rounds),(0,n.Ux)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.$h)(this),e=(0,n.O0)(e),(0,n.gk)(e);let{blockLen:t,state:r}=this,i=e.length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,n.$h)(this,!1),(0,n.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,n.ru)(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new w(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let v=(0,n.V1)(()=>new w(136,1,32))},5341:function(e,t,r){"use strict";r.d(t,{kb:function(){return O},gk:function(){return o},$h:function(){return l},z3:function(){return a},k8:function(){return s},eB:function(){return c},ci:function(){return E},U5:function(){return N},ru:function(){return h},eV:function(){return P},V1:function(){return k},WV:function(){return C},GL:function(){return d},nr:function(){return I},_t:function(){return n},A0:function(){return S},O6:function(){return B},XG:function(){return p},np:function(){return f},Ux:function(){return b},N$:function(){return m},O0:function(){return _},Jq:function(){return u}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function o(e,...t){if(!n(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");s(e.outputLen),s(e.blockLen)}function l(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function c(e,t){o(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function u(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function h(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function d(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function f(e,t){return e<<32-t|e>>>t}function p(e,t){return e<<t|e>>>32-t>>>0}let g=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function y(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}let m=g?e=>e:e=>y(e),b=g?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=y(e[t]);return e},w="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,v=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function E(e){if(o(e),w)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=v[e[r]];return t}let A={_0:48,_9:57,A:65,F:70,a:97,f:102};function x(e){return e>=A._0&&e<=A._9?e-A._0:e>=A.A&&e<=A.F?e-(A.A-10):e>=A.a&&e<=A.f?e-(A.a-10):void 0}function I(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(w)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=x(e.charCodeAt(n)),s=x(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function T(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function _(e){return"string"==typeof e&&(e=T(e)),o(e),e}function S(e){return"string"==typeof e&&(e=T(e)),o(e),e}function P(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];o(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}function N(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options should be object or undefined");return Object.assign(e,t)}class O{}function k(e){let t=t=>e().update(_(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function C(e){let t=(t,r)=>e(r).update(_(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function B(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return Uint8Array.from(i.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}},2349:function(e,t,r){"use strict";r.d(t,{jv:function(){return d},TI:function(){return g},Os:function(){return f},hB:function(){return p}});var i=r(5655),n=r(2265),s=r(8003),o=r(7437);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let a=new Set(["children","localName","ref","style","className"]),l=new WeakMap,c=(e,t,r,i,n)=>{let s,o;let a=n?.[t];void 0===a?(e[t]=r,null==r&&t in HTMLElement.prototype&&e.removeAttribute(t)):r!==i&&(void 0===(s=l.get(e))&&l.set(e,s=new Map),o=s.get(a),void 0!==r?void 0===o?(s.set(a,o={handleEvent:r}),e.addEventListener(a,o)):o.handleEvent=r:void 0!==o&&(s.delete(a),e.removeEventListener(a,o)))};r(7844),r(2784);var u=(0,n.createContext)(void 0),h=({children:e,dAppKit:t})=>{let[r,a]=(0,n.useState)(t.wallet.state.address),[l,c]=(0,n.useState)(t.wallet.state.accountDomain),[h,d]=(0,n.useState)(t.wallet.state.isAccountDomainLoading),[f,p]=(0,n.useState)(t.wallet.state.source),[g,y]=(0,n.useState)(t.wallet.state.connectionCertificate);(0,n.useEffect)(()=>{let e=(0,s.VW)(t.wallet.state,"address",e=>{a(e)}),r=(0,s.VW)(t.wallet.state,"accountDomain",e=>{c(e)}),i=(0,s.VW)(t.wallet.state,"isAccountDomainLoading",e=>{d(e)}),n=(0,s.VW)(t.wallet.state,"source",e=>{p(e)}),o=(0,s.VW)(t.wallet.state,"connectionCertificate",e=>{y(e)});return()=>{e(),r(),i(),n(),o()}},[t.wallet.state]);let m=(0,n.useCallback)(()=>{i.ly.modal.open()},[]),b=(0,n.useCallback)(()=>{i.ly.modal.close()},[]),w=(0,n.useCallback)(e=>i.ly.modal.onConnectionStatusChange(e),[]),v=(0,n.useMemo)(()=>({thor:t.thor,wallet:{setSource:t.wallet.setSource,disconnect:t.wallet.disconnect,connect:t.wallet.connect,signer:t.signer,availableWallets:t.wallet.state.availableSources,account:r,accountDomain:l,isAccountDomainLoading:h,source:f,connectionCertificate:g,requestCertificate:t.wallet.signCert,requestTransaction:t.wallet.signTx,requestTypedData:t.wallet.signTypedData},modal:{open:m,close:b,onConnectionStatusChange:w}}),[t,r,l,h,f,g,m,b,w]);return(0,o.jsx)(u.Provider,{value:v,children:e})},d=({children:e,node:t,walletConnectOptions:r,usePersistence:s=!1,logLevel:a,requireCertificate:l,themeVariables:c,themeMode:u,i18n:d,language:f,modalParent:p,onSourceClick:g,connectionCertificate:y,allowedWallets:m})=>{let[b,w]=(0,n.useState)(null);return(0,n.useEffect)(()=>{w(i.ly.configure({node:t,walletConnectOptions:r,usePersistence:s,logLevel:a,requireCertificate:l,themeVariables:c,themeMode:u,i18n:d,language:f,modalParent:p,onSourceClick:g,connectionCertificate:y,allowedWallets:m}))},[t,r,s,a,l,c,u,d,f,p,g,y,m]),b?(0,o.jsx)(h,{dAppKit:b,children:e}):null},f=()=>{let e=(0,n.useContext)(u);if(!e)throw Error('"useWallet" must be used within a DAppKitProvider');return e.wallet},p=()=>{let e=(0,n.useContext)(u);if(!e)throw Error('"useWalletModal" must be used within a ConnexProvider');return e.modal},g=(({react:e,tagName:t,elementClass:r,events:i,displayName:n})=>{let s=new Set(Object.keys(i??{})),o=e.forwardRef((n,o)=>{let l=e.useRef(new Map),u=e.useRef(null),h={},d={};for(let[e,t]of Object.entries(n))a.has(e)?h["className"===e?"class":e]=t:s.has(e)||e in r.prototype?d[e]=t:h[e]=t;return e.useLayoutEffect(()=>{if(null===u.current)return;let e=new Map;for(let t in d)c(u.current,t,n[t],l.current.get(t),i),l.current.delete(t),e.set(t,n[t]);for(let[e,t]of l.current)c(u.current,e,void 0,t,i);l.current=e}),e.useLayoutEffect(()=>{u.current?.removeAttribute("defer-hydration")},[]),h.suppressHydrationWarning=!0,e.createElement(t,{...h,ref:e.useCallback(e=>{u.current=e,"function"==typeof o?o(e):null!==o&&(o.current=e)},[o])})});return o.displayName=n??r.name,o})({tagName:"vdk-button",elementClass:i.zx,react:n})},2784:function(e,t,r){"use strict";let i,n,s,o,a,l,c,u,h,d,f,p,g,y,m,b;r.d(t,{ny:function(){return xR},o7:function(){return xd},Yo:function(){return xN}});var w,v,E,A={};r.r(A),r.d(A,{dQ:function(){return nJ},ci:function(){return nH},bytesToNumberBE:function(){return nG},ty:function(){return nq},eV:function(){return nY},n$:function(){return n0},ql:function(){return nQ},hexToBytes:function(){return nz},tL:function(){return nK},S5:function(){return nW},FF:function(){return n2}});var x={};r.r(x),r.d(x,{identity:function(){return pn}});var I={};r.r(I),r.d(I,{base2:function(){return ps}});var T={};r.r(T),r.d(T,{base8:function(){return po}});var _={};r.r(_),r.d(_,{base10:function(){return pa}});var S={};r.r(S),r.d(S,{base16:function(){return pl},base16upper:function(){return pc}});var P={};r.r(P),r.d(P,{base32:function(){return pu},base32hex:function(){return pp},base32hexpad:function(){return py},base32hexpadupper:function(){return pm},base32hexupper:function(){return pg},base32pad:function(){return pd},base32padupper:function(){return pf},base32upper:function(){return ph},base32z:function(){return pb}});var N={};r.r(N),r.d(N,{base36:function(){return pw},base36upper:function(){return pv}});var O={};r.r(O),r.d(O,{base58btc:function(){return pE},base58flickr:function(){return pA}});var k={};r.r(k),r.d(k,{base64:function(){return px},base64pad:function(){return pI},base64url:function(){return pT},base64urlpad:function(){return p_}});var C={};r.r(C),r.d(C,{base256emoji:function(){return pO}});var B={};r.r(B),r.d(B,{sha256:function(){return pH},sha512:function(){return pV}});var R={};r.r(R),r.d(R,{identity:function(){return pz}});var D={};r.r(D),r.d(D,{code:function(){return pq},decode:function(){return pW},encode:function(){return pK},name:function(){return pG}});var L={};r.r(L),r.d(L,{code:function(){return pZ},decode:function(){return p0},encode:function(){return pX},name:function(){return pJ}});var U=r(632),M=r(7844),F=r(8206),$=r.n(F);function j(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function H(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function V(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function z(e,t){H(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let G=BigInt(4294967296-1),q=BigInt(32);function K(e,t=!1){return t?{h:Number(e&G),l:Number(e>>q&G)}:{h:0|Number(e>>q&G),l:0|Number(e&G)}}function W(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=K(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}let Q=(e,t,r)=>e<<r|t>>>32-r,Y=(e,t,r)=>t<<r|e>>>32-r,J=(e,t,r)=>t<<r-32|e>>>64-r,Z=(e,t,r)=>e<<r-32|t>>>64-r;var X={fromBig:K,split:W,toBig:(e,t)=>BigInt(e>>>0)<<q|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:Q,rotlSL:Y,rotlBH:J,rotlBL:Z,add:function(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)};let ee="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,et=e=>e instanceof Uint8Array,er=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ei=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),en=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function es(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!et(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}class eo{clone(){return this._cloneInto()}}function ea(e){let t=t=>e().update(es(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function el(e=32){if(ee&&"function"==typeof ee.getRandomValues)return ee.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}let[ec,eu,eh]=[[],[],[]],ed=BigInt(0),ef=BigInt(1),ep=BigInt(2),eg=BigInt(7),ey=BigInt(256),em=BigInt(113);for(let e=0,t=ef,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],ec.push(2*(5*i+r)),eu.push((e+1)*(e+2)/2%64);let n=ed;for(let e=0;e<7;e++)(t=(t<<ef^(t>>eg)*em)%ey)&ep&&(n^=ef<<(ef<<BigInt(e))-ef);eh.push(n)}let[eb,ew]=W(eh,!0),ev=(e,t,r)=>r>32?J(e,t,r):Q(e,t,r),eE=(e,t,r)=>r>32?Z(e,t,r):Y(e,t,r);class eA extends eo{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,j(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=er(this.state)}keccak(){!function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=ev(s,o,1)^r[i],l=eE(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=eu[r],s=ev(t,n,i),o=eE(t,n,i),a=ec[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=eb[i],e[1]^=ew[i]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){V(this);let{blockLen:t,state:r}=this,i=(e=es(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){V(this,!1),H(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return j(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(z(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new eA(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let ex=ea(()=>new eA(136,1,32));async function eI(e){let t=Object.keys(e);return(await Promise.all(t.map(t=>Promise.resolve(e[t])))).reduce((e,r,i)=>(e[t[i]]=r,e),{})}function eT(e,t,r){for(let i in t){let n=t[i],s=r?r[i]:null;s&&function(e,t,r){let i=t.split("|").map(e=>e.trim());for(let r=0;r<i.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let n=Error(`invalid value for type ${t}`);throw n.code="INVALID_ARGUMENT",n.argument=`value.${r}`,n.value=e,n}(n,s,i),Object.defineProperty(e,i,{enumerable:!0,value:n,writable:!1})}}function e_(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(e_).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let i=0;i<e.length;i++)r+=t[e[i]>>4]+t[15&e[i]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return e_(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let t=Object.keys(e);return t.sort(),"{ "+t.map(t=>`${e_(t)}: ${e_(e[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function eS(e,t){return e&&e.code===t}function eP(e){return eS(e,"CALL_EXCEPTION")}function eN(e,t,r){let i,n=e;{let i=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${e_(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];i.push(e+"="+e_(t))}}i.push(`code=${t}`),i.push("version=6.13.4"),i.length&&(e+=" ("+i.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":i=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=RangeError(e);break;default:i=Error(e)}return eT(i,{code:t}),r&&Object.assign(i,r),null==i.shortMessage&&eT(i,{shortMessage:n}),i}function eO(e,t,r,i){if(!e)throw eN(t,r,i)}function ek(e,t,r,i){eO(e,t,"INVALID_ARGUMENT",{argument:r,value:i})}function eC(e,t,r){null==r&&(r=""),r&&(r=": "+r),eO(e>=t,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),eO(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}let eB=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);function eR(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),eO(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function eD(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let i=0;i<t.length;i++)t[i]=parseInt(e.substring(r,r+2),16),r+=2;return t}ek(!1,"invalid BytesLike value",t||"value",e)}function eL(e,t){return eD(e,t,!1)}function eU(e,t){return eD(e,t,!0)}function eM(e,t){return!!("string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/))&&("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0)}function eF(e){return eM(e,!0)||e instanceof Uint8Array}let e$="0123456789abcdef";function ej(e){let t=eL(e),r="0x";for(let e=0;e<t.length;e++){let i=t[e];r+=e$[(240&i)>>4]+e$[15&i]}return r}function eH(e){return"0x"+e.map(e=>ej(e).substring(2)).join("")}function eV(e){return eM(e,!0)?(e.length-2)/2:eL(e).length}function ez(e,t,r){let i=eL(e);return null!=r&&r>i.length&&eO(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:r}),ej(i.slice(null==t?0:t,null==r?i.length:r))}function eG(e,t,r){let i=eL(e);eO(t>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:t,offset:t+1});let n=new Uint8Array(t);return n.fill(0),r?n.set(i,t-i.length):n.set(i,0),ej(n)}function eq(e,t){return eG(e,t,!0)}let eK=!1,eW=function(e){return ex(e)},eQ=eW;function eY(e){let t=eL(e,"data");return ej(eQ(t))}function eJ(e,t,r,i,n){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let i=t+1;i<r.length&&r[i]>>6==2;i++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}eY._=eW,eY.lock=function(){eK=!0},eY.register=function(e){if(eK)throw TypeError("keccak256 is locked");eQ=e},Object.freeze(eY);let eZ=Object.freeze({error:function(e,t,r,i,n){ek(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:eJ,replace:function(e,t,r,i,n){return"OVERLONG"===e?(ek("number"==typeof n,"invalid bad code point for replacement","badCodepoint",n),i.push(n),0):(i.push(65533),eJ(e,t,r,i,n))}});function eX(e,t){ek("string"==typeof e,"invalid string value","str",e),null!=t&&(eO(eB.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}}),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if((64512&i)==55296){t++;let n=e.charCodeAt(t);ek(t<e.length&&(64512&n)==56320,"invalid surrogate pair","str",e);let s=65536+((1023&i)<<10)+(1023&n);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return new Uint8Array(r)}function e0(e,t){return(function(e,t){null==t&&(t=eZ.error);let r=eL(e,"bytes"),i=[],n=0;for(;n<r.length;){let e=r[n++];if(e>>7==0){i.push(e);continue}let s=null,o=null;if((224&e)==192)s=1,o=127;else if((240&e)==224)s=2,o=2047;else if((248&e)==240)s=3,o=65535;else{(192&e)==128?n+=t("UNEXPECTED_CONTINUE",n-1,r,i):n+=t("BAD_PREFIX",n-1,r,i);continue}if(n-1+s>=r.length){n+=t("OVERRUN",n-1,r,i);continue}let a=e&(1<<8-s-1)-1;for(let e=0;e<s;e++){let e=r[n];if((192&e)!=128){n+=t("MISSING_CONTINUE",n,r,i),a=null;break}a=a<<6|63&e,n++}if(null!==a){if(a>1114111){n+=t("OUT_OF_RANGE",n-1-s,r,i,a);continue}if(a>=55296&&a<=57343){n+=t("UTF16_SURROGATE",n-1-s,r,i,a);continue}if(a<=o){n+=t("OVERLONG",n-1-s,r,i,a);continue}i.push(a)}}return i})(e,t).map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10&1023)+55296,(1023&e)+56320)).join("")}function e1(e){return eY(eX(e))}let e2=BigInt(0),e3=BigInt(1);function e4(e,t){let r=e5(e,"value"),i=BigInt(te(t,"width")),n=e3<<i-e3;return r<e2?(eO((r=-r)<=n,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(e3<<i)-e3)+e3):(eO(r<n,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)}function e8(e,t){return e6(e,"value")&(e3<<BigInt(te(t,"bits")))-e3}function e5(e,t){switch(typeof e){case"bigint":return e;case"number":return ek(Number.isInteger(e),"underflow",t||"value",e),ek(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(r){ek(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}ek(!1,"invalid BigNumberish value",t||"value",e)}function e6(e,t){let r=e5(e,t);return eO(r>=e2,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}let e7="0123456789abcdef";function e9(e){if(e instanceof Uint8Array){let t="0x0";for(let r of e)t+=e7[r>>4]+e7[15&r];return BigInt(t)}return e5(e)}function te(e,t){switch(typeof e){case"bigint":return ek(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),Number(e);case"number":return ek(Number.isInteger(e),"underflow",t||"value",e),ek(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return te(BigInt(e),t)}catch(r){ek(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}ek(!1,"invalid numeric value",t||"value",e)}function tt(e,t){let r=e6(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let i=te(t,"width");for(eO(2*i>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*i;)r="0"+r}return"0x"+r}function tr(e){let t=e6(e,"value");if(t===e2)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let i=new Uint8Array(r.length/2);for(let e=0;e<i.length;e++){let t=2*e;i[e]=parseInt(r.substring(t,t+2),16)}return i}function ti(e){let t=ej(eF(e)?e:tr(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}let tn=new Uint8Array(32),ts=["then"],to={},ta=new WeakMap;function tl(e){return ta.get(e)}function tc(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}class tu extends Array{#e;constructor(...e){var t,r;let i=e[0],n=e[1],s=(e[2]||[]).slice(),o=!0;i!==to&&(n=e,s=[],o=!1),super(n.length),n.forEach((e,t)=>{this[t]=e});let a=s.reduce((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(t=Object.freeze(n.map((e,t)=>{let r=s[t];return null!=r&&1===a.get(r)?r:null})),ta.set(this,t),this.#e=[],null==this.#e&&this.#e,!o)return;Object.freeze(this);let l=new Proxy(this,{get:(e,t,r)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){let r=te(t,"%index");if(r<0||r>=this.length)throw RangeError("out of result range");let i=e[r];return i instanceof Error&&tc(`index ${r}`,i),i}if(ts.indexOf(t)>=0)return Reflect.get(e,t,r);let i=e[t];if(i instanceof Function)return function(...t){return i.apply(this===r?e:this,t)};if(!(t in e))return e.getValue.apply(this===r?e:this,[t])}return Reflect.get(e,t,r)}});return r=tl(this),ta.set(l,r),l}toArray(e){let t=[];return this.forEach((r,i)=>{r instanceof Error&&tc(`index ${i}`,r),e&&r instanceof tu&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){let t=tl(this);return t.reduce((r,i,n)=>(eO(null!=i,`value at index ${n} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function e(t,r,i){return t.indexOf(null)>=0?r.map((t,r)=>t instanceof tu?e(tl(t),t,i):t):t.reduce((t,n,s)=>{let o=r.getValue(n);return n in t||(i&&o instanceof tu&&(o=e(tl(o),o,i)),t[n]=o),t},{})}(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);let r=tl(this),i=[],n=[];for(let s=e;s<t;s++)i.push(this[s]),n.push(r[s]);return new tu(to,i,n)}filter(e,t){let r=tl(this),i=[],n=[];for(let s=0;s<this.length;s++){let o=this[s];o instanceof Error&&tc(`index ${s}`,o),e.call(t,o,s,this)&&(i.push(o),n.push(r[s]))}return new tu(to,i,n)}map(e,t){let r=[];for(let i=0;i<this.length;i++){let n=this[i];n instanceof Error&&tc(`index ${i}`,n),r.push(e.call(t,n,i,this))}return r}getValue(e){let t=tl(this).indexOf(e);if(-1===t)return;let r=this[t];return r instanceof Error&&tc(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new tu(to,e,t)}}function th(e){let t=tr(e);return eO(t.length<=32,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:32,offset:t.length}),32!==t.length&&(t=eU(eH([tn.slice(t.length%32),t]))),t}class td{name;type;localName;dynamic;constructor(e,t,r,i){eT(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){ek(!1,e,this.localName,t)}}class tf{#t;#r;constructor(){this.#t=[],this.#r=0}get data(){return eH(this.#t)}get length(){return this.#r}#i(e){return this.#t.push(e),this.#r+=e.length,e.length}appendWriter(e){return this.#i(eU(e.data))}writeBytes(e){let t=eU(e),r=t.length%32;return r&&(t=eU(eH([t,tn.slice(r)]))),this.#i(t)}writeValue(e){return this.#i(th(e))}writeUpdatableValue(){let e=this.#t.length;return this.#t.push(tn),this.#r+=32,t=>{this.#t[e]=th(t)}}}class tp{allowLoose;#t;#n;#s;#o;#a;constructor(e,t,r){eT(this,{allowLoose:!!t}),this.#t=eU(e),this.#s=0,this.#o=null,this.#a=null!=r?r:1024,this.#n=0}get data(){return ej(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#n}get bytes(){return new Uint8Array(this.#t)}#l(e){if(this.#o)return this.#o.#l(e);this.#s+=e,eO(this.#a<1||this.#s<=this.#a*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#a} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:eU(this.#t),offset:this.#n,length:e,info:{bytesRead:this.#s,dataLength:this.dataLength}})}#c(e,t,r){let i=32*Math.ceil(t/32);return this.#n+i>this.#t.length&&(this.allowLoose&&r&&this.#n+t<=this.#t.length?i=t:eO(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:eU(this.#t),length:this.#t.length,offset:this.#n+i})),this.#t.slice(this.#n,this.#n+i)}subReader(e){let t=new tp(this.#t.slice(this.#n+e),this.allowLoose,this.#a);return t.#o=this,t}readBytes(e,t){let r=this.#c(0,e,!!t);return this.#l(e),this.#n+=r.length,r.slice(0,e)}readValue(){return e9(this.readBytes(32))}readIndex(){return te(e9(this.readBytes(32)))}}let tg=BigInt(0),ty=BigInt(36);function tm(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let i=eL(eY(r));for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&i[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let tb={};for(let e=0;e<10;e++)tb[String(e)]=String(e);for(let e=0;e<26;e++)tb[String.fromCharCode(65+e)]=String(10+e);let tw=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function tv(e){if(ek("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=tm(e);return ek(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ek(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>tb[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=tg;for(let r=0;r<e.length;r++)t=t*ty+tw[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return tm("0x"+t)}ek(!1,"invalid address","address",e)}let tE={};function tA(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new tT(tE,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function tx(e,t){return new tT(tE,`bytes${t||""}`,e,{size:t})}let tI=Symbol.for("_ethers_typed");class tT{type;value;#u;_typedSymbol;constructor(e,t,r,i){null==i&&(i=null),eR(tE,e,"Typed"),eT(this,{_typedSymbol:tI,type:t,value:r}),this.#u=i,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#u}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#u?-1:!1===this.#u?this.value.length:null}static from(e,t){return new tT(tE,e,t)}static uint8(e){return tA(e,8)}static uint16(e){return tA(e,16)}static uint24(e){return tA(e,24)}static uint32(e){return tA(e,32)}static uint40(e){return tA(e,40)}static uint48(e){return tA(e,48)}static uint56(e){return tA(e,56)}static uint64(e){return tA(e,64)}static uint72(e){return tA(e,72)}static uint80(e){return tA(e,80)}static uint88(e){return tA(e,88)}static uint96(e){return tA(e,96)}static uint104(e){return tA(e,104)}static uint112(e){return tA(e,112)}static uint120(e){return tA(e,120)}static uint128(e){return tA(e,128)}static uint136(e){return tA(e,136)}static uint144(e){return tA(e,144)}static uint152(e){return tA(e,152)}static uint160(e){return tA(e,160)}static uint168(e){return tA(e,168)}static uint176(e){return tA(e,176)}static uint184(e){return tA(e,184)}static uint192(e){return tA(e,192)}static uint200(e){return tA(e,200)}static uint208(e){return tA(e,208)}static uint216(e){return tA(e,216)}static uint224(e){return tA(e,224)}static uint232(e){return tA(e,232)}static uint240(e){return tA(e,240)}static uint248(e){return tA(e,248)}static uint256(e){return tA(e,256)}static uint(e){return tA(e,256)}static int8(e){return tA(e,-8)}static int16(e){return tA(e,-16)}static int24(e){return tA(e,-24)}static int32(e){return tA(e,-32)}static int40(e){return tA(e,-40)}static int48(e){return tA(e,-48)}static int56(e){return tA(e,-56)}static int64(e){return tA(e,-64)}static int72(e){return tA(e,-72)}static int80(e){return tA(e,-80)}static int88(e){return tA(e,-88)}static int96(e){return tA(e,-96)}static int104(e){return tA(e,-104)}static int112(e){return tA(e,-112)}static int120(e){return tA(e,-120)}static int128(e){return tA(e,-128)}static int136(e){return tA(e,-136)}static int144(e){return tA(e,-144)}static int152(e){return tA(e,-152)}static int160(e){return tA(e,-160)}static int168(e){return tA(e,-168)}static int176(e){return tA(e,-176)}static int184(e){return tA(e,-184)}static int192(e){return tA(e,-192)}static int200(e){return tA(e,-200)}static int208(e){return tA(e,-208)}static int216(e){return tA(e,-216)}static int224(e){return tA(e,-224)}static int232(e){return tA(e,-232)}static int240(e){return tA(e,-240)}static int248(e){return tA(e,-248)}static int256(e){return tA(e,-256)}static int(e){return tA(e,-256)}static bytes1(e){return tx(e,1)}static bytes2(e){return tx(e,2)}static bytes3(e){return tx(e,3)}static bytes4(e){return tx(e,4)}static bytes5(e){return tx(e,5)}static bytes6(e){return tx(e,6)}static bytes7(e){return tx(e,7)}static bytes8(e){return tx(e,8)}static bytes9(e){return tx(e,9)}static bytes10(e){return tx(e,10)}static bytes11(e){return tx(e,11)}static bytes12(e){return tx(e,12)}static bytes13(e){return tx(e,13)}static bytes14(e){return tx(e,14)}static bytes15(e){return tx(e,15)}static bytes16(e){return tx(e,16)}static bytes17(e){return tx(e,17)}static bytes18(e){return tx(e,18)}static bytes19(e){return tx(e,19)}static bytes20(e){return tx(e,20)}static bytes21(e){return tx(e,21)}static bytes22(e){return tx(e,22)}static bytes23(e){return tx(e,23)}static bytes24(e){return tx(e,24)}static bytes25(e){return tx(e,25)}static bytes26(e){return tx(e,26)}static bytes27(e){return tx(e,27)}static bytes28(e){return tx(e,28)}static bytes29(e){return tx(e,29)}static bytes30(e){return tx(e,30)}static bytes31(e){return tx(e,31)}static bytes32(e){return tx(e,32)}static address(e){return new tT(tE,"address",e)}static bool(e){return new tT(tE,"bool",!!e)}static bytes(e){return new tT(tE,"bytes",e)}static string(e){return new tT(tE,"string",e)}static array(e,t){throw Error("not implemented yet")}static tuple(e,t){throw Error("not implemented yet")}static overrides(e){return new tT(tE,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===tI}static dereference(e,t){if(tT.isTyped(e)){if(e.type!==t)throw Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class t_ extends td{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=tT.dereference(t,"string");try{r=tv(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return tv(tt(e.readValue(),20))}}class tS extends td{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function tP(e,t,r){let i=[];if(Array.isArray(r))i=r;else if(r&&"object"==typeof r){let e={};i=t.map(t=>{let i=t.localName;return eO(i,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),eO(!e[i],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),e[i]=!0,r[i]})}else ek(!1,"invalid tuple value","tuple",r);ek(t.length===i.length,"types/value length mismatch","tuple",r);let n=new tf,s=new tf,o=[];return t.forEach((e,t)=>{let r=i[t];if(e.dynamic){let t=s.length;e.encode(s,r);let i=n.writeUpdatableValue();o.push(e=>{i(e+t)})}else e.encode(n,r)}),o.forEach(e=>{e(n.length)}),e.appendWriter(n)+e.appendWriter(s)}function tN(e,t){let r=[],i=[],n=e.subReader(0);return t.forEach(t=>{let s=null;if(t.dynamic){let r=e.readIndex(),i=n.subReader(r);try{s=t.decode(i)}catch(e){if(eS(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if(eS(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}if(void 0==s)throw Error("investigate");r.push(s),i.push(t.localName||null)}),tu.fromItems(r,i)}class tO extends td{coder;length;constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),eT(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let r=tT.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;-1===i&&(i=r.length,e.writeValue(r.length)),eC(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<r.length;e++)n.push(this.coder);return tP(e,n,r)}decode(e){let t=this.length;-1===t&&eO(32*(t=e.readIndex())<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:32*t,length:e.dataLength});let r=[];for(let e=0;e<t;e++)r.push(new tS(this.coder));return tN(e,r)}}class tk extends td{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let r=tT.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class tC extends td{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){return t=eU(t),e.writeValue(t.length)+e.writeBytes(t)}decode(e){return e.readBytes(e.readIndex(),!0)}}class tB extends tC{constructor(e){super("bytes",e)}decode(e){return ej(super.decode(e))}}class tR extends td{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),eT(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=eU(tT.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return ej(e.readBytes(this.size))}}let tD=new Uint8Array([]);class tL extends td{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(tD)}decode(e){return e.readBytes(0),null}}let tU=BigInt(0),tM=BigInt(1),tF=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class t$ extends td{size;signed;constructor(e,t,r){let i=(t?"int":"uint")+8*e;super(i,i,r,!1),eT(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=e5(tT.dereference(t,this.type)),i=e8(tF,256);if(this.signed){let e=e8(i,8*this.size-1);(r>e||r<-(e+tM))&&this._throwError("value out-of-bounds",t),r=e4(r,256)}else(r<tU||r>e8(i,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=e8(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){let r=e6(e,"value"),i=BigInt(te(t,"width"));return(eO(r>>i===e2,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>i-e3)?-((~r&(e3<<i)-e3)+e3):r}(t,8*this.size)),t}}class tj extends tC{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,eX(tT.dereference(t,"string")))}decode(e){return e0(super.decode(e))}}class tH extends td{coders;constructor(e,t){let r=!1,i=[];e.forEach(e=>{e.dynamic&&(r=!0),i.push(e.type)}),super("tuple","tuple("+i.join(",")+")",t,r),eT(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,i)=>{let n=r.localName;n&&1===t[n]&&("length"===n&&(n="_length"),null==e[n]&&(e[n]=e[i]))}),Object.freeze(e)}encode(e,t){let r=tT.dereference(t,"tuple");return tP(e,this.coders,r)}decode(e){return tN(e,this.coders)}}function tV(e){let t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}let tz=tV("external public payable override".split(" ")),tG="constant external internal payable private public pure view override",tq=tV(tG.split(" ")),tK="constructor error event fallback function receive struct",tW=tV(tK.split(" ")),tQ="calldata memory storage payable indexed",tY=tV(tQ.split(" ")),tJ=tV([tK,tQ,"tuple returns",tG].join(" ").split(" ")),tZ={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},tX=RegExp("^(\\s*)"),t0=RegExp("^([0-9]+)"),t1=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),t2=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),t3=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class t4{#n;#h;get offset(){return this.#n}get length(){return this.#h.length-this.#n}constructor(e){this.#n=0,this.#h=e.slice()}clone(){return new t4(this.#h)}reset(){this.#n=0}#d(e=0,t=0){return new t4(this.#h.slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}popKeyword(e){let t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=this.#d(this.#n+1,e.match+1);return this.#n=e.match+1,t}popParams(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=[];for(;this.#n<e.match-1;){let e=this.peek().linkNext;t.push(this.#d(this.#n+1,e)),this.#n=e}return this.#n=e.match+1,t}peek(){if(this.#n>=this.#h.length)throw Error("out-of-bounds");return this.#h[this.#n]}peekKeyword(e){let t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#n++,e}toString(){let e=[];for(let t=this.#n;t<this.#h.length;t++){let r=this.#h[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function t8(e){let t=[],r=t=>{let r=s<e.length?JSON.stringify(e[s]):"$EOI";throw Error(`invalid token ${r} at ${s}: ${t}`)},i=[],n=[],s=0;for(;s<e.length;){let o=e.substring(s),a=o.match(tX);a&&(s+=a[1].length,o=e.substring(s));let l={depth:i.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let c=tZ[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,"OPEN_PAREN"===c)i.push(t.length-1),n.push(t.length-1);else if("CLOSE_PAREN"==c)0===i.length&&r("no matching open bracket"),l.match=i.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=n.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===c)l.linkBack=n.pop(),t[l.linkBack].linkNext=t.length-1,n.push(t.length-1);else if("OPEN_BRACKET"===c)l.type="BRACKET";else if("CLOSE_BRACKET"===c){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){let r=t.pop().text;e=r+e,t[t.length-1].value=te(r)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw Error("missing opening bracket");t[t.length-1].text+=e}continue}if(a=o.match(t1)){if(l.text=a[1],s+=l.text.length,tJ.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(t3)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(t0)){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new t4(t.map(e=>Object.freeze(e)))}function t5(e,t){let r=[];for(let i in t.keys())e.has(i)&&r.push(i);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function t6(e,t){if(t.peekKeyword(tW)){let r=t.pop().text;if(r!==e)throw Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function t7(e,t){let r=new Set;for(;;){let i=e.peekType("KEYWORD");if(null==i||t&&!t.has(i))break;if(e.pop(),r.has(i))throw Error(`duplicate keywords: ${JSON.stringify(i)}`);r.add(i)}return Object.freeze(r)}function t9(e){let t=t7(e,tq);return(t5(t,tV("constant payable nonpayable".split(" "))),t5(t,tV("pure view payable nonpayable".split(" "))),t.has("view"))?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function re(e,t){return e.popParams().map(e=>rp.from(e,t))}function rt(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return e5(e.pop().text);throw Error("invalid gas")}return null}function rr(e){if(e.length)throw Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}let ri=new RegExp(/^(.*)\[([0-9]*)\]$/);function rn(e){let t=e.match(t3);if(ek(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){let r=parseInt(t[2]);ek(0!==r&&r<=32,"invalid bytes length","type",e)}else if(t[3]){let r=parseInt(t[3]);ek(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",e)}return e}let rs={},ro=Symbol.for("_ethers_internal"),ra="_ParamTypeInternal",rl="_ErrorInternal",rc="_EventInternal",ru="_ConstructorInternal",rh="_FallbackInternal",rd="_FunctionInternal",rf="_StructInternal";class rp{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,i,n,s,o,a){if(eR(e,rs,"ParamType"),Object.defineProperty(this,ro,{value:ra}),s&&(s=Object.freeze(s.slice())),"array"===i){if(null==o||null==a)throw Error("")}else if(null!=o||null!=a)throw Error("");if("tuple"===i){if(null==s)throw Error("")}else if(null!=s)throw Error("");eT(this,{name:t,type:r,baseType:i,indexed:n,components:s,arrayLength:o,arrayChildren:a})}format(e){if(null==e&&(e="sighash"),"json"===e){let t=this.name||"";if(this.isArray()){let e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?t+=this.arrayChildren.format(e)+`[${this.arrayLength<0?"":String(this.arrayLength)}]`:this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return e.map(e=>r.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw Error("invalid tuple value");if(e.length!==this.components.length)throw Error("array is wrong length");let r=this;return e.map((e,i)=>r.components[i].walk(e,t))}return t(this.type,e)}#f(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let n=this.arrayChildren,s=t.slice();s.forEach((t,i)=>{n.#f(e,t,r,e=>{s[i]=e})}),i(s);return}if(this.isTuple()){let n;let s=this.components;if(Array.isArray(t))n=t.slice();else{if(null==t||"object"!=typeof t)throw Error("invalid tuple value");n=s.map(e=>{if(!e.name)throw Error("cannot use object value with unnamed components");if(!(e.name in t))throw Error(`missing value for component ${e.name}`);return t[e.name]})}if(n.length!==this.components.length)throw Error("array is wrong length");n.forEach((t,i)=>{s[i].#f(e,t,r,e=>{n[i]=e})}),i(n);return}let n=r(this.type,t);n.then?e.push(async function(){i(await n)}()):i(n)}async walkAsync(e,t){let r=[],i=[e];return this.#f(r,e,t,e=>{i[0]=e}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(rp.isParamType(e))return e;if("string"==typeof e)try{return rp.from(t8(e),t)}catch(t){ek(!1,"invalid param type","obj",e)}else if(e instanceof t4){let r="",i="",n=null;t7(e,tV(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(i="tuple",n=e.popParams().map(e=>rp.from(e)),r=`tuple(${n.map(e=>e.format()).join(",")})`):i=r=rn(e.popType("TYPE"));let s=null,o=null;for(;e.length&&e.peekType("BRACKET");){let t=e.pop();s=new rp(rs,"",r,i,null,n,o,s),o=t.value,r+=t.text,i="array",n=null}let a=null;if(t7(e,tY).has("indexed")){if(!t)throw Error("");a=!0}let l=e.peekType("ID")?e.pop().text:"";if(e.length)throw Error("leftover tokens");return new rp(rs,l,r,i,a,n,o,s)}let r=e.name;ek(!r||"string"==typeof r&&r.match(t2),"invalid name","obj.name",r);let i=e.indexed;null!=i&&(ek(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let n=e.type,s=n.match(ri);if(s){let t=parseInt(s[2]||"-1"),o=rp.from({type:s[1],components:e.components});return new rp(rs,r||"",n,"array",i,null,t,o)}if("tuple"===n||n.startsWith("tuple(")||n.startsWith("(")){let t=null!=e.components?e.components.map(e=>rp.from(e)):null;return new rp(rs,r||"",n,"tuple",i,t,null,null)}return new rp(rs,r||"",n=rn(e.type),n,i,null,null,null)}static isParamType(e){return e&&e[ro]===ra}}class rg{type;inputs;constructor(e,t,r){eR(e,rs,"Fragment"),eT(this,{type:t,inputs:r=Object.freeze(r.slice())})}static from(e){if("string"==typeof e){try{rg.from(JSON.parse(e))}catch(e){}return rg.from(t8(e))}if(e instanceof t4)switch(e.peekKeyword(tW)){case"constructor":return rv.from(e);case"error":return rb.from(e);case"event":return rw.from(e);case"fallback":case"receive":return rE.from(e);case"function":return rA.from(e);case"struct":return rx.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return rv.from(e);case"error":return rb.from(e);case"event":return rw.from(e);case"fallback":case"receive":return rE.from(e);case"function":return rA.from(e);case"struct":return rx.from(e)}eO(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ek(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return rv.isFragment(e)}static isError(e){return rb.isFragment(e)}static isEvent(e){return rw.isFragment(e)}static isFunction(e){return rA.isFragment(e)}static isStruct(e){return rx.isFragment(e)}}class ry extends rg{name;constructor(e,t,r,i){super(e,t,i),ek("string"==typeof r&&r.match(t2),"invalid identifier","name",r),i=Object.freeze(i.slice()),eT(this,{name:r})}}function rm(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}class rb extends ry{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,ro,{value:rl})}get selector(){return e1(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+rm(e,this.inputs)),t.join(" ")}static from(e){if(rb.isFragment(e))return e;if("string"==typeof e)return rb.from(t8(e));if(e instanceof t4){let t=t6("error",e),r=re(e);return rr(e),new rb(rs,t,r)}return new rb(rs,e.name,e.inputs?e.inputs.map(rp.from):[])}static isFragment(e){return e&&e[ro]===rl}}class rw extends ry{anonymous;constructor(e,t,r,i){super(e,"event",t,r),Object.defineProperty(this,ro,{value:rc}),eT(this,{anonymous:i})}get topicHash(){return e1(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+rm(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return new rw(rs,e,t=(t||[]).map(e=>rp.from(e)),!1).topicHash}static from(e){if(rw.isFragment(e))return e;if("string"==typeof e)try{return rw.from(t8(e))}catch(t){ek(!1,"invalid event fragment","obj",e)}else if(e instanceof t4){let t=t6("event",e),r=re(e,!0),i=!!t7(e,tV(["anonymous"])).has("anonymous");return rr(e),new rw(rs,t,r,i)}return new rw(rs,e.name,e.inputs?e.inputs.map(e=>rp.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[ro]===rc}}class rv extends rg{payable;gas;constructor(e,t,r,i,n){super(e,t,r),Object.defineProperty(this,ro,{value:ru}),eT(this,{payable:i,gas:n})}format(e){if(eO(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[`constructor${rm(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(rv.isFragment(e))return e;if("string"==typeof e)try{return rv.from(t8(e))}catch(t){ek(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof t4){t7(e,tV(["constructor"]));let t=re(e),r=!!t7(e,tz).has("payable"),i=rt(e);return rr(e),new rv(rs,"constructor",t,r,i)}return new rv(rs,"constructor",e.inputs?e.inputs.map(rp.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[ro]===ru}}class rE extends rg{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,ro,{value:rh}),eT(this,{payable:r})}format(e){let t=0===this.inputs.length?"receive":"fallback";return"json"===e?JSON.stringify({type:t,stateMutability:this.payable?"payable":"nonpayable"}):`${t}()${this.payable?" payable":""}`}static from(e){if(rE.isFragment(e))return e;if("string"==typeof e)try{return rE.from(t8(e))}catch(t){ek(!1,"invalid fallback fragment","obj",e)}else if(e instanceof t4){let t=e.toString();if(ek(e.peekKeyword(tV(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(tV(["fallback","receive"]))){let t=re(e);return ek(0===t.length,"receive cannot have arguments","obj.inputs",t),t7(e,tV(["payable"])),rr(e),new rE(rs,[],!0)}let r=re(e);r.length?ek(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map(e=>e.format("minimal")).join(", ")):r=[rp.from("bytes")];let i=t9(e);if(ek("nonpayable"===i||"payable"===i,"fallback cannot be constants","obj.stateMutability",i),t7(e,tV(["returns"])).has("returns")){let t=re(e);ek(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return rr(e),new rE(rs,r,"payable"===i)}return"receive"===e.type?new rE(rs,[],!0):"fallback"===e.type?new rE(rs,[rp.from("bytes")],"payable"===e.stateMutability):void ek(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[ro]===rh}}class rA extends ry{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,i,n,s){super(e,"function",t,i),Object.defineProperty(this,ro,{value:rd}),eT(this,{constant:"view"===r||"pure"===r,gas:s,outputs:n=Object.freeze(n.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return e1(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+rm(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(rm(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return new rA(rs,e,"view",t=(t||[]).map(e=>rp.from(e)),[],null).selector}static from(e){if(rA.isFragment(e))return e;if("string"==typeof e)try{return rA.from(t8(e))}catch(t){ek(!1,"invalid function fragment","obj",e)}else if(e instanceof t4){let t=t6("function",e),r=re(e),i=t9(e),n=[];t7(e,tV(["returns"])).has("returns")&&(n=re(e));let s=rt(e);return rr(e),new rA(rs,t,i,r,n,s)}let t=e.stateMutability;return null!=t||(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new rA(rs,e.name,t,e.inputs?e.inputs.map(rp.from):[],e.outputs?e.outputs.map(rp.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[ro]===rd}}class rx extends ry{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,ro,{value:rf})}format(){throw Error("@TODO")}static from(e){if("string"==typeof e)try{return rx.from(t8(e))}catch(t){ek(!1,"invalid struct fragment","obj",e)}else if(e instanceof t4){let t=t6("struct",e),r=re(e);return rr(e),new rx(rs,t,r)}return new rx(rs,e.name,e.inputs?e.inputs.map(rp.from):[])}static isFragment(e){return e&&e[ro]===rf}}let rI=new Map;rI.set(0,"GENERIC_PANIC"),rI.set(1,"ASSERT_FALSE"),rI.set(17,"OVERFLOW"),rI.set(18,"DIVIDE_BY_ZERO"),rI.set(33,"ENUM_RANGE_ERROR"),rI.set(34,"BAD_STORAGE_DATA"),rI.set(49,"STACK_UNDERFLOW"),rI.set(50,"ARRAY_RANGE_ERROR"),rI.set(65,"OUT_OF_MEMORY"),rI.set(81,"UNINITIALIZED_FUNCTION_CALL");let rT=new RegExp(/^bytes([0-9]*)$/),r_=new RegExp(/^(u?int)([0-9]*)$/),rS=null,rP=1024;class rN{#p(e){if(e.isArray())return new tO(this.#p(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new tH(e.components.map(e=>this.#p(e)),e.name);switch(e.baseType){case"address":return new t_(e.name);case"bool":return new tk(e.name);case"string":return new tj(e.name);case"bytes":return new tB(e.name);case"":return new tL(e.name)}let t=e.type.match(r_);if(t){let r=parseInt(t[2]||"256");return ek(0!==r&&r<=256&&r%8==0,"invalid "+t[1]+" bit length","param",e),new t$(r/8,"int"===t[1],e.name)}if(t=e.type.match(rT)){let r=parseInt(t[1]);return ek(0!==r&&r<=32,"invalid bytes length","param",e),new tR(r,e.name)}ek(!1,"invalid type","type",e.type)}getDefaultValue(e){return new tH(e.map(e=>this.#p(rp.from(e))),"_").defaultValue()}encode(e,t){eC(t.length,e.length,"types/values length mismatch");let r=new tH(e.map(e=>this.#p(rp.from(e))),"_"),i=new tf;return r.encode(i,t),i.data}decode(e,t,r){return new tH(e.map(e=>this.#p(rp.from(e))),"_").decode(new tp(t,r,rP))}static _setDefaultMaxInflation(e){ek("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),rP=e}static defaultAbiCoder(){return null==rS&&(rS=new rN),rS}static getBuiltinCallException(e,t,r){return function(e,t,r,i){let n="missing revert data",s=null,o=null;if(r){n="execution reverted";let e=eL(r);if(r=ej(r),0===e.length)n+=" (no data present; likely require(false) occurred",s="require(false)";else if(e.length%32!=4)n+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===ej(e.slice(0,4)))try{s=i.decode(["string"],e.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[s]},n+=`: ${JSON.stringify(s)}`}catch(e){n+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===ej(e.slice(0,4)))try{let t=Number(i.decode(["uint256"],e.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[t]},s=`Panic due to ${rI.get(t)||"UNKNOWN"}(${t})`,n+=`: ${s}`}catch(e){n+=" (could not decode panic code)"}else n+=" (unknown custom error)"}let a={to:t.to?tv(t.to):null,data:t.data||"0x"};return t.from&&(a.from=tv(t.from)),eN(n,"CALL_EXCEPTION",{action:e,data:r,reason:s,transaction:a,invocation:null,revert:o})}(e,t,r,rN.defaultAbiCoder())}}class rO{fragment;name;signature;topic;args;constructor(e,t,r){let i=e.name,n=e.format();eT(this,{fragment:e,name:i,signature:n,topic:t,args:r})}}class rk{fragment;name;args;signature;selector;value;constructor(e,t,r,i){let n=e.name,s=e.format();eT(this,{fragment:e,name:n,args:r,signature:s,selector:t,value:i})}}class rC{fragment;name;args;signature;selector;constructor(e,t,r){let i=e.name,n=e.format();eT(this,{fragment:e,name:i,args:r,signature:n,selector:t})}}class rB{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){eT(this,{hash:e,_isIndexed:!0})}}let rR={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},rD={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&rR[e.toString()]&&(t=rR[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class rL{fragments;deploy;fallback;receive;#g;#y;#m;#b;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#m=new Map,this.#g=new Map,this.#y=new Map;let r=[];for(let e of t)try{r.push(rg.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}eT(this,{fragments:Object.freeze(r)});let i=null,n=!1;this.#b=this.getAbiCoder(),this.fragments.forEach((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}eT(this,{deploy:e});return;case"fallback":0===e.inputs.length?n=!0:(ek(!i||e.payable!==i.payable,"conflicting fallback fragments",`fragments[${t}]`,e),n=(i=e).payable);return;case"function":r=this.#m;break;case"event":r=this.#y;break;case"error":r=this.#g;break;default:return}let s=e.format();r.has(s)||r.set(s,e)}),this.deploy||eT(this,{deploy:rv.from("constructor()")}),eT(this,{fallback:i,receive:n})}format(e){let t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){return JSON.stringify(this.fragments.map(e=>e.format("json")).map(e=>JSON.parse(e)))}getAbiCoder(){return rN.defaultAbiCoder()}#w(e,t,r){if(eM(e)){let t=e.toLowerCase();for(let e of this.#m.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let i=[];for(let[t,r]of this.#m)t.split("(")[0]===e&&i.push(r);if(t){let e=t.length>0?t[t.length-1]:null,r=t.length,n=!0;tT.isTyped(e)&&"overrides"===e.type&&(n=!1,r--);for(let e=i.length-1;e>=0;e--){let t=i[e].inputs.length;t===r||n&&t===r-1||i.splice(e,1)}for(let e=i.length-1;e>=0;e--){let r=i[e].inputs;for(let n=0;n<t.length;n++)if(tT.isTyped(t[n])){if(n>=r.length){if("overrides"===t[n].type)continue;i.splice(e,1);break}if(t[n].type!==r[n].baseType){i.splice(e,1);break}}}}if(1===i.length&&t&&t.length!==i[0].inputs.length){let e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&i.splice(0,1)}if(0===i.length)return null;if(i.length>1&&r){let t=i.map(e=>JSON.stringify(e.format())).join(", ");ek(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return i[0]}return this.#m.get(rA.from(e).format())||null}getFunctionName(e){let t=this.#w(e,null,!1);return ek(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#w(e,null,!1)}getFunction(e,t){return this.#w(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#m.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let i=t[r];e(this.#m.get(i),r)}}#v(e,t,r){if(eM(e)){let t=e.toLowerCase();for(let e of this.#y.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){let i=[];for(let[t,r]of this.#y)t.split("(")[0]===e&&i.push(r);if(t){for(let e=i.length-1;e>=0;e--)i[e].inputs.length<t.length&&i.splice(e,1);for(let e=i.length-1;e>=0;e--){let r=i[e].inputs;for(let n=0;n<t.length;n++)if(tT.isTyped(t[n])&&t[n].type!==r[n].baseType){i.splice(e,1);break}}}if(0===i.length)return null;if(i.length>1&&r){let t=i.map(e=>JSON.stringify(e.format())).join(", ");ek(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return i[0]}return this.#y.get(rw.from(e).format())||null}getEventName(e){let t=this.#v(e,null,!1);return ek(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#v(e,null,!1)}getEvent(e,t){return this.#v(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#y.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let i=t[r];e(this.#y.get(i),r)}}getError(e,t){if(eM(e)){let t=e.toLowerCase();if(rD[t])return rb.from(rD[t].signature);for(let e of this.#g.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let t=[];for(let[r,i]of this.#g)r.split("(")[0]===e&&t.push(i);if(0===t.length)return"Error"===e?rb.from("error Error(string)"):"Panic"===e?rb.from("error Panic(uint256)"):null;if(t.length>1){let r=t.map(e=>JSON.stringify(e.format())).join(", ");ek(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}return"Error(string)"===(e=rb.from(e).format())?rb.from("error Error(string)"):"Panic(uint256)"===e?rb.from("error Panic(uint256)"):this.#g.get(e)||null}forEachError(e){let t=Array.from(this.#g.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let i=t[r];e(this.#g.get(i),r)}}_decodeParams(e,t){return this.#b.decode(e,t)}_encodeParams(e,t){return this.#b.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);ek(t,"unknown error","fragment",e),e=t}return ek(ez(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,ez(t,4))}encodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);ek(t,"unknown error","fragment",e),e=t}return eH([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);ek(t,"unknown function","fragment",e),e=t}return ek(ez(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,ez(t,4))}encodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);ek(t,"unknown function","fragment",e),e=t}return eH([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);ek(t,"unknown function","fragment",e),e=t}let r="invalid length for result data",i=eU(t);if(i.length%32==0)try{return this.#b.decode(e.outputs,i)}catch(e){r="could not decode result data"}eO(!1,r,"BAD_DATA",{value:ej(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=eL(e,"data"),i=rN.getBuiltinCallException("call",t,r);if(i.message.startsWith("execution reverted (unknown custom error)")){let e=ej(r.slice(0,4)),t=this.getError(e);if(t)try{let e=this.#b.decode(t.inputs,r.slice(4));i.revert={name:t.name,signature:t.format(),args:e},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch(e){i.message="execution reverted (coult not decode custom error)"}}let n=this.parseTransaction(t);return n&&(i.invocation={method:n.name,signature:n.signature,args:n.args}),i}encodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);ek(t,"unknown function","fragment",e),e=t}return ej(this.#b.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){let t=this.getEvent(e);ek(t,"unknown event","eventFragment",e),e=t}eO(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let r=[];e.anonymous||r.push(e.topicHash);let i=(e,t)=>"string"===e.type?e1(t):"bytes"===e.type?eY(ej(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=tt(t):e.type.match(/^bytes/)?t=eG(t,32,!1):"address"===e.type&&this.#b.encode(["address"],[t]),eq(ej(t),32));for(t.forEach((t,n)=>{let s=e.inputs[n];if(!s.indexed){ek(null==t,"cannot filter non-indexed parameters; must be null","contract."+s.name,t);return}null==t?r.push(null):"array"===s.baseType||"tuple"===s.baseType?ek(!1,"filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?r.push(t.map(e=>i(s,e))):r.push(i(s,t))});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){if("string"==typeof e){let t=this.getEvent(e);ek(t,"unknown event","eventFragment",e),e=t}let r=[],i=[],n=[];return e.anonymous||r.push(e.topicHash),ek(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,s)=>{let o=t[s];if(e.indexed){if("string"===e.type)r.push(e1(o));else if("bytes"===e.type)r.push(eY(o));else if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");else r.push(this.#b.encode([e.type],[o]))}else i.push(e),n.push(o)}),{data:this.#b.encode(i,n),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e){let t=this.getEvent(e);ek(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){let t=e.topicHash;ek(eM(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let i=[],n=[],s=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(i.push(rp.from({type:"bytes32",name:e.name})),s.push(!0)):(i.push(e),s.push(!1)):(n.push(e),s.push(!1))});let o=null!=r?this.#b.decode(i,eH(r)):null,a=this.#b.decode(n,t,!0),l=[],c=[],u=0,h=0;return e.inputs.forEach((e,t)=>{let r=null;if(e.indexed){if(null==o)r=new rB(null);else if(s[t])r=new rB(o[h++]);else try{r=o[h++]}catch(e){r=e}}else try{r=a[u++]}catch(e){r=e}l.push(r),c.push(e.name||null)}),tu.fromItems(l,c)}parseTransaction(e){let t=eL(e.data,"tx.data"),r=e5(null!=e.value?e.value:0,"tx.value"),i=this.getFunction(ej(t.slice(0,4)));if(!i)return null;let n=this.#b.decode(i.inputs,t.slice(4));return new rk(i,i.selector,n,r)}parseCallResult(e){throw Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new rO(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=ej(e),r=this.getError(ez(t,0,4));if(!r)return null;let i=this.#b.decode(r.inputs,ez(t,4));return new rC(r,r.selector,i)}static from(e){return e instanceof rL?e:new rL("string"==typeof e?JSON.parse(e):"function"==typeof e.formatJson?e.formatJson():"function"==typeof e.format?e.format("json"):e)}}function rU(e){return e&&"function"==typeof e.getAddress}async function rM(e,t){let r=await t;return(null==r||"0x0000000000000000000000000000000000000000"===r)&&(eO("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),ek(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),tv(r)}function rF(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?tv(e):(eO(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),rM(e,t.resolveName(e))):rU(e)?rM(e,e.getAddress()):e&&"function"==typeof e.then?rM(e,e):void ek(!1,"unsupported addressable value","target",e)}let r$=new Uint8Array(32);r$.fill(0);let rj=BigInt(-1),rH=BigInt(0),rV=BigInt(1),rz=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),rG=tt(rV,32),rq=tt(rH,32),rK={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},rW=["name","version","chainId","verifyingContract","salt"];function rQ(e){return function(t){return ek("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}let rY={name:rQ("name"),version:rQ("version"),chainId:function(e){let t=e5(e,"domain.chainId");return(ek(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t))?Number(t):ti(t)},verifyingContract:function(e){try{return tv(e).toLowerCase()}catch(e){}ek(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){let t=eL(e,"domain.salt");return ek(32===t.length,'invalid domain value "salt"',"domain.salt",e),ej(t)}};function rJ(e){{let t=e.match(/^(u?)int(\d+)$/);if(t){let r=""===t[1],i=parseInt(t[2]);ek(i%8==0&&0!==i&&i<=256&&t[2]===String(i),"invalid numeric width","type",e);let n=e8(rz,r?i-1:i),s=r?(n+rV)*rj:rH;return function(t){let i=e5(t,"value");return ek(i>=s&&i<=n,`value out-of-bounds for ${e}`,"value",i),tt(r?e4(i,256):i,32)}}}{let t=e.match(/^bytes(\d+)$/);if(t){let r=parseInt(t[1]);return ek(0!==r&&r<=32&&t[1]===String(r),"invalid bytes width","type",e),function(t){return ek(eL(t).length===r,`invalid length for ${e}`,"value",t),function(e){let t=eL(e),r=t.length%32;return r?eH([t,r$.slice(r)]):ej(t)}(t)}}}switch(e){case"address":return function(e){return eq(tv(e),32)};case"bool":return function(e){return e?rG:rq};case"bytes":return function(e){return eY(e)};case"string":return function(e){return e1(e)}}return null}function rZ(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}function rX(e){let t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class r0{primaryType;#E;get types(){return JSON.parse(this.#E)}#A;#x;constructor(e){this.#A=new Map,this.#x=new Map;let t=new Map,r=new Map,i=new Map,n={};for(let s in Object.keys(e).forEach(s=>{n[s]=e[s].map(({name:t,type:r})=>{let{base:i,index:n}=rX(r);return"int"!==i||e.int||(i="int256"),"uint"!==i||e.uint||(i="uint256"),{name:t,type:i+(n||"")}}),t.set(s,new Set),r.set(s,[]),i.set(s,new Set)}),this.#E=JSON.stringify(n),n){let i=new Set;for(let o of n[s]){ek(!i.has(o.name),`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(s)}`,"types",e),i.add(o.name);let n=rX(o.type).base;ek(n!==s,`circular type reference to ${JSON.stringify(n)}`,"types",e),rJ(n)||(ek(r.has(n),`unknown type ${JSON.stringify(n)}`,"types",e),r.get(n).push(s),t.get(s).add(n))}}let s=Array.from(r.keys()).filter(e=>0===r.get(e).length);for(let[o,a]of(ek(0!==s.length,"missing primary type","types",e),ek(1===s.length,`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),eT(this,{primaryType:s[0]}),!function n(s,o){for(let a of(ek(!o.has(s),`circular type reference to ${JSON.stringify(s)}`,"types",e),o.add(s),t.get(s)))if(r.has(a))for(let e of(n(a,o),o))i.get(e).add(a);o.delete(s)}(this.primaryType,new Set),i)){let e=Array.from(a);e.sort(),this.#A.set(o,rZ(o,n[o])+e.map(e=>rZ(e,n[e])).join(""))}}getEncoder(e){let t=this.#x.get(e);return t||(t=this.#I(e),this.#x.set(e,t)),t}#I(e){{let t=rJ(e);if(t)return t}let t=rX(e).array;if(t){let e=t.prefix,r=this.getEncoder(e);return i=>{ek(-1===t.count||t.count===i.length,`array length mismatch; expected length ${t.count}`,"value",i);let n=i.map(r);return this.#A.has(e)&&(n=n.map(eY)),eY(eH(n))}}let r=this.types[e];if(r){let t=e1(this.#A.get(e));return e=>{let i=r.map(({name:t,type:r})=>{let i=this.getEncoder(r)(e[t]);return this.#A.has(r)?eY(i):i});return i.unshift(t),eH(i)}}ek(!1,`unknown type: ${e}`,"type",e)}encodeType(e){let t=this.#A.get(e);return ek(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return eY(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(rJ(e))return r(e,t);let i=rX(e).array;if(i)return ek(-1===i.count||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(e=>this._visit(i.prefix,e,r));let n=this.types[e];if(n)return n.reduce((e,{name:i,type:n})=>(e[i]=this._visit(n,t[i],r),e),{});ek(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new r0(e)}static getPrimaryType(e){return r0.from(e).primaryType}static hashStruct(e,t,r){return r0.from(t).hashStruct(e,r)}static hashDomain(e){let t=[];for(let r in e){if(null==e[r])continue;let i=rK[r];ek(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((e,t)=>rW.indexOf(e.name)-rW.indexOf(t.name)),r0.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return eH(["0x1901",r0.hashDomain(e),r0.from(t).hash(r)])}static hash(e,t,r){return eY(r0.encode(e,t,r))}static async resolveNames(e,t,r,i){for(let t in e=Object.assign({},e))null==e[t]&&delete e[t];let n={};e.verifyingContract&&!eM(e.verifyingContract,20)&&(n[e.verifyingContract]="0x");let s=r0.from(t);for(let e in s.visit(r,(e,t)=>("address"!==e||eM(t,20)||(n[t]="0x"),t)),n)n[e]=await i(e);return e.verifyingContract&&n[e.verifyingContract]&&(e.verifyingContract=n[e.verifyingContract]),r=s.visit(r,(e,t)=>"address"===e&&n[t]?n[t]:t),{domain:e,value:r}}static getPayload(e,t,r){r0.hashDomain(e);let i={},n=[];rW.forEach(t=>{let r=e[t];null!=r&&(i[t]=rY[t](r),n.push({name:t,type:rK[t]}))});let s=r0.from(t),o=Object.assign({},t=s.types);return ek(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),o.EIP712Domain=n,s.encode(r),{types:o,domain:i,primaryType:s.primaryType,message:s.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return ej(eL(t));if(e.match(/^u?int/))return e5(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return ek("string"==typeof t,"invalid string","value",t),t}ek(!1,"unsupported type","type",e)})}}}function r1(e,t){return{address:tv(e),storageKeys:t.map((e,t)=>(ek(eM(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}function r2(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?(ek(2===t.length,"invalid slot set",`value[${r}]`,t),r1(t[0],t[1])):(ek(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),r1(t.address,t.storageKeys)));ek(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return r1(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}let r3="0x0000000000000000000000000000000000000000",r4=BigInt(0);function r8(e){return null==e?null:e}function r5(e){return null==e?null:e.toString()}class r6{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){eT(this,{gasPrice:r8(e),maxFeePerGas:r8(t),maxPriorityFeePerGas:r8(r)})}toJSON(){let{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:r5(e),maxFeePerGas:r5(t),maxPriorityFeePerGas:r5(r)}}}function r7(e){let t={};for(let r of(e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=ej(e.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))r in e&&null!=e[r]&&(t[r]=e5(e[r],`request.${r}`));for(let r of"type,nonce".split(/,/))r in e&&null!=e[r]&&(t[r]=te(e[r],`request.${r}`));return e.accessList&&(t.accessList=r2(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>eF(e)?ej(e):Object.assign({},e))),t}class r9{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#T;constructor(e,t){this.#T=e.transactions.map(e=>"string"!=typeof e?new ir(e,t):e),eT(this,{provider:t,hash:r8(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:r8(e.prevRandao),extraData:e.extraData,baseFeePerGas:r8(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#T.map(e=>"string"==typeof e?e:e.hash)}get prefetchedTransactions(){let e=this.#T.slice();return 0===e.length?[]:(eO("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:n,hash:s,miner:o,prevRandao:a,nonce:l,number:c,parentHash:u,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,timestamp:p,transactions:g}=this;return{_type:"Block",baseFeePerGas:r5(e),difficulty:r5(t),extraData:r,gasLimit:r5(i),gasUsed:r5(n),blobGasUsed:r5(this.blobGasUsed),excessBlobGas:r5(this.excessBlobGas),hash:s,miner:o,prevRandao:a,nonce:l,number:c,parentHash:u,timestamp:p,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,transactions:g}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#T.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#T[e];else{let r=e.toLowerCase();for(let e of this.#T){if("string"==typeof e){if(e!==r)continue;t=e;break}if(e.hash!==r){t=e;break}}}if(null==t)throw Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if("number"==typeof e)return t[e];for(let r of(e=e.toLowerCase(),t))if(r.hash===e)return r;ek(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw Error("");return{orphan:"drop-block",hash:this.hash,number:this.number}}}class ie{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let r=Object.freeze(e.topics.slice());eT(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:r,data:i,index:n,removed:s,topics:o,transactionHash:a,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:n,removed:s,topics:o,transactionHash:a,transactionIndex:l}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return eO(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return eO(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return eO(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:this.transactionHash,blockHash:this.blockHash,blockNumber:this.blockNumber,address:this.address,data:this.data,topics:Object.freeze(this.topics.slice()),index:this.index}}}}class it{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#_;constructor(e,t){this.#_=Object.freeze(e.logs.map(e=>new ie(e,t)));let r=r4;null!=e.effectiveGasPrice?r=e.effectiveGasPrice:null!=e.gasPrice&&(r=e.gasPrice),eT(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#_}toJSON(){let{to:e,from:t,contractAddress:r,hash:i,index:n,blockHash:s,blockNumber:o,logsBloom:a,logs:l,status:c,root:u}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:o,contractAddress:r,cumulativeGasUsed:r5(this.cumulativeGasUsed),from:t,gasPrice:r5(this.gasPrice),blobGasUsed:r5(this.blobGasUsed),blobGasPrice:r5(this.blobGasPrice),gasUsed:r5(this.gasUsed),hash:i,index:n,logs:l,logsBloom:a,root:u,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(null==e)throw Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(null==e)throw Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return is(this)}reorderedEvent(e){return eO(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),ii(this,e)}}class ir{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;#S;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.#S=-1}toJSON(){let{blockNumber:e,blockHash:t,index:r,hash:i,type:n,to:s,from:o,nonce:a,data:l,signature:c,accessList:u,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:r5(this.chainId),data:l,from:o,gasLimit:r5(this.gasLimit),gasPrice:r5(this.gasPrice),hash:i,maxFeePerGas:r5(this.maxFeePerGas),maxPriorityFeePerGas:r5(this.maxPriorityFeePerGas),maxFeePerBlobGas:r5(this.maxFeePerBlobGas),nonce:a,signature:c,to:s,index:r,type:n,value:r5(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){let t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;let t=this.provider.getBlock(e);if(null==t)throw Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:e,blockNumber:t}=await eI({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let r=null==e?1:e,i=null==t?0:t,n=this.#S,s=-1,o=-1===n,a=async()=>{if(o)return null;let{blockNumber:e,nonce:t}=await eI({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){n=e;return}if(o)return null;let i=await this.getTransaction();if(!i||null==i.blockNumber)for(-1===s&&(s=n-3)<this.#S&&(s=this.#S);s<=e;){if(o)return null;let t=await this.provider.getBlock(s,!0);if(null==t)break;for(let e of t)if(e===this.hash)return;for(let i=0;i<t.length;i++){let s=await t.getTransaction(i);if(s.from===this.from&&s.nonce===this.nonce){if(o)return null;let t=await this.provider.getTransactionReceipt(s.hash);if(null==t||e-t.blockNumber+1<r)return;let i="replaced";s.data===this.data&&s.to===this.to&&s.value===this.value?i="repriced":"0x"===s.data&&s.from===s.to&&s.value===r4&&(i="cancelled"),eO(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:s.replaceableTransaction(n),hash:s.hash,receipt:t})}}s++}},l=e=>{if(null==e||0!==e.status)return e;eO(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},c=await this.provider.getTransactionReceipt(this.hash);if(0===r)return l(c);if(c){if(await c.confirmations()>=r)return l(c)}else if(await a(),0===r)return null;let u=new Promise((e,t)=>{let s=[],c=()=>{s.forEach(e=>e())};if(s.push(()=>{o=!0}),i>0){let e=setTimeout(()=>{c(),t(eN("wait for transaction timeout","TIMEOUT"))},i);s.push(()=>{clearTimeout(e)})}let u=async i=>{if(await i.confirmations()>=r){c();try{e(l(i))}catch(e){t(e)}}};if(s.push(()=>{this.provider.off(this.hash,u)}),this.provider.on(this.hash,u),n>=0){let e=async()=>{try{await a()}catch(e){if(eS(e,"TRANSACTION_REPLACED")){c(),t(e);return}}o||this.provider.once("block",e)};s.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return eO(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),is(this)}reorderedEvent(e){return eO(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),eO(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ii(this,e)}replaceableTransaction(e){ek(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new ir(this,this.provider);return t.#S=e,t}}function ii(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function is(e){return{orphan:"drop-transaction",tx:e}}class io{filter;emitter;#P;constructor(e,t,r){this.#P=t,eT(this,{emitter:e,filter:r})}async removeListener(){null!=this.#P&&await this.emitter.off(this.filter,this.#P)}}class ia extends ie{interface;fragment;args;constructor(e,t,r){super(e,e.provider),eT(this,{args:t.decodeEventLog(r,e.data,e.topics),fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class il extends ie{error;constructor(e,t){super(e,e.provider),eT(this,{error:t})}}class ic extends it{#N;constructor(e,t,r){super(r,t),this.#N=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#N.getEvent(e.topics[0]):null;if(t)try{return new ia(e,this.#N,t)}catch(t){return new il(e,t)}return e})}}class iu extends ir{#N;constructor(e,t,r){super(r,t),this.#N=e}async wait(e,t){let r=await super.wait(e,t);return null==r?null:new ic(this.#N,this.provider,r)}}class ih extends io{log;constructor(e,t,r,i){super(e,t,r),eT(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class id extends ih{constructor(e,t,r,i,n){super(e,t,r,new ia(n,e.interface,i)),eT(this,{args:e.interface.decodeEventLog(i,this.log.data,this.log.topics),fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}let ip=BigInt(0);function ig(e){return e&&"function"==typeof e.call}function iy(e){return e&&"function"==typeof e.estimateGas}function im(e){return e&&"function"==typeof e.resolveName}function ib(e){return e&&"function"==typeof e.sendTransaction}function iw(e){if(null!=e){if(im(e))return e;if(e.provider)return e.provider}}class iv{#O;fragment;constructor(e,t,r){if(eT(this,{fragment:t}),t.inputs.length<r.length)throw Error("too many arguments");let i=iE(e.runner,"resolveName"),n=im(i)?i:null;this.#O=async function(){let i=await Promise.all(t.inputs.map((e,t)=>null==r[t]?null:e.walkAsync(r[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>rF(e,n))):rF(t,n):t)));return e.interface.encodeFilterTopics(t,i)}()}getTopicFilter(){return this.#O}}function iE(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function iA(e){return null==e?null:e.provider||null}async function ix(e,t){let r=tT.dereference(e,"overrides");ek("object"==typeof r,"invalid overrides parameter","overrides",e);let i=r7(r);return ek(null==i.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",i.to),ek(null==i.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",i.data),i.from&&(i.from=i.from),i}async function iI(e,t,r){let i=iE(e,"resolveName"),n=im(i)?i:null;return await Promise.all(t.map((e,t)=>e.walkAsync(r[t],(e,t)=>(t=tT.dereference(t,e),"address"===e)?rF(t,n):t)))}let iT=Symbol.for("_ethersInternal_contract"),i_=new WeakMap;function iS(e){return i_.get(e[iT])}async function iP(e,t){let r;let i=null;if(Array.isArray(t)){let i=function(t){if(eM(t,32))return t;let r=e.interface.getEvent(t);return ek(r,"unknown fragment","name",t),r.topicHash};r=t.map(e=>null==e?null:Array.isArray(e)?e.map(i):i(e))}else"*"===t?r=[null]:"string"==typeof t?eM(t,32)?r=[t]:(ek(i=e.interface.getEvent(t),"unknown fragment","event",t),r=[i.topicHash]):t&&"object"==typeof t&&"getTopicFilter"in t&&"function"==typeof t.getTopicFilter&&t.fragment?r=await t.getTopicFilter():"fragment"in t?r=[(i=t.fragment).topicHash]:ek(!1,"unknown event name","event",t);return{fragment:i,tag:(r=r.map(e=>{if(null==e)return null;if(Array.isArray(e)){let t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})).map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:r}}async function iN(e,t){let{subs:r}=iS(e);return r.get((await iP(e,t)).tag)||null}async function iO(e,t,r){let i=iA(e.runner);eO(i,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});let{fragment:n,tag:s,topics:o}=await iP(e,r),{addr:a,subs:l}=iS(e),c=l.get(s);if(!c){let t={address:a||e,topics:o},u=t=>{let i=n;if(null==i)try{i=e.interface.getEvent(t.topics[0])}catch(e){}if(i){let s=i,o=n?e.interface.decodeEventLog(n,t.data,t.topics):[];iB(e,r,o,i=>new id(e,i,r,s,t))}else iB(e,r,[],i=>new ih(e,i,r,t))},h=[];c={tag:s,listeners:[],start:()=>{h.length||h.push(i.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),i.off(t,u)}},l.set(s,c)}return c}let ik=Promise.resolve();async function iC(e,t,r,i){await ik;let n=await iN(e,t);if(!n)return!1;let s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:t,once:n})=>{let s=Array.from(r);i&&s.push(i(n?null:t));try{t.call(e,...s)}catch(e){}return!n}),0===n.listeners.length&&(n.stop(),iS(e).subs.delete(n.tag)),s>0}async function iB(e,t,r,i){try{await ik}catch(e){}let n=iC(e,t,r,i);return ik=n,await n}let iR=["then"];class iD{target;interface;runner;filters;[iT];fallback;constructor(e,t,r,i){var n;let s;ek("string"==typeof e||rU(e),"invalid value for Contract target","target",e),null==r&&(r=null);let o=rL.from(t);eT(this,{target:e,runner:r,interface:o}),Object.defineProperty(this,iT,{value:{}});let a=null,l=null;if(i){let e=iA(r);l=new iu(this.interface,e,i)}let c=new Map;if("string"==typeof e){if(eM(e))a=e,s=Promise.resolve(e);else{let t=iE(r,"resolveName");if(!im(t))throw eN("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});s=t.resolveName(e).then(t=>{if(null==t)throw eN("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return iS(this).addr=t,t})}}else s=e.getAddress().then(e=>{if(null==e)throw Error("TODO");return iS(this).addr=e,e});return n={addrPromise:s,addr:a,deployTx:l,subs:c},i_.set(this[iT],n),eT(this,{filters:new Proxy({},{get:(e,t,r)=>{if("symbol"==typeof t||iR.indexOf(t)>=0)return Reflect.get(e,t,r);try{return this.getEvent(t)}catch(e){if(!eS(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>iR.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))})}),eT(this,{fallback:o.receive||o.fallback?function(e){let t=async function(t){let r=await ix(t,["data"]);r.to=await e.getAddress(),r.from&&(r.from=await rF(r.from,iw(e.runner)));let i=e.interface,n=e5(r.value||ip,"overrides.value")===ip,s="0x"===(r.data||"0x");return!i.fallback||i.fallback.payable||!i.receive||s||n||ek(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),ek(i.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),ek(i.receive||i.fallback&&i.fallback.payable||n,"cannot send value to non-payable fallback","overrides.value",r.value),ek(i.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){let i=iE(e.runner,"call");eO(ig(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let n=await t(r);try{return await i.call(n)}catch(t){if(eP(t)&&t.data)throw e.interface.makeError(t.data,n);throw t}},i=async function(r){let i=e.runner;eO(ib(i),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let n=await i.sendTransaction(await t(r)),s=iA(e.runner);return new iu(e.interface,s,n)},n=async function(r){let i=iE(e.runner,"estimateGas");return eO(iy(i),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await i.estimateGas(await t(r))},s=async e=>await i(e);return eT(s,{_contract:e,estimateGas:n,populateTransaction:t,send:i,staticCall:r}),s}(this):null}),new Proxy(this,{get:(e,t,r)=>{if("symbol"==typeof t||t in e||iR.indexOf(t)>=0)return Reflect.get(e,t,r);try{return e.getFunction(t)}catch(e){if(!eS(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||iR.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new iD(this.target,this.interface,e)}attach(e){return new iD(e,this.interface,this.runner)}async getAddress(){return await iS(this).addrPromise}async getDeployedCode(){let e=iA(this.runner);eO(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;let t=iA(this.runner);return eO(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,r)=>{let i=async()=>{try{let r=await this.getDeployedCode();if(null!=r)return e(this);t.once("block",i)}catch(e){r(e)}};i()})}deploymentTransaction(){return iS(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let i=e.interface.getFunction(t,r);return eO(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},i=async function(...t){let i=r(...t),n={};if(i.inputs.length+1===t.length&&(n=await ix(t.pop())).from&&(n.from=await rF(n.from,iw(e.runner))),i.inputs.length!==t.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let s=await iI(e.runner,i.inputs,t);return Object.assign({},n,await eI({to:e.getAddress(),data:e.interface.encodeFunctionData(i,s)}))},n=async function(...e){let t=await a(...e);return 1===t.length?t[0]:t},s=async function(...t){let r=e.runner;eO(ib(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let n=await r.sendTransaction(await i(...t)),s=iA(e.runner);return new iu(e.interface,s,n)},o=async function(...t){let r=iE(e.runner,"estimateGas");return eO(iy(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await i(...t))},a=async function(...t){let n=iE(e.runner,"call");eO(ig(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let s=await i(...t),o="0x";try{o=await n.call(s)}catch(t){if(eP(t)&&t.data)throw e.interface.makeError(t.data,s);throw t}let a=r(...t);return e.interface.decodeFunctionResult(a,o)},l=async(...e)=>r(...e).constant?await n(...e):await s(...e);return eT(l,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:o,populateTransaction:i,send:s,staticCall:n,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getFunction(t);return eO(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),l}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let i=e.interface.getEvent(t,r);return eO(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},i=function(...t){return new iv(e,r(...t),t)};return eT(i,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r}),Object.defineProperty(i,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getEvent(t);return eO(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),i}(this,e)}async queryTransaction(e){throw Error("@TODO")}async queryFilter(e,t,r){null==t&&(t=0),null==r&&(r="latest");let{addr:i,addrPromise:n}=iS(this),s=i||await n,{fragment:o,topics:a}=await iP(this,e),l={address:s,topics:a,fromBlock:t,toBlock:r},c=iA(this.runner);return eO(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(l)).map(e=>{let t=o;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new ia(e,this.interface,t)}catch(t){return new il(e,t)}return new ie(e,c)})}async on(e,t){let r=await iO(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){let r=await iO(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await iB(this,e,t,null)}async listenerCount(e){if(e){let t=await iN(this,e);return t?t.listeners.length:0}let{subs:t}=iS(this),r=0;for(let{listeners:e}of t.values())r+=e.length;return r}async listeners(e){if(e){let t=await iN(this,e);return t?t.listeners.map(({listener:e})=>e):[]}let{subs:t}=iS(this),r=[];for(let{listeners:e}of t.values())r=r.concat(e.map(({listener:e})=>e));return r}async off(e,t){let r=await iN(this,e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return(null==t||0===r.listeners.length)&&(r.stop(),iS(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){let t=await iN(this,e);if(!t)return this;t.stop(),iS(this).subs.delete(t.tag)}else{let{subs:e}=iS(this);for(let{tag:t,stop:r}of e.values())r(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends iD{constructor(t,r=null){super(t,e,r)}}return t}static from(e,t,r){return null==r&&(r=null),new this(e,t,r)}}function iL(){return iD}class iU extends iL(){}let iM=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function iF(e){var t;let r;return t=function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let i=r(),n=1,s=[0,1];for(let e=1;e<i;e++)s.push(n+=r());let o=r(),a=t;t+=o;let l=0,c=0;function u(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}let h=2147483648-1,d=0;for(let e=0;e<31;e++)d=d<<1|u();let f=[],p=0,g=2147483648;for(;;){let e=Math.floor(((d-p+1)*n-1)/g),t=0,r=i;for(;r-t>1;){let i=t+r>>>1;e<s[i]?r=i:t=i}if(0==t)break;f.push(t);let o=p+Math.floor(g*s[t]/n),a=p+Math.floor(g*s[t+1]/n)-1;for(;((o^a)&1073741824)==0;)d=d<<1&h|u(),o=o<<1&h,a=a<<1&h|1;for(;o&~a&536870912;)d=1073741824&d|d<<1&h>>>1|u(),o=o<<1^1073741824,a=(1073741824^a)<<1|1073741825;p=o,g=1+a-o}let y=i-4;return f.map(t=>{switch(t-y){case 3:return y+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return y+256+(e[a++]<<8|e[a++]);case 1:return y+e[a++];default:return t-1}})}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((e,r)=>t[e.charCodeAt(0)]=r);let r=e.length,i=new Uint8Array(6*r>>3);for(let n=0,s=0,o=0,a=0;n<r;n++)a=a<<6|t[e.charCodeAt(n)],(o+=6)>=8&&(i[s++]=a>>(o-=8));return i}(e)),r=0,()=>t[r++]}function i$(e,t=0){let r=[];for(;;){let i=e(),n=e();if(!n)break;t+=i;for(let e=0;e<n;e++)r.push(t+e);t+=n+1}return r}function ij(e){return iV(()=>{let t=i$(e);if(t.length)return t})}function iH(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(function(e,t){let r=1+t(),i=t(),n=iV(t);return iz(n.length,1+e,t).flatMap((e,t)=>{let[s,...o]=e;return Array(n[t]).fill().map((e,t)=>{let n=t*i;return[s+t*r,o.map(e=>e+n)]})})}(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(iz(1+e(),1+r,e).map(e=>[e[0],e.slice(1)]))}return t.flat()}function iV(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function iz(e,t,r){let i=Array(e).fill().map(()=>[]);for(let n=0;n<t;n++)(function(e,t){let r=Array(e);for(let n=0,s=0;n<e;n++){var i;r[n]=s+=1&(i=t())?~i>>1:i>>1}return r})(e,r).forEach((e,t)=>i[t].push(e));return i}function iG(e){return`{${e.toString(16).toUpperCase().padStart(2,"0")}}`}function iq(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...e.slice(i,i+=4096)));return r.join("")}function iK(e,t){let r=e.length,i=r-t.length;for(let n=0;0==i&&n<r;n++)i=e[n]-t[n];return i}function iW(e){return e>>24&255}function iQ(e){return 16777215&e}function iY(e){return e>=44032&&e<55204}function iJ(e){i||function(){let e=iF("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");for(let[t,r]of(i=new Map(ij(e).flatMap((e,t)=>e.map(e=>[e,t+1<<24]))),n=new Set(i$(e)),s=new Map,o=new Map,iH(e))){if(!n.has(t)&&2==r.length){let[e,i]=r,n=o.get(e);n||(n=new Map,o.set(e,n)),n.set(i,t)}s.set(t,r.reverse())}}();let t=[],r=[],a=!1;function l(e){let r=i.get(e);r&&(a=!0,e|=r),t.push(e)}for(let i of e)for(;;){if(i<128)t.push(i);else if(iY(i)){let e=i-44032,t=e/588|0,r=e%588/28|0,n=e%28;l(4352+t),l(4449+r),n>0&&l(4519+n)}else{let e=s.get(i);e?r.push(...e):l(i)}if(!r.length)break;i=r.pop()}if(a&&t.length>1){let e=iW(t[0]);for(let r=1;r<t.length;r++){let i=iW(t[r]);if(0==i||e<=i){e=i;continue}let n=r-1;for(;;){let r=t[n+1];if(t[n+1]=t[n],t[n]=r,!n||(e=iW(t[--n]))<=i)break}e=iW(t[r])}}return t}function iZ(e){return function(e){let t=[],r=[],i=-1,n=0;for(let s of e){let e=iW(s),a=iQ(s);if(-1==i)0==e?i=a:t.push(a);else if(n>0&&n>=e)0==e?(t.push(i,...r),r.length=0,i=a):r.push(a),n=e;else{let s=function(e,t){if(e>=4352&&e<4371&&t>=4449&&t<4470)return 44032+(e-4352)*588+(t-4449)*28;if(iY(e)&&t>4519&&t<4547&&(e-44032)%28==0)return e+(t-4519);{let r=o.get(e);return r&&(r=r.get(t))?r:-1}}(i,a);s>=0?i=s:0==n&&0==e?(t.push(i),i=a):(r.push(a),n=e)}}return i>=0&&t.push(i,...r),t}(iJ(e))}let iX=e=>Array.from(e);function i0(e,t){return e.P.has(t)||e.Q.has(t)}class i1 extends Array{get is_emoji(){return!0}}function i2(){let e,t;if(a)return;let r=iF("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI"),i=()=>i$(r),n=()=>new Set(i()),s=(e,t)=>t.forEach(t=>e.add(t));a=new Map(iH(r)),l=n(),c=i(),u=new Set(i().map(e=>c[e])),c=new Set(c),h=n(),n();let o=ij(r),b=r(),w=()=>{let e=new Set;return i().forEach(t=>s(e,o[t])),s(e,i()),e};d=iV(e=>{let t=iV(r).map(e=>e+96);if(t.length){let i=e>=b;return t[0]-=32,t=iq(t),i&&(t=`Restricted[${t}]`),{N:t,P:w(),Q:w(),M:!r(),R:i}}}),f=n(),p=new Map;let v=i().concat(iX(f)).sort((e,t)=>e-t);for(let{V:e,M:t}of(v.forEach((e,t)=>{let i=r(),n=v[t]=i?v[t-i]:{V:[],M:new Map};n.V.push(e),f.has(e)||p.set(e,n)}),new Set(p.values()))){let r=[];for(let t of e){let e=d.filter(e=>i0(e,t)),i=r.find(({G:t})=>e.some(e=>t.has(e)));i||(i={G:new Set,V:[]},r.push(i)),i.V.push(t),s(i.G,e)}let i=r.flatMap(e=>iX(e.G));for(let{G:e,V:n}of r){let r=new Set(i.filter(t=>!e.has(t)));for(let e of n)t.set(e,r)}}g=new Set;let E=new Set,A=e=>g.has(e)?E.add(e):g.add(e);for(let e of d){for(let t of e.P)A(t);for(let t of e.Q)A(t)}for(let e of g)p.has(e)||E.has(e)||p.set(e,1);for(let i of(s(g,iJ(g).map(iQ)),y=(e=[],t=i$(r),function t({S:r,B:i},n,s){if(!(4&r)||s!==n[n.length-1])for(let o of(2&r&&(s=n[n.length-1]),1&r&&e.push(n),i))for(let e of o.Q)t(o,[...n,e],s)}(function e(i){return{S:r(),B:iV(()=>{let i=i$(r).map(e=>t[e]);if(i.length)return e(i)}),Q:i}}([]),[]),e).map(e=>i1.from(e)).sort(iK),m=new Map,y)){let e=[m];for(let t of i){let r=e.map(e=>{let r=e.get(t);return r||(r=new Map,e.set(t,r)),r});65039===t?e.push(...r):e=r}for(let t of e)t.V=i}}function i3(e){return(i5(e)?"":`${i4(i8([e]))} `)+iG(e)}function i4(e){return`"${e}"\u200E`}function i8(e,t=1/0,r=iG){var i;let n=[];i=e[0],i2(),c.has(i)&&n.push("◌"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let s=0,o=e.length;for(let t=0;t<o;t++){let i=e[t];i5(i)&&(n.push(iq(e.slice(s,t))),n.push(r(i)),s=t+1)}return n.push(iq(e.slice(s,o))),n.join("")}function i5(e){return i2(),h.has(e)}function i6(e){return Error(`disallowed character: ${i3(e)}`)}function i7(e,t){let r=i3(t),i=d.find(e=>e.P.has(t));return i&&(r=`${i.N} ${r}`),Error(`illegal mixture: ${e.N} + ${r}`)}function i9(e){return Error(`illegal placement: ${e}`)}function ne(e){return e.filter(e=>65039!=e)}let nt=new Uint8Array(32);function nr(e){return ek(0!==e.length,"invalid ENS name; empty component","comp",e),e}function ni(e){let t=eX(function(e){try{var t;if(0===e.length)throw Error("empty label");return(t=function(e,t,r){if(!e)return[];i2();let i=0;return e.split(".").map(e=>{let n=function(e){let t=[];for(let r=0,i=e.length;r<i;){let i=e.codePointAt(r);r+=i<65536?1:2,t.push(i)}return t}(e),s={input:n,offset:i};i+=n.length+1;try{let e,i=s.tokens=function(e,t,r){let i=[],n=[];for(e=e.slice().reverse();e.length;){let s=function(e,t){let r,i=m,n=e.length;for(;n&&(i=i.get(e[--n]));){let{V:s}=i;s&&(r=s,t&&t.push(...e.slice(n).reverse()),e.length=n)}return r}(e);if(s)n.length&&(i.push(t(n)),n=[]),i.push(r(s));else{let t=e.pop();if(g.has(t))n.push(t);else{let e=a.get(t);if(e)n.push(...e);else if(!l.has(t))throw i6(t)}}}return n.length&&i.push(t(n)),i}(n,t,r),o=i.length;if(!o)throw Error("empty label");let h=s.output=i.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw Error("underscore allowed only at start")}(h),!(s.emoji=o>1||i[0].is_emoji)&&h.every(e=>e<128))(function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw Error(`invalid label extension: "${iq(e.slice(0,4))}"`)})(h),e="ASCII";else{let t=i.flatMap(e=>e.is_emoji?[]:e);if(t.length){if(c.has(h[0]))throw i9("leading combining mark");for(let e=1;e<o;e++){let t=i[e];if(!t.is_emoji&&c.has(t[0]))throw i9(`emoji + combining mark: "${iq(i[e-1])} + ${i8([t[0]])}"`)}!function(e){let t=e[0],r=iM.get(t);if(r)throw i9(`leading ${r}`);let i=e.length,n=-1;for(let s=1;s<i;s++){t=e[s];let i=iM.get(t);if(i){if(n==s)throw i9(`${r} + ${i}`);n=s+1,r=i}}if(n==i)throw i9(`trailing ${r}`)}(h);let r=iX(new Set(t)),[n]=function(e){let t=d;for(let r of e){let e=t.filter(e=>i0(e,r));if(!e.length){if(d.some(e=>i0(e,r)))throw i7(t[0],r);throw i6(r)}if(t=e,1==e.length)break}return t}(r);(function(e,t){for(let r of t)if(!i0(e,r))throw i7(e,r);if(e.M){let e=iJ(t).map(iQ);for(let t=1,r=e.length;t<r;t++)if(u.has(e[t])){let i=t+1;for(let n;i<r&&u.has(n=e[i]);i++)for(let r=t;r<i;r++)if(e[r]==n)throw Error(`duplicate non-spacing marks: ${i3(n)}`);if(i-t>4)throw Error(`excessive non-spacing marks: ${i4(i8(e.slice(t-1,i)))} (${i-t}/4)`);t=i}}})(n,t),function(e,t){let r;let i=[];for(let e of t){let t=p.get(e);if(1===t)return;if(t){let i=t.M.get(e);if(!(r=r?r.filter(e=>i.has(e)):iX(i)).length)return}else i.push(e)}if(r){for(let t of r)if(i.every(e=>i0(t,e)))throw Error(`whole-script confusable: ${e.N}/${t.N}`)}}(n,r),e=n.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s})}(e,iZ,ne)).map(({input:e,error:r,output:i})=>{if(r){let i=r.message;throw Error(1==t.length?i:`Invalid label ${i4(i8(e,63))}: ${i}`)}return iq(i)}).join(".")}catch(t){ek(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),r=[];if(0===e.length)return r;let i=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(nr(t.slice(i,e))),i=e+1);return ek(i<t.length,"invalid ENS name; empty component","name",e),r.push(nr(t.slice(i))),r}function nn(e){ek("string"==typeof e,"invalid ENS name; not a string","name",e),ek(e.length,"invalid ENS name (empty label)","name",e);let t=nt,r=ni(e);for(;r.length;)t=eY(eH([t,eY(r.pop())]));return ej(t)}nt.fill(0);class ns extends eo{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ei(this.buffer)}update(e){V(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=es(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=ei(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){V(this),z(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=ei(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let no=(e,t,r)=>e&t^~e&r,na=(e,t,r)=>e&t^e&r^t&r,nl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nu=new Uint32Array(64);class nh extends ns{constructor(){super(64,32,8,!1),this.A=0|nc[0],this.B=0|nc[1],this.C=0|nc[2],this.D=0|nc[3],this.E=0|nc[4],this.F=0|nc[5],this.G=0|nc[6],this.H=0|nc[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)nu[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=nu[e-15],r=nu[e-2],i=en(t,7)^en(t,18)^t>>>3,n=en(r,17)^en(r,19)^r>>>10;nu[e]=n+nu[e-7]+i+nu[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(en(o,6)^en(o,11)^en(o,25))+no(o,a,l)+nl[e]+nu[e]|0,u=(en(r,2)^en(r,13)^en(r,22))+na(r,i,n)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+u|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){nu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let nd=ea(()=>new nh),[nf,np]=X.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ng=new Uint32Array(80),ny=new Uint32Array(80);class nm extends ns{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)ng[r]=e.getUint32(t),ny[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|ng[e-15],r=0|ny[e-15],i=X.rotrSH(t,r,1)^X.rotrSH(t,r,8)^X.shrSH(t,r,7),n=X.rotrSL(t,r,1)^X.rotrSL(t,r,8)^X.shrSL(t,r,7),s=0|ng[e-2],o=0|ny[e-2],a=X.rotrSH(s,o,19)^X.rotrBH(s,o,61)^X.shrSH(s,o,6),l=X.rotrSL(s,o,19)^X.rotrBL(s,o,61)^X.shrSL(s,o,6),c=X.add4L(n,l,ny[e-7],ny[e-16]),u=X.add4H(c,i,a,ng[e-7],ng[e-16]);ng[e]=0|u,ny[e]=0|c}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){let t=X.rotrSH(u,h,14)^X.rotrSH(u,h,18)^X.rotrBH(u,h,41),b=X.rotrSL(u,h,14)^X.rotrSL(u,h,18)^X.rotrBL(u,h,41),w=u&d^~u&p,v=h&f^~h&g,E=X.add5L(m,b,v,np[e],ny[e]),A=X.add5H(E,y,t,w,nf[e],ng[e]),x=0|E,I=X.rotrSH(r,i,28)^X.rotrBH(r,i,34)^X.rotrBH(r,i,39),T=X.rotrSL(r,i,28)^X.rotrBL(r,i,34)^X.rotrBL(r,i,39),_=r&n^r&o^n&o,S=i&s^i&a^s&a;y=0|p,m=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=X.add(0|l,0|c,0|A,0|x)),l=0|o,c=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let P=X.add3L(x,T,S);r=X.add3H(P,A,I,_),i=0|P}({h:r,l:i}=X.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=X.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=X.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=X.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=X.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=X.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=X.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=X.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(r,i,n,s,o,a,l,c,u,h,d,f,p,g,y,m)}roundClean(){ng.fill(0),ny.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let nb=ea(()=>new nm),nw=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();function nv(e){switch(e){case"sha256":return nd.create();case"sha512":return nb.create()}ek(!1,"invalid hashing algorithm name","algorithm",e)}nw.crypto||nw.msCrypto;let nE=function(e){return nv("sha256").update(e).digest()},nA=function(e){return nv("sha512").update(e).digest()},nx=nE,nI=nA,nT=!1,n_=!1;function nS(e){let t=eL(e,"data");return ej(nx(t))}function nP(e){let t=eL(e,"data");return ej(nI(t))}nS._=nE,nS.lock=function(){nT=!0},nS.register=function(e){if(nT)throw Error("sha256 is locked");nx=e},Object.freeze(nS),nP._=nA,nP.lock=function(){n_=!0},nP.register=function(e){if(n_)throw Error("sha512 is locked");nI=e},Object.freeze(nS);let nN="0x0000000000000000000000000000000000000000000000000000000000000000",nO=BigInt(0),nk=BigInt(1),nC=BigInt(2),nB=BigInt(27),nR=BigInt(28),nD=BigInt(35),nL={};class nU{#k;#C;#B;#R;get r(){return this.#k}set r(e){ek(32===eV(e),"invalid r","value",e),this.#k=ej(e)}get s(){return this.#C}set s(e){ek(32===eV(e),"invalid s","value",e);let t=ej(e);ek(8>parseInt(t.substring(0,3)),"non-canonical s","value",t),this.#C=t}get v(){return this.#B}set v(e){let t=te(e,"value");ek(27===t||28===t,"invalid v","v",e),this.#B=t}get networkV(){return this.#R}get legacyChainId(){let e=this.networkV;return null==e?null:nU.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){let e=eL(this.s);return this.yParity&&(e[0]|=128),ej(e)}get compactSerialized(){return eH([this.r,this.yParityAndS])}get serialized(){return eH([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,i){eR(e,nL,"Signature"),this.#k=t,this.#C=r,this.#B=i,this.#R=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new nU(nL,this.r,this.s,this.v);return this.networkV&&(e.#R=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=e5(e,"v");return t==nB||t==nR?nO:(ek(t>=nD,"invalid EIP-155 v","v",e),(t-nD)/nC)}static getChainIdV(e,t){return e5(e)*nC+BigInt(35+t-27)}static getNormalizedV(e){let t=e5(e);return t===nO||t===nB?27:t===nk||t===nR?28:(ek(t>=nD,"invalid v","v",e),t&nk?27:28)}static from(e){function t(t,r){ek(t,r,"signature",e)}if(null==e)return new nU(nL,nN,nN,27);if("string"==typeof e){let r=eL(e,"signature");if(64===r.length){let e=ej(r.slice(0,32)),t=r.slice(32,64),i=128&t[0]?28:27;return t[0]&=127,new nU(nL,e,ej(t),i)}if(65===r.length){let e=ej(r.slice(0,32)),i=r.slice(32,64);t((128&i[0])==0,"non-canonical s");let n=nU.getNormalizedV(r[64]);return new nU(nL,e,ej(i),n)}t(!1,"invalid raw signature length")}if(e instanceof nU)return e.clone();let r=e.r;t(null!=r,"missing r");let i=eq(tr(r),32),n=function(e,r){if(null!=e)return eq(tr(e),32);if(null!=r){t(eM(r,32),"invalid yParityAndS");let e=eL(r);return e[0]&=127,ej(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t((128&eL(n)[0])==0,"non-canonical s");let{networkV:s,v:o}=function(e,r,i){if(null!=e){let t=e5(e);return{networkV:t>=nD?t:void 0,v:nU.getNormalizedV(t)}}if(null!=r)return t(eM(r,32),"invalid yParityAndS"),{v:128&eL(r)[0]?28:27};if(null!=i){switch(te(i,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),a=new nU(nL,i,n,o);return s&&(a.#R=s),t(null==e.yParity||te(e.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}BigInt(0);let nM=BigInt(1),nF=BigInt(2),n$=e=>e instanceof Uint8Array,nj=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nH(e){if(!n$(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=nj[e[r]];return t}function nV(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function nz(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let i=2*t,n=Number.parseInt(e.slice(i,i+2),16);if(Number.isNaN(n)||n<0)throw Error("Invalid byte sequence");r[t]=n}return r}function nG(e){return nV(nH(e))}function nq(e){if(!n$(e))throw Error("Uint8Array expected");return nV(nH(Uint8Array.from(e).reverse()))}function nK(e,t){return nz(e.toString(16).padStart(2*t,"0"))}function nW(e,t){return nK(e,t).reverse()}function nQ(e,t,r){let i;if("string"==typeof t)try{i=nz(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(n$(t))i=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let n=i.length;if("number"==typeof r&&n!==r)throw Error(`${e} expected ${r} bytes, got ${n}`);return i}function nY(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!n$(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let nJ=e=>(nF<<BigInt(e-1))-nM,nZ=e=>new Uint8Array(e),nX=e=>Uint8Array.from(e);function n0(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=nZ(e),n=nZ(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=nZ())=>{n=a(nX([0]),e),i=a(),0!==e.length&&(n=a(nX([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return nY(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let n1={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function n2(e,t,r={}){let i=(t,r,i)=>{let n=n1[r];if("function"!=typeof n)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!i||void 0!==s)&&!n(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let n3=BigInt(0),n4=BigInt(1),n8=BigInt(2),n5=BigInt(3),n6=BigInt(4),n7=BigInt(5),n9=BigInt(8);function se(e,t){let r=e%t;return r>=n3?r:t+r}function st(e,t,r){let i=e;for(;t-- >n3;)i*=i,i%=r;return i}function sr(e,t){if(e===n3||t<=n3)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=se(e,t),i=t,n=n3,s=n4,o=n4,a=n3;for(;r!==n3;){let e=i/r,t=i%r,l=n-o*e,c=s-a*e;i=r,r=t,n=o,s=a,o=l,a=c}if(i!==n4)throw Error("invert: does not exist");return se(n,t)}BigInt(9),BigInt(16);let si=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sn(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function ss(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function so(e){let t=ss(e);return t+Math.ceil(t/2)}class sa extends eo{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");j(e.outputLen),j(e.blockLen)}(e);let r=es(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return V(this),this.iHash.update(e),this}digestInto(e){V(this),H(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let sl=(e,t,r)=>new sa(e,t).update(r).digest();sl.create=(e,t)=>new sa(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let sc=BigInt(0),su=BigInt(1);function sh(e){return n2(e.Fp,si.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),n2(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...sn(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{bytesToNumberBE:sd,hexToBytes:sf}=A,sp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=sp;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],i=e.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:sd(i),l:e.subarray(r+2)}},toSig(e){let{Err:t}=sp,r="string"==typeof e?sf(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let i=r.length;if(i<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");let{d:n,l:s}=sp._parseInt(r.subarray(2)),{d:o,l:a}=sp._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:n,s:o}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},i=t(r(e.s)),n=t(r(e.r)),s=i.length/2,o=n.length/2,a=r(s),l=r(o);return`30${r(o+s+4)}02${l}${n}02${a}${i}`}},sg=BigInt(0),sy=BigInt(1),sm=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let sb=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sv=BigInt(1),sE=BigInt(2),sA=(e,t)=>(e+t/sE)/t,sx=function(e,t,r=!1,i={}){if(e<=n3)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:n,nByteLength:s}=sn(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let o=function(e){if(e%n6===n5){let t=(e+n4)/n6;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%n9===n7){let t=(e-n7)/n9;return function(e,r){let i=e.mul(r,n8),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,n8),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-n4)/n8;for(t=e-n4,r=0;t%n8===n3;t/=n8,r++);for(i=n8;i<e&&function(e,t,r){if(r<=n3||t<n3)throw Error("Expected power/modulo > 0");if(r===n4)return n3;let i=n4;for(;t>n3;)t&n4&&(i=i*e%r),e=e*e%r,t>>=n4;return i}(i,n,e)!==e-n4;i++);if(1===r){let t=(e+n4)/n6;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+n4)/n8;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,n4<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e),a=Object.freeze({ORDER:e,BITS:n,BYTES:s,MASK:nJ(n),ZERO:n3,ONE:n4,create:t=>se(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return n3<=t&&t<e},is0:e=>e===n3,isOdd:e=>(e&n4)===n4,neg:t=>se(-t,e),eql:(e,t)=>e===t,sqr:t=>se(t*t,e),add:(t,r)=>se(t+r,e),sub:(t,r)=>se(t-r,e),mul:(t,r)=>se(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<n3)throw Error("Expected power > 0");if(r===n3)return e.ONE;if(r===n4)return t;let i=e.ONE,n=t;for(;r>n3;)r&n4&&(i=e.mul(i,n)),n=e.sqr(n),r>>=n4;return i})(a,e,t),div:(t,r)=>se(t*sr(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>sr(t,e),sqrt:i.sqrt||(e=>o(a,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?nW(e,s):nK(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?nq(e):nG(e)}});return Object.freeze(a)}(sb,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),l=e*e*e%sb,c=l*l*e%sb,u=st(c,t,sb)*c%sb,h=st(u,t,sb)*c%sb,d=st(h,sE,sb)*l%sb,f=st(d,i,sb)*d%sb,p=st(f,n,sb)*f%sb,g=st(p,o,sb)*p%sb,y=st(g,a,sb)*g%sb,m=st(y,o,sb)*p%sb,b=st(m,t,sb)*c%sb,w=st(b,s,sb)*f%sb,v=st(w,r,sb)*l%sb,E=st(v,sE,sb);if(!sx.eql(sx.sqr(E),e))throw Error("Cannot find square root");return E}}),sI=function(e,t){let r=t=>(function(e){let t=function(e){let t=sh(e);return n2(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return se(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){let t=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(e){let t=sh(e);n2(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,i=t.toBytes||((e,t,i)=>{let n=t.toAffine();return nY(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),n=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:i,b:n}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,i)),n)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&sg<e&&e<t.n}function a(e){if(!o(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=t;if(i&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=nH(e)),"string"!=typeof e||!i.includes(e.length))throw Error("Invalid key");e=e.padStart(2*n,"0")}try{r="bigint"==typeof e?e:nG(nQ("private key",e,n))}catch(t){throw Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return s&&(r=se(r,o)),a(r),r}let c=new Map;function u(e){if(!(e instanceof h))throw Error("ProjectivePoint expected")}class h{constructor(e,t,i){if(this.px=e,this.py=t,this.pz=i,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==i||!r.isValid(i))throw Error("z required")}static fromAffine(e){let{x:t,y:i}=e||{};if(!e||!r.isValid(t)||!r.isValid(i))throw Error("invalid affine point");if(e instanceof h)throw Error("projective point not allowed");let n=e=>r.eql(e,r.ZERO);return n(t)&&n(i)?h.ZERO:new h(t,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)}static fromHex(e){let t=h.fromAffine(n(nQ("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:i}=this.toAffine();if(!r.isValid(e)||!r.isValid(i))throw Error("bad point: x or y not FE");let n=r.sqr(i),o=s(e);if(!r.eql(n,o))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:i,pz:n}=this,{px:s,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(s,n)),c=r.eql(r.mul(i,a),r.mul(o,n));return l&&c}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:i}=t,n=r.mul(i,sm),{px:s,py:o,pz:a}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),u=r.mul(s,a),u=r.add(u,u),l=r.mul(e,u),c=r.mul(n,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(n,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,g),l=r.sub(l,d),u=r.mul(p,f),u=r.add(u,u),new h(l,c,u=r.add(u,u))}add(e){u(e);let{px:i,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,c=r.ZERO,d=r.ZERO,f=r.ZERO,p=t.a,g=r.mul(t.b,sm),y=r.mul(i,o),m=r.mul(n,a),b=r.mul(s,l),w=r.add(i,n),v=r.add(o,a);w=r.mul(w,v),v=r.add(y,m),w=r.sub(w,v),v=r.add(i,s);let E=r.add(o,l);return v=r.mul(v,E),E=r.add(y,b),v=r.sub(v,E),E=r.add(n,s),c=r.add(a,l),E=r.mul(E,c),c=r.add(m,b),E=r.sub(E,c),f=r.mul(p,v),c=r.mul(g,b),f=r.add(c,f),c=r.sub(m,f),f=r.add(m,f),d=r.mul(c,f),m=r.add(y,y),m=r.add(m,y),b=r.mul(p,b),v=r.mul(g,v),m=r.add(m,b),b=r.sub(y,b),b=r.mul(p,b),v=r.add(v,b),y=r.mul(m,v),d=r.add(d,y),y=r.mul(E,v),c=r.mul(w,c),c=r.sub(c,y),y=r.mul(w,m),f=r.mul(E,f),new h(c,d,f=r.add(f,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,c,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)})}multiplyUnsafe(e){let i=h.ZERO;if(e===sg)return i;if(a(e),e===sy)return this;let{endo:n}=t;if(!n)return f.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:l,k2:c}=n.splitScalar(e),u=i,d=i,p=this;for(;o>sg||c>sg;)o&sy&&(u=u.add(p)),c&sy&&(d=d.add(p)),p=p.double(),o>>=sy,c>>=sy;return s&&(u=u.negate()),l&&(d=d.negate()),d=new h(r.mul(d.px,n.beta),d.py,d.pz),u.add(d)}multiply(e){let i,n;a(e);let{endo:s}=t;if(s){let{k1neg:t,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:d,f:p}=this.wNAF(l);c=f.constTimeNegate(t,c),d=f.constTimeNegate(a,d),d=new h(r.mul(d.px,s.beta),d.py,d.pz),i=c.add(d),n=u.add(p)}else{let{p:t,f:r}=this.wNAF(e);i=t,n=r}return h.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=h.BASE,n=(e,t)=>t!==sg&&t!==sy&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:i,pz:n}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(n));let o=r.mul(t,e),a=r.mul(i,e),l=r.mul(n,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===sy)return!0;if(r)return r(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===sy?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),i(h,this,e)}toHex(e=!0){return nH(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let d=t.nBitLength,f=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let i=e.ZERO,n=t;for(;r>sc;)r&su&&(i=i.add(n)),n=n.double(),r>>=su;return i},precomputeWindow(e,t){let{windows:r,windowSize:n}=i(t),s=[],o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,n,s){let{windows:o,windowSize:a}=i(t),l=e.ZERO,c=e.BASE,u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<o;e++){let t=e*a,i=Number(s&u);s>>=d,i>a&&(i-=h,s+=su);let o=t+Math.abs(i)-1,f=e%2!=0,p=i<0;0===i?c=c.add(r(f,n[t])):l=l.add(r(p,n[o]))}return{p:l,f:c}},wNAFCached(e,t,r,i){let n=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,n),1!==n&&t.set(e,i(s))),this.wNAF(n,s,r)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x),o=nY;return i?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e=nG(o);if(!(sg<e&&e<r.ORDER))throw Error("Point is not on curve");let t=c(e),n=r.sqrt(t);return(1&i)==1!=((n&sy)===sy)&&(n=r.neg(n)),{x:e,y:n}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${n} compressed bytes or ${s} uncompressed bytes`)}}),h=e=>nH(nK(e,t.nByteLength)),d=(e,t,r)=>nG(e.slice(t,r));class f{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new f(d(e=nQ("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=sp.toSig(nQ("DER",e));return new f(t,r)}assertValidity(){if(!u(this.r))throw Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s,recovery:l}=this,c=y(nQ("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",f=a.fromHex(d+h(u)),p=sr(u,i),g=o(-c*p),m=o(s*p),b=a.BASE.multiplyAndAddUnsafe(f,g,m);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>i>>sy}normalizeS(){return this.hasHighS()?new f(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return nz(this.toDERHex())}toDERHex(){return sp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return nz(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function p(e){let t=e instanceof Uint8Array,r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){let r=nG(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},y=t.bits2int_modN||function(e){return o(g(e))},m=nJ(t.nBitLength);function b(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(sg<=e&&e<m))throw Error(`bigint expected < 2^${t.nBitLength}`);return nK(e,t.nByteLength)}let w={lowS:t.lowS,prehash:!1},v={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=w){let{seed:c,k2sig:h}=function(e,n,s=w){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:p,extraEntropy:m}=s;null==d&&(d=!0),e=nQ("msgHash",e),p&&(e=nQ("prehashed msgHash",c(e)));let v=y(e),E=l(n),A=[b(E),b(v)];if(null!=m){let e=!0===m?h(r.BYTES):m;A.push(nQ("extraEntropy",e))}return{seed:nY(...A),k2sig:function(e){let t=g(e);if(!u(t))return;let r=sr(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===sg)return;let l=o(r*o(v+s*E));if(l===sg)return;let c=(n.x===s?0:2)|Number(n.y&sy),h=l;if(d&&l>i>>sy)h=l>i>>sy?o(-l):l,c^=1;return new f(s,h,c)}}}(e,n,s);return n0(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=v){let l,c;if(r=nQ("msgHash",r),n=nQ("publicKey",n),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:u,prehash:h}=s;try{if("string"==typeof e||e instanceof Uint8Array)try{c=f.fromDER(e)}catch(t){if(!(t instanceof sp.Err))throw t;c=f.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;c=new f(t,r)}else throw Error("PARSE");l=a.fromHex(n)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&c.hasHighS())return!1;h&&(r=t.hash(r));let{r:d,s:p}=c,g=y(r),m=sr(p,i),b=o(g*m),w=o(d*m),E=a.BASE.multiplyAndAddUnsafe(l,b,w)?.toAffine();return!!E&&o(E.x)===d},ProjectivePoint:a,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=so(t.n);return function(e,t,r=!1){let i=e.length,n=ss(t),s=so(t);if(i<16||i<s||i>1024)throw Error(`expected ${s}-1024 bytes of input, got ${i}`);let o=se(r?nG(e):nq(e),t-n4)+n4;return r?nW(o,n):nK(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>sl(t,e,function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!et(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(...r)),randomBytes:el});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:sx,n:sw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sv*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),s=sA(t*e,sw),o=sA(-r*e,sw),a=se(e-s*t-o*i,sw),l=se(-s*r-o*t,sw),c=a>n,u=l>n;if(c&&(a=sw-a),u&&(l=sw-l),a>n||l>n)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:a,k2neg:u,k2:l}}}},nd);BigInt(0),sI.ProjectivePoint;class sT{#D;constructor(e){ek(32===eV(e),"invalid private key","privateKey","[REDACTED]"),this.#D=ej(e)}get privateKey(){return this.#D}get publicKey(){return sT.computePublicKey(this.#D)}get compressedPublicKey(){return sT.computePublicKey(this.#D,!0)}sign(e){ek(32===eV(e),"invalid digest length","digest",e);let t=sI.sign(eU(e),eU(this.#D),{lowS:!0});return nU.from({r:tt(t.r,32),s:tt(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=sT.computePublicKey(e);return ej(sI.getSharedSecret(eU(this.#D),eL(t),!1))}static computePublicKey(e,t){let r=eL(e,"key");if(32===r.length)return ej(sI.getPublicKey(r,!!t));if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}return ej(sI.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){ek(32===eV(e),"invalid digest length","digest",e);let r=nU.from(t),i=sI.Signature.fromCompact(eU(eH([r.r,r.s]))),n=(i=i.addRecoveryBit(r.yParity)).recoverPublicKey(eU(e));return ek(null!=n,"invalid signautre for digest","signature",t),"0x"+n.toHex(!1)}static addPoints(e,t,r){let i=sI.ProjectivePoint.fromHex(sT.computePublicKey(e).substring(2)),n=sI.ProjectivePoint.fromHex(sT.computePublicKey(t).substring(2));return"0x"+i.add(n).toHex(!!r)}}function s_(e,t,r){let i=0;for(let n=0;n<r;n++)i=256*i+e[t+n];return i}function sS(e,t,r,i){let n=[];for(;r<t+1+i;){let s=sP(e,r);n.push(s.result),eO((r+=s.consumed)<=t+1+i,"child data too short","BUFFER_OVERRUN",{buffer:e,length:i,offset:t})}return{consumed:1+i,result:n}}function sP(e,t){eO(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let r=t=>{eO(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let i=e[t]-247;r(t+1+i);let n=s_(e,t+1,i);return r(t+1+i+n),sS(e,t,t+1+i,i+n)}if(e[t]>=192){let i=e[t]-192;return r(t+1+i),sS(e,t,t+1,i)}if(e[t]>=184){let i=e[t]-183;r(t+1+i);let n=s_(e,t+1,i);r(t+1+i+n);let s=ej(e.slice(t+1+i,t+1+i+n));return{consumed:1+i+n,result:s}}if(e[t]>=128){let i=e[t]-128;r(t+1+i);let n=ej(e.slice(t+1,t+1+i));return{consumed:1+i,result:n}}return{consumed:1,result:function(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}(e[t])}}function sN(e){let t=eL(e,"data"),r=sP(t,0);return ek(r.consumed===t.length,"unexpected junk after rlp payload","data",e),r.result}function sO(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}let sk="0123456789abcdef";function sC(e){let t="0x";for(let r of function e(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(t){r=r.concat(e(t))}),r.length<=55)return r.unshift(192+r.length),r;let i=sO(r.length);return i.unshift(247+i.length),i.concat(r)}let r=Array.prototype.slice.call(eL(t,"object"));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;let i=sO(r.length);return i.unshift(183+i.length),i.concat(r)}(e))t+=sk[r>>4]+sk[15&r];return t}let sB=BigInt(0),sR=BigInt(2),sD=BigInt(27),sL=BigInt(28),sU=BigInt(35),sM=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function sF(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=nS(t).substring(4))}function s$(e){return"0x"===e?null:tv(e)}function sj(e,t){try{return r2(e)}catch(r){ek(!1,r.message,t,e)}}function sH(e,t){return"0x"===e?0:te(e,t)}function sV(e,t){if("0x"===e)return sB;let r=e5(e,t);return ek(r<=sM,"value exceeds uint size",t,r),r}function sz(e,t){let r=e5(e,"value"),i=tr(r);return ek(i.length<=32,"value too large",`tx.${t}`,r),i}function sG(e){return r2(e).map(e=>[e.address,e.storageKeys])}function sq(e,t){let r;try{if(r=sH(t[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch(e){ek(!1,"invalid yParity","yParity",t[0])}let i=eq(t[1],32),n=eq(t[2],32),s=nU.from({r:i,s:n,yParity:r});e.signature=s}class sK{#L;#U;#t;#M;#F;#$;#j;#H;#V;#z;#G;#q;#K;#W;#Q;#Y;get type(){return this.#L}set type(e){switch(e){case null:this.#L=null;break;case 0:case"legacy":this.#L=0;break;case 1:case"berlin":case"eip-2930":this.#L=1;break;case 2:case"london":case"eip-1559":this.#L=2;break;case 3:case"cancun":case"eip-4844":this.#L=3;break;default:ek(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){let e=this.#U;return null==e&&3===this.type?r3:e}set to(e){this.#U=null==e?null:tv(e)}get nonce(){return this.#M}set nonce(e){this.#M=te(e,"value")}get gasLimit(){return this.#F}set gasLimit(e){this.#F=e5(e)}get gasPrice(){let e=this.#$;return null==e&&(0===this.type||1===this.type)?sB:e}set gasPrice(e){this.#$=null==e?null:e5(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#j;return null==e?2===this.type||3===this.type?sB:null:e}set maxPriorityFeePerGas(e){this.#j=null==e?null:e5(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#H;return null==e?2===this.type||3===this.type?sB:null:e}set maxFeePerGas(e){this.#H=null==e?null:e5(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=ej(e)}get value(){return this.#V}set value(e){this.#V=e5(e,"value")}get chainId(){return this.#z}set chainId(e){this.#z=e5(e)}get signature(){return this.#G||null}set signature(e){this.#G=null==e?null:nU.from(e)}get accessList(){let e=this.#q||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#q=null==e?null:r2(e)}get maxFeePerBlobGas(){let e=this.#K;return null==e&&3===this.type?sB:e}set maxFeePerBlobGas(e){this.#K=null==e?null:e5(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#W;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){ek(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)ek(eM(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#W=e}get blobs(){return null==this.#Y?null:this.#Y.map(e=>Object.assign({},e))}set blobs(e){if(null==e){this.#Y=null;return}let t=[],r=[];for(let i=0;i<e.length;i++){let n=e[i];if(eF(n)){eO(this.#Q,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=eL(n);if(ek(e.length<=131072,"blob is too large",`blobs[${i}]`,n),131072!==e.length){let t=new Uint8Array(131072);t.set(e),e=t}let s=this.#Q.blobToKzgCommitment(e),o=ej(this.#Q.computeBlobKzgProof(e,s));t.push({data:ej(e),commitment:ej(s),proof:o}),r.push(sF(1,s))}else{let e=ej(n.commitment);t.push({data:ej(n.data),commitment:e,proof:ej(n.proof)}),r.push(sF(1,e))}}this.#Y=t,this.#W=r}get kzg(){return this.#Q}set kzg(e){this.#Q=e}constructor(){this.#L=null,this.#U=null,this.#M=0,this.#F=sB,this.#$=null,this.#j=null,this.#H=null,this.#t="0x",this.#V=sB,this.#z=sB,this.#G=null,this.#q=null,this.#K=null,this.#W=null,this.#Y=null,this.#Q=null}get hash(){return null==this.signature?null:eY(this.#J(!0,!1))}get unsignedHash(){return eY(this.unsignedSerialized)}get from(){var e,t,r;return null==this.signature?null:(e=this.unsignedHash,t=this.signature,tv(eY("0x"+("string"==typeof(r=sT.recoverPublicKey(e,t))?sT.computePublicKey(r,!1):r.publicKey).substring(4)).substring(26)))}get fromPublicKey(){return null==this.signature?null:sT.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#J(e,t){eO(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){let r=[sz(e.nonce,"nonce"),sz(e.gasPrice||0,"gasPrice"),sz(e.gasLimit,"gasLimit"),e.to||"0x",sz(e.value,"value"),e.data],i=sB;if(e.chainId!=sB)i=e5(e.chainId,"tx.chainId"),ek(!t||null==t.networkV||t.legacyChainId===i,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(i=t)}if(!t)return i!==sB&&(r.push(tr(i)),r.push("0x"),r.push("0x")),sC(r);let n=BigInt(27+t.yParity);return i!==sB?n=nU.getChainIdV(i,t.v):BigInt(t.v)!==n&&ek(!1,"tx.chainId/sig.v mismatch","sig",t),r.push(tr(n)),r.push(tr(t.r)),r.push(tr(t.s)),sC(r)}(this,r);case 1:return function(e,t){let r=[sz(e.chainId,"chainId"),sz(e.nonce,"nonce"),sz(e.gasPrice||0,"gasPrice"),sz(e.gasLimit,"gasLimit"),e.to||"0x",sz(e.value,"value"),e.data,sG(e.accessList||[])];return t&&(r.push(sz(t.yParity,"recoveryParam")),r.push(tr(t.r)),r.push(tr(t.s))),eH(["0x01",sC(r)])}(this,r);case 2:return function(e,t){let r=[sz(e.chainId,"chainId"),sz(e.nonce,"nonce"),sz(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sz(e.maxFeePerGas||0,"maxFeePerGas"),sz(e.gasLimit,"gasLimit"),e.to||"0x",sz(e.value,"value"),e.data,sG(e.accessList||[])];return t&&(r.push(sz(t.yParity,"yParity")),r.push(tr(t.r)),r.push(tr(t.s))),eH(["0x02",sC(r)])}(this,r);case 3:return function(e,t,r){let i=[sz(e.chainId,"chainId"),sz(e.nonce,"nonce"),sz(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sz(e.maxFeePerGas||0,"maxFeePerGas"),sz(e.gasLimit,"gasLimit"),e.to||r3,sz(e.value,"value"),e.data,sG(e.accessList||[]),sz(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(e,t){ek(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)ek(eM(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(i.push(sz(t.yParity,"yParity")),i.push(tr(t.r)),i.push(tr(t.s)),r)?eH(["0x03",sC([i,r.map(e=>e.data),r.map(e=>e.commitment),r.map(e=>e.proof)])]):eH(["0x03",sC(i)])}(this,r,t?this.blobs:null)}eO(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#J(!0,!0)}get unsignedSerialized(){return this.#J(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,i=null!=this.#K||this.#W;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&eO(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),eO(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),eO(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let n=[];return null!=this.type?n.push(this.type):t?n.push(2):e?(n.push(1),r||n.push(0)):r?(n.push(1),n.push(2)):(i&&this.to||(n.push(0),n.push(1),n.push(2)),n.push(3)),n.sort(),n}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return sK.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new sK;if("string"==typeof e){let t=eL(e);if(t[0]>=127)return sK.from(function(e){let t=sN(e);ek(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let r={type:0,nonce:sH(t[0],"nonce"),gasPrice:sV(t[1],"gasPrice"),gasLimit:sV(t[2],"gasLimit"),to:s$(t[3]),value:sV(t[4],"value"),data:ej(t[5]),chainId:sB};if(6===t.length)return r;let i=sV(t[6],"v"),n=sV(t[7],"r"),s=sV(t[8],"s");if(n===sB&&s===sB)r.chainId=i;else{let e=(i-sU)/sR;e<sB&&(e=sB),r.chainId=e,ek(e!==sB||i===sD||i===sL,"non-canonical legacy v","v",t[6]),r.signature=nU.from({r:eq(t[7],32),s:eq(t[8],32),v:i})}return r}(t));switch(t[0]){case 1:return sK.from(function(e){let t=sN(eL(e).slice(1));ek(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",ej(e));let r={type:1,chainId:sV(t[0],"chainId"),nonce:sH(t[1],"nonce"),gasPrice:sV(t[2],"gasPrice"),gasLimit:sV(t[3],"gasLimit"),to:s$(t[4]),value:sV(t[5],"value"),data:ej(t[6]),accessList:sj(t[7],"accessList")};return 8===t.length||sq(r,t.slice(8)),r}(t));case 2:return sK.from(function(e){let t=sN(eL(e).slice(1));ek(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",ej(e));let r={type:2,chainId:sV(t[0],"chainId"),nonce:sH(t[1],"nonce"),maxPriorityFeePerGas:sV(t[2],"maxPriorityFeePerGas"),maxFeePerGas:sV(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:sV(t[4],"gasLimit"),to:s$(t[5]),value:sV(t[6],"value"),data:ej(t[7]),accessList:sj(t[8],"accessList")};return 9===t.length||sq(r,t.slice(9)),r}(t));case 3:return sK.from(function(e){let t=sN(eL(e).slice(1)),r="3",i=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";let e=t[1],n=t[2],s=t[3];ek(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),ek(Array.isArray(n),"invalid network format: commitments not an array","fields[2]",n),ek(Array.isArray(s),"invalid network format: proofs not an array","fields[3]",s),ek(e.length===n.length,"invalid network format: blobs/commitments length mismatch","fields",t),ek(e.length===s.length,"invalid network format: blobs/proofs length mismatch","fields",t),i=[];for(let r=0;r<t[1].length;r++)i.push({data:e[r],commitment:n[r],proof:s[r]});t=t[0]}ek(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",ej(e));let n={type:3,chainId:sV(t[0],"chainId"),nonce:sH(t[1],"nonce"),maxPriorityFeePerGas:sV(t[2],"maxPriorityFeePerGas"),maxFeePerGas:sV(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:sV(t[4],"gasLimit"),to:s$(t[5]),value:sV(t[6],"value"),data:ej(t[7]),accessList:sj(t[8],"accessList"),maxFeePerBlobGas:sV(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};i&&(n.blobs=i),ek(null!=n.to,`invalid address for transaction type: ${r}`,"data",e),ek(Array.isArray(n.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<n.blobVersionedHashes.length;t++)ek(eM(n.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||sq(n,t.slice(11)),n}(t))}eO(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new sK;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=nU.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&(ek(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ek(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(ek(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ek(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function sW(e){return async function(e,t){let r;eO(null==t||!t.cancelled,"request cancelled before sending","CANCELLED");let i=e.url.split(":")[0].toLowerCase();eO("http"===i||"https"===i,`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),eO("https"===i||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n=null,s=new AbortController,o=setTimeout(()=>{n=eN("request timeout","TIMEOUT"),s.abort()},e.timeout);t&&t.addListener(()=>{n=eN("request cancelled","CANCELLED"),s.abort()});let a={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:s.signal};try{r=await fetch(e.url,a)}catch(e){if(clearTimeout(o),n)throw n;throw e}clearTimeout(o);let l={};r.headers.forEach((e,t)=>{l[t.toLowerCase()]=e});let c=await r.arrayBuffer(),u=null==c?null:new Uint8Array(c);return{statusCode:r.status,statusMessage:r.statusText,headers:l,body:u}}}sW({});let sQ=sW(),sY=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),sJ=RegExp("^ipfs://(ipfs/)?(.*)$","i"),sZ=!1;async function sX(e,t){try{var r;let t=e.match(sY);if(!t)throw Error("invalid data");return new s5(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return eL(t)}(t[3]):(r=t[3],eX(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new s5(599,"BAD REQUEST (invalid data: URI)",{},null,new s8(e))}}function s0(e){return async function(t,r){try{let r=t.match(sJ);if(!r)throw Error("invalid link");return new s8(`${e}${r[2]}`)}catch(e){return new s5(599,"BAD REQUEST (invalid IPFS URI)",{},null,new s8(t))}}}let s1={data:sX,ipfs:s0("https://gateway.ipfs.io/ipfs/")},s2=new WeakMap;class s3{#Z;#X;constructor(e){this.#Z=[],this.#X=!1,s2.set(e,()=>{if(!this.#X){for(let e of(this.#X=!0,this.#Z))setTimeout(()=>{e()},0);this.#Z=[]}})}addListener(e){eO(!this.#X,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#Z.push(e)}get cancelled(){return this.#X}checkSignal(){eO(!this.cancelled,"cancelled","CANCELLED",{})}}function s4(e){if(null==e)throw Error("missing signal; should not happen");return e.checkSignal(),e}class s8{#ee;#et;#er;#ei;#en;#es;#eo;#ea;#el;#ec;#eu;#eh;#ed;#ef;#ep;get url(){return this.#es}set url(e){this.#es=String(e)}get body(){return null==this.#eo?null:new Uint8Array(this.#eo)}set body(e){if(null==e)this.#eo=void 0,this.#ea=void 0;else if("string"==typeof e)this.#eo=eX(e),this.#ea="text/plain";else if(e instanceof Uint8Array)this.#eo=e,this.#ea="application/octet-stream";else if("object"==typeof e)this.#eo=eX(JSON.stringify(e)),this.#ea="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#eo}get method(){return this.#ei?this.#ei:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#ei=String(e).toUpperCase()}get headers(){let e=Object.assign({},this.#er);return this.#el&&(e.authorization=`Basic ${function(e){let t=eL(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(eX(this.#el))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#ea&&(e["content-type"]=this.#ea),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#er[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#er={}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#el||null}setCredentials(e,t){ek(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#el=`${e}:${t}`}get allowGzip(){return this.#et}set allowGzip(e){this.#et=!!e}get allowInsecureAuthentication(){return!!this.#ee}set allowInsecureAuthentication(e){this.#ee=!!e}get timeout(){return this.#en}set timeout(e){ek(e>=0,"timeout must be non-zero","timeout",e),this.#en=e}get preflightFunc(){return this.#ec||null}set preflightFunc(e){this.#ec=e}get processFunc(){return this.#eu||null}set processFunc(e){this.#eu=e}get retryFunc(){return this.#eh||null}set retryFunc(e){this.#eh=e}get getUrlFunc(){return this.#ep||sQ}set getUrlFunc(e){this.#ep=e}constructor(e){this.#es=String(e),this.#ee=!1,this.#et=!0,this.#er={},this.#ei="",this.#en=3e5,this.#ef={slotInterval:250,maxAttempts:12},this.#ep=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#eo?ej(this.#eo):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#ef.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#ef.maxAttempts=e.maxAttempts)}async #eg(e,t,r,i,n){if(e>=this.#ef.maxAttempts)return n.makeServerError("exceeded maximum retry limit");eO(s6()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await new Promise(e=>setTimeout(e,r));let s=this.clone(),o=(s.url.split(":")[0]||"").toLowerCase();if(o in s1){let e=await s1[o](s.url,s4(i.#ed));if(e instanceof s5){let t=e;if(this.processFunc){s4(i.#ed);try{t=await this.processFunc(s,t)}catch(e){(null==e.throttle||"number"!=typeof e.stall)&&t.makeServerError("error in post-processing function",e).assertOk()}}return t}s=e}this.preflightFunc&&(s=await this.preflightFunc(s));let a=await this.getUrlFunc(s,s4(i.#ed)),l=new s5(a.statusCode,a.statusMessage,a.headers,a.body,i);if(301===l.statusCode||302===l.statusCode){try{let r=l.headers.location||"";return s.redirect(r).#eg(e+1,t,0,i,l)}catch(e){}return l}if(429===l.statusCode&&(null==this.retryFunc||await this.retryFunc(s,l,e))){let r=l.headers["retry-after"],n=this.#ef.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(n=parseInt(r)),s.clone().#eg(e+1,t,n,i,l)}if(this.processFunc){s4(i.#ed);try{l=await this.processFunc(s,l)}catch(n){(null==n.throttle||"number"!=typeof n.stall)&&l.makeServerError("error in post-processing function",n).assertOk();let r=this.#ef.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return n.stall>=0&&(r=n.stall),s.clone().#eg(e+1,t,r,i,l)}}return l}send(){return eO(null==this.#ed,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#ed=new s3(this),this.#eg(0,s6()+this.timeout,0,this,new s5(0,"",{},null,this))}cancel(){eO(null!=this.#ed,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let e=s2.get(this);if(!e)throw Error("missing signal; should not happen");e()}redirect(e){let t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();eO("GET"===this.method&&("https"!==t||"http"!==r)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});let i=new s8(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#er=Object.assign({},this.#er),this.#eo&&(i.#eo=new Uint8Array(this.#eo)),i.#ea=this.#ea,i}clone(){let e=new s8(this.url);return e.#ei=this.#ei,this.#eo&&(e.#eo=this.#eo),e.#ea=this.#ea,e.#er=Object.assign({},this.#er),e.#el=this.#el,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#ec=this.#ec,e.#eu=this.#eu,e.#eh=this.#eh,e.#ef=Object.assign({},this.#ef),e.#ep=this.#ep,e}static lockConfig(){sZ=!0}static getGateway(e){return s1[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw Error(`cannot intercept ${e}; use registerGetUrl`);if(sZ)throw Error("gateways locked");s1[e]=t}static registerGetUrl(e){if(sZ)throw Error("gateways locked");sQ=e}static createGetUrlFunc(e){return sW(e)}static createDataGateway(){return sX}static createIpfsGatewayFunc(e){return s0(e)}}class s5{#ey;#em;#er;#eo;#eb;#ew;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#eo?ej(this.#eo):"null"}>`}get statusCode(){return this.#ey}get statusMessage(){return this.#em}get headers(){return Object.assign({},this.#er)}get body(){return null==this.#eo?null:new Uint8Array(this.#eo)}get bodyText(){try{return null==this.#eo?"":e0(this.#eo)}catch(e){eO(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){eO(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,i,n){this.#ey=e,this.#em=t,this.#er=Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=String(r[t]),e),{}),this.#eo=null==i?null:new Uint8Array(i),this.#eb=n||null,this.#ew={message:""}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);let i=new s5(599,r,this.headers,this.body,this.#eb||void 0);return i.#ew={message:e,error:t},i}throwThrottleError(e,t){null==t?t=-1:ek(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);let r=Error(e||"throttling requests");throw eT(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#eo}get request(){return this.#eb}ok(){return""===this.#ew.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#ew;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{this.#eo&&(i=e0(this.#eo))}catch(e){}eO(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function s6(){return new Date().getTime()}let s7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);let s9=BigInt(58);function oe(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):ek(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class ot{name;constructor(e){eT(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw Error("unsupported coin")}async decodeAddress(e,t){throw Error("unsupported coin")}}let or=RegExp("^(ipfs)://(.*)$","i"),oi=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),or,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class on{provider;address;name;#ev;#eE;constructor(e,t,r){eT(this,{provider:e,address:t,name:r}),this.#ev=null,this.#eE=new iU(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ev&&(this.#ev=(async()=>{try{return await this.#eE.supportsInterface("0x9061b923")}catch(e){if(eS(e,"CALL_EXCEPTION"))return!1;throw this.#ev=null,e}})()),await this.#ev}async #eA(e,t){t=(t||[]).slice();let r=this.#eE.interface;t.unshift(nn(this.name));let i=null;await this.supportsWildcard()&&(eO(i=r.getFunction(e),"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[function(e,t){let r=null!=t?t:63;return ek(r<=255,"DNS encoded label cannot exceed 255","length",r),ej(eH(ni(e).map(t=>{ek(t.length<=r,`label ${JSON.stringify(e)} exceeds ${r} bytes`,"name",e);let i=new Uint8Array(t.length+1);return i.set(t,1),i[0]=i.length-1,i})))+"00"}(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{let n=await this.#eE[e](...t);if(i)return r.decodeFunctionResult(i,n)[0];return n}catch(e){if(!eS(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{let e=await this.#eA("addr(bytes32)");if(null==e||e===r3)return null;return e}catch(e){if(eS(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648,r=await this.#eA("addr(bytes32,uint)",[t]);if(eM(r,20))return tv(r)}let t=null;for(let r of this.provider.plugins)if(r instanceof ot&&r.supportsCoinType(e)){t=r;break}if(null==t)return null;let r=await this.#eA("addr(bytes32,uint)",[e]);if(null==r||"0x"===r)return null;let i=await t.decodeAddress(e,r);if(null!=i)return i;eO(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){let t=await this.#eA("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){let e=await this.#eA("contenthash(bytes32)");if(null==e||"0x"===e)return null;let t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let e="e3010170"===t[1]?"ipfs":"ipns",r=parseInt(t[4],16);if(t[5].length===2*r)return`${e}://${function(e){let t=eL(e),r=e9(t),i="";for(;r;)i=s7[Number(r%s9)]+i,r/=s9;for(let e=0;e<t.length&&!t[e];e++)i=s7[0]+i;return i}("0x"+t[2])}`}let r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;eO(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let e=[{type:"name",value:this.name}];try{let t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<oi.length;r++){let i=t.match(oi[r]);if(null==i)continue;let n=i[1].toLowerCase();switch(n){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{let r=oe(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:r}),{linkage:e,url:r}}case"erc721":case"erc1155":{let r="erc721"===n?"tokenURI(uint256)":"uri(uint256)";e.push({type:n,value:t});let s=await this.getAddress();if(null==s)return e.push({type:"!owner",value:""}),{url:null,linkage:e};let o=(i[2]||"").split("/");if(2!==o.length)return e.push({type:`!${n}caip`,value:i[2]||""}),{url:null,linkage:e};let a=o[1],l=new iU(o[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===n){let t=await l.ownerOf(a);if(s!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===n){let t=await l.balanceOf(s,a);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let c=await l[r](a);if(null==c||"0x"===c)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:c}),"erc1155"===n&&(c=c.replace("{id}",tt(a,32).substring(2)),e.push({type:"metadata-url-expanded",value:c})),c.match(/^ipfs:/i)&&(c=oe(c)),e.push({type:"metadata-url",value:c});let u={},h=await new s8(c).send();h.assertOk();try{u=h.bodyJson}catch(t){try{e.push({type:"!metadata",value:h.bodyText})}catch(r){let t=h.body;t&&e.push({type:"!metadata",value:ej(t)})}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(d.match(/^(https:\/\/|data:)/i));else{let t=d.match(or);if(null==t)return e.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:d}),d=oe(d)}return e.push({type:"url",value:d}),{linkage:e,url:d}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){let t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return eO(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async #ex(e,t){let r=await on.getEnsAddress(e);try{let i=new iU(r,["function resolver(bytes32) view returns (address)"],e),n=await i.resolver(nn(t),{enableCcipRead:!0});if(n===r3)return null;return n}catch(e){throw e}return null}static async fromName(e,t){let r=t;for(;;){if(""===r||"."===r||"eth"!==t&&"eth"===r)return null;let i=await on.#ex(e,r);if(null!=i){let n=new on(e,i,t);if(r!==t&&!await n.supportsWildcard())return null;return n}r=r.split(".").slice(1).join(".")}}}let os=BigInt(0);function oo(e,t){return function(r){return null==r?t:e(r)}}function oa(e,t){return r=>{if(t&&null==r)return null;if(!Array.isArray(r))throw Error("not an array");return r.map(t=>e(t))}}function ol(e,t){return r=>{let i={};for(let n in e){let s=n;if(t&&n in t&&!(s in r)){for(let e of t[n])if(e in r){s=e;break}}try{let t=e[n](r[s]);void 0!==t&&(i[n]=t)}catch(t){let e=t instanceof Error?t.message:"not-an-error";eO(!1,`invalid value for value.${n} (${e})`,"BAD_DATA",{value:r})}}return i}}function oc(e){return ek(eM(e,!0),"invalid data","value",e),e}function ou(e){return ek(eM(e,32),"invalid hash","value",e),e}let oh=ol({address:tv,blockHash:ou,blockNumber:te,data:oc,index:te,removed:oo(function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}ek(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)},!1),topics:oa(ou),transactionHash:ou,transactionIndex:te},{index:["logIndex"]}),od=ol({hash:oo(ou),parentHash:ou,parentBeaconBlockRoot:oo(ou,null),number:te,timestamp:te,nonce:oo(oc),difficulty:e5,gasLimit:e5,gasUsed:e5,stateRoot:oo(ou,null),receiptsRoot:oo(ou,null),blobGasUsed:oo(e5,null),excessBlobGas:oo(e5,null),miner:oo(tv),prevRandao:oo(ou,null),extraData:oc,baseFeePerGas:oo(e5)},{prevRandao:["mixHash"]}),of=ol({transactionIndex:te,blockNumber:te,transactionHash:ou,address:tv,topics:oa(ou),data:oc,index:te,blockHash:ou},{index:["logIndex"]}),op=ol({to:oo(tv,null),from:oo(tv,null),contractAddress:oo(tv,null),index:te,root:oo(ej),gasUsed:e5,blobGasUsed:oo(e5,null),logsBloom:oo(oc),blockHash:ou,hash:ou,logs:oa(function(e){return of(e)}),blockNumber:te,cumulativeGasUsed:e5,effectiveGasPrice:oo(e5),blobGasPrice:oo(e5,null),status:oo(te),type:oo(te,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function og(e){e.to&&e5(e.to)===os&&(e.to="0x0000000000000000000000000000000000000000");let t=ol({hash:ou,index:oo(te,void 0),type:e=>"0x"===e||null==e?0:te(e),accessList:oo(r2,null),blobVersionedHashes:oo(oa(ou,!0),null),blockHash:oo(ou,null),blockNumber:oo(te,null),transactionIndex:oo(te,null),from:tv,gasPrice:oo(e5),maxPriorityFeePerGas:oo(e5),maxFeePerGas:oo(e5),maxFeePerBlobGas:oo(e5,null),gasLimit:e5,to:oo(tv,null),value:e5,nonce:te,data:oc,creates:oo(tv,null),chainId:oo(e5,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){let t=tv(e.from),r=e5(e.nonce,"tx.nonce").toString(16);return tv(ez(eY(sC([t,r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r])),12))}(t)),(1===e.type||2===e.type)&&null==e.accessList&&(t.accessList=[]),e.signature?t.signature=nU.from(e.signature):t.signature=nU.from(e),null==t.chainId){let e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&e5(t.blockHash)===os&&(t.blockHash=null),t}class oy{name;constructor(e){eT(this,{name:e})}clone(){return new oy(this.name)}}class om extends oy{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);let r={effectiveBlock:e};function i(e,i){let n=(t||{})[e];null==n&&(n=i),ek("number"==typeof n,`invalud value for ${e}`,"costs",t),r[e]=n}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),eT(this,r)}clone(){return new om(this.effectiveBlock,this)}}class ob extends oy{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),eT(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new ob(this.address,this.targetNetwork)}}class ow extends oy{#es;#eI;get url(){return this.#es}get processFunc(){return this.#eI}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#es=e,this.#eI=t}clone(){return this}}let ov=new Map;class oE{#eT;#z;#e_;constructor(e,t){this.#eT=e,this.#z=e5(t),this.#e_=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#eT}set name(e){this.#eT=e}get chainId(){return this.#z}set chainId(e){this.#z=e5(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===e5(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===e5(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===e5(e.chainId)}catch(e){}return!1}if(null!=e.name)return this.name===e.name}return!1}get plugins(){return Array.from(this.#e_.values())}attachPlugin(e){if(this.#e_.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#e_.set(e.name,e.clone()),this}getPlugin(e){return this.#e_.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){let e=new oE(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){let t=this.getPlugin("org.ethers.plugins.network.GasCost")||new om,r=t.txBase;if(null==e.to&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)"00"===e.data.substring(i,i+2)?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){let i=r2(e.accessList);for(let e in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[e].storageKeys.length}return r}static from(e){if(function(){oI||(oI=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[ox("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[ox("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1}));function e(e,t,r){let i=function(){let i=new oE(e,t);return null!=r.ensNetwork&&i.attachPlugin(new ob(null,r.ensNetwork)),i.attachPlugin(new om),(r.plugins||[]).forEach(e=>{i.attachPlugin(e)}),i};oE.register(e,i),oE.register(t,i),r.altNames&&r.altNames.forEach(e=>{oE.register(e,i)})}}(),null==e)return oE.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){let t=ov.get(e);if(t)return t();if("bigint"==typeof e)return new oE("unknown",e);ek(!1,"unknown network","network",e)}if("function"==typeof e.clone)return e.clone();if("object"==typeof e){ek("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);let t=new oE(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new ob(e.ensAddress,e.ensNetwork)),t}ek(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));let r=ov.get(e);r&&ek(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),ov.set(e,t)}}function oA(e,t){let r=String(e);if(!r.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${e}`);let i=r.split(".");if(1===i.length&&i.push(""),2!==i.length)throw Error(`invalid gwei value: ${e}`);for(;i[1].length<t;)i[1]+="0";if(i[1].length>9){let e=BigInt(i[1].substring(0,9));!i[1].substring(9).match(/^0+$/)&&e++,i[1]=e.toString()}return BigInt(i[0]+i[1])}function ox(e){return new ow(e,async(e,t,r)=>{let i;r.setHeader("User-Agent","ethers");try{let[t,n]=await Promise.all([r.send(),e()]),s=(i=t).bodyJson.standard;return{gasPrice:n.gasPrice,maxFeePerGas:oA(s.maxFee,9),maxPriorityFeePerGas:oA(s.maxPriorityFee,9)}}catch(e){eO(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:e})}})}let oI=!1;function oT(e){return JSON.parse(JSON.stringify(e))}class o_{#eS;#eP;#eN;#eO;constructor(e){this.#eS=e,this.#eP=null,this.#eN=4e3,this.#eO=-2}get pollingInterval(){return this.#eN}set pollingInterval(e){this.#eN=e}async #ek(){try{let e=await this.#eS.getBlockNumber();if(-2===this.#eO){this.#eO=e;return}if(e!==this.#eO){for(let t=this.#eO+1;t<=e;t++){if(null==this.#eP)return;await this.#eS.emit("block",t)}this.#eO=e}}catch(e){}null!=this.#eP&&(this.#eP=this.#eS._setTimeout(this.#ek.bind(this),this.#eN))}start(){this.#eP||(this.#eP=this.#eS._setTimeout(this.#ek.bind(this),this.#eN),this.#ek())}stop(){this.#eP&&(this.#eS._clearTimeout(this.#eP),this.#eP=null)}pause(e){this.stop(),e&&(this.#eO=-2)}resume(){this.start()}}class oS{#eS;#ek;#eC;constructor(e){this.#eS=e,this.#eC=!1,this.#ek=e=>{this._poll(e,this.#eS)}}async _poll(e,t){throw Error("sub-classes must override this")}start(){this.#eC||(this.#eC=!0,this.#ek(-2),this.#eS.on("block",this.#ek))}stop(){this.#eC&&(this.#eC=!1,this.#eS.off("block",this.#ek))}pause(e){this.stop()}resume(){this.start()}}class oP extends oS{#eB;#eR;constructor(e,t){super(e),this.#eB=t,this.#eR=-2}pause(e){e&&(this.#eR=-2),super.pause(e)}async _poll(e,t){let r=await t.getBlock(this.#eB);null!=r&&(-2===this.#eR?this.#eR=r.number:r.number>this.#eR&&(t.emit(this.#eB,r.number),this.#eR=r.number))}}class oN extends oS{#O;constructor(e,t){super(e),this.#O=oT(t)}async _poll(e,t){throw Error("@TODO")}}class oO extends oS{#eD;constructor(e,t){super(e),this.#eD=t}async _poll(e,t){let r=await t.getTransactionReceipt(this.#eD);r&&t.emit(this.#eD,r)}}class ok{#eS;#O;#eP;#eC;#eO;constructor(e,t){this.#eS=e,this.#O=oT(t),this.#eP=this.#ek.bind(this),this.#eC=!1,this.#eO=-2}async #ek(e){if(-2===this.#eO)return;let t=oT(this.#O);t.fromBlock=this.#eO+1,t.toBlock=e;let r=await this.#eS.getLogs(t);if(0===r.length){this.#eO<e-60&&(this.#eO=e-60);return}for(let e of r)this.#eS.emit(this.#O,e),this.#eO=e.blockNumber}start(){this.#eC||(this.#eC=!0,-2===this.#eO&&this.#eS.getBlockNumber().then(e=>{this.#eO=e}),this.#eS.on("block",this.#eP))}stop(){this.#eC&&(this.#eC=!1,this.#eS.off("block",this.#eP))}pause(e){this.stop(),e&&(this.#eO=-2)}resume(){this.start()}}let oC=BigInt(2);function oB(e){return e&&"function"==typeof e.then}function oR(e,t){return e+":"+JSON.stringify(t,(e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){let e=Object.keys(t);return e.sort(),e.reduce((e,r)=>(e[r]=t[r],e),{})}return t})}class oD{name;constructor(e){eT(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function oL(e){return(e=Array.from(new Set(e).values())).sort(),e}async function oU(e,t){if(null==e)throw Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(eM(e,32)){let t=e.toLowerCase();return{type:"transaction",tag:oR("tx",{hash:t}),hash:t}}if(e.orphan){let t=e;return{type:"orphan",tag:oR("orphan",t),filter:JSON.parse(JSON.stringify(t))}}if(e.address||e.topics){let r=e,i={topics:(r.topics||[]).map(e=>null==e?null:Array.isArray(e)?oL(e.map(e=>e.toLowerCase())):e.toLowerCase())};if(r.address){let e=[],n=[],s=r=>{eM(r)?e.push(r):n.push((async()=>{e.push(await rF(r,t))})())};Array.isArray(r.address)?r.address.forEach(s):s(r.address),n.length&&await Promise.all(n),i.address=oL(e.map(e=>e.toLowerCase()))}return{filter:i,tag:oR("event",i),type:"event"}}ek(!1,"unknown ProviderEvent","event",e)}function oM(){return new Date().getTime()}let oF={cacheTimeout:250,pollingInterval:4e3};class o${#eL;#e_;#eU;#eM;#eF;#e$;#ej;#eH;#eV;#ez;#eG;#u;constructor(e,t){if(this.#u=Object.assign({},oF,t||{}),"any"===e)this.#e$=!0,this.#eF=null;else if(e){let t=oE.from(e);this.#e$=!1,this.#eF=Promise.resolve(t),setTimeout(()=>{this.emit("network",t,null)},0)}else this.#e$=!1,this.#eF=null;this.#eH=-1,this.#ej=new Map,this.#eL=new Map,this.#e_=new Map,this.#eU=null,this.#eM=!1,this.#eV=1,this.#ez=new Map,this.#eG=!1}get pollingInterval(){return this.#u.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#e_.values())}attachPlugin(e){if(this.#e_.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#e_.set(e.name,e.connect(this)),this}getPlugin(e){return this.#e_.get(e)||null}get disableCcipRead(){return this.#eG}set disableCcipRead(e){this.#eG=!!e}async #eq(e){let t=this.#u.cacheTimeout;if(t<0)return await this._perform(e);let r=oR(e.method,e),i=this.#ej.get(r);return i||(i=this._perform(e),this.#ej.set(r,i),setTimeout(()=>{this.#ej.get(r)===i&&this.#ej.delete(r)},t)),await i}async ccipReadFetch(e,t,r){if(this.disableCcipRead||0===r.length||null==e.to)return null;let i=e.to.toLowerCase(),n=t.toLowerCase(),s=[];for(let t=0;t<r.length;t++){let o;let a=r[t],l=new s8(a.replace("{sender}",i).replace("{data}",n));-1===a.indexOf("{data}")&&(l.body={data:n,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:t,urls:r});let c="unknown error";try{o=await l.send()}catch(e){s.push(e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:e}});continue}try{let e=o.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:e}),e.data;e.message&&(c=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:e})}catch(e){}eO(o.statusCode<400||o.statusCode>=500,`response not found during CCIP fetch: ${c}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:a,errorMessage:c}}),s.push(c)}eO(!1,`error encountered during CCIP fetch: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,t){return new r9(function(e){let t=od(e);return t.transactions=e.transactions.map(e=>"string"==typeof e?e:og(e)),t}(e),this)}_wrapLog(e,t){return new ie(oh(e),this)}_wrapTransactionReceipt(e,t){return new it(op(e),this)}_wrapTransactionResponse(e,t){return new ir(og(e),this)}_detectNetwork(){eO(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){eO(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){let e=te(await this.#eq({method:"getBlockNumber"}),"%response");return this.#eH>=0&&(this.#eH=e),e}_getAddress(e){return rF(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return eM(e)?eM(e,32)?e:ti(e):("bigint"==typeof e&&(e=te(e,"blockTag")),"number"==typeof e)?e>=0?ti(e):this.#eH>=0?ti(this.#eH+e):this.getBlockNumber().then(t=>ti(t+e)):void ek(!1,"invalid blockTag","blockTag",e)}_getFilter(e){let t,r;let i=(e.topics||[]).map(e=>null==e?null:Array.isArray(e)?oL(e.map(e=>e.toLowerCase())):e.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,s=(e,t,r)=>{let s;switch(e.length){case 0:break;case 1:s=e[0];break;default:e.sort(),s=e}if(n&&(null!=t||null!=r))throw Error("invalid filter");let o={};return s&&(o.address=s),i.length&&(o.topics=i),t&&(o.fromBlock=t),r&&(o.toBlock=r),n&&(o.blockHash=n),o},o=[];if(e.address){if(Array.isArray(e.address))for(let t of e.address)o.push(this._getAddress(t));else o.push(this._getAddress(e.address))}return"fromBlock"in e&&(t=this._getBlockTag(e.fromBlock)),("toBlock"in e&&(r=this._getBlockTag(e.toBlock)),o.filter(e=>"string"!=typeof e).length||null!=t&&"string"!=typeof t||null!=r&&"string"!=typeof r)?Promise.all([Promise.all(o),t,r]).then(e=>s(e[0],e[1],e[2])):s(o,t,r)}_getTransactionRequest(e){let t=r7(e),r=[];if(["to","from"].forEach(e=>{if(null==t[e])return;let i=rF(t[e],this);oB(i)?r.push(async function(){t[e]=await i}()):t[e]=i}),null!=t.blockTag){let e=this._getBlockTag(t.blockTag);oB(e)?r.push(async function(){t.blockTag=await e}()):t.blockTag=e}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(null==this.#eF){let e=(async()=>{try{let e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#eF===e&&(this.#eF=null),t}})();return this.#eF=e,(await e).clone()}let e=this.#eF,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#e$?(this.emit("network",r,t),this.#eF===e&&(this.#eF=Promise.resolve(r))):eO(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){let e=await this.getNetwork(),t=async()=>{let{_block:t,gasPrice:r,priorityFee:i}=await eI({_block:this.#eK("latest",!1),gasPrice:(async()=>{try{let e=await this.#eq({method:"getGasPrice"});return e5(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{let e=await this.#eq({method:"getPriorityFee"});return e5(e,"%response")}catch(e){}return null})()}),n=null,s=null,o=this._wrapBlock(t,e);return o&&o.baseFeePerGas&&(s=null!=i?i:BigInt("1000000000"),n=o.baseFeePerGas*oC+s),new r6(r,n,s)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){let e=new s8(r.url),i=await r.processFunc(t,this,e);return new r6(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return oB(t)&&(t=await t),e5(await this.#eq({method:"estimateGas",transaction:t}),"%response")}async #eW(e,t,r){eO(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});let i=r7(e);try{return ej(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(e){if(!this.disableCcipRead&&eP(e)&&e.data&&r>=0&&"latest"===t&&null!=i.to&&"0x556f1830"===ez(e.data,0,4)){let n;let s=e.data,o=await rF(i.to,this);try{n=function(e){let t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};eO(eV(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let r=ez(e,0,32);eO(ez(r,0,12)===ez(oz,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=ez(r,12);try{let r=[],i=te(ez(e,32,64)),n=te(ez(e,i,i+32)),s=ez(e,i+32);for(let e=0;e<n;e++){let t=function(e,t){try{let r=oj(e,t);if(r)return e0(r)}catch(e){}return null}(s,32*e);if(null==t)throw Error("abort");r.push(t)}t.urls=r}catch(e){eO(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let r=oj(e,64);if(null==r)throw Error("abort");t.calldata=r}catch(e){eO(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}eO(ez(e,100,128)===ez(oz,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=ez(e,96,100);try{let r=oj(e,128);if(null==r)throw Error("abort");t.extraData=r}catch(e){eO(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(e=>t[e]),t}(ez(e.data,4))}catch(e){eO(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:s}})}eO(n.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:n.errorArgs}});let a=await this.ccipReadFetch(i,n.calldata,n.urls);eO(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:e.data,errorArgs:n.errorArgs}});let l={to:o,data:eH([n.selector,function(e){let t=[],r=0;for(let i=0;i<e.length;i++)t.push(oV),r+=32;for(let i=0;i<e.length;i++){let n=eL(e[i]);t[i]=oH(r),t.push(oH(n.length)),t.push(function(e){if(e.length%32==0)return e;let t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}(n)),r+=32+32*Math.ceil(n.length/32)}return eH(t)}([a,n.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{let e=await this.#eW(l,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:e}),e}}throw e}}async #eQ(e){let{value:t}=await eI({network:this.getNetwork(),value:e});return t}async call(e){let{tx:t,blockTag:r}=await eI({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#eQ(this.#eW(t,r,e.enableCcipRead?0:-1))}async #eY(e,t,r){let i=this._getAddress(t),n=this._getBlockTag(r);return("string"!=typeof i||"string"!=typeof n)&&([i,n]=await Promise.all([i,n])),await this.#eQ(this.#eq(Object.assign(e,{address:i,blockTag:n})))}async getBalance(e,t){return e5(await this.#eY({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return te(await this.#eY({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return ej(await this.#eY({method:"getCode"},e,t))}async getStorage(e,t,r){let i=e5(t,"position");return ej(await this.#eY({method:"getStorage",position:i},e,r))}async broadcastTransaction(e){let{blockNumber:t,hash:r,network:i}=await eI({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),n=sK.from(e);if(n.hash!==r)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(n,i).replaceableTransaction(t)}async #eK(e,t){if(eM(e,32))return await this.#eq({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return"string"!=typeof r&&(r=await r),await this.#eq({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){let{network:r,params:i}=await eI({network:this.getNetwork(),params:this.#eK(e,!!t)});return null==i?null:this._wrapBlock(i,r)}async getTransaction(e){let{network:t,params:r}=await eI({network:this.getNetwork(),params:this.#eq({method:"getTransaction",hash:e})});return null==r?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){let{network:t,params:r}=await eI({network:this.getNetwork(),params:this.#eq({method:"getTransactionReceipt",hash:e})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){let t=await this.#eq({method:"getTransaction",hash:e});if(null==t)throw Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){let{result:t}=await eI({network:this.getNetwork(),result:this.#eq({method:"getTransactionResult",hash:e})});return null==t?null:ej(t)}async getLogs(e){let t=this._getFilter(e);oB(t)&&(t=await t);let{network:r,params:i}=await eI({network:this.getNetwork(),params:this.#eq({method:"getLogs",filter:t})});return i.map(e=>this._wrapLog(e,r))}_getProvider(e){eO(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await on.fromName(this,e)}async getAvatar(e){let t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){let t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){let t=nn((e=tv(e)).substring(2).toLowerCase()+".addr.reverse");try{let r=await on.getEnsAddress(this),i=new iU(r,["function resolver(bytes32) view returns (address)"],this),n=await i.resolver(t);if(null==n||n===r3)return null;let s=new iU(n,["function name(bytes32) view returns (string)"],this),o=await s.name(t);if(await this.resolveName(o)!==e)return null;return o}catch(e){if(eS(e,"BAD_DATA")&&"0x"===e.value||eS(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,r){let i=null!=t?t:1;return 0===i?this.getTransactionReceipt(e):new Promise(async(t,n)=>{let s=null,o=async r=>{try{let n=await this.getTransactionReceipt(e);if(null!=n&&r-n.blockNumber+1>=i){t(n),s&&(clearTimeout(s),s=null);return}}catch(e){console.log("EEE",e)}this.once("block",o)};null!=r&&(s=setTimeout(()=>{null!=s&&(s=null,this.off("block",o),n(eN("timeout","TIMEOUT",{reason:"timeout"})))},r)),o(await this.getBlockNumber())})}async waitForBlock(e){eO(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){let t=this.#ez.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#ez.delete(e))}_setTimeout(e,t){null==t&&(t=0);let r=this.#eV++,i=()=>{this.#ez.delete(r),e()};if(this.paused)this.#ez.set(r,{timer:null,func:i,time:t});else{let e=setTimeout(i,t);this.#ez.set(r,{timer:e,func:i,time:oM()})}return r}_forEachSubscriber(e){for(let t of this.#eL.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new oD(e.type);case"block":{let e=new o_(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new oP(this,e.type);case"event":return new ok(this,e.filter);case"transaction":return new oO(this,e.hash);case"orphan":return new oN(this,e.filter)}throw Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(let r of this.#eL.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),null!=this.#eU&&t.pause(this.#eU);break}}async #eJ(e,t){let r=await oU(e,this);return"event"===r.type&&t&&t.length>0&&!0===t[0].removed&&(r=await oU({orphan:"drop-log",log:t[0]},this)),this.#eL.get(r.tag)||null}async #eZ(e){let t=await oU(e,this),r=t.tag,i=this.#eL.get(r);return!i&&(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#eL.set(r,i)),i}async on(e,t){let r=await this.#eZ(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eU&&r.subscriber.pause(this.#eU)),this}async once(e,t){let r=await this.#eZ(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eU&&r.subscriber.pause(this.#eU)),this}async emit(e,...t){let r=await this.#eJ(e,t);if(!r||0===r.listeners.length)return!1;let i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:r,once:i})=>{let n=new io(this,i?null:r,e);try{r.call(this,...t,n)}catch(e){}return!i}),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#eL.delete(r.tag)),i>0}async listenerCount(e){if(e){let t=await this.#eJ(e);return t?t.listeners.length:0}let t=0;for(let{listeners:e}of this.#eL.values())t+=e.length;return t}async listeners(e){if(e){let t=await this.#eJ(e);return t?t.listeners.map(({listener:e})=>e):[]}let t=[];for(let{listeners:e}of this.#eL.values())t=t.concat(e.map(({listener:e})=>e));return t}async off(e,t){let r=await this.#eJ(e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return t&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#eL.delete(r.tag)),this}async removeAllListeners(e){if(e){let{tag:t,started:r,subscriber:i}=await this.#eZ(e);r&&i.stop(),this.#eL.delete(t)}else for(let[e,{started:t,subscriber:r}]of this.#eL)t&&r.stop(),this.#eL.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#eM}destroy(){for(let e of(this.removeAllListeners(),this.#ez.keys()))this._clearTimeout(e);this.#eM=!0}get paused(){return null!=this.#eU}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#eH=-1,null!=this.#eU){if(!!e==this.#eU)return;eO(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}for(let t of(this._forEachSubscriber(t=>t.pause(e)),this.#eU=!!e,this.#ez.values()))t.timer&&clearTimeout(t.timer),t.time=oM()-t.time}resume(){if(null!=this.#eU)for(let e of(this._forEachSubscriber(e=>e.resume()),this.#eU=null,this.#ez.values())){let t=e.time;t<0&&(t=0),e.time=oM(),setTimeout(e.func,t)}}}function oj(e,t){if("0x"===e)return null;try{let r=te(ez(e,t,t+32)),i=te(ez(e,r,r+32));return ez(e,r+32,r+32+i)}catch(e){}return null}function oH(e){let t=tr(e);if(t.length>32)throw Error("internal; should not happen");let r=new Uint8Array(32);return r.set(t,32-t.length),r}let oV=new Uint8Array([]),oz="0x0000000000000000000000000000000000000000000000000000000000000000";function oG(e,t){if(e.provider)return e.provider;eO(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function oq(e,t){let r=r7(t);if(null!=r.to&&(r.to=rF(r.to,e)),null!=r.from){let t=r.from;r.from=Promise.all([e.getAddress(),rF(t,e)]).then(([e,t])=>(ek(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e))}else r.from=e.getAddress();return await eI(r)}class oK{provider;constructor(e){eT(this,{provider:e||null})}async getNonce(e){return oG(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await oq(this,e)}async populateTransaction(e){let t=oG(this,"populateTransaction"),r=await oq(this,e);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));let i=await this.provider.getNetwork();null!=r.chainId?ek(e5(r.chainId)===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):r.chainId=i.chainId;let n=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null!=r.gasPrice&&(2===r.type||n)?ek(!1,"eip-1559 transaction do not support gasPrice","tx",e):(0===r.type||1===r.type)&&n&&ek(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(2===r.type||null==r.type)&&null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas)r.type=2;else if(0===r.type||1===r.type){let e=await t.getFeeData();eO(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice)}else{let e=await t.getFeeData();if(null==r.type){if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas){if(r.type=2,null!=r.gasPrice){let e=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=e,r.maxPriorityFeePerGas=e}else null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas)}else null!=e.gasPrice?(eO(!n,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice),r.type=0):eO(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"})}else(2===r.type||3===r.type)&&(null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}return await eI(r)}async estimateGas(e){return oG(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return oG(this,"call").call(await this.populateCall(e))}async resolveName(e){let t=oG(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){let t=oG(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;let i=sK.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}}class oW{#eS;#eX;#eP;#eC;#e0;#e1;constructor(e){this.#eS=e,this.#eX=null,this.#eP=this.#ek.bind(this),this.#eC=!1,this.#e0=null,this.#e1=!1}_subscribe(e){throw Error("subclasses must override this")}_emitResults(e,t){throw Error("subclasses must override this")}_recover(e){throw Error("subclasses must override this")}async #ek(e){try{null==this.#eX&&(this.#eX=this._subscribe(this.#eS));let e=null;try{e=await this.#eX}catch(e){if(!eS(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e){this.#eX=null,this.#eS._recoverSubscriber(this,this._recover(this.#eS));return}let t=await this.#eS.getNetwork();if(this.#e0||(this.#e0=t),this.#e0.chainId!==t.chainId)throw Error("chaid changed");if(this.#e1)return;let r=await this.#eS.send("eth_getFilterChanges",[e]);await this._emitResults(this.#eS,r)}catch(e){console.log("@TODO",e)}this.#eS.once("block",this.#eP)}#e2(){let e=this.#eX;e&&(this.#eX=null,e.then(e=>{this.#eS.destroyed||this.#eS.send("eth_uninstallFilter",[e])}))}start(){this.#eC||(this.#eC=!0,this.#ek(-2))}stop(){this.#eC&&(this.#eC=!1,this.#e1=!0,this.#e2(),this.#eS.off("block",this.#eP))}pause(e){e&&this.#e2(),this.#eS.off("block",this.#eP)}resume(){this.start()}}class oQ extends oW{#e3;constructor(e,t){super(e),this.#e3=JSON.parse(JSON.stringify(t))}_recover(e){return new ok(e,this.#e3)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e3])}async _emitResults(e,t){for(let r of t)e.emit(this.#e3,e._wrapLog(r,e._network))}}class oY extends oW{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(let r of t)e.emit("pending",r)}}let oJ="bigint,boolean,function,number,string,symbol".split(/,/g);function oZ(e){if(null==e||oJ.indexOf(typeof e)>=0||"function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(oZ);if("object"==typeof e)return Object.keys(e).reduce((t,r)=>(t[r]=e[r],t),{});throw Error(`should not happen: ${e} (${typeof e})`)}function oX(e){return e?e.toLowerCase():e}let o0={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class o1 extends oK{address;constructor(e,t){super(e),eT(this,{address:t=tv(t)})}connect(e){eO(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){let t=oZ(e),r=[];if(t.from){let i=t.from;r.push((async()=>{let r=await rF(i,this.provider);ek(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r})())}else t.from=this.address;if(null==t.gasLimit&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){let e=t.to;r.push((async()=>{t.to=await rF(e,this.provider)})())}r.length&&await Promise.all(r);let i=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){let t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((e,i)=>{let n=[1e3,100],s=0,o=async()=>{try{let i=await this.provider.getTransaction(r);if(null!=i){e(i.replaceableTransaction(t));return}}catch(e){if(eS(e,"CANCELLED")||eS(e,"BAD_DATA")||eS(e,"NETWORK_ERROR")||eS(e,"UNSUPPORTED_OPERATION")){null==e.info&&(e.info={}),e.info.sendTransactionHash=r,i(e);return}if(eS(e,"INVALID_ARGUMENT")&&(s++,null==e.info&&(e.info={}),e.info.sendTransactionHash=r,s>10)){i(e);return}this.provider.emit("error",eN("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout(()=>{o()},n.pop()||4e3)};o()})}async signTransaction(e){let t=oZ(e);if(t.from){let r=await rF(t.from,this.provider);ek(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;let r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){let t="string"==typeof e?eX(e):e;return await this.provider.send("personal_sign",[ej(t),this.address.toLowerCase()])}async signTypedData(e,t,r){let i=oZ(r),n=await r0.resolveNames(e,t,i,async e=>{let t=await rF(e);return ek(null!=t,"TypedData does not support null address","value",e),t});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(r0.getPayload(n.domain,t,n.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){let t="string"==typeof e?eX(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ej(t)])}}class o2 extends o${#u;#e4;#e8;#e5;#e6;#e0;#e7;#e9(){if(this.#e5)return;let e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#e5=setTimeout(()=>{this.#e5=null;let e=this.#e8;for(this.#e8=[];e.length;){let t=[e.shift()];for(;e.length&&t.length!==this.#u.batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map(e=>e.payload)).length>this.#u.batchMaxSize){e.unshift(t.pop());break}(async()=>{let e=1===t.length?t[0].payload:t.map(e=>e.payload);this.emit("debug",{action:"sendRpcPayload",payload:e});try{let r=await this._send(e);for(let{resolve:e,reject:i,payload:n}of(this.emit("debug",{action:"receiveRpcResult",result:r}),t)){if(this.destroyed){i(eN("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));continue}let t=r.filter(e=>e.id===n.id)[0];if(null==t){let e=eN("missing response for request","BAD_DATA",{value:r,info:{payload:n}});this.emit("error",e),i(e);continue}if("error"in t){i(this.getRpcError(n,t));continue}e(t.result)}}catch(e){for(let{reject:r}of(this.emit("debug",{action:"receiveRpcError",error:e}),t))r(e)}})()}},e)}constructor(e,t){super(e,t),this.#e4=1,this.#u=Object.assign({},o0,t||{}),this.#e8=[],this.#e5=null,this.#e0=null,this.#e7=null;{let e=null,t=new Promise(t=>{e=t});this.#e6={promise:t,resolve:e}}let r=this._getOption("staticNetwork");"boolean"==typeof r?(ek(!r||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),r&&null!=e&&(this.#e0=oE.from(e))):r&&(ek(null==e||r.matches(e),"staticNetwork MUST match network object","options",t),this.#e0=r)}_getOption(e){return this.#u[e]}get _network(){return eO(this.#e0,"network is not available yet","NETWORK_ERROR"),this.#e0}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&e5(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){let r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}let t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){let e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#e0)return this.#e0}return this.#e7||(this.ready?this.#e7=(async()=>{try{let e=oE.from(e5(await this.send("eth_chainId",[])));return this.#e7=null,e}catch(e){throw this.#e7=null,e}})():this.#e7=(async()=>{let e;let t={id:this.#e4++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#e7=null}catch(e){throw this.#e7=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return oE.from(e5(e.result));throw this.getRpcError(t,e)})()),await this.#e7}_start(){null!=this.#e6&&null!=this.#e6.resolve&&(this.#e6.resolve(),this.#e6=null,(async()=>{for(;null==this.#e0&&!this.destroyed;)try{this.#e0=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",eN("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await new Promise(e=>{setTimeout(e,1e3)})}this.#e9()})())}async _waitUntilReady(){if(null!=this.#e6)return await this.#e6.promise}_getSubscriber(e){return"pending"===e.type?new oY(this):"event"===e.type?this._getOption("polling")?new ok(this,e.filter):new oQ(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new oD("orphan"):super._getSubscriber(e)}get ready(){return null==this.#e6}getRpcTransaction(e){let t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(null==e[r])return;let i=r;"gasLimit"===r&&(i="gas"),t[i]=ti(e5(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{null!=e[r]&&(t[r]=ej(e[r]))}),e.accessList&&(t.accessList=r2(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(e=>e.toLowerCase())),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[oX(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[oX(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[oX(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[oX(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(oX):e.filter.address=oX(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){let{method:r}=e,{error:i}=t;if("eth_estimateGas"===r&&i.message){let t=i.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return eN("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}})}if("eth_call"===r||"eth_estimateGas"===r){let t=function e(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&eM(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(let r in t){let i=e(t[r]);if(i)return i}return null}if("string"==typeof t)try{return e(JSON.parse(t))}catch(e){}return null}(i),n=rN.getBuiltinCallException("eth_call"===r?"call":"estimateGas",e.params[0],t?t.data:null);return n.info={error:i,payload:e},n}let n=JSON.stringify(function(e){let t=[];return!function e(t,r){if(null!=t){if("string"==typeof t.message&&r.push(t.message),"object"==typeof t)for(let i in t)e(t[i],r);if("string"==typeof t)try{return e(JSON.parse(t),r)}catch(e){}}}(e,t),t}(i));if("string"==typeof i.message&&i.message.match(/user denied|ethers-user-denied/i))return eN("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){let t=e.params[0];if(n.match(/insufficient funds|base fee exceeds gas limit/i))return eN("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:i}});if(n.match(/nonce/i)&&n.match(/too low/i))return eN("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:i}});if(n.match(/replacement transaction/i)&&n.match(/underpriced/i))return eN("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:i}});if(n.match(/only replay-protected/i))return eN("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:t,info:{error:i}}})}let s=!!n.match(/the method .* does not exist/i);return(!s&&i&&i.details&&i.details.startsWith("Unauthorized method:")&&(s=!0),s)?eN("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):eN("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(eN("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));let r=this.#e4++,i=new Promise((i,n)=>{this.#e8.push({resolve:i,reject:n,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})});return this.#e9(),i}async getSigner(e){null==e&&(e=0);let t=this.send("eth_accounts",[]);if("number"==typeof e){let r=await t;if(e>=r.length)throw Error("no such account");return new o1(this,r[e])}let{accounts:r}=await eI({network:this.getNetwork(),accounts:t});for(let t of(e=tv(e),r))if(tv(t)===e)return new o1(this,e);throw Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new o1(this,e))}destroy(){for(let{payload:e,reject:t}of(this.#e5&&(clearTimeout(this.#e5),this.#e5=null),this.#e8))t(eN("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#e8=[],super.destroy()}}var o3=r(5341),o4=r(5417),o8=r(1676),o5=r(6305),o6=r(8151),o7=r(7925),o9=r(5036);let ae=(e,t,r)=>JSON.stringify(e,(e,r)=>{let i="bigint"==typeof r?r.toString():r;return"function"==typeof t?t(e,i):i},r);var at=r(1302);class ar extends at.G{constructor({domain:e}){super(`Invalid domain "${ae(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class ai extends at.G{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class an extends at.G{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var as=r(1880),ao=r(4419),aa=r(1660);function al({data:e,primaryType:t,types:r}){let i=function e({data:t,primaryType:r,types:i}){let n=[{type:"bytes32"}],s=[function({primaryType:e,types:t}){let r=(0,o5.NC)(function({primaryType:e,types:t}){let r="",i=function e({primaryType:t,types:r},i=new Set){let n=t.match(/^\w*/u),s=n?.[0];if(i.has(s)||void 0===r[s])return i;for(let t of(i.add(s),r[s]))e({primaryType:t.type,types:r},i);return i}({primaryType:e,types:t});for(let n of(i.delete(e),[e,...Array.from(i).sort()]))r+=`${n}(${t[n].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return r}({primaryType:e,types:t}));return(0,o6.w)(r)}({primaryType:r,types:i})];for(let o of i[r]){let[r,a]=function t({types:r,name:i,type:n,value:s}){if(void 0!==r[n])return[{type:"bytes32"},(0,o6.w)(e({data:s,primaryType:n,types:r}))];if("bytes"===n){let e=s.length%2?"0":"";return s=`0x${e+s.slice(2)}`,[{type:"bytes32"},(0,o6.w)(s)]}if("string"===n)return[{type:"bytes32"},(0,o6.w)((0,o5.NC)(s))];if(n.lastIndexOf("]")===n.length-1){let e=n.slice(0,n.lastIndexOf("[")),o=s.map(n=>t({name:i,type:e,types:r,value:n}));return[{type:"bytes32"},(0,o6.w)((0,o4.E)(o.map(([e])=>e),o.map(([,e])=>e)))]}return[{type:n},s]}({types:i,name:o.name,type:o.type,value:t[o.name]});n.push(r),s.push(a)}return(0,o4.E)(n,s)}({data:e,primaryType:t,types:r});return(0,o6.w)(i)}var ac=r(3251),au=Object.defineProperty;((e,t)=>{for(var r in t)au(e,r,{get:t[r],enumerable:!0})})({},{AccountDetail:()=>ag,AccountsModule:()=>aL,BUILT_IN_CONTRACTS:()=>ay,BlocksModule:()=>aU,CHAIN_ID:()=>ll,CHAIN_TAG:()=>lc,Contract:()=>aq,ContractFactory:()=>aK,ContractsModule:()=>aW,DebugModule:()=>aQ,DefaultBlockToRevision:()=>la,DelegationHandler:()=>a4,ERROR_SELECTOR:()=>av,ForkDetector:()=>a6,GasModule:()=>aY,HTTPS_REGEX:()=>ab,HTTP_REGEX:()=>am,HardhatVeChainProvider:()=>cw,HttpMethod:()=>ah,JSONRPCEthersProvider:()=>ln,LogsModule:()=>aJ,MAINNET_URL:()=>aA,NODE_HEALTHCHECK_TOLERANCE_IN_SECONDS:()=>aw,NodesModule:()=>aZ,PANIC_SELECTOR:()=>aE,POLLING_INTERVAL:()=>ls,Poll:()=>aN,ProviderInternalBaseWallet:()=>lr,ProviderInternalHDWallet:()=>li,RPCMethodsMap:()=>cm,RPC_DOCUMENTATION_URL:()=>aT,RPC_METHODS:()=>ap,SimpleHttpClient:()=>ad,TESTNET_URL:()=>ax,THOR_SOLO_URL:()=>aI,ThorClient:()=>a7,TransactionsModule:()=>a2,VeChainAbstractSigner:()=>a9,VeChainPrivateKeySigner:()=>le,VeChainProvider:()=>cb,blocksFormatter:()=>ly,buildQuery:()=>a_,chainTagToChainId:()=>lu,debugFormatter:()=>lb,debugTraceBlockByHash:()=>lC,debugTraceBlockByNumber:()=>lR,debugTraceCall:()=>lD,debugTraceTransaction:()=>lO,engineGetPayloadBodiesByHashV1:()=>lL,engineGetPayloadBodiesByRangeV1:()=>lU,ethAccounts:()=>lM,ethBlockNumber:()=>lF,ethCall:()=>l$,ethChainId:()=>l_,ethEstimateGas:()=>lj,ethFeeHistory:()=>lH,ethGasPrice:()=>lV,ethGetBalance:()=>lz,ethGetBlockByHash:()=>lk,ethGetBlockByNumber:()=>lB,ethGetBlockReceipts:()=>lG,ethGetBlockTransactionCountByHash:()=>lq,ethGetBlockTransactionCountByNumber:()=>lK,ethGetCode:()=>lW,ethGetFilterChanges:()=>lQ,ethGetFilterLogs:()=>lY,ethGetLogs:()=>lJ,ethGetStorageAt:()=>lZ,ethGetTransactionByBlockHashAndIndex:()=>l0,ethGetTransactionByBlockNumberAndIndex:()=>l1,ethGetTransactionByHash:()=>lX,ethGetTransactionCount:()=>l2,ethGetTransactionReceipt:()=>lN,ethGetUncleByBlockHashAndIndex:()=>l3,ethGetUncleByBlockNumberAndIndex:()=>l4,ethGetUncleCountByBlockHash:()=>l8,ethGetUncleCountByBlockNumber:()=>l5,ethMaxPriorityFeePerGas:()=>l6,ethRequestAccounts:()=>l7,ethSendRawTransaction:()=>l9,ethSendTransaction:()=>ce,ethSignTransaction:()=>ct,ethSignTypedDataV4:()=>cr,ethSubscribe:()=>ci,ethSyncing:()=>cs,ethUnsubscribe:()=>co,evmMine:()=>ca,formatToLogsRPC:()=>lw,formatToRPCStandard:()=>lm,getCachedChainId:()=>lS,getCachedChainTag:()=>lP,getCriteriaSetForInput:()=>lE,getNumberOfLogsAheadOfTransactionIntoBlockExpanded:()=>ld,getTransactionIndexIntoBlock:()=>lh,netListening:()=>cl,netPeerCount:()=>cc,netVersion:()=>cu,sanitizeWebsocketBaseURL:()=>ak,signerUtils:()=>af,subscriptions:()=>aB,thorest:()=>aC,toQueryString:()=>aO,transactionsFormatter:()=>lg,txPoolContent:()=>ch,txPoolContentFrom:()=>cd,txPoolInspect:()=>cf,txPoolStatus:()=>cp,vnsUtils:()=>aD,web3ClientVersion:()=>cg,web3Sha3:()=>cy});var ah=((w=ah||{}).GET="GET",w.POST="POST",w),ad=class e{static DEFAULT_TIMEOUT=3e4;baseURL;headers;timeout;constructor(t,r=new Headers,i=e.DEFAULT_TIMEOUT){this.baseURL=t,this.timeout=i,this.headers=r}async get(e,t){return await this.http("GET",e,t)}isValidUrl(e){try{return new URL(e),!0}catch{return!1}}async http(e,t,r){let i=new AbortController,n=setTimeout(()=>{i.abort()},this.timeout),s;try{t.startsWith("/")&&(t=t.slice(1));let e=this.baseURL;e.endsWith("/")||(e+="/"),s=new URL(t,e),r?.query!=null&&Object.entries(r.query).forEach(([e,t])=>{s.searchParams.append(e,String(t))});let i=new Headers(this.headers);r?.headers!==void 0&&r?.headers!=null&&Object.entries(r.headers).forEach(([e,t])=>{i.append(e,String(t))})}catch(r){throw new U.u_("HttpClient.http()",r.message,{method:e,url:this.isValidUrl(this.baseURL)?new URL(t,this.baseURL).toString():t},r)}try{let t=await fetch(s,{method:e,headers:r?.headers,body:"GET"!==e?JSON.stringify(r?.body):void 0,signal:i.signal});if(t.ok){let e=Object.fromEntries(t.headers.entries());return r?.validateResponseHeader!=null&&null!=e&&r.validateResponseHeader(e),await t.json()}let n=await t.clone().text();throw Error(`HTTP ${t.status} ${t.statusText} ${n}`,{cause:t})}catch(r){throw new U.OP("HttpClient.http()",r.message,{method:e,url:this.isValidUrl(this.baseURL)?new URL(t,this.baseURL).toString():t},r)}finally{clearTimeout(n)}}async post(e,t){return await this.http("POST",e,t)}},af={transactionBodyToTransactionRequestInput:function(e,t){if(void 0!==e.nonce&&("string"==typeof e.nonce?parseInt(e.nonce,10):e.nonce)<0)throw Error("Transaction nonce must be a positive number");return{from:t,chainTag:e.chainTag,blockRef:e.blockRef,expiration:e.expiration,clauses:e.clauses,gasPriceCoef:e.gasPriceCoef,gas:e.gas,dependsOn:e.dependsOn??void 0,nonce:e.nonce,reserved:e.reserved,maxPriorityFeePerGas:e.maxPriorityFeePerGas??void 0,maxFeePerGas:e.maxFeePerGas??void 0}}},ap=((v=ap||{}).eth_blockNumber="eth_blockNumber",v.eth_chainId="eth_chainId",v.eth_getBalance="eth_getBalance",v.eth_getCode="eth_getCode",v.eth_getStorageAt="eth_getStorageAt",v.eth_estimateGas="eth_estimateGas",v.eth_call="eth_call",v.eth_sendRawTransaction="eth_sendRawTransaction",v.eth_getLogs="eth_getLogs",v.eth_getBlockByHash="eth_getBlockByHash",v.eth_getBlockByNumber="eth_getBlockByNumber",v.eth_accounts="eth_accounts",v.eth_requestAccounts="eth_requestAccounts",v.eth_gasPrice="eth_gasPrice",v.eth_getTransactionByHash="eth_getTransactionByHash",v.eth_getTransactionCount="eth_getTransactionCount",v.eth_getTransactionReceipt="eth_getTransactionReceipt",v.eth_getTransactionByBlockNumberAndIndex="eth_getTransactionByBlockNumberAndIndex",v.eth_getTransactionByBlockHashAndIndex="eth_getTransactionByBlockHashAndIndex",v.eth_getBlockTransactionCountByHash="eth_getBlockTransactionCountByHash",v.eth_getBlockTransactionCountByNumber="eth_getBlockTransactionCountByNumber",v.eth_sendTransaction="eth_sendTransaction",v.eth_syncing="eth_syncing",v.net_version="net_version",v.web3_clientVersion="web3_clientVersion",v.eth_subscribe="eth_subscribe",v.eth_unsubscribe="eth_unsubscribe",v.debug_traceTransaction="debug_traceTransaction",v.debug_traceCall="debug_traceCall",v.evm_mine="evm_mine",v.evm_increaseTime="evm_increaseTime",v.web3_sha3="web3_sha3",v.net_peerCount="net_peerCount",v.net_listening="net_listening",v.eth_getUncleByBlockNumberAndIndex="eth_getUncleByBlockNumberAndIndex",v.eth_getUncleByBlockHashAndIndex="eth_getUncleByBlockHashAndIndex",v.txpool_inspect="txpool_inspect",v.txpool_contentFrom="txpool_contentFrom",v.txpool_content="txpool_content",v.txpool_status="txpool_status",v.eth_signTransaction="eth_signTransaction",v.debug_traceBlockByHash="debug_traceBlockByHash",v.debug_traceBlockByNumber="debug_traceBlockByNumber",v.eth_getUncleCountByBlockHash="eth_getUncleCountByBlockHash",v.eth_getUncleCountByBlockNumber="eth_getUncleCountByBlockNumber",v.eth_signTypedData_v4="eth_signTypedData_v4",v.eth_getBlockReceipts="eth_getBlockReceipts",v.eth_coinbase="eth_coinbase",v.eth_feeHistory="eth_feeHistory",v.eth_getWork="eth_getWork",v.eth_mining="eth_mining",v.eth_hashrate="eth_hashrate",v.eth_protocolVersion="eth_protocolVersion",v.eth_sign="eth_sign",v.eth_submitWork="eth_submitWork",v.parity_nextNonce="parity_nextNonce",v.eth_newFilter="eth_newFilter",v.eth_newBlockFilter="eth_newBlockFilter",v.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",v.eth_getFilterLogs="eth_getFilterLogs",v.eth_getFilterChanges="eth_getFilterChanges",v.eth_uninstallFilter="eth_uninstallFilter",v.debug_getBadBlocks="debug_getBadBlocks",v.debug_getRawBlock="debug_getRawBlock",v.debug_getRawHeader="debug_getRawHeader",v.debug_getRawReceipts="debug_getRawReceipts",v.debug_getRawTransaction="debug_getRawTransaction",v.engine_exchangeCapabilities="engine_exchangeCapabilities",v.engine_exchangeTransitionConfigurationV1="engine_exchangeTransitionConfigurationV1",v.engine_forkchoiceUpdatedV1="engine_forkchoiceUpdatedV1",v.engine_forkchoiceUpdatedV2="engine_forkchoiceUpdatedV2",v.engine_forkchoiceUpdatedV3="engine_forkchoiceUpdatedV3",v.engine_getPayloadBodiesByHashV1="engine_getPayloadBodiesByHashV1",v.engine_getPayloadBodiesByRangeV1="engine_getPayloadBodiesByRangeV1",v.engine_getPayloadV1="engine_getPayloadV1",v.engine_getPayloadV2="engine_getPayloadV2",v.engine_getPayloadV3="engine_getPayloadV3",v.engine_newPayloadV1="engine_newPayloadV1",v.engine_newPayloadV2="engine_newPayloadV2",v.engine_newPayloadV3="engine_newPayloadV3",v.eth_createAccessList="eth_createAccessList",v.eth_getProof="eth_getProof",v.eth_maxPriorityFeePerGas="eth_maxPriorityFeePerGas",v),ag=class{balance;energy;hasCode;get vet(){return M.KL.of(M.nL.formatEther(M.aH.of(this.balance)))}get vtho(){return M.nF.of(M.nL.formatEther(M.aH.of(this.energy)))}constructor(e){this.balance=e.balance,this.energy=e.energy,this.hasCode=e.hasCode}},ay={PARAMS_ABI:[{constant:!1,inputs:[{name:"_key",type:"bytes32"},{name:"_value",type:"uint256"}],name:"set",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_key",type:"bytes32"}],name:"get",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"key",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Set",type:"event"}],PARAMS_ADDRESS:"0x0000000000000000000000000000506172616d73",ENERGY_ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"move",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalBurned",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}],ENERGY_ADDRESS:"0x0000000000000000000000000000456e65726779"},am=/^http:\/\//,ab=/^https:\/\//,aw=30,av=M.GN.of(M.H_.of("Error(string)").bytes).toString().slice(0,10),aE=M.GN.of(M.H_.of("Panic(uint256)").bytes).toString().slice(0,10),aA="https://mainnet.vechain.org",ax="https://testnet.vechain.org",aI="http://localhost:8669",aT="https://ethereum.github.io/execution-apis/api-documentation/",a_=e=>{let t={};for(let r in e)void 0!==e[r]&&(t[r]=e[r]);return t};async function aS(e){await new Promise(t=>setTimeout(t,e))}var aP=class extends F.EventEmitter{currentIteration=0;error;hasToStopOnError;intervalId;pollingFunction;requestIntervalInMilliseconds;constructor(e,t,r){if(super(),this.pollingFunction=e,this.hasToStopOnError=r,void 0!==t&&(t<=0||!Number.isInteger(t)))throw new U.ep("SyncPoll()",'Polling failed: Invalid input for field "options?.maximumWaitingTimeInMilliseconds" it must be a positive number',{requestIntervalInMilliseconds:t});this.requestIntervalInMilliseconds=t}get getCurrentIteration(){return this.currentIteration}async _intervalLoop(){try{let e=await this.pollingFunction();this.emit("data",{data:e,eventPoll:this})}catch(e){this.error=new U.s$("EventPoll - main interval loop function",`Error during the execution of the poll ${e.message}`,{functionName:this.pollingFunction.name}),this.emit("error",{error:this.error}),this.hasToStopOnError&&this.stopListen()}this.currentIteration=this.currentIteration+1}onData(e){return this.on("data",t=>{e(t.data,t.eventPoll)}),this}onError(e){return this.on("error",t=>{e(t.error)}),this}onStart(e){return this.on("start",t=>{e(t.eventPoll)}),this}onStop(e){return this.on("stop",t=>{e(t.eventPoll)}),this}startListen(){this.emit("start",{eventPoll:this}),this._intervalLoop().then(()=>{this.intervalId=setInterval(()=>{(async()=>await this._intervalLoop())()},this.requestIntervalInMilliseconds)})}stopListen(){clearInterval(this.intervalId),this.emit("stop",{eventPoll:this})}},aN={SyncPoll:function(e,t){if(t?.requestIntervalInMilliseconds!==void 0&&(t.requestIntervalInMilliseconds<=0||!Number.isInteger(t.requestIntervalInMilliseconds)))throw new U.ep("SyncPoll()",'Polling failed: Invalid input for field "options?.requestIntervalInMilliseconds" it must be a positive number',{requestIntervalInMilliseconds:t.requestIntervalInMilliseconds});if(t?.maximumIterations!==void 0&&(t.maximumIterations<=0||!Number.isInteger(t.maximumIterations)))throw new U.ep("SyncPoll()",'Polling failed: Invalid input for field "options?.maximumIterations" it must be a positive number',{maximumIterations:t.maximumIterations});if(t?.maximumWaitingTimeInMilliseconds!==void 0&&(t.maximumWaitingTimeInMilliseconds<=0||!Number.isInteger(t.maximumWaitingTimeInMilliseconds)))throw new U.ep("SyncPoll()",'Polling failed: Invalid input for field "options?.maximumWaitingTimeInMilliseconds" it must be a positive number',{maximumWaitingTimeInMilliseconds:t.maximumWaitingTimeInMilliseconds});let r=0,i,n=!1,s=Date.now();return{waitUntil:async o=>{try{do{i=await e(),await aS(t?.requestIntervalInMilliseconds??1e3),r+=1;let a=o(i),l=t?.maximumIterations!==void 0&&r>=t.maximumIterations,c=t?.maximumWaitingTimeInMilliseconds!==void 0&&Date.now()-s>=t.maximumWaitingTimeInMilliseconds;n=!(a||l||c)}while(n);return i}catch(t){throw new U.s$("SyncPoll.waitUntil()","Polling failed: Function execution error encountered during synchronous polling.",{functionName:e.name},t)}}}},createEventPoll:function(e,t,r=!0){return new aP(e,t,r)}},aO=e=>{let t=Object.entries(e).filter(([,e])=>void 0!==e).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return t.length>0?`?${t.join("&")}`:""},ak=e=>{e=e.trim();let t=/^(https?:\/\/)([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*)(:\d+)?\/?$/;if(!t.test(e))throw new U.ep("sanitizeWebsocketBaseURL()",`Invalid url: ${e}. Must adhere to the regex: ${t}.`,{url:e,urlRegex:t});return e=e.replace(/\/$/,""),e=null!==am.exec(e)?e.replace(am,"ws://"):e.replace(ab,"wss://")},aC={accounts:{get:{ACCOUNT_DETAIL:e=>`/accounts/${e}`,ACCOUNT_BYTECODE:e=>`/accounts/${e}/code`,STORAGE_AT:(e,t)=>`/accounts/${e}/storage/${t}`},post:{SIMULATE_TRANSACTION:e=>null!=e?`/accounts/*?revision=${e}`:"/accounts/*"}},blocks:{get:{BLOCK_DETAIL:e=>`/blocks/${e}`}},nodes:{get:{NODES:()=>"/node/network/peers"}},logs:{post:{EVENT_LOGS:()=>"/logs/event",TRANSFER_LOGS:()=>"/logs/transfer"}},transactions:{get:{TRANSACTION:e=>`/transactions/${e}`,TRANSACTION_RECEIPT:e=>`/transactions/${e}/receipt`},post:{TRANSACTION:()=>"/transactions"}},subscriptions:{get:{BLOCK:(e,t)=>{let r=aO({pos:t});return`${ak(e)}/subscriptions/block${r}`},EVENT:(e,t)=>{let r=aO({pos:t?.position,addr:t?.contractAddress,t0:t?.topic0,t1:t?.topic1,t2:t?.topic2,t3:t?.topic3,t4:t?.topic4});return`${ak(e)}/subscriptions/event${r}`},VET_TRANSFER:(e,t)=>{let r=aO({pos:t?.position,txOrigin:t?.signerAddress,sender:t?.sender,recipient:t?.receiver});return`${ak(e)}/subscriptions/transfer${r}`},BEAT_LEGACY:(e,t)=>{let r=aO({pos:t});return`${ak(e)}/subscriptions/beat${r}`},BEAT:(e,t)=>{let r=aO({pos:t});return`${ak(e)}/subscriptions/beat2${r}`},NEW_TRANSACTIONS:e=>`${ak(e)}/subscriptions/txpool`}},debug:{post:{TRACE_TRANSACTION_CLAUSE:()=>"/debug/tracers",TRACE_CONTRACT_CALL:()=>"/debug/tracers/call",RETRIEVE_STORAGE_RANGE:()=>"/debug/storage-range"}},fees:{get:{FEES_HISTORY:(e,t,r)=>`/fees/history${aO({blockCount:e,newestBlock:t,rewardPercentiles:r?.join(",")})}`}}},aB={getEventSubscriptionUrl:(e,t,r,i)=>{let n=new M.Nu(t).encodeFilterTopicsNoNull(r??[]);return aC.subscriptions.get.EVENT(e,{position:i?.blockID,contractAddress:i?.address,topic0:n[0],topic1:n[1],topic2:n[2],topic3:n[3],topic4:n[4]})},getBlockSubscriptionUrl:(e,t)=>aC.subscriptions.get.BLOCK(e,t?.blockID),getNewTransactionsSubscriptionUrl:e=>aC.subscriptions.get.NEW_TRANSACTIONS(e),getVETtransfersSubscriptionUrl:(e,t)=>aC.subscriptions.get.VET_TRANSFER(e,{position:t?.blockID,signerAddress:t?.signerAddress,sender:t?.sender,receiver:t?.recipient}),getLegacyBeatSubscriptionUrl:(e,t)=>aC.subscriptions.get.BEAT_LEGACY(e,t?.blockID),getBeatSubscriptionUrl:(e,t)=>aC.subscriptions.get.BEAT(e,t?.blockID)},aR={[M.bj.genesisBlock.id]:{registry:"0xa9231da8BF8D10e2df3f6E03Dd5449caD600129b",resolveUtils:"0xA11413086e163e41901bb81fdc5617c975Fa5a1A"},[M.DP.genesisBlock.id]:{registry:"0xcBFB30c1F267914816668d53AcBA7bA7c9806D13",resolveUtils:"0xc403b8EA53F707d7d4de095f0A20bC491Cf2bc94"},[M.bg.genesisBlock.id]:{registry:"0x1c4a602ed21f3d1dddd1142c81f231ef1a08c921",resolveUtils:"0xb2f08bbfa8a42b1fbe63feec604cb147385203d7"}},aD={resolveName:async(e,t)=>{let[r]=await aD.resolveNames(e.blocks,e.transactions,[t]);return r??null},resolveNames:async(e,t,r)=>{let i=await e.getGenesisBlock();if(null===i||!M.kL.isValid(aR[i.id]?.resolveUtils))return r.map(()=>null);let n=aR[i.id].resolveUtils,[s]=(await t.executeCall(n,M.NQ.ofSignature(M.mn,"function getAddresses(string[] names) returns (address[] addresses)"),[r])).result.array;return s.map(e=>e!==M.r_&&M.kL.isValid(e)?e:null)},lookupAddress:async(e,t)=>{let[r]=await aD.lookupAddresses(e,[t]);return r??null},lookupAddresses:async(e,t)=>{let r=await e.blocks.getGenesisBlock();if(null===r||!M.kL.isValid(aR[r.id]?.resolveUtils))return t.map(()=>null);let i=aR[r.id].resolveUtils,[n]=(await e.contracts.executeCall(i,M.NQ.ofSignature(M.mn,"function getNames(address[] addresses) returns (string[] names)"),[t])).result.array;return n.map(e=>""===e?null:e)}},aL=class{constructor(e){this.httpClient=e}async getAccount(e,t){let r=t?.revision?.toString();return new ag(await this.httpClient.get(aC.accounts.get.ACCOUNT_DETAIL(e.toString()),{query:a_({revision:r})}))}async getBytecode(e,t){let r=t?.revision?.toString(),i=await this.httpClient.get(aC.accounts.get.ACCOUNT_BYTECODE(e.toString()),{query:a_({revision:r})});return M.H1.of(i.code)}async getStorageAt(e,t,r){let i=t.toString(),n=r?.revision?.toString(),s=await this.httpClient.get(aC.accounts.get.STORAGE_AT(e.toString(),i),{query:a_({pos:i,revision:n})});return M.H1.of(s.value)}},aU=class{constructor(e,t){this.httpClient=e,this.onBlockError=t?.onBlockError,t?.isPollingEnabled===!0&&this.setupPolling()}headBlock=null;onBlockError;pollInstance;destroy(){null!=this.pollInstance&&this.pollInstance.stopListen()}setupPolling(){this.pollInstance=aN.createEventPoll(async()=>await this.getBestBlockCompressed(),1e4).onData(e=>{this.headBlock=e}).onError(this.onBlockError??(()=>{})),this.pollInstance.startListen()}async getBlockCompressed(e){if(null!=e&&!M.kG.isValid(e))throw new U.ep("BlocksModule.getBlockCompressed()",'Invalid revision. The revision must be a string representing a block number or block id (also "best" is accepted which represents the best block & "finalized" for the finalized block).',{revision:e});return await this.httpClient.http("GET",aC.blocks.get.BLOCK_DETAIL(e))}async getBlockExpanded(e){if(null!=e&&!M.kG.isValid(e))throw new U.ep("BlocksModule.getBlockExpanded()",'Invalid revision. The revision must be a string representing a block number or block id (also "best" is accepted which represents the best block & "finalized" for the finalized block).',{revision:e});return await this.httpClient.http("GET",aC.blocks.get.BLOCK_DETAIL(e),{query:a_({expanded:!0})})}async getBestBlockCompressed(){return await this.getBlockCompressed("best")}async getBestBlockExpanded(){return await this.getBlockExpanded("best")}async getBestBlockBaseFeePerGas(){let e=await this.getBestBlockCompressed();return null===e?null:e.baseFeePerGas??null}async getBestBlockRef(){let e=await this.getBestBlockCompressed();return null===e?null:e.id.slice(0,18)}async getFinalBlockCompressed(){return await this.getBlockCompressed("finalized")}async getFinalBlockExpanded(){return await this.getBlockExpanded("finalized")}async _waitForBlock(e,t,r){if(null!=e&&e<=0)throw new U.ep("BlocksModule.waitForBlock()","Invalid blockNumber. The blockNumber must be a number representing a block number.",{blockNumber:e});return await aN.SyncPoll(async()=>t?await this.getBestBlockCompressed():await this.getBestBlockExpanded(),{requestIntervalInMilliseconds:r?.intervalMs,maximumWaitingTimeInMilliseconds:r?.timeoutMs}).waitUntil(t=>null!=t&&t?.number>=e)}async waitForBlockCompressed(e,t){return await this._waitForBlock(e,!1,t)}async waitForBlockExpanded(e,t){return await this._waitForBlock(e,!0,t)}getHeadBlock(){return this.headBlock}async getGenesisBlock(){return await this.getBlockCompressed(0)}getAllAddressesIntoABlock(e){let t=new Set;return t.add(e.beneficiary),t.add(e.signer),e.transactions.forEach(e=>{e.clauses.forEach(e=>{"string"==typeof e.to&&t.add(e.to)}),t.add(e.gasPayer),t.add(e.origin),e.outputs.forEach(e=>{"string"==typeof e.contractAddress&&t.add(e.contractAddress),e.events.forEach(e=>{t.add(e.address)}),e.transfers.forEach(e=>{t.add(e.recipient),t.add(e.sender)})})}),Array.from(t)}},aM=class{contract;criteriaSet;constructor(e,t){this.contract=e,this.criteriaSet=t}async get(e){let t={range:e?.range??{unit:"block",from:0,to:(await this.contract.contractsModule.transactionsModule.blocksModule.getBestBlockCompressed())?.number},criteriaSet:this.criteriaSet,options:e?.options,order:e?.order??"asc"};return await this.contract.contractsModule.transactionsModule.logsModule.filterEventLogs(t)}};function aF(e){return new Proxy(e.read,{get:(t,r)=>async(...t)=>{let i=aH(t),n=i.clauseAdditionalOptions?.comment,s=i.clauseAdditionalOptions?.revision,o=e.getFunctionAbi(r),a=await e.contractsModule.executeCall(e.address,o,i.args,{caller:void 0!==e.getSigner()?await e.getSigner()?.getAddress():void 0,...e.getContractReadOptions(),comment:n,revision:s,includeABI:!0});if(!a.success)throw new U.X0(o.stringSignature,a.result.errorMessage,{contractAddress:e.address});return a.result.array}})}function a$(e){return new Proxy(e.transact,{get:(t,r)=>async(...t)=>{if(void 0===e.getSigner())throw new U.u7("getTransactProxy()","Caller signer is required to transact with the contract.",{fieldName:"signer",prop:r});let i=e.getContractTransactOptions(),n=aH(t),s=n.clauseAdditionalOptions?.value,o=n.clauseAdditionalOptions?.comment;return t=n.args,await e.contractsModule.executeTransaction(e.getSigner(),e.address,e.getFunctionAbi(r),t,{...i,value:i.value??s??"0x0",comment:o,includeABI:!0})}})}function aj(e,t,r){let i=e.getEventAbi(t),n=new Map(i.encodeFilterTopicsNoNull(r).map((e,t)=>[t,e]));return{criteria:{address:e.address,topic0:n.get(0),topic1:n.has(1)?n.get(1):void 0,topic2:n.has(2)?n.get(2):void 0,topic3:n.has(3)?n.get(3):void 0,topic4:n.has(4)?n.get(4):void 0},eventAbi:i}}function aH(e){let t=e.find(e=>aV(e)),r=e.find(e=>az(e)),i=e.find(e=>aG(e));return(void 0!==t||void 0!==r||void 0!==i)&&(e=e.filter(e=>!(aV(e)||az(e)||aG(e)))),{args:e,clauseAdditionalOptions:{value:t?.value,comment:r?.comment,revision:i?.revision}}}function aV(e){return void 0!==e.value}function az(e){return void 0!==e.comment}function aG(e){return void 0!==e.revision}var aq=class{contractsModule;address;abi;signer;deployTransactionReceipt;read={};transact={};filters={};clause={};criteria={};contractCallOptions={};contractTransactionOptions={};constructor(e,t,r,i,n){var s,o,a;this.abi=t,this.address=e,this.contractsModule=r,this.deployTransactionReceipt=n,this.signer=i,this.read=aF(this),this.transact=a$(this),this.filters=(s=this,new Proxy(s.filters,{get:(e,t)=>e=>{let r=aj(s,t,e);return new aM(s,[r])}})),this.clause=(o=this,new Proxy(o.clause,{get:(e,t)=>(...e)=>{let r=o.getContractTransactOptions(),i=aH(e),n=i.clauseAdditionalOptions?.value,s=i.clauseAdditionalOptions?.comment;return e=i.args,{clause:M.AU.callFunction(M.kL.of(o.address),o.getFunctionAbi(t),e,M.KL.of(r.value??n??0,M.nL.wei),{comment:s,includeABI:!0}),functionAbi:o.getFunctionAbi(t)}}})),this.criteria=(a=this,new Proxy(a.criteria,{get:(e,t)=>e=>aj(a,t,e)}))}setContractReadOptions(e){return this.contractCallOptions=e,this.read=aF(this),this.contractCallOptions}getContractReadOptions(){return this.contractCallOptions}clearContractReadOptions(){this.contractCallOptions={},this.read=aF(this)}setContractTransactOptions(e){return this.contractTransactionOptions=e,this.transact=a$(this),this.contractTransactionOptions}getContractTransactOptions(){return this.contractTransactionOptions}clearContractTransactOptions(){this.contractTransactionOptions={},this.transact=a$(this)}setSigner(e){return this.signer=e,this.transact=a$(this),this.read=aF(this),this.signer}getSigner(){return this.signer}getFunctionAbi(e){return M.Yh.ofAbi(this.abi).getFunction(e.toString())}getEventAbi(e){return M.Yh.ofAbi(this.abi).getEvent(e.toString())}},aK=class{abi;bytecode;signer;deployTransaction;contractsModule;constructor(e,t,r,i){this.abi=e,this.bytecode=t,this.signer=r,this.contractsModule=i}async startDeployment(e,t){let r=M.AU.deployContract(M.H1.of(this.bytecode),e),i=await this.contractsModule.transactionsModule.estimateGas([r],await this.signer.getAddress()),n=await this.contractsModule.transactionsModule.buildTransactionBody([r],i.totalGas,t),s=await this.signer.signTransaction(af.transactionBodyToTransactionRequestInput(n,await this.signer.getAddress()));return this.deployTransaction=await this.contractsModule.transactionsModule.sendTransaction(M.YW.decode(M.H1.of(s.slice(2)).bytes,!0)),this}async waitForDeployment(){if(this.deployTransaction?.id===void 0)throw new U.GM("ContractFactory.waitForDeployment()","Cannot find a contract deployment transaction",{networkUrl:this.contractsModule.transactionsModule.blocksModule.httpClient.baseURL});let e=await this.deployTransaction.wait();if(e?.outputs[0]?.contractAddress===null||e?.outputs[0]?.contractAddress===void 0)throw new U.$u("ContractFactory.waitForDeployment()","Contract deployment failed.",{deployTransaction:this.deployTransaction});return new aq(e?.outputs[0].contractAddress,this.abi,this.contractsModule,this.signer,e)}getDeployTransaction(){return this.deployTransaction}},aW=class{constructor(e){this.transactionsModule=e}createContractFactory(e,t,r){return new aK(e,t,r,this)}load(e,t,r){return new aq(e,t,this,r)}async executeCall(e,t,r,i){return await this.transactionsModule.executeCall(e,t,r,i)}async executeMultipleClausesCall(e,t){return await this.transactionsModule.executeMultipleClausesCall(e,t)}async executeTransaction(e,t,r,i,n){return await this.transactionsModule.executeTransaction(e,t,r,i,n)}async executeMultipleClausesTransaction(e,t,r){return await this.transactionsModule.executeMultipleClausesTransaction(e,t,r)}async getLegacyBaseGasPrice(){return await this.transactionsModule.getLegacyBaseGasPrice()}},aQ=class{constructor(e){this.httpClient=e}async retrieveStorageRange(e){this.validateTarget(e.target,"retrieveStorageRange");let t=`${e.target.blockId}/${e.target.transaction}/${e.target.clauseIndex}`;return await this.httpClient.post(aC.debug.post.RETRIEVE_STORAGE_RANGE(),{query:{},body:{target:t,address:e.options?.address?.toString(),keyStart:e.options?.keyStart?.toString(),maxResult:e.options?.maxResult},headers:{}})}async traceContractCall(e,t){return await this.httpClient.post(aC.debug.post.TRACE_CONTRACT_CALL(),{query:{},body:{to:e.target?.to?.toString(),data:e.target?.data?.toString(),value:"bigint"==typeof e.target?.value?.wei?M.H1.of(e.target.value.wei).toString():void 0,name:t,gas:e.options?.gas,gasPrice:e.options?.gasPrice,caller:e.options?.caller,provedWork:e.options?.provedWork,gasPayer:e.options?.gasPayer,expiration:e.options?.expiration,blockRef:e.options?.blockRef,config:e.config},headers:{}})}async traceTransactionClause(e,t){this.validateTarget(e.target,"traceTransactionClause");let r=`${e.target.blockId}/${e.target.transaction}/${e.target.clauseIndex}`;return await this.httpClient.post(aC.debug.post.TRACE_TRANSACTION_CLAUSE(),{query:{},body:{target:r,name:t,config:e.config},headers:{}})}validateTarget(e,t){if("number"==typeof e.transaction&&e.transaction<0)throw new U.ep("DebugModule.validateTarget()",`invalid transaction index '${e.transaction}' given as input for ${t}.`,{transaction:e.transaction,functionName:t});if(e.clauseIndex<0)throw new U.ep("DebugModule.validateTarget()",`invalid clause index '${e.clauseIndex}' given as input for ${t}.`,{clauseIndex:e.clauseIndex,functionName:t})}},aY=class{httpClient;transactionsModule;constructor(e){this.httpClient=e,this.transactionsModule=null}setTransactionsModule(e){this.transactionsModule=e}async estimateGas(e,t,r){if(null==this.transactionsModule)throw new U.ep("estimateGas()","Transactions module not set",{});return await this.transactionsModule.estimateGas(e,t,r)}async getMaxPriorityFeePerGas(){let e=await this.httpClient.get("/fees/priority");if(null==e||"object"!=typeof e)throw new U.ep("getMaxPriorityFeePerGas()","Invalid response format from /fees/priority endpoint",{response:e});if(void 0===e.maxPriorityFeePerGas||null===e.maxPriorityFeePerGas||""===e.maxPriorityFeePerGas||"string"!=typeof e.maxPriorityFeePerGas)throw new U.ep("getMaxPriorityFeePerGas()","Missing or invalid maxPriorityFeePerGas in response",{response:e});return e.maxPriorityFeePerGas}async getFeeHistory(e){if(null==e||"number"!=typeof e.blockCount||!Number.isFinite(e.blockCount)||e.blockCount<=0)throw new U.ep("getFeeHistory()","Invalid blockCount parameter",{options:e});if(null!==e.newestBlock&&void 0!==e.newestBlock&&!M.kG.isValid(e.newestBlock))throw new U.ep("getFeeHistory()",'Invalid revision. The revision must be a string representing a block number or block id (also "best" is accepted which represents the best block & "finalized" for the finalized block).',{options:e});let t=await this.httpClient.http("GET",aC.fees.get.FEES_HISTORY(e.blockCount,e.newestBlock,e.rewardPercentiles));if(null==t||"object"!=typeof t)throw new U.ep("getFeeHistory()","Invalid response format from /fees/history endpoint",{response:t});return t}},aJ=class{blocksModule;constructor(e){this.blocksModule=e}async filterRawEventLogs(e){return await this.blocksModule.httpClient.http("POST",aC.logs.post.EVENT_LOGS(),{query:{},body:e,headers:{}})}async filterEventLogs(e){let t=e.criteriaSet?.map(e=>e.eventAbi),r=await this.getRawEventLogs(e),i=[];if(void 0!==t){let e=this.removeDuplicatedAbis(t);r.forEach(t=>{let r=e.get(t.topics[0]);if(null==r)throw new U.Kf("LogsModule.filterEventLogs","Topic not found in the provided ABIs.",{type:"event",value:t.topics[0]});t.decodedData=r.decodeEventLogAsArray({data:M.pU.of(t.data),topics:t.topics.map(e=>M.pU.of(e))}),i.push(t)})}return i}async filterGroupedEventLogs(e){let t=e.criteriaSet?.map(e=>e.eventAbi),r=await this.getRawEventLogs(e),i=new Map;if(void 0!==t){let e=this.removeDuplicatedAbis(t);e.forEach(e=>i.set(e.signatureHash,[])),r.forEach(t=>{let r=e.get(t.topics[0]);if(null==r)throw new U.Kf("LogsModule.filterGroupedEventLogs","Topic not found in the provided ABIs.",{type:"event",value:t.topics[0]});t.decodedData=r.decodeEventLogAsArray({data:M.pU.of(t.data),topics:t.topics.map(e=>M.pU.of(e))}),i.get(t.topics[0])?.push(t)})}return Array.from(i.values())}async getRawEventLogs(e){let t=e.criteriaSet?.map(e=>e.criteria),r={range:e.range??{unit:"block",from:0,to:(await this.blocksModule.getBestBlockCompressed())?.number},criteriaSet:t,options:e.options,order:e.order??"asc"};return await this.filterRawEventLogs(r)}removeDuplicatedAbis(e){let t=new Map;return e.forEach(e=>{t.has(e.signatureHash)||t.set(e.signatureHash,e)}),t}async filterTransferLogs(e){return await this.blocksModule.httpClient.http("POST",aC.logs.post.TRANSFER_LOGS(),{query:{},body:e,headers:{}})}},aZ=class{blocksModule;constructor(e){this.blocksModule=e}async getNodes(){return await this.blocksModule.httpClient.http("GET",aC.nodes.get.NODES())??[]}async isHealthy(){let e=await this.blocksModule.getBestBlockCompressed(),t=this.getTimestampFromBlock(e);return 30>Math.abs(Math.floor(Date.now()/1e3)-t)}getTimestampFromBlock=e=>{if(null==e||"object"!=typeof e||!("timestamp"in e)||"number"!=typeof e.timestamp)throw new U.ep("NodesModule.getTimestampFromBlock()","Sending failed: Input must be a valid raw transaction in hex format.",{response:e});return e?.timestamp}},aX=M.GN.of(M.H_.of("Error(string)").bytes).toString().slice(0,10),a0=M.GN.of(M.H_.of("Panic(uint256)").bytes).toString().slice(0,10);function a1(e){if(e.startsWith(aX))return M.dL.ofEncoded("string","0x"+e.slice(aX.length)).getFirstDecodedValue();if(e.startsWith(a0)){let t=M.dL.ofEncoded("uint256","0x"+e.slice(a0.length)).getFirstDecodedValue();return`Panic(0x${parseInt(t).toString(16).padStart(2,"0")})`}}var a2=class{blocksModule;debugModule;logsModule;gasModule;forkDetector;constructor(e,t,r,i,n){this.blocksModule=e,this.debugModule=t,this.logsModule=r,this.gasModule=i,this.forkDetector=n}async getTransaction(e,t){if(!M.pI.isValid(e))throw new U.ep("TransactionsModule.getTransaction()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{id:e});if(t?.head!==void 0&&!M.pI.isValid(t.head))throw new U.ep("TransactionsModule.getTransaction()","Invalid head given as input. Input must be an hex string of length 64.",{head:t?.head});return await this.blocksModule.httpClient.http("GET",aC.transactions.get.TRANSACTION(e),{query:a_({raw:!1,head:t?.head,pending:t?.pending})})}async getTransactionRaw(e,t){if(!M.pI.isValid(e))throw new U.ep("TransactionsModule.getTransactionRaw()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{id:e});if(t?.head!==void 0&&!M.pI.isValid(t.head))throw new U.ep("TransactionsModule.getTransaction()","Invalid head given as input. Input must be an hex string of length 64.",{head:t?.head});return await this.blocksModule.httpClient.http("GET",aC.transactions.get.TRANSACTION(e),{query:a_({raw:!0,head:t?.head,pending:t?.pending})})}async getTransactionReceipt(e,t){if(!M.pI.isValid(e))throw new U.ep("TransactionsModule.getTransactionReceipt()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{id:e});if(t?.head!==void 0&&!M.pI.isValid(t.head))throw new U.ep("TransactionsModule.getTransaction()","Invalid head given as input. Input must be an hex string of length 64.",{head:t?.head});return await this.blocksModule.httpClient.http("GET",aC.transactions.get.TRANSACTION_RECEIPT(e),{query:a_({head:t?.head})})}async sendRawTransaction(e){if(!M.pU.isValid0x(e))throw new U.ep("TransactionsModule.sendRawTransaction()","Sending failed: Input must be a valid raw transaction in hex format.",{raw:e});try{M.YW.decode(M.H1.of(e.slice(2)).bytes,!0)}catch(t){throw new U.ep("TransactionsModule.sendRawTransaction()","Sending failed: Input must be a valid raw transaction in hex format. Decoding error encountered.",{raw:e},t)}let t=await this.blocksModule.httpClient.http("POST",aC.transactions.post.TRANSACTION(),{body:{raw:e}});return{id:t.id,wait:async()=>await this.waitForTransaction(t.id)}}async sendTransaction(e){if(!e.isSigned)throw new U.ep("TransactionsModule.sendTransaction()","Invalid transaction given as input. Transaction must be signed.",{signedTx:e});let t=M.pU.of(e.encoded).toString();return await this.sendRawTransaction(t)}async waitForTransaction(e,t){if(!M.pI.isValid(e))throw new U.ep("TransactionsModule.waitForTransaction()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{txID:e});return await aN.SyncPoll(async()=>await this.getTransactionReceipt(e),{requestIntervalInMilliseconds:t?.intervalMs,maximumWaitingTimeInMilliseconds:t?.timeoutMs}).waitUntil(e=>null!==e)}async buildTransactionBody(e,t,r){let i=await this.blocksModule.getBlockCompressed(0);if(null===i)throw new U.u7("TransactionsModule.buildTransactionBody()","Error while building transaction body: Cannot get genesis block.",{fieldName:"genesisBlock",genesisBlock:i,clauses:e,options:r});let n=r?.blockRef??await this.blocksModule.getBestBlockRef();if(null===n)throw new U.u7("TransactionsModule.buildTransactionBody()","Error while building transaction body: Cannot get blockRef.",{fieldName:"blockRef",blockRef:n,clauses:e,options:r});let s=r?.chainTag??+`0x${i.id.slice(64)}`,o=await this.fillDefaultBodyOptions(r);return{blockRef:n,chainTag:s,clauses:await this.resolveNamesInClauses(e),dependsOn:r?.dependsOn??null,expiration:r?.expiration??32,gas:t,gasPriceCoef:o?.gasPriceCoef,maxFeePerGas:o?.maxFeePerGas,maxPriorityFeePerGas:o?.maxPriorityFeePerGas,nonce:r?.nonce??M.pU.random(8).toString(),reserved:r?.isDelegated===!0?{features:1}:void 0}}async fillTransactionBody(e){let t={maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,gasPriceCoef:e.gasPriceCoef},r=await this.fillDefaultBodyOptions(t);return{...e,...r}}async fillDefaultBodyOptions(e){if(void 0!==(e??={}).gasPriceCoef)return e.maxFeePerGas=void 0,e.maxPriorityFeePerGas=void 0,e;if(void 0!==e.gasPriceCoef&&(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas))throw new U.ep("TransactionsModule.fillDefaultBodyOptions()","Invalid transaction body options. Cannot specify both legacy and dynamic fee type options.",{options:e});let t=await this.forkDetector.isGalacticaForked("best");if(!t&&(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas))throw new U.ep("TransactionsModule.fillDefaultBodyOptions()","Invalid transaction body options. Dynamic fee tx is not allowed before Galactica fork.",{options:e});if(!t&&(void 0===e.gasPriceCoef||null===e.gasPriceCoef))return e.gasPriceCoef=0,e;if(t&&void 0!==e.maxFeePerGas&&void 0!==e.maxPriorityFeePerGas)return e;e.gasPriceCoef=void 0;let r=await this.blocksModule.getBestBlockBaseFeePerGas();if(null==r)throw new U.ep("TransactionsModule.fillDefaultBodyOptions()","Invalid transaction body options. Unable to get best block base fee per gas.",{options:e});let i=M.H1.of(r).bi;if(void 0===e.maxPriorityFeePerGas||null===e.maxPriorityFeePerGas){let t=await this.calculateDefaultMaxPriorityFeePerGas(i);e.maxPriorityFeePerGas=t}if(void 0===e.maxFeePerGas||null===e.maxFeePerGas){let t=M.H1.of(e.maxPriorityFeePerGas).bi;e.maxFeePerGas=M.H1.of(i+t).toString()}return e}async calculateDefaultMaxPriorityFeePerGas(e){let t=await this.gasModule.getFeeHistory({blockCount:10,newestBlock:"best",rewardPercentiles:[25,50,75]}),r;if(null!==t.reward&&void 0!==t.reward&&t.reward.length>0){let e=t.reward[t.reward.length-1];if(3===new Set(e).size)r=M.H1.of(e[2]).bi;else{let e=0n,i=0;for(let r of t.reward)null!==r.length&&r.length>2&&null!==r[2]&&void 0!==r[2]&&(e+=M.H1.of(r[2]).bi,i++);r=i>0?e/BigInt(i):0n}}else r=M.H1.of(await this.gasModule.getMaxPriorityFeePerGas()).bi;let i=46n*e/1000n,n=i<r?i:r;return M.H1.of(n).toString()}async resolveNamesInClauses(e){let t=e.reduce((e,t)=>("string"==typeof t.to&&!e.has(t.to)&&t.to.includes(".")&&e.set(t.to,t.to),e),new Map),r=[...t.keys()];return 0===t.size?e:((await aD.resolveNames(this.blocksModule,this,r)).forEach((e,i)=>{null!==e&&t.set(r[i],e)}),e.map(e=>"string"!=typeof e.to?e:{to:t.get(e.to)??e.to,data:e.data,value:e.value}))}async simulateTransaction(e,t){let{revision:r,caller:i,gasPrice:n,gasPayer:s,gas:o,blockRef:a,expiration:l,provedWork:c}=t??{};if(null!=r&&!M.kG.isValid(r))throw new U.ep("TransactionsModule.simulateTransaction()","Invalid revision given as input. Input must be a valid revision (i.e., a block number or block ID).",{revision:r});return await this.blocksModule.httpClient.http("POST",aC.accounts.post.SIMULATE_TRANSACTION(r),{query:a_({revision:r}),body:{clauses:await this.resolveNamesInClauses(e.map(e=>({to:e.to,data:e.data,value:BigInt(e.value).toString()}))),gas:o,gasPrice:n,caller:i,provedWork:c,gasPayer:s,expiration:l,blockRef:a}})}decodeRevertReason(e,t){if(e.startsWith(av))return M.dL.ofEncoded("string",`0x${e.slice(av.length)}`).getFirstDecodedValue();if(e.startsWith(aE)){let t=M.dL.ofEncoded("uint256",`0x${e.slice(aE.length)}`).getFirstDecodedValue();return`Panic(0x${parseInt(t).toString(16).padStart(2,"0")})`}return void 0!==t?new rL([rb.from(t)]).decodeErrorResult(rb.from(t),e).toArray()[0]:""}async getRevertReason(e,t){let r=this.blocksModule,i=this.debugModule,n=await this.getTransaction(e),s=null!==n?await r.getBlockExpanded(n.meta.blockID):null;if(null===s||null===n)return null;let o=lh(ly.formatToRPCStandard(s,""),e);for(let e=0;e<n.clauses.length;e++){let r=await i.traceTransactionClause({target:{blockId:M.pI.of(s.id),transaction:o,clauseIndex:e},config:{OnlyTopCall:!0}},"call");if(void 0!==r.output)return this.decodeRevertReason(r.output,t)}return null}async estimateGas(e,t,r){if(e.length<=0)throw new U.ep("GasModule.estimateGas()","Invalid clauses. Clauses must be an array of clauses with at least one clause.",{clauses:e,caller:t,options:r});if(r?.gasPadding!==void 0&&(r.gasPadding<=0||r.gasPadding>1))throw new U.ep("GasModule.estimateGas()","Invalid gasPadding. gasPadding must be a number between (0, 1].",{gasPadding:r?.gasPadding});let i=await this.simulateTransaction(e,{caller:t,...r}),n=i.some(e=>e.reverted),s=Number(M.YW.intrinsicGas(e).wei),o=i.reduce((e,t)=>e+t.gasUsed,0),a=Math.ceil((s+(0!==o?o+15e3:0))*(1+(r?.gasPadding??0)));return n?{totalGas:a,reverted:!0,revertReasons:i.map(e=>a1(e.data)??""),vmErrors:i.map(e=>e.vmError)}:{totalGas:a,reverted:!1,revertReasons:[],vmErrors:[]}}async executeCall(e,t,r,i){let n=await this.simulateTransaction([{to:e,value:"0",data:t.encodeData(r).toString()}],i);return this.getContractCallResult(n[0].data,t,n[0].reverted)}async executeMultipleClausesCall(e,t){return(await this.simulateTransaction(e.map(e=>e.clause),t)).map((t,r)=>this.getContractCallResult(t.data,e[r].functionAbi,t.reverted))}async executeTransaction(e,t,r,i,n){let s=await e.sendTransaction({clauses:[M.AU.callFunction(M.kL.of(t),r,i,M.KL.of(n?.value??0,M.nL.wei))],gas:n?.gas,gasLimit:n?.gasLimit,gasPrice:n?.gasPrice,gasPriceCoef:n?.gasPriceCoef,maxFeePerGas:n?.maxFeePerGas,maxPriorityFeePerGas:n?.maxPriorityFeePerGas,nonce:n?.nonce,value:n?.value,dependsOn:n?.dependsOn,expiration:n?.expiration,chainTag:n?.chainTag,blockRef:n?.blockRef,delegationUrl:n?.delegationUrl,comment:n?.comment});return{id:s,wait:async()=>await this.waitForTransaction(s)}}async executeMultipleClausesTransaction(e,t,r){let i=await t.sendTransaction({clauses:e.map(e=>e.clause),gas:r?.gas,gasLimit:r?.gasLimit,gasPrice:r?.gasPrice,gasPriceCoef:r?.gasPriceCoef,maxFeePerGas:r?.maxFeePerGas,maxPriorityFeePerGas:r?.maxPriorityFeePerGas,nonce:r?.nonce,value:r?.value,dependsOn:r?.dependsOn,expiration:r?.expiration,chainTag:r?.chainTag,blockRef:r?.blockRef,delegationUrl:r?.delegationUrl,comment:r?.comment});return{id:i,wait:async()=>await this.waitForTransaction(i)}}async getLegacyBaseGasPrice(){return await this.executeCall(ay.PARAMS_ADDRESS,M.Yh.ofAbi(ay.PARAMS_ABI).getFunction("get"),[M.$f.encodeBytes32String("base-gas-price","left")])}getContractCallResult(e,t,r){if(r)return{success:!1,result:{errorMessage:a1(e)??""}};let i=M.pU.of(e);return{success:!0,result:{plain:t.decodeResult(i),array:t.decodeOutputAsArray(i)}}}},a3=async(e,t,r,i)=>{let n=M.pU.of(e.encoded).toString();try{let e=await i.http("POST",t,{body:{origin:r,raw:n},headers:{"Content-Type":"application/json"}});return M.H1.of(e.signature.slice(2)).bytes}catch(e){throw new U.uS("_getDelegationSignature()","Delegation failed: Cannot get signature from gasPayerUrl.",{gasPayerUrl:t},e)}},a4=e=>{let t=null==e,r=!t&&e?.gasPayerServiceUrl!==void 0,i=!t&&e?.gasPayerPrivateKey!==void 0;return{isDelegated:()=>r||i,gasPayerOrUndefined:()=>t?void 0:e,gasPayerOrNull:()=>t?null:e,getDelegationSignatureUsingUrl:async(t,i,n)=>{if(!r)throw new U.uS("DelegationHandler.getDelegationSignatureUsingUrl()","Delegation with url failed: gasPayerServiceUrl is not defined.",void 0);return await a3(t,e?.gasPayerServiceUrl,i,n)}}},a8=new Map,a5=!1,a6=class{constructor(e){this.httpClient=e}async isGalacticaForked(e){if(a5)return!0;if(void 0===e&&(e="best"),!M.kG.isValid(e))throw new U.ep("GalacticaForkDetector.isGalacticaForked()","Invalid revision. Must be a valid block number or ID.",{revision:e});let t=String(e),r=a8.get(t),i=Date.now();if(void 0!==r){if(r.result)return a5=!0,!0;if(i-r.timestamp<3e5)return!1}let n=await this.httpClient.http("GET",aC.blocks.get.BLOCK_DETAIL(e),{query:a_({expanded:!0})});if(null===n)return a8.set(t,{result:!1,timestamp:i}),!1;let s=void 0!==n.baseFeePerGas;return a8.set(t,{result:s,timestamp:i}),s&&(a5=!0),s}async detectGalactica(e="best"){return await this.isGalacticaForked(e)}clearCache(){a8.clear(),a5=!1}},a7=class e{constructor(e,t){this.httpClient=e,this.accounts=new aL(e),this.debug=new aQ(e),this.blocks=new aU(e,t),this.logs=new aJ(this.blocks),this.nodes=new aZ(this.blocks),this.gas=new aY(this.httpClient),this.forkDetector=new a6(this.httpClient),this.transactions=new a2(this.blocks,this.debug,this.logs,this.gas,this.forkDetector),this.gas.setTransactionsModule(this.transactions),this.contracts=new aW(this.transactions)}accounts;nodes;blocks;logs;transactions;contracts;forkDetector;gas;debug;static at(t,r){return new e(new ad(t),r)}destroy(){this.blocks.destroy()}static fromUrl(t,r){return e.at(t,r)}},a9=class{MESSAGE_PREFIX=M.H_.of(`Ethereum Signed Message:
`).bytes;provider;constructor(e){this.provider=e}async populateCall(e){if(void 0===e.from||null===e.from)e.from=M.kL.checksum(M.H1.of(await this.getAddress()));else if(M.kL.checksum(M.H1.of(e.from))!==M.kL.checksum(M.H1.of(await this.getAddress())))throw new U.ep("VeChainAbstractSigner.populateCall()","From address does not match the signer address.",{signerAddress:M.kL.checksum(M.H1.of(await this.getAddress())),fromAddress:M.kL.checksum(M.H1.of(e.from))});return void 0===e.to&&(e.to=null),void 0!==e.clauses&&e.clauses.length>0&&(e.to=e.clauses[0].to,e.value=e.clauses[0].value,e.data=e.clauses[0].data),e}async populateTransaction(e){if(void 0===this.provider)throw new U._g("VechainAbstractSigner.populateTransaction()","Thor client not found into the signer. Please attach a Provider with a thor client to your signer instance.",{provider:this.provider});let t=this.provider.thorClient,r=await this.populateCall(e),i=void 0!==e.gas?Number(e.gas):await this.estimateGas(e);return await t.transactions.buildTransactionBody(r.clauses??this._buildClauses(r),i,{isDelegated:this.provider?.enableDelegation,nonce:r.nonce??await this.getNonce("pending"),blockRef:r.blockRef??void 0,chainTag:r.chainTag??void 0,dependsOn:r.dependsOn??void 0,expiration:r.expiration,gasPriceCoef:r.gasPriceCoef??void 0,maxPriorityFeePerGas:r.maxPriorityFeePerGas??void 0,maxFeePerGas:r.maxFeePerGas??void 0})}async estimateGas(e){if(void 0===this.provider)throw new U._g("VechainAbstractSigner.estimateGas()","Thor client not found into the signer. Please attach a Provider with a thor client to your signer instance.",{provider:this.provider});let t=this.provider.thorClient,r=await this.populateCall(e);return(await t.transactions.estimateGas(r.clauses??this._buildClauses(r),r.from)).totalGas}async call(e,t){if(void 0===this.provider)throw new U._g("VechainAbstractSigner.call()","Thor client not found into the signer. Please attach a Provider with a thor client to your signer instance.",{provider:this.provider});let r=this.provider.thorClient,i=await this.populateCall(e);return(await r.transactions.simulateTransaction(i.clauses??this._buildClauses(i),{revision:t??void 0,gas:i.gas??void 0,gasPrice:i.gasPrice??void 0,caller:i.from,provedWork:i.provedWork??void 0,gasPayer:i.gasPayer??void 0,expiration:i.expiration??void 0,blockRef:i.blockRef??void 0}))[0].data}async getNonce(e){return void 0!==this.provider?await this.provider.request({method:"eth_getTransactionCount",params:[await this.getAddress(),e]}):M.pU.random(6).toString()}async signMessage(e){try{let t="string"==typeof e?M.H_.of(e).bytes:e,r=M.GN.of((0,o3.eV)(this.MESSAGE_PREFIX,M.H_.of(t.length).bytes,t)).bytes;return await this.signPayload(r)}catch(t){throw new U._T("VeChainAbstractSigner.signMessage","The message could not be signed.",{message:e},t)}}deducePrimaryType(e){let t=new Map;for(let r in Object.keys(e).forEach(e=>{t.set(e,[])}),e)for(let i of e[r]){let e=i.type.split("[")[0];t.has(e)&&t.get(e)?.push(r)}let r=Array.from(t.keys()).filter(e=>t.get(e)?.length===0);if(1!==r.length)throw new U._T("VeChainAbstractSigner.deducePrimaryType","Ambiguous primary types or unused types.",{primaryTypes:r.join(", ")});return r[0]}async signTypedData(e,t,r,i){try{let n=M.pU.of(function(e){let{domain:t={},message:r,primaryType:i}=e,n={EIP712Domain:function({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}({domain:t}),...e.types};!function(e){let{domain:t,message:r,primaryType:i,types:n}=e,s=(e,t)=>{for(let r of e){let{name:e,type:i}=r,o=t[e],a=i.match(aa.lh);if(a&&("number"==typeof o||"bigint"==typeof o)){let[e,t,r]=a;(0,o5.eC)(o,{signed:"int"===t,size:Number.parseInt(r)/8})}if("address"===i&&"string"==typeof o&&!(0,as.U)(o))throw new o9.b({address:o});let l=i.match(aa.eL);if(l){let[e,t]=l;if(t&&(0,ao.d)(o)!==Number.parseInt(t))throw new o7.KY({expectedSize:Number.parseInt(t),givenSize:(0,ao.d)(o)})}let c=n[i];c&&(function(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new an({type:e})}(i),s(c,o))}};if(n.EIP712Domain&&t){if("object"!=typeof t)throw new ar({domain:t});s(n.EIP712Domain,t)}if("EIP712Domain"!==i){if(n[i])s(n[i],r);else throw new ai({primaryType:i,types:n})}}({domain:t,message:r,primaryType:i,types:n});let s=["0x1901"];return t&&s.push(function({domain:e,types:t}){return al({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:n})),"EIP712Domain"!==i&&s.push(al({data:r,primaryType:i,types:n})),(0,o6.w)((0,o8.zo)(s))}({domain:e,types:t,primaryType:i??this.deducePrimaryType(t),message:r})).bytes;return await this.signPayload(n)}catch(n){throw new U._T("VeChainAbstractSigner.signTypedData","The typed data could not be signed.",{domain:e,types:t,message:r,primaryType:i},n)}}async resolveName(e){return void 0===this.provider?null:await aD.resolveName(this.provider.thorClient,e)}_buildClauses(e){return void 0!==e.to&&null!==e.to?[{to:e.to,data:e.data??"0x",value:e.value??"0x0"}]:[M.AU.deployContract(M.H1.of(e.data??0),void 0,{value:void 0===e.value?e.value:M.H1.of(e.value).toString(!0),comment:e.comment})]}},le=class e extends a9{constructor(e,t){if(!M.fL.isValidPrivateKey(e))throw new U.wd("VeChainPrivateKeySigner.constructor()","Invalid private key used to sign initialize the signer. Ensure it's a valid Secp256k1 private key.",void 0);super(t),this.privateKey=e}connect(t){return new e(this.privateKey,t)}async getAddress(){return M.kL.checksum(M.H1.of(await Promise.resolve(M.kL.ofPrivateKey(this.privateKey).toString())))}async signTransaction(e){if(void 0===this.provider)throw new U._g("VeChainPrivateKeySigner.signTransaction()","Thor provider is not found into the signer. Please attach a Provider to your signer instance.",{transactionToSign:e});let t=a4(await this.provider.wallet?.getGasPayer()).gasPayerOrNull();return void 0!==e.delegationUrl&&(t={gasPayerServiceUrl:e.delegationUrl}),await this._signFlow(e,t,this.provider.thorClient)}async sendTransaction(e){if(void 0===this.provider)throw new U._g("VeChainPrivateKeySigner.sendTransaction()","Thor provider is not found into the signer. Please attach a Provider to your signer instance.",{transactionToSend:e});let t=this.provider,r=await this.signTransaction(e);return await t.request({method:"eth_sendRawTransaction",params:[r]})}async signPayload(e){let t=M.fL.sign(e,new Uint8Array(this.privateKey));return t[t.length-1]+=27,await Promise.resolve(M.pU.of(t).toString())}async _signFlow(e,t,r){let i=await this.populateTransaction(e);return null!==t?await this._signWithGasPayer(i,this.privateKey,r,t):M.pU.of(M.YW.of(i).sign(this.privateKey).encoded).toString()}async _signWithGasPayer(e,t,r,i){let n=M.kL.ofPrivateKey(t).toString(),s=M.YW.of(e);if(i?.gasPayerPrivateKey!==void 0)return M.pU.of(M.YW.of(e).signAsSenderAndGasPayer(t,M.H1.of(i?.gasPayerPrivateKey).bytes).encoded).toString();let o=await a4(i).getDelegationSignatureUsingUrl(s,n,r.httpClient),a=M.fL.sign(s.getTransactionHash().bytes,t),l=new Uint8Array(a.length+o.length);return l.set(a),l.set(o,a.length),M.pU.of(M.YW.of(s.body,l).encoded).toString()}},lt=class{accounts;gasPayer;constructor(e,t){this.accounts=e,this.gasPayer=t?.gasPayer}getSignerSync(e,t){let r=this.getAccountSync(t);return r?.privateKey!==void 0?new le(r.privateKey,e):null}getAddressesSync(){return this.accounts.map(e=>e.address)}getAccountSync(e){if(void 0===e||"number"==typeof e)return this.accounts[e??0]??null;if(!M.kL.isValid(e))throw new U.ep("AbstractProviderInternalWallet.getAccountSync()","Invalid params expected an address.",{addressOrIndex:e});return this.accounts.find(t=>M.kL.checksum(M.H1.of(t.address))===M.kL.checksum(M.H1.of(e)))??null}getGasPayerSync(){return a4(this.gasPayer).gasPayerOrNull()}},lr=class extends lt{async getSigner(e,t){return await Promise.resolve(this.getSignerSync(e,t))}async getAddresses(){return await Promise.resolve(this.getAddressesSync())}async getAccount(e){return await Promise.resolve(this.getAccountSync(e))}async getGasPayer(){return await Promise.resolve(this.getGasPayerSync())}},li=class extends lr{mnemonic;derivationPath;count;initialIndex;constructor(e,t=1,r=0,i=M.BW.VET_DERIVATION_PATH,n){super([...Array(t).keys()].map(t=>{let n=M.BW.fromMnemonic(e,i).deriveChild(t+r).privateKey;return{privateKey:n,publicKey:M.fL.derivePublicKey(n),address:M.kL.ofPrivateKey(n).toString()}}),n),this.mnemonic=e,this.derivationPath=i,this.count=t,this.initialIndex=r}},ln=class extends o2{hardhatProvider;constructor(e,t,r){super({name:t,chainId:e}),this.hardhatProvider=r}async send(e,t){return this._start(),await super.send(e,t)}async _send(e){let t=Array.isArray(e)?e:[e],r=[];for(let e of t)try{let t=await this.hardhatProvider.send(e.method,e.params);r.push({id:e.id,result:t})}catch(t){r.push({id:e.id,error:{code:-32603,message:(0,U.WO)(t)}})}return r}},ls=5e3,lo=["latest","earliest","pending","safe","finalized"],la=e=>{if(M.H1.isValid(e))return M.kG.of(M.H1.of(e).n.toString());if(!lo.includes(e)){let t=e.toString();throw new U.kj("DefaultBlockToRevision",`Invalid default block: ${t}`,t,null)}return"earliest"===e?M.kG.of(M.H1.of(0)):"safe"===e?M.kG.of("justified"):"finalized"===e?M.kG.of("finalized"):M.kG.of("best")},ll={MAINNET:"0x186a9",TESTNET:"0x186aa",SOLO_DEFAULT:"0xf6"},lc={MAINNET:"0x4a",TESTNET:"0x27",SOLO_DEFAULT:"0xf6"},lu=e=>e.isEqual(M.H1.of(lc.MAINNET))?M.H1.of(ll.MAINNET):e.isEqual(M.H1.of(lc.TESTNET))?M.H1.of(ll.TESTNET):e.isEqual(M.H1.of(lc.SOLO_DEFAULT))?M.H1.of(ll.SOLO_DEFAULT):e,lh=(e,t)=>{let r="string"==typeof e.transactions[0]?e.transactions.findIndex(e=>e===t):e.transactions.findIndex(e=>e.hash===t);if(-1===r)throw new U.ep("getTransactionIndexIntoBlock()","Transaction not found in block.",{block:e,hash:t});return r},ld=(e,t,r)=>{let i=lh(ly.formatToRPCStandard(e,r),t),n=0;for(let t=0;t<i;t++)for(let r of e.transactions[t].outputs)n+=r.events.length;return n},lf=e=>null==e||"number"!=typeof e?"0x0":e===(0,M.k)(M.iU.EIP1559)?"0x2":"0x0",lp=(e,t,r,i,n)=>{let s="type"in e?e.type:0;return{blockHash:t,blockNumber:M.h0.of(r).toString(),from:e.origin,gas:M.h0.of(M.H1.of(e.gas).bi).toString(),chainId:i,hash:e.id,nonce:e.nonce,transactionIndex:M.h0.of(n).toString(),input:e.clauses[0]?.data??"",to:e.clauses[0]?.to??null,value:e.clauses[0]?.value!==void 0?M.h0.of(M.H1.of(e.clauses[0].value).bi).toString():"",type:lf(s),maxFeePerGas:void 0!==e.maxFeePerGas&&null!==e.maxFeePerGas?M.h0.of(M.H1.of(e.maxFeePerGas).bi).toString():void 0,maxPriorityFeePerGas:void 0!==e.maxPriorityFeePerGas&&null!==e.maxPriorityFeePerGas?M.h0.of(M.H1.of(e.maxPriorityFeePerGas).bi).toString():void 0,gasPrice:"0x0",v:"0x0",r:"0x0",s:"0x0",accessList:[],yParity:"0x0"}},lg={formatToRPCStandard:(e,t,r)=>lp(e,e.meta.blockID,e.meta.blockNumber,t,r),formatExpandedBlockToRPCStandard:(e,t,r,i)=>lp(e,t.id,t.number,i,r),formatTransactionReceiptToRPCStandard:function(e,t,r,i,n){let s=lh(ly.formatToRPCStandard(i,n),e),o=ld(i,e,n),a=[],l=o;t.outputs.forEach(e=>{e.events.forEach(e=>{a.push({blockHash:t.meta.blockID,blockNumber:M.h0.of(t.meta.blockNumber).toString(),transactionHash:t.meta.txID,address:e.address,topics:e.topics.map(e=>e),data:e.data,removed:!1,transactionIndex:M.h0.of(s).toString(),logIndex:M.h0.of(l).toString()}),l++})});let c="type"in r?r.type:0;return{blockHash:t.meta.blockID,blockNumber:M.h0.of(t.meta.blockNumber).toString(),contractAddress:t.outputs.length>0?t.outputs[0].contractAddress:null,from:r.origin,gasUsed:M.h0.of(t.gasUsed).toString(),logs:a,status:t.reverted?"0x0":"0x1",to:r.clauses[0].to,transactionHash:t.meta.txID,transactionIndex:M.h0.of(s).toString(),logsBloom:M.pU.of((0,M.o1)(256)).toString(),cumulativeGasUsed:"0x0",effectiveGasPrice:"0x0",type:lf(c)}}},ly={formatToRPCStandard:(e,t)=>{let r="string"==typeof e.transactions[0]?e.transactions:e.transactions.map((r,i)=>lg.formatExpandedBlockToRPCStandard(r,e,i,t));return{hash:e.id,parentHash:e.parentID,number:M.h0.of(e.number).toString(),size:M.h0.of(e.size).toString(),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot,transactionsRoot:e.txsRoot,timestamp:M.h0.of(e.timestamp).toString(),gasLimit:M.h0.of(e.gasLimit).toString(),gasUsed:M.h0.of(e.gasUsed).toString(),transactions:r,miner:e.beneficiary,baseFeePerGas:e.baseFeePerGas,difficulty:"0x0",totalDifficulty:"0x0",uncles:[],sha3Uncles:M.H1.of((0,M.o1)(32)).toString(),nonce:M.H1.of((0,M.o1)(8)).toString(),logsBloom:M.H1.of((0,M.o1)(256)).toString(),extraData:"0x",...void 0!==e.baseFeePerGas?{baseFeePerGas:e.baseFeePerGas}:{},mixHash:M.H1.of((0,M.o1)(32)).toString()}}};function lm(e,t){return"call"===e?{...t,revertReason:""}:Object.fromEntries(Object.entries(t).map(([e,t])=>[e,{balance:t.balance,code:t.code,storage:t.storage,nonce:0}]))}var lb={formatToRPCStandard:lm},lw=e=>e.map(e=>({address:e.address,blockHash:e.meta.blockID,blockNumber:M.de.of(e.meta.blockNumber).toString(),data:e.data,logIndex:"0x0",removed:!1,topics:e.topics,transactionHash:e.meta.txID,transactionIndex:"0x0"})),lv=(e,t)=>({address:t,topic0:e[0]??void 0,topic1:e[1]??void 0,topic2:e[2]??void 0,topic3:e[3]??void 0,topic4:e[4]??void 0}),lE=e=>(void 0!==e.address?"string"==typeof e.address?[e.address]:e.address:[void 0]).map(t=>lA(t,e.topics??[])).flat(),lA=(e,t)=>{let r=[],i=[];t.forEach(e=>{Array.isArray(e)||r.push(e),Array.isArray(e)&&i.push(e)});let n=[];return r.length>0&&n.push(lv(r,e)),i.forEach(t=>{t.forEach(t=>{n.push({address:e,topic0:t,topic1:void 0,topic2:void 0,topic3:void 0,topic4:void 0})})}),0===n.length&&n.push({address:e,topic0:void 0,topic1:void 0,topic2:void 0,topic3:void 0,topic4:void 0}),n},lx=null,lI=null,lT=null,l_=async e=>{try{if(null!==lx)return lx.toString();let t=await e.blocks.getGenesisBlock();if(t?.id===null||t?.id===void 0)throw new U._g("eth_chainId()","The genesis block id is null or undefined. Unable to get the chain id.",{url:e.httpClient.baseURL});if(!M.pU.isValid(t.id))throw new U._g("eth_chainId()","The genesis block id is invalid. Unable to get the chain id.",{url:e.httpClient.baseURL});return lT=M.pU.of(t.id),lI=M.H1.of(lT.bytes.slice(-1)),(lx=lu(lI)).toString()}catch(t){throw new U.oV("eth_chainId()",'Method "eth_chainId" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},lS=async e=>null!==lx?lx.toString():await l_(e),lP=async e=>null!==lI?lI.toString():await l_(e),lN=async(e,t)=>{if(1!==t.length||"string"!=typeof t[0])throw new U._g("eth_getTransactionReceipt",`Invalid input params for "eth_getTransactionReceipt" method. See ${aT} for details.`,{params:t});if(!M.pI.isValid(t[0]))throw new U._g("eth_getTransactionReceipt","Invalid transaction ID given as input. Input must be an hex string of length 64.",{params:t});try{let[r]=t,i=await e.transactions.getTransactionReceipt(r);if(null===i)return null;{let t=await e.blocks.getBlockExpanded(i.meta.blockID),n=await e.transactions.getTransaction(r),s=await l_(e);return null!==n?lg.formatTransactionReceiptToRPCStandard(r,i,n,t,s):null}}catch(r){throw new U.oV("eth_getTransactionReceipt()",'Method "eth_getTransactionReceipt" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lO=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||"object"!=typeof t[1])throw new U._g("debug_traceTransaction",`Invalid input params for "debug_traceTransaction" method. See ${aT} for details.`,{params:t});let[r,i]=t;if(!M.pI.isValid(r))throw new U.ep("debug_traceTransaction()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{transactionId:r});let n="callTracer"===i.tracer?"call":"prestate";try{let t=await lN(e,[r]),i=await e.debug.traceTransactionClause({target:{blockId:M.pI.of(t?.blockHash),transaction:M.pI.of(t?.transactionHash),clauseIndex:0},config:{}},n);return lb.formatToRPCStandard(n,i)}catch(r){throw new U.oV("debug_traceTransaction()",'Method "debug_traceTransaction" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lk=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||!M.pI.isValid(t[0])||"boolean"!=typeof t[1])throw new U._g("eth_getBlockByHash",`Invalid input params for "eth_getBlockByHash" method. See ${aT} for details.`,{params:t});try{let[r,i]=t,n="0x0";i&&(n=await l_(e));let s=i?await e.blocks.getBlockExpanded(r):await e.blocks.getBlockCompressed(r);return null!==s?ly.formatToRPCStandard(s,n):null}catch(r){throw new U.oV("eth_getBlockByHash()",'Method "eth_getBlockByHash" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lC=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||!M.pI.isValid(t[0])||"object"!=typeof t[1])throw new U._g("debug_traceBlockByHash",'Invalid input params for "debug_traceBlockByHash" method. See https://www.quicknode.com/docs/ethereum/debug_traceBlockByHash for details.',{params:t});let[r,i]=t;try{let t=await lk(e,[r,!1]);if(null===t)return[];let n=[];for(let r of t.transactions){let t=await lO(e,[r,{...i,timeout:"5s"}]);n.push({txHash:r,result:t})}return n}catch(r){throw new U.oV("debug_traceBlockByHash()",'Method "debug_traceBlockByHash" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lB=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||"boolean"!=typeof t[1])throw new U._g("eth_getBlockByNumber",`Invalid input params for "eth_getBlockByNumber" method. See ${aT} for details.`,{params:t});try{let[r,i]=t,n=la(r),s="0x0";i&&(s=await l_(e));let o=i?await e.blocks.getBlockExpanded(n.toString()):await e.blocks.getBlockCompressed(n.toString());return null!==o?ly.formatToRPCStandard(o,s):null}catch(r){throw new U.oV("eth_getBlockByNumber()",'Method "eth_getBlockByNumber" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lR=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||"object"!=typeof t[1])throw new U._g("debug_traceBlockByNumber",'Invalid input params for "debug_traceBlockByNumber" method. See https://www.quicknode.com/docs/ethereum/debug_traceBlockByNumber for details.',{params:t});let[r,i]=t;try{let t=await lB(e,[r,!1]);if(null===t)return[];let n=[];for(let r of t.transactions){let t=await lO(e,[r,{...i,timeout:"5s"}]);n.push({txHash:r,result:t})}return n}catch(r){throw new U.oV("debug_traceBlockByNumber()",'Method "debug_traceBlockByNumber" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lD=async(e,t)=>{if(3!==t.length||"object"!=typeof t[0]||"string"!=typeof t[1]||"object"!=typeof t[2])throw new U._g("debug_traceCall",`Invalid input params for "debug_traceCall" method. See ${aT} for details.`,{params:t});let r=t[0],i=t[2],n="callTracer"===i.tracer?"call":"prestate";try{let t=await e.debug.traceContractCall({options:{caller:r.from,gas:void 0!==r.gas?parseInt(r.gas,16):void 0,gasPrice:r.gasPrice},target:{to:"string"==typeof r.to?M.kL.of(r.to):r.to,data:"string"==typeof r.data?M.H1.of(r.data):void 0},config:i.tracerConfig},n);return lb.formatToRPCStandard(n,t)}catch(r){throw new U.oV("debug_traceCall()",'Method "debug_traceCall" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lL=async()=>((0,ac.t)("warning").log({title:"engine_getPayloadBodiesByHashV1",messages:['Method "engine_getPayloadBodiesByHashV1" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),lU=async()=>((0,ac.t)("warning").log({title:"engine_getPayloadBodiesByRangeV1",messages:['Method "engine_getPayloadBodiesByRangeV1" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),lM=async e=>e?.wallet!==void 0?await e?.wallet.getAddresses():[],lF=async e=>{try{let t=await e.blocks.getBestBlockCompressed();return t?.number!==void 0?`0x${t.number.toString(16)}`:"0x0"}catch(t){throw new U.oV("eth_blockNumber()",'Method "eth_blockNumber" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},l$=async(e,t)=>{if(2!==t.length||"object"!=typeof t[0]||"object"!=typeof t[1]&&"string"!=typeof t[1])throw new U._g("eth_call",`Invalid input params for "eth_call" method. See ${aT} for details.`,{params:t});try{let[r,i]=t,n=await e.transactions.simulateTransaction([{to:r.to??null,value:r.value??"0x0",data:r.data??"0x0"}],{revision:la(i).toString(),gas:void 0!==r.gas?parseInt(r.gas,16):void 0,gasPrice:r.gasPrice??r.gasPrice,caller:r.from});if(n[0].reverted)throw new U.oV("eth_call()",'Method "eth_call" failed when simulating the transaction.',{params:(0,U.WO)(t),innerError:n[0].vmError});return n[0].data}catch(r){throw r instanceof U.oV?r:new U.oV("eth_call()",'Method "eth_call" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lj=async(e,t)=>{if(t.length<1||t.length>2||"object"!=typeof t[0])throw new U._g("eth_estimateGas",`Invalid input params for "eth_estimateGas" method. See ${aT} for details.`,{params:t});try{1===t.length&&t.push("latest");let[r,i]=t,n=la(i),s=await e.transactions.estimateGas([{to:r.to??null,value:r.value??"0x0",data:r.data??"0x"}],r.from,{revision:n.toString()});return M.H1.of(s.totalGas).toString(!0)}catch(r){throw new U.oV("eth_estimateGas()",'Method "eth_estimateGas" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lH=async(e,t,r)=>{if(!Array.isArray(t)||t.length<2)throw new U._g("eth_feeHistory",'Invalid input params for "eth_feeHistory" method.',{params:t});if(!await e.forkDetector.detectGalactica())throw new U.DT("eth_feeHistory",'Method "eth_feeHistory" is not available before Galactica hardfork.',{url:e.httpClient.baseURL});let i=t[0],n=t[1],s=t[2];if("string"!=typeof n&&"number"!=typeof n)throw new U._g("eth_feeHistory","Invalid newestBlock parameter. Must be a string or number.",{newestBlock:n});let o=Number(i);if(!Number.isFinite(o)||o<=0)throw new U._g("eth_feeHistory","blockCount must be a positive finite number.",{blockCount:i,blockCountNum:o});let a=la(n);try{return await e.gas.getFeeHistory({blockCount:o,newestBlock:a.toString(),rewardPercentiles:s})}catch(t){throw t instanceof U._g?t:new U.oV("eth_feeHistory()",'Method "eth_feeHistory" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},lV=async e=>{if(!await e.forkDetector.detectGalactica()){let{result:{plain:t}}=await e.contracts.getLegacyBaseGasPrice();return M.H1.of(t).toString(!0)}let t=await e.blocks.getBestBlockCompressed(),r=t?.baseFeePerGas;if(void 0===r)throw new U.oV("eth_gasPrice","Last block should have baseFeePerGas defined.",{params:t,url:e.httpClient.baseURL});let i=await e.gas.getMaxPriorityFeePerGas(),n=M.H1.of(r).bi,s=M.H1.of(i).bi;return M.H1.of(n+s).toString(!0)},lz=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||"object"!=typeof t[1]&&"string"!=typeof t[1])throw new U._g("eth_getBalance",`Invalid input params for "eth_getBalance" method. See ${aT} for details.`,{params:t});try{let[r,i]=t;return(await e.accounts.getAccount(M.kL.of(r),{revision:la(i)})).balance}catch(r){throw new U.oV("eth_getBalance()",'Method "eth_getBalance" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lG=async(e,t)=>{if(1!==t.length||"string"!=typeof t[0])throw new U._g("eth_getBlockReceipts",`Invalid input params for "eth_getBlockReceipts" method. See ${aT} for details.`,{params:t});try{let[r]=t,i=await lB(e,[r,!0]);if(null===i)return null;let n=i.transactions,s=[];for(let t of n){let r=await lN(e,[t.hash]);s.push(r)}return s}catch(r){throw new U.oV("eth_getBlockReceipts()",'Method "eth_getBlockReceipts" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lq=async(e,t)=>{if(1!==t.length||"string"!=typeof t[0]||!M.pI.isValid(t[0]))throw new U._g("eth_getBlockTransactionCountByHash",`Invalid input params for "eth_getBlockTransactionCountByHash" method. See ${aT} for details.`,{params:t});let r=await lk(e,[t[0],!1]);return null!==r?r.transactions.length:0},lK=async(e,t)=>{if(1!==t.length||"string"!=typeof t[0])throw new U._g("eth_getBlockTransactionCountByNumber",`Invalid input params for "eth_getBlockTransactionCountByNumber" method. See ${aT} for details.`,{params:t});let r=await lB(e,[t[0],!0]);return null!==r?r.transactions.length:0},lW=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||"object"!=typeof t[1]&&"string"!=typeof t[1])throw new U._g("eth_getCode",`Invalid input params for "eth_getCode" method. See ${aT} for details.`,{params:t});try{let[r,i]=t;return(await e.accounts.getBytecode(M.kL.of(r),{revision:la(i)})).toString()}catch(r){throw new U.oV("eth_getCode()",'Method "eth_getCode" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lQ=async()=>((0,ac.t)("warning").log({title:"eth_getFilterChanges",messages:['Method "eth_getFilterChanges" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),lY=async()=>((0,ac.t)("warning").log({title:"eth_getFilterLogs",messages:['Method "eth_getFilterLogs" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),lJ=async(e,t)=>{if(1!==t.length||"object"!=typeof t[0])throw new U._g("eth_getLogs",`Invalid input params for "eth_getLogs" method. See ${aT} for details.`,{params:t});let[r]=t;try{let t=await e.blocks.getBestBlockCompressed(),i=lE({address:null!==r.address?r.address:void 0,topics:r.topics}),n=await e.logs.filterRawEventLogs({range:{unit:"block",from:void 0!==r.fromBlock?parseInt(r.fromBlock,16):t.number,to:void 0!==r.toBlock?parseInt(r.toBlock,16):t.number},criteriaSet:i,order:"asc",options:{offset:0,limit:1e3}});return lw(n)}catch(r){throw new U.oV("eth_getLogs()",'Method "eth_getLogs" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lZ=async(e,t)=>{if(3!==t.length||"string"!=typeof t[0]||"string"!=typeof t[1]&&"bigint"!=typeof t[1]||null!=t[2]&&"object"!=typeof t[2]&&"string"!=typeof t[2])throw new U._g("eth_getStorageAt",`Invalid input params for "eth_getStorageAt" method. See ${aT} for details.`,{params:t});try{null==t[2]&&(t[2]="latest");let[r,i,n]=t;return(await e.accounts.getStorageAt(M.kL.of(r),M.pI.of(i),{revision:la(n)})).toString()}catch(r){throw new U.oV("eth_getStorageAt()",'Method "eth_getStorageAt" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},lX=async(e,t)=>{if(1!==t.length||"string"!=typeof t[0])throw new U._g("eth_getTransactionByHash",`Invalid input params for "eth_getTransactionByHash" method. See ${aT} for details.`,{params:t});try{let[r]=t,i=await e.transactions.getTransaction(r);if(null===i)return null;let n=await lk(e,[i.meta.blockID,!1]);if(null===n)return null;let s=lh(n,r),o=await l_(e);return lg.formatToRPCStandard(i,o,s)}catch(r){throw new U.oV("eth_getTransactionByHash()",'Method "eth_getTransactionByHash" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},l0=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||"string"!=typeof t[1])throw new U._g("eth_getTransactionByBlockHashAndIndex",`Invalid input params for "eth_getTransactionByBlockHashAndIndex" method. See ${aT} for details.`,{params:t});try{let[r,i]=t;for(let t of(await lk(e,[r,!1])).transactions){let r=await lX(e,[t]);if(r.transactionIndex===i)return r}return null}catch(r){throw new U.oV("eth_getTransactionByBlockHashAndIndex()",'Method "eth_getTransactionByBlockHashAndIndex" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},l1=async(e,t)=>{if(2!==t.length||"string"!=typeof t[0]||"string"!=typeof t[1])throw new U._g("eth_getTransactionByBlockNumberAndIndex",`Invalid input params for "eth_getTransactionByBlockNumberAndIndex" method. See ${aT} for details.`,{params:t});try{let[r,i]=t;for(let t of(await lB(e,[r,!1])).transactions){let r=await lX(e,[t]);if(r.transactionIndex===i)return r}return null}catch(r){throw new U.oV("eth_getTransactionByBlockNumberAndIndex()",'Method "eth_getTransactionByBlockNumberAndIndex" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL,innerError:(0,U.WO)(r)})}},l2=async e=>{if("string"!=typeof e[0]||"object"!=typeof e[1]&&"string"!=typeof e[1])throw new U._g("eth_getTransactionCount",`Invalid input params for "eth_getTransactionCount" method. See ${aT} for details.`,{params:e});if(!M.kL.isValid(e[0]))throw new U._g("eth_getTransactionCount","Invalid address, expected a 20 bytes address string.",{params:e});return await Promise.resolve(M.pU.of(M.fL.randomBytes(6)).toString())},l3=async e=>{if(2!==e.length||"string"!=typeof e[0]||!M.pI.isValid(e[0])||"string"!=typeof e[1])throw new U._g("eth_getUncleByBlockHashAndIndex",'Invalid input params for "eth_getUncleByBlockHashAndIndex" method. See https://docs.infura.io/api/networks/ethereum/json-rpc-methods/eth_getunclebyblockhashandindex for details.',{params:e});return await Promise.resolve(null)},l4=async e=>{if(2!==e.length||"string"!=typeof e[0]||"string"!=typeof e[1])throw new U._g("eth_getUncleByBlockNumberAndIndex",'Invalid input params for "eth_getUncleByBlockNumberAndIndex" method. See https://docs.infura.io/api/networks/ethereum/json-rpc-methods/eth_getunclebyblocknumberandindex for details.',{params:e});return await Promise.resolve(null)},l8=async e=>{if(1!==e.length||"string"!=typeof e[0]||!M.pI.isValid(e[0]))throw new U._g("eth_getUncleCountByBlockHash",`Invalid input params for "eth_getUncleCountByBlockHash" method. See ${aT} for details.`,{params:e});return await Promise.resolve(0)},l5=async e=>{if(1!==e.length||"string"!=typeof e[0])throw new U._g("eth_getUncleCountByBlockNumber",`Invalid input params for "eth_getUncleCountByBlockNumber" method. See ${aT} for details.`,{params:e});return await Promise.resolve(0)},l6=async(e,t,r)=>{try{if(!await e.forkDetector.detectGalactica())throw new U.DT("eth_maxPriorityFeePerGas",'Method "eth_maxPriorityFeePerGas" is not available before Galactica hardfork.',{url:e.httpClient.baseURL});return await e.gas.getMaxPriorityFeePerGas()}catch(t){throw t instanceof U.oV||t instanceof U.DT?t:new U.oV("eth_maxPriorityFeePerGas()",'Method "eth_maxPriorityFeePerGas" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},l7=async e=>{let t=await lM(e);if(0===t.length)throw new U._g("eth_requestAccounts()",'Method "eth_requestAccounts" failed.',{provider:(0,U.WO)(e)});return t},l9=async(e,t)=>{if(1!==t.length||"string"!=typeof t[0])throw new U._g("eth_sendRawTransaction()",`Invalid input params for "eth_sendRawTransaction" method. See ${aT} for details.`,{params:t});if(!M.pU.isValid0x(t[0]))throw new U._g("eth_sendRawTransaction()","Invalid transaction encoded data given as input. Input must be a hex string.",{params:t});try{let[r]=t;return(await e.transactions.sendRawTransaction(r)).id}catch(r){throw new U.oV("eth_sendRawTransaction()",'Method "eth_sendRawTransaction" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL},r)}},ce=async(e,t,r)=>{if(void 0===t||1!==t.length||"object"!=typeof t[0])throw new U._g("eth_sendTransaction",`Invalid input params for "eth_sendTransaction" method. See ${aT} for details.`,{params:t});if(r?.wallet===void 0)throw new U._g("eth_sendTransaction","Provider must be defined with a wallet. Ensure that the provider is defined and connected to the network.",{provider:r});if(void 0===t[0].from)throw new U._g("eth_sendTransaction","From field is required in the transaction object.",{provider:r});void 0===t[0].value&&(t[0].value="0x0");let[i]=t,n=await lS(e);if(null!=i.chainId&&i.chainId!==n)throw new U._g("eth_sendTransaction",`ChainId in the transaction object does not match the chainId of the network. Expected: ${n}, Received: ${i.chainId}`,{chainId:i.chainId});try{return await (await r.getSigner(i.from)).sendTransaction(i)}catch(r){throw new U.oV("eth_sendTransaction()",'Method "eth_sendTransaction" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL},r)}},ct=async(e,t,r)=>{if(1!==t.length||"object"!=typeof t[0])throw new U._g("eth_signTransaction",`Invalid input params for "eth_signTransaction" method. See ${aT} for details.`,{params:t});if(r?.wallet===void 0)throw new U._g("eth_signTransaction","Provider must be defined with a wallet. Ensure that the provider is defined and connected to the network.",{provider:r});if(void 0===t[0].from)throw new U._g("eth_signTransaction","From field is required in the transaction object.",{provider:r});let[i]=t;try{return await (await r.getSigner(i.from)).signTransaction(i)}catch(r){throw new U.oV("eth_signTransaction()",'Method "eth_signTransaction" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL},r)}},cr=async(e,t,r)=>{if(2!==t.length||"string"!=typeof t[0]||!M.kL.isValid(t[0])||"object"!=typeof t[1]&&"string"!=typeof t[1])throw new U._g("eth_signTypedDataV4",'Invalid input params for "eth_signTypedDataV4" method. See https://docs.metamask.io/wallet/reference/eth_signtypeddata_v4/ for details.',{params:t});if(r?.wallet===void 0||await r.getSigner(t[0])===null)throw new U._g("eth_signTypedDataV4",`Provider must be defined with a wallet. Ensure that the provider is defined, connected to the network and has the wallet with the address ${t[0]} into it.`,{provider:r});let[i]=t,n;if("string"==typeof t[1])try{n=JSON.parse(t[1])}catch(e){throw new U._g("eth_signTypedData_v4","Invalid JSON string for typed data parameter",{params:t},e)}else n=t[1];try{return await (await r.getSigner(i)).signTypedData(n.domain,n.types,n.message,n.primaryType)}catch(r){throw new U.oV("eth_signTypedDataV4",'Method "eth_signTypedDataV4" failed.',{params:(0,U.WO)(t),url:e.httpClient.baseURL},r)}},ci=async(e,t,r)=>{if(void 0===r)throw new U.oV("eth_subscribe()",'Method "eth_subscribe" failed. Provider is not defined.',{url:e.httpClient.baseURL,params:(0,U.WO)(t)});if("newHeads"!==t[0]&&"logs"!==t[0])throw new U._g("eth_subscribe()",'Method "eth_subscribe" failed. Invalid subscription type param.',{url:e.httpClient.baseURL,params:(0,U.WO)(t)});if(void 0===r.getPollInstance()){let i=await e.blocks.getBestBlockCompressed();if(null!=i)r.subscriptionManager.currentBlockNumber=i.number;else throw new U.ND("eth_subscribe()",'Method "eth_subscribe" failed. Best block not available.',{url:e.httpClient.baseURL,params:(0,U.WO)(t)});r.startSubscriptionsPolling()}let i=M.pU.random(16).digits;return t.includes("newHeads")&&(r.subscriptionManager.newHeadsSubscription={subscriptionId:i,subscription:{type:"newHeads"}}),t.includes("logs")&&r.subscriptionManager.logSubscriptions.set(i,{type:"logs",options:t[1]}),i},cn=e=>Math.floor(Date.now()/1e3)-e.timestamp<11e3,cs=async e=>{try{let t=await e.blocks.getBestBlockCompressed(),r=await e.blocks.getGenesisBlock(),i=null!==r?M.de.of(Math.floor((Date.now()-r.timestamp)/1e4)).toString():null;if(null!==t){if(cn(t))return!1;let r=await l_(e);return{currentBlock:ly.formatToRPCStandard(t,r),highestBlock:i,startingBlock:null}}return{currentBlock:null,highestBlock:i,startingBlock:null}}catch(t){throw new U.oV("eth_syncing()",'Method "eth_syncing" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},co=async(e,t)=>{let r=!1;if(void 0===t)throw new U.oV("eth_unsubscribe()",'Method "eth_unsubscribe" failed. Provider is not defined.',{params:(0,U.WO)(e)});let i=e[0];return void 0!==t.subscriptionManager.newHeadsSubscription&&i===t.subscriptionManager.newHeadsSubscription.subscriptionId?(t.subscriptionManager.newHeadsSubscription=void 0,r=!0):r=t.subscriptionManager.logSubscriptions.delete(i),t.isThereActiveSubscriptions()||t.stopSubscriptionsPolling(),await Promise.resolve(r)},ca=async e=>{try{let t=await e.blocks.getBestBlockCompressed();if(null===t)throw new U.oV("evm_mine()",'Method "evm_mine" failed. No best block found.',{url:e.httpClient.baseURL});return await aN.SyncPoll(()=>e.blocks.getHeadBlock()).waitUntil(e=>e!==t),null}catch(t){throw t instanceof U.oV?t:new U.oV("evm_mine()",'Method "evm_mine" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},cl=async e=>{try{return await e.nodes.isHealthy()}catch(t){throw new U.oV("net_listening()",'Method "net_listening" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},cc=async e=>{try{return(await e.nodes.getNodes()).length}catch(t){throw new U.oV("net_peerCount()",'Method "net_peerCount" failed.',{url:e.httpClient.baseURL,innerError:(0,U.WO)(t)})}},cu=async e=>await l_(e),ch=async()=>await Promise.resolve({}),cd=async e=>{if(1!==e.length||"string"!=typeof e[0]||!M.kL.isValid(e[0]))throw new U._g("txpool_contentFrom()",'Invalid input params for "txpool_contentFrom" method. See https://www.quicknode.com/docs/ethereum/txpool_contentFrom for details.',{params:e});return await Promise.resolve({})},cf=async()=>await Promise.resolve({}),cp=async()=>await Promise.resolve({}),cg=async()=>await Promise.resolve("thor"),cy=async e=>{if(1!==e.length||"string"!=typeof e[0]||!M.pU.isValid(e[0]))throw new U._g("web3_sha3","Invalid input params for \"web3_sha3\" method. See 'https://docs.alchemy.com/reference/web3-sha3' for details.",{params:e});return await Promise.resolve(M.GN.of(e[0]).toString())},cm=(e,t)=>({eth_blockNumber:async()=>await lF(e),eth_chainId:async()=>await l_(e),eth_getBalance:async t=>await lz(e,t),eth_getCode:async t=>await lW(e,t),eth_getStorageAt:async t=>await lZ(e,t),eth_estimateGas:async t=>await lj(e,t),eth_call:async t=>await l$(e,t),eth_sendRawTransaction:async t=>await l9(e,t),eth_getLogs:async t=>await lJ(e,t),eth_getBlockByHash:async t=>await lk(e,t),eth_getBlockByNumber:async t=>await lB(e,t),eth_accounts:async()=>await lM(t),eth_gasPrice:async()=>await lV(e),eth_getTransactionByHash:async t=>await lX(e,t),eth_getTransactionCount:async e=>await l2(e),eth_getTransactionReceipt:async t=>await lN(e,t),eth_sendTransaction:async r=>await ce(e,r,t),eth_syncing:async()=>await cs(e),net_version:async()=>await cu(e),web3_clientVersion:async()=>await cg(),eth_subscribe:async r=>await ci(e,r,t),eth_unsubscribe:async e=>await co(e,t),debug_traceTransaction:async t=>await lO(e,t),debug_traceCall:async t=>await lD(e,t),evm_increaseTime:async()=>await ca(e),evm_mine:async()=>await ca(e),eth_getBlockTransactionCountByHash:async t=>await lq(e,t),eth_getBlockTransactionCountByNumber:async t=>await lK(e,t),eth_getTransactionByBlockHashAndIndex:async t=>await l0(e,t),eth_getTransactionByBlockNumberAndIndex:async t=>await l1(e,t),eth_getUncleByBlockHashAndIndex:async e=>await l3(e),eth_getUncleByBlockNumberAndIndex:async e=>await l4(e),eth_getUncleCountByBlockHash:async e=>await l8(e),eth_getUncleCountByBlockNumber:async e=>await l5(e),eth_requestAccounts:async()=>await l7(t),net_listening:async()=>await cl(e),net_peerCount:async()=>await cc(e),eth_getBlockReceipts:async t=>await lG(e,t),eth_signTransaction:async r=>await ct(e,r,t),web3_sha3:async e=>await cy(e),txpool_inspect:async()=>await cf(),txpool_content:async()=>await ch(),txpool_contentFrom:async e=>await cd(e),txpool_status:async()=>await cp(),debug_traceBlockByHash:async t=>await lC(e,t),debug_traceBlockByNumber:async t=>await lR(e,t),eth_signTypedData_v4:async r=>await cr(e,r,t),eth_maxPriorityFeePerGas:async t=>await l6(e),eth_feeHistory:async t=>await lH(e,t)}),cb=class extends F.EventEmitter{constructor(e,t,r=!1){super(),this.thorClient=e,this.wallet=t,this.enableDelegation=r}subscriptionManager={logSubscriptions:new Map,currentBlockNumber:0};pollInstance;destroy(){this.thorClient.destroy(),void 0!==this.pollInstance&&(this.pollInstance.stopListen(),this.pollInstance=void 0)}async request(e){if(!Object.values(ap).map(e=>e.toString()).includes(e.method))throw new U.HT("VeChainProvider.request()","Method not found",{code:-32601,message:"Method not found"});let t=cm(this.thorClient,this);if(!(e.method in t))throw new U.DT(e.method,"Method not implemented",{code:-32004,message:"Method not supported"});return await t[e.method](e.params)}startSubscriptionsPolling(){let e=!1;return void 0===this.pollInstance&&(this.pollInstance=aN.createEventPoll(async()=>{let e=[],t=await this.getCurrentBlock();if(null!==t){if(void 0!==this.subscriptionManager.newHeadsSubscription&&e.push({method:"eth_subscription",params:{subscription:this.subscriptionManager.newHeadsSubscription.subscriptionId,result:t}}),this.subscriptionManager.logSubscriptions.size>0){let t=await this.getLogsRPC();e.push(...t)}this.subscriptionManager.currentBlockNumber++}return e},5e3).onData(e=>{e.forEach(e=>{this.emit("message",e)})}),this.pollInstance.startListen(),e=!0),e}stopSubscriptionsPolling(){let e=!1;return void 0!==this.pollInstance&&(this.pollInstance.stopListen(),this.pollInstance=void 0,e=!0),e}isThereActiveSubscriptions(){return this.subscriptionManager.logSubscriptions.size>0||void 0!==this.subscriptionManager.newHeadsSubscription}getPollInstance(){return this.pollInstance}async getLogsRPC(){let e=Array.from(this.subscriptionManager.logSubscriptions.entries()).map(async([e,t])=>{let r=M.de.of(this.subscriptionManager.currentBlockNumber).toString(),i={address:t.options?.address,fromBlock:r,toBlock:r,topics:t.options?.topics};return{method:"eth_subscription",params:{subscription:e,result:await lJ(this.thorClient,[i])}}});return(await Promise.all(e)).filter(e=>e.params.result.length>0)}async getCurrentBlock(){let e=null;if(this.isThereActiveSubscriptions()){let t=await this.thorClient.blocks.getBlockCompressed(this.subscriptionManager.currentBlockNumber);null!=t&&(e=t)}return e}async getSigner(e){return void 0===this.wallet?null:await this.wallet?.getSigner(this,e)}async resolveName(e){return await aD.resolveName(this.thorClient,e)}async lookupAddress(e){return await aD.lookupAddress(this.thorClient,e)}},cw=class extends cb{debug;buildHardhatErrorFunctionCallback;rpcConfiguration;constructor(e,t,r,i=!1,n=!1,s={ethGetTransactionCountMustReturn0:!1}){super(new a7(new ad(t)),e,n),this.debug=i,this.rpcConfiguration=s,this.buildHardhatErrorFunctionCallback=r}async send(e,t){return await this.request({method:e,params:t})}async sendAsync(e,t){try{let r=await this.request({method:e.method,params:e.params});t(null,{id:e.id,jsonrpc:"2.0",result:r})}catch(r){t(r,{id:e.id,jsonrpc:"2.0"})}}async request(e){let t=this.rpcConfiguration.ethGetTransactionCountMustReturn0&&"eth_getTransactionCount"===e.method;try{if(this.debug){let t=await this.wallet.getAddresses(),r=await this.wallet.getGasPayer();(0,ac.t)("log").log({title:`Sending request - ${e.method}`,messages:[`params: ${(0,U.WO)(e.params)}`,`accounts: ${(0,U.WO)(t)}`,`gasPayer: ${(0,U.WO)(r)}`,`url: ${this.thorClient.httpClient.baseURL}`]})}let r=t?"0x0":await super.request({method:e.method,params:e.params});return this.debug&&(0,ac.t)("log").log({title:`Get request - ${e.method} result`,messages:[`result: ${(0,U.WO)(r)}`]}),r}catch(t){if(this.debug&&(0,ac.t)("error").log(new U.oV(e.method,`Error on request - ${e.method}`,{args:e})),t instanceof U.qJ)throw"eth_call"===e.method?this.buildHardhatErrorFunctionCallback("revert",t):this.buildHardhatErrorFunctionCallback(`Error on request ${e.method}: ${t.innerError}`,t)}}},cv=r(9233),cE=r(8003),cA=r(3743);class cx{}class cI extends cx{constructor(e){super()}}let cT=cA.FIVE_SECONDS,c_={pulse:"heartbeat_pulse"};class cS extends cI{constructor(e){super(e),this.events=new F.EventEmitter,this.interval=cT,this.interval=e?.interval||cT}static async init(e){let t=new cS(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,cA.toMiliseconds)(this.interval))}pulse(){this.events.emit(c_.pulse)}}let cP=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,cN=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,cO=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ck(e,t){if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`);return}return t}function cC(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);let r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!cO.test(e)){if(t.strict)throw SyntaxError("[destr] Invalid JSON");return e}try{if(cP.test(e)||cN.test(e)){if(t.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(e,ck)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}var cB=r(6593).lW;function cR(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function cD(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return cD(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}let cL="base64:";function cU(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function cM(e){return(e=cU(e))?e+":":""}let cF=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function c$(e,t,r){return e.watch?e.watch((e,i)=>t(e,r+i)):()=>{}}async function cj(e){"function"==typeof e.dispose&&await cR(e.dispose)}function cH(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function cV(e,t){let r;let i=()=>{if(r)return r;let i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),(r=cH(i)).then(e=>{e.onclose=()=>r=void 0},()=>{}),r};return(e,r)=>i().then(i=>r(i.transaction(t,e).objectStore(t)))}function cz(){return b||(b=cV("keyval-store","keyval")),b}function cG(e,t=cz()){return t("readonly",t=>cH(t.get(e)))}let cq=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),cK=e=>JSON.parse(e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t);function cW(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return cK(e)}catch(t){return e}}function cQ(e){return"string"==typeof e?e:cq(e)||""}var cY=(e={})=>{let t;let r=e.base&&e.base.length>0?`${e.base}:`:"",i=e=>r+e;return e.dbName&&e.storeName&&(t=cV(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await cG(i(e),t)>"u"),getItem:async e=>await cG(i(e),t)??null,setItem:(e,r)=>(function(e,t,r=cz()){return r("readwrite",r=>(r.put(t,e),cH(r.transaction)))})(i(e),r,t),removeItem:e=>(function(e,t=cz()){return t("readwrite",t=>(t.delete(e),cH(t.transaction)))})(i(e),t),getKeys:()=>(function(e=cz()){return e("readonly",e=>{var t;if(e.getAllKeys)return cH(e.getAllKeys());let r=[];return(t=e=>r.push(e.key),e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},cH(e.transaction)).then(()=>r)})})(t),clear:()=>(function(e=cz()){return e("readwrite",e=>(e.clear(),cH(e.transaction)))})(t)}};class cJ{constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||cF()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),n=(e,r)=>{if(t.watching)for(let i of(r=cU(r),t.watchListeners))i(e,r)},s=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await c$(t.mounts[e],n,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,i)=>{let n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(let i of e){let e="string"==typeof i,n=cU(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},l=r(n);s(l).items.push({key:n,value:o,relativeKey:l.relativeKey,options:a})}return Promise.all([...n.values()].map(e=>i(e))).then(e=>e.flat())},l={hasItem(e,t={}){let{relativeKey:i,driver:n}=r(e=cU(e));return cR(n.hasItem,i,t)},getItem(e,t={}){let{relativeKey:i,driver:n}=r(e=cU(e));return cR(n.getItem,i,t).then(e=>cC(e))},getItems:(e,t={})=>a(e,t,e=>e.driver.getItems?cR(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return cU(e.join(":"))}(e.base,t.key),value:cC(t.value)}))):Promise.all(e.items.map(t=>cR(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:cC(e)}))))),getItemRaw(e,t={}){let{relativeKey:i,driver:n}=r(e=cU(e));return n.getItemRaw?cR(n.getItemRaw,i,t):cR(n.getItem,i,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(cL)?(t=e.slice(cL.length),globalThis.Buffer?cB.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t,i={}){if(void 0===t)return l.removeItem(e);let{relativeKey:s,driver:o}=r(e=cU(e));o.setItem&&(await cR(o.setItem,s,cD(t),i),o.watch||n("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return cR(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:cD(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>cR(e.driver.setItem,t.relativeKey,cD(t.value),t.options)))})},async setItemRaw(e,t,i={}){if(void 0===t)return l.removeItem(e,i);let{relativeKey:s,driver:o}=r(e=cU(e));if(o.setItemRaw)await cR(o.setItemRaw,s,t,i);else{if(!o.setItem)return;await cR(o.setItem,s,"string"==typeof t?t:cL+(globalThis.Buffer?cB.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:i,driver:s}=r(e=cU(e));s.removeItem&&(await cR(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await cR(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:n}=r(e=cU(e)),s=Object.create(null);if(n.getMeta&&Object.assign(s,await cR(n.getMeta,i,t)),!t.nativeOnly){let e=await cR(n.getItem,i+"$",t).then(e=>cC(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=i(e=cM(e),!0),n=[],s=[],o=!0;for(let e of r){for(let r of(e.driver.flags?.maxDepth||(o=!1),await cR(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+cU(r);n.some(e=>t.startsWith(e))||s.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}let a=void 0!==t.maxDepth&&!o;return s.filter(r=>{var i;return(!a||function(e,t){if(void 0===t)return!0;let r=0,i=e.indexOf(":");for(;i>-1;)r++,i=e.indexOf(":",i+1);return r<=t}(r,t.maxDepth))&&((i=e)?r.startsWith(i)&&"$"!==r[r.length-1]:"$"!==r[r.length-1])})},async clear(e,t={}){e=cM(e),await Promise.all(i(e,!1).map(async e=>e.driver.clear?cR(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>cj(e)))},watch:async e=>(await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=cM(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(c$(r,n,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),l},async unmount(e,r=!0){(e=cM(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await cj(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=cU(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>i(e=cU(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>l.getKeys(e,t),get:(e,t={})=>l.getItem(e,t),set:(e,t,r={})=>l.setItem(e,t,r),has:(e,t={})=>l.hasItem(e,t),del:(e,t={})=>l.removeItem(e,t),remove:(e,t={})=>l.removeItem(e,t)};return l}({driver:cY({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,cQ(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var cZ="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},cX={exports:{}};function c0(e){var t;return[e[0],cW(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof cZ&&cZ.localStorage?cX.exports=cZ.localStorage:"u">typeof window&&window.localStorage?cX.exports=window.localStorage:cX.exports=new e}();class c1{constructor(){this.localStorage=cX.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(c0)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return cW(t)}async setItem(e,t){this.localStorage.setItem(e,cQ(t))}async removeItem(e){this.localStorage.removeItem(e)}}let c2=async(e,t,r)=>{let i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1){r(t);return}let s=await e.getKeys();if(!s.length){r(t);return}let o=[];for(;s.length;){let r=s.shift();if(!r)continue;let i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){let i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),c3(e,o)},c3=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class c4{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new c1;this.storage=e;try{let t=new cJ;c2(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var c8=r(8757),c5=r.n(c8);let c6={level:"info"},c7="custom_context";class c9{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class ue{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new c9(e);if(t.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=t):this.head=t,this.tail=t,this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}}class ut{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=c8.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new ue(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===c8.levels.values.error?console.error(e):t===c8.levels.values.warn?console.warn(e):t===c8.levels.values.debug?console.debug(e):t===c8.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(cQ({timestamp:new Date().toISOString(),log:e}));let t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new ue(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push(cQ({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class ur{constructor(e,t=1024e3){this.baseChunkLogger=new ut(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class ui{constructor(e,t=1024e3){this.baseChunkLogger=new ut(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var un=Object.defineProperty,us=Object.defineProperties,uo=Object.getOwnPropertyDescriptors,ua=Object.getOwnPropertySymbols,ul=Object.prototype.hasOwnProperty,uc=Object.prototype.propertyIsEnumerable,uu=(e,t,r)=>t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uh=(e,t)=>{for(var r in t||(t={}))ul.call(t,r)&&uu(e,r,t[r]);if(ua)for(var r of ua(t))uc.call(t,r)&&uu(e,r,t[r]);return e},ud=(e,t)=>us(e,uo(t));function uf(e){return ud(uh({},e),{level:e?.level||c6.level})}function up(e,t=c7){return typeof e.bindings>"u"?function(e,t=c7){return e[t]||""}(e,t):e.bindings().context||""}function ug(e,t,r=c7){let i=function(e,t,r=c7){let i=up(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=c7){return e[r]=t,e}(e.child({context:i}),i,r)}var uy=Object.defineProperty,um=(e,t,r)=>t in e?uy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ub=(e,t,r)=>um(e,"symbol"!=typeof t?t+"":t,r);class uw extends cx{constructor(e){super(),this.opts=e,ub(this,"protocol","wc"),ub(this,"version",2)}}var uv=Object.defineProperty,uE=(e,t,r)=>t in e?uv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uA=(e,t,r)=>uE(e,"symbol"!=typeof t?t+"":t,r);class ux extends cx{constructor(e,t){super(),this.core=e,this.logger=t,uA(this,"records",new Map)}}class uI{constructor(e,t){this.logger=e,this.core=t}}class uT extends cx{constructor(e,t){super(),this.relayer=e,this.logger=t}}class u_ extends cx{constructor(e){super()}}class uS{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class uP extends cx{constructor(e,t){super(),this.relayer=e,this.logger=t}}class uN extends cx{constructor(e,t){super(),this.core=e,this.logger=t}}class uO{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class uk{constructor(e,t){this.projectId=e,this.logger=t}}class uC{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var uB=Object.defineProperty,uR=(e,t,r)=>t in e?uB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uD=(e,t,r)=>uR(e,"symbol"!=typeof t?t+"":t,r);class uL{constructor(e){this.opts=e,uD(this,"protocol","wc"),uD(this,"version",2)}}class uU{constructor(e){this.client=e}}function uM(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function uF(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let u$="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,uj=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uH(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),uM(e),e}class uV{clone(){return this._cloneInto()}}function uz(e=32){if(u$&&"function"==typeof u$.getRandomValues)return u$.getRandomValues(new Uint8Array(e));if(u$&&"function"==typeof u$.randomBytes)return u$.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}class uG extends uV{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=uj(this.buffer)}update(e){uF(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=uH(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=uj(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){uF(this),function(e,t){uM(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=uj(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let uq=BigInt(4294967296-1),uK=BigInt(32);function uW(e,t=!1){return t?{h:Number(e&uq),l:Number(e>>uK&uq)}:{h:0|Number(e>>uK&uq),l:0|Number(e&uq)}}let uQ={fromBig:uW,split:function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=uW(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]},toBig:(e,t)=>BigInt(e>>>0)<<uK|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)},[uY,uJ]=uQ.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),uZ=new Uint32Array(80),uX=new Uint32Array(80);class u0 extends uG{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)uZ[r]=e.getUint32(t),uX[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|uZ[e-15],r=0|uX[e-15],i=uQ.rotrSH(t,r,1)^uQ.rotrSH(t,r,8)^uQ.shrSH(t,r,7),n=uQ.rotrSL(t,r,1)^uQ.rotrSL(t,r,8)^uQ.shrSL(t,r,7),s=0|uZ[e-2],o=0|uX[e-2],a=uQ.rotrSH(s,o,19)^uQ.rotrBH(s,o,61)^uQ.shrSH(s,o,6),l=uQ.rotrSL(s,o,19)^uQ.rotrBL(s,o,61)^uQ.shrSL(s,o,6),c=uQ.add4L(n,l,uX[e-7],uX[e-16]),u=uQ.add4H(c,i,a,uZ[e-7],uZ[e-16]);uZ[e]=0|u,uX[e]=0|c}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){let t=uQ.rotrSH(u,h,14)^uQ.rotrSH(u,h,18)^uQ.rotrBH(u,h,41),b=uQ.rotrSL(u,h,14)^uQ.rotrSL(u,h,18)^uQ.rotrBL(u,h,41),w=u&d^~u&p,v=h&f^~h&g,E=uQ.add5L(m,b,v,uJ[e],uX[e]),A=uQ.add5H(E,y,t,w,uY[e],uZ[e]),x=0|E,I=uQ.rotrSH(r,i,28)^uQ.rotrBH(r,i,34)^uQ.rotrBH(r,i,39),T=uQ.rotrSL(r,i,28)^uQ.rotrBL(r,i,34)^uQ.rotrBL(r,i,39),_=r&n^r&o^n&o,S=i&s^i&a^s&a;y=0|p,m=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=uQ.add(0|l,0|c,0|A,0|x)),l=0|o,c=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let P=uQ.add3L(x,T,S);r=uQ.add3H(P,A,I,_),i=0|P}({h:r,l:i}=uQ.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=uQ.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=uQ.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=uQ.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=uQ.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=uQ.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=uQ.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=uQ.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(r,i,n,s,o,a,l,c,u,h,d,f,p,g,y,m)}roundClean(){uZ.fill(0),uX.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let u1=function(e){let t=t=>e().update(uH(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new u0),u2=BigInt(0),u3=BigInt(1),u4=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function u8(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function u5(e){if(!u8(e))throw Error("Uint8Array expected")}function u6(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let u7=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function u9(e){u5(e);let t="";for(let r=0;r<e.length;r++)t+=u7[e[r]];return t}function he(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?u2:BigInt("0x"+e)}let ht={_0:48,_9:57,A:65,F:70,a:97,f:102};function hr(e){return e>=ht._0&&e<=ht._9?e-ht._0:e>=ht.A&&e<=ht.F?e-(ht.A-10):e>=ht.a&&e<=ht.f?e-(ht.a-10):void 0}function hi(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=hr(e.charCodeAt(n)),s=hr(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function hn(e){return u5(e),he(u9(Uint8Array.from(e).reverse()))}function hs(e,t){return hi(e.toString(16).padStart(2*t,"0"))}function ho(e,t){return hs(e,t).reverse()}function ha(e,t,r){let i;if("string"==typeof t)try{i=hi(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(u8(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function hl(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];u5(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let hc=e=>"bigint"==typeof e&&u2<=e;function hu(e,t,r,i){if(!(hc(t)&&hc(r)&&hc(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}let hh=e=>(u4<<BigInt(e-1))-u3,hd={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||u8(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function hf(e,t,r={}){let i=(t,r,i)=>{let n=hd[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function hp(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}let hg=BigInt(0),hy=BigInt(1),hm=BigInt(2),hb=BigInt(3),hw=BigInt(4),hv=BigInt(5),hE=BigInt(8);function hA(e,t){let r=e%t;return r>=hg?r:t+r}function hx(e,t,r){let i=e;for(;t-- >hg;)i*=i,i%=r;return i}function hI(e,t){if(e===hg)throw Error("invert: expected non-zero number");if(t<=hg)throw Error("invert: expected positive modulus, got "+t);let r=hA(e,t),i=t,n=hg,s=hy;for(;r!==hg;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==hy)throw Error("invert: does not exist");return hA(n,t)}let hT=(e,t)=>(hA(e,t)&hy)===hy,h_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hS(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function hP(e,t,r=!1,i={}){let n;if(e<=hg)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=hS(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:hh(s),ZERO:hg,ONE:hy,create:t=>hA(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return hg<=t&&t<e},is0:e=>e===hg,isOdd:e=>(e&hy)===hy,neg:t=>hA(-t,e),eql:(e,t)=>e===t,sqr:t=>hA(t*t,e),add:(t,r)=>hA(t+r,e),sub:(t,r)=>hA(t-r,e),mul:(t,r)=>hA(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<hg)throw Error("invalid exponent, negatives unsupported");if(r===hg)return e.ONE;if(r===hy)return t;let i=e.ONE,n=t;for(;r>hg;)r&hy&&(i=e.mul(i,n)),n=e.sqr(n),r>>=hy;return i})(a,e,t),div:(t,r)=>hA(t*hI(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>hI(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%hw===hb){let t=(e+hy)/hw;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%hE===hv){let t=(e-hv)/hE;return function(e,r){let i=e.mul(r,hm),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,hm),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-hy)/hm;for(t=e-hy,r=0;t%hm===hg;t/=hm,r++);for(i=hm;i<e&&function(e,t,r){if(t<hg)throw Error("invalid exponent, negatives unsupported");if(r<=hg)throw Error("invalid modulus");if(r===hy)return hg;let i=hy;for(;t>hg;)t&hy&&(i=i*e%r),e=e*e%r,t>>=hy;return i}(i,n,e)!==e-hy;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+hy)/hw;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+hy)/hm;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,hy<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?ho(e,o):hs(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?hn(e):he(u9(e))}});return Object.freeze(a)}let hN=BigInt(0),hO=BigInt(1);function hk(e,t){let r=t.negate();return e?r:t}function hC(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function hB(e,t){return hC(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let hR=new WeakMap,hD=new WeakMap;function hL(e){return hD.get(e)||1}let hU=BigInt(0),hM=BigInt(1),hF=BigInt(2),h$=BigInt(8),hj={zip215:!0};BigInt(0),BigInt(1);let hH=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),hV=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);let hz=BigInt(1),hG=BigInt(2);BigInt(3);let hq=BigInt(5),hK=BigInt(8),hW=hP(hH,void 0,!0),hQ=function(e){var t;let r=function(e){let t=(hf(e.Fp,h_.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),hf(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...hS(e.n,e.nBitLength),...e,p:e.Fp.ORDER}));return hf(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:i,n:n,prehash:s,hash:o,randomBytes:a,nByteLength:l,h:c}=r,u=hF<<BigInt(8*l)-hM,h=i.create,d=hP(r.n,r.nBitLength),f=r.uvRatio||((e,t)=>{try{return{isValid:!0,value:i.sqrt(e*i.inv(t))}}catch{return{isValid:!1,value:hU}}}),p=r.adjustScalarBytes||(e=>e),g=r.domain||((e,t,r)=>{if(u6("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function y(e,t){hu("coordinate "+e,t,hU,u)}function m(e){if(!(e instanceof v))throw Error("ExtendedPoint expected")}let b=hp((e,t)=>{let{ex:r,ey:n,ez:s}=e,o=e.is0();null==t&&(t=o?h$:i.inv(s));let a=h(r*t),l=h(n*t),c=h(s*t);if(o)return{x:hU,y:hM};if(c!==hM)throw Error("invZ was invalid");return{x:a,y:l}}),w=hp(e=>{let{a:t,d:i}=r;if(e.is0())throw Error("bad point: ZERO");let{ex:n,ey:s,ez:o,et:a}=e,l=h(n*n),c=h(s*s),u=h(o*o),d=h(u*u),f=h(l*t);if(h(u*h(f+c))!==h(d+h(i*h(l*c))))throw Error("bad point: equation left != right (1)");if(h(n*s)!==h(o*a))throw Error("bad point: equation left != right (2)");return!0});class v{constructor(e,t,r,i){this.ex=e,this.ey=t,this.ez=r,this.et=i,y("x",e),y("y",t),y("z",r),y("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof v)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return y("x",t),y("y",r),new v(t,r,hM,h(t*r))}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(v.fromAffine)}static msm(e,t){return function(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=function(e){let t;for(t=0;e>u2;e>>=u3,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o,u=n;for(let e=c;e>=0;e-=o){l.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let t=n;for(let e=l.length-1,r=n;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(v,d,e,t)}_setWindowSize(e){x.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){m(e);let{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=e,a=h(t*o),l=h(n*i),c=h(r*o),u=h(s*i);return a===l&&c===u}is0(){return this.equals(v.ZERO)}negate(){return new v(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){let{a:e}=r,{ex:t,ey:i,ez:n}=this,s=h(t*t),o=h(i*i),a=h(hF*h(n*n)),l=h(e*s),c=t+i,u=h(h(c*c)-s-o),d=l+o,f=d-a,p=l-o,g=h(u*f),y=h(d*p),m=h(u*p);return new v(g,y,h(f*d),m)}add(e){m(e);let{a:t,d:i}=r,{ex:n,ey:s,ez:o,et:a}=this,{ex:l,ey:c,ez:u,et:d}=e;if(t===BigInt(-1)){let e=h((s-n)*(c+l)),t=h((s+n)*(c-l)),r=h(t-e);if(r===hU)return this.double();let i=h(o*hF*d),f=h(a*hF*u),p=f+i,g=t+e,y=f-i,m=h(p*r),b=h(g*y),w=h(p*y);return new v(m,b,h(r*g),w)}let f=h(n*l),p=h(s*c),g=h(a*i*d),y=h(o*u),b=h((n+s)*(l+c)-f-p),w=y-g,E=y+g,A=h(p-t*f),x=h(b*w),I=h(E*A),T=h(b*A);return new v(x,I,h(w*E),T)}subtract(e){return this.add(e.negate())}wNAF(e){return x.wNAFCached(this,e,v.normalizeZ)}multiply(e){hu("scalar",e,hM,n);let{p:t,f:r}=this.wNAF(e);return v.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=v.ZERO){return hu("scalar",e,hU,n),e===hU?A:this.is0()||e===hM?this:x.wNAFCachedUnsafe(this,e,v.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return x.unsafeLadder(this,n).is0()}toAffine(e){return b(this,e)}clearCofactor(){let{h:e}=r;return e===hM?this:this.multiplyUnsafe(e)}static fromHex(e,t=!1){let{d:n,a:s}=r,o=i.BYTES;e=ha("pointHex",e,o),u6("zip215",t);let a=e.slice(),l=e[o-1];a[o-1]=-129&l;let c=hn(a);hu("pointHex.y",c,hU,t?u:i.ORDER);let d=h(c*c),{isValid:p,value:g}=f(h(d-hM),h(n*d-s));if(!p)throw Error("Point.fromHex: invalid y coordinate");let y=(g&hM)===hM,m=(128&l)!=0;if(!t&&g===hU&&m)throw Error("Point.fromHex: x=0 and x_0=1");return m!==y&&(g=h(-g)),v.fromAffine({x:g,y:c})}static fromPrivateKey(e){return I(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=ho(t,i.BYTES);return r[r.length-1]|=e&hM?128:0,r}toHex(){return u9(this.toRawBytes())}}v.BASE=new v(r.Gx,r.Gy,hM,h(r.Gx*r.Gy)),v.ZERO=new v(hU,hM,hM,hU);let{BASE:E,ZERO:A}=v,x=(t=8*l,{constTimeNegate:hk,hasPrecomputes:e=>1!==hL(e),unsafeLadder(e,t,r=v.ZERO){let i=e;for(;t>hN;)t&hO&&(r=r.add(i)),i=i.double(),t>>=hO;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=hB(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=hB(e,t),o=v.ZERO,a=v.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&l);i>>=u,n>s&&(n-=c,i+=hO);let h=t+Math.abs(n)-1,d=e%2!=0,f=n<0;0===n?a=a.add(hk(d,r[t])):o=o.add(hk(f,r[h]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=v.ZERO){let{windows:s,windowSize:o}=hB(e,t),a=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===hN)break;let s=Number(i&a);if(i>>=c,s>o&&(s-=l,i+=hO),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),n=n.add(u)}return n},getPrecomputes(e,t,r){let i=hR.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&hR.set(t,r(i))),i},wNAFCached(e,t,r){let i=hL(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=hL(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){hC(r,t),hD.set(e,r),hR.delete(e)}});function I(e){let t=i.BYTES;e=ha("private key",e,t);let r=ha("hashed private key",o(e),2*t),s=p(r.slice(0,t)),a=r.slice(t,2*t),l=hA(hn(s),n),c=E.multiply(l),u=c.toRawBytes();return{head:s,prefix:a,scalar:l,point:c,pointBytes:u}}function T(e=new Uint8Array,...t){return hA(hn(o(g(hl(...t),ha("context",e),!!s))),n)}return E._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return I(e).pointBytes},sign:function(e,t,r={}){e=ha("message",e),s&&(e=s(e));let{prefix:o,scalar:a,pointBytes:l}=I(t),c=T(r.context,o,e),u=E.multiply(c).toRawBytes(),h=hA(c+T(r.context,u,l,e)*a,n);return hu("signature.s",h,hU,n),ha("result",hl(u,ho(h,i.BYTES)),2*i.BYTES)},verify:function(e,t,r,n=hj){let o,a,l;let{context:c,zip215:u}=n,h=i.BYTES;e=ha("signature",e,2*h),t=ha("message",t),r=ha("publicKey",r,h),void 0!==u&&u6("zip215",u),s&&(t=s(t));let d=hn(e.slice(h,2*h));try{o=v.fromHex(r,u),a=v.fromHex(e.slice(0,h),u),l=E.multiplyUnsafe(d)}catch{return!1}if(!u&&o.isSmallOrder())return!1;let f=T(c,a.toRawBytes(),o.toRawBytes(),t);return a.add(o.multiplyUnsafe(f)).subtract(l).clearCofactor().equals(v.ZERO)},ExtendedPoint:v,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>a(i.BYTES),precompute:(e=8,t=v.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:hW,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:hK,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:u1,randomBytes:uz,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=hA(t*t*t,hH),i=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%hH*e%hH,o=hx(s,hG,hH)*s%hH,a=hx(o,hz,hH)*e%hH,l=hx(a,hq,hH)*a%hH,c=hx(l,t,hH)*l%hH,u=hx(c,r,hH)*c%hH,h=hx(u,i,hH)*u%hH,d=hx(h,n,hH)*h%hH,f=hx(d,n,hH)*h%hH,p=hx(f,t,hH)*l%hH;return{pow_p_5_8:hx(p,hG,hH)*e%hH,b2:s}}(e*hA(r*r*t,hH)).pow_p_5_8,n=hA(e*r*i,hH),s=hA(t*n*n,hH),o=n,a=hA(n*hV,hH),l=s===e,c=s===hA(-e,hH),u=s===hA(-e*hV,hH);return l&&(n=o),(c||u)&&(n=a),hT(n,hH)&&(n=hA(-n,hH)),{isValid:l||c,value:n}}}),hY="base64url",hJ="utf8",hZ="utf8",hX="base58btc";function h0(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function h1(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?h0(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function h2(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=h1(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return h0(r)}var h3=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===l;)i++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,c=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,f=o-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*c[f]>>>0,c[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===c[p];)p++;for(var g=l.repeat(r);p<o;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};let h4=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},h8=e=>new TextEncoder().encode(e),h5=e=>new TextDecoder().decode(e);class h6{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class h7{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return de(this,e)}}class h9{constructor(e){this.decoders=e}or(e){return de(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let de=(e,t)=>new h9({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class dt{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new h6(e,t,r),this.decoder=new h7(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let dr=({name:e,prefix:t,encode:r,decode:i})=>new dt(e,t,r,i),di=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=h3(r,t);return dr({prefix:e,name:t,encode:i,decode:e=>h4(n(e))})},dn=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,l=0,c=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);l=l<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw SyntaxError("Unexpected end of data");return o},ds=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},da=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>dr({prefix:t,name:e,encode:e=>ds(e,i,r),decode:t=>dn(t,i,r,e)});var dl=Object.freeze({__proto__:null,identity:dr({prefix:"\x00",name:"identity",encode:e=>h5(e),decode:e=>h8(e)})}),dc=Object.freeze({__proto__:null,base2:da({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),du=Object.freeze({__proto__:null,base8:da({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),dh=Object.freeze({__proto__:null,base10:di({prefix:"9",name:"base10",alphabet:"0123456789"})}),dd=Object.freeze({__proto__:null,base16:da({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:da({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let df=da({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dp=da({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dg=da({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dy=da({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dm=da({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),db=da({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var dw=Object.freeze({__proto__:null,base32:df,base32upper:dp,base32pad:dg,base32padupper:dy,base32hex:dm,base32hexupper:db,base32hexpad:da({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:da({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:da({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),dv=Object.freeze({__proto__:null,base36:di({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:di({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),dE=Object.freeze({__proto__:null,base58btc:di({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:di({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let dA=da({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var dx=Object.freeze({__proto__:null,base64:dA,base64pad:da({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:da({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:da({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let dI=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),dT=dI.reduce((e,t,r)=>(e[r]=t,e),[]),d_=dI.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var dS=Object.freeze({__proto__:null,base256emoji:dr({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=dT[t],"")},decode:function(e){let t=[];for(let r of e){let e=d_[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})}),dP={encode:function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},decode:function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let dN=(e,t,r=0)=>(dP.encode(e,t,r),t),dO=e=>dP.encodingLength(e),dk=(e,t)=>{let r=t.byteLength,i=dO(e),n=i+dO(r),s=new Uint8Array(n+r);return dN(e,s,0),dN(r,s,i),s.set(t,n),new dC(e,r,t,s)};class dC{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let dB=({name:e,code:t,encode:r})=>new dR(e,t,r);class dR{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?dk(this.code,t):t.then(e=>dk(this.code,e))}throw Error("Unknown type, must be binary type")}}let dD=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var dL=Object.freeze({__proto__:null,sha256:dB({name:"sha2-256",code:18,encode:dD("SHA-256")}),sha512:dB({name:"sha2-512",code:19,encode:dD("SHA-512")})}),dU=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:h4,digest:e=>dk(0,h4(e))}});new TextEncoder,new TextDecoder;let dM={...dl,...dc,...du,...dh,...dd,...dw,...dv,...dE,...dx,...dS};function dF(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...dL,...dU});let d$=dF("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),dj=dF("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=h1((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),dH={utf8:d$,"utf-8":d$,hex:dM.base16,latin1:dj,ascii:dj,binary:dj,...dM};function dV(e,t="utf8"){let r=dH[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function dz(e,t="utf8"){let r=dH[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?h0(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function dG(e){return cW(dV(dz(e,hY),hJ))}function dq(e){return dV(dz(cQ(e),hJ),hY)}function dK(e){return["did","key","z"+dV(h2([dz("K36",hX),e]),hX)].join(":")}function dW(e){let t=e.split("."),r=dG(t[0]);return{header:r,payload:dG(t[1]),signature:dz(t[2],hY),data:dz(t.slice(0,2).join("."),hZ)}}function dQ(e=uz(32)){let t=hQ.getPublicKey(e);return{secretKey:h2([e,t]),publicKey:t}}async function dY(e,t,r,i,n=(0,cA.fromMiliseconds)(Date.now())){var s,o;let a={alg:"EdDSA",typ:"JWT"},l={iss:dK(i.publicKey),sub:e,aud:t,iat:n,exp:n+r},c=dz([dq((s={header:a,payload:l}).header),dq(s.payload)].join("."),hZ);return[dq((o={header:a,payload:l,signature:hQ.sign(c,i.secretKey.slice(0,32))}).header),dq(o.payload),dV(o.signature,hY)].join(".")}var dJ=r(9792),dZ=function(e,t,r){if(r||2==arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},dX=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},d0=function(e){this.version=e,this.type="node",this.name="node",this.os=dJ.platform},d1=function(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"},d2=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},d3=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},d4=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d8=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],d5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d6(e){var t=""!==e&&d8.reduce(function(t,r){var i=r[0],n=r[1];if(t)return t;var s=n.exec(e);return!!s&&[i,s]},!1);if(!t)return null;var r=t[0],i=t[1];if("searchbot"===r)return new d2;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<3&&(n=dZ(dZ([],n,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-n.length),!0)):n=[];var s=n.join("."),o=function(e){for(var t=0,r=d5.length;t<r;t++){var i=d5[t],n=i[0];if(i[1].exec(e))return n}return null}(e),a=d4.exec(e);return a&&a[1]?new d1(r,s,o,a[1]):new dX(r,s,o)}var d7=r(5450),d9=r(844);let fe="2.23.2",ft={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${fe}`};class fr extends Error{constructor(e,t={}){let r=t.cause instanceof fr?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof fr&&t.cause.docsPath||t.docsPath,n=ft.getDocsUrl?.({...t,docsPath:i});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...ft.version?[`Version: ${ft.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=fe}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&void 0!==t.cause?e(t.cause,r):r?null:t}(this,e)}}function fi(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class fn extends fr{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function fs(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;let i=e.replace("0x","");if(i.length>2*r)throw new fn({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new fn({size:e.length,targetSize:r,type:"bytes"});let i=new Uint8Array(r);for(let n=0;n<r;n++){let s="right"===t;i[s?n:r-n-1]=e[s?n:e.length-n-1]}return i}(e,{dir:t,size:r})}class fo extends fr{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number "${n}" is not in safe ${i?`${8*i}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class fa extends fr{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function fl(e){return fi(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function fc(e,{size:t}){if(fl(e)>t)throw new fa({givenSize:fl(e),maxSize:t})}function fu(e,t={}){let{signed:r}=t;t.size&&fc(e,{size:t.size});let i=BigInt(e);if(!r)return i;let n=(e.length-2)/2;return i<=(1n<<8n*BigInt(n)-1n)-1n?i:i-BigInt(`0x${"f".padStart(2*n,"f")}`)-1n}let fh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function fd(e,t={}){return"number"==typeof e||"bigint"==typeof e?fp(e,t):"string"==typeof e?function(e,t={}){return ff(fg.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?(fc(r,{size:t.size}),fs(r,{size:t.size})):r}(e,t):ff(e,t)}function ff(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=fh[e[t]];let i=`0x${r}`;return"number"==typeof t.size?(fc(i,{size:t.size}),fs(i,{dir:"right",size:t.size})):i}function fp(e,t={}){let r;let{signed:i,size:n}=t,s=BigInt(e);n?r=i?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let o="bigint"==typeof r&&i?-r-1n:0;if(r&&s>r||s<o){let t="bigint"==typeof e?"n":"";throw new fo({max:r?`${r}${t}`:void 0,min:`${o}${t}`,signed:i,size:n,value:`${e}${t}`})}let a=`0x${(i&&s<0?(1n<<BigInt(8*n))+BigInt(s):s).toString(16)}`;return n?fs(a,{size:n}):a}let fg=new TextEncoder,fy=new TextEncoder,fm={zero:48,nine:57,A:65,F:70,a:97,f:102};function fb(e){return e>=fm.zero&&e<=fm.nine?e-fm.zero:e>=fm.A&&e<=fm.F?e-(fm.A-10):e>=fm.a&&e<=fm.f?e-(fm.a-10):void 0}function fw(e,t={}){let r=e;t.size&&(fc(r,{size:t.size}),r=fs(r,{dir:"right",size:t.size}));let i=r.slice(2);i.length%2&&(i=`0${i}`);let n=i.length/2,s=new Uint8Array(n);for(let e=0,t=0;e<n;e++){let r=fb(i.charCodeAt(t++)),n=fb(i.charCodeAt(t++));if(void 0===r||void 0===n)throw new fr(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);s[e]=16*r+n}return s}function fv(e,t={}){let r=fy.encode(e);return"number"==typeof t.size?(fc(r,{size:t.size}),fs(r,{dir:"right",size:t.size})):r}var fE=r(1268);let fA=BigInt(4294967296-1),fx=BigInt(32),fI=(e,t,r)=>e<<r|t>>>32-r,fT=(e,t,r)=>t<<r|e>>>32-r,f_=(e,t,r)=>t<<r-32|e>>>64-r,fS=(e,t,r)=>e<<r-32|t>>>64-r;var fP=r(1515);let fN=[],fO=[],fk=[],fC=BigInt(0),fB=BigInt(1),fR=BigInt(2),fD=BigInt(7),fL=BigInt(256),fU=BigInt(113);for(let e=0,t=fB,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],fN.push(2*(5*i+r)),fO.push((e+1)*(e+2)/2%64);let n=fC;for(let e=0;e<7;e++)(t=(t<<fB^(t>>fD)*fU)%fL)&fR&&(n^=fB<<(fB<<BigInt(e))-fB);fk.push(n)}let[fM,fF]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&fA),l:Number(e>>fx&fA)}:{h:0|Number(e>>fx&fA),l:0|Number(e&fA)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(fk,!0),f$=(e,t,r)=>r>32?f_(e,t,r):fI(e,t,r),fj=(e,t,r)=>r>32?fS(e,t,r):fT(e,t,r);class fH extends fP.kb{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,fE.k8)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,fP.Jq)(this.state)}keccak(){fP.iA||(0,fP.l1)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=f$(s,o,1)^r[i],l=fj(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=fO[r],s=f$(t,n,i),o=fj(t,n,i),a=fN[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=fM[i],e[1]^=fF[i]}r.fill(0)}(this.state32,this.rounds),fP.iA||(0,fP.l1)(this.state32),this.posOut=0,this.pos=0}update(e){(0,fE.$h)(this);let{blockLen:t,state:r}=this,i=(e=(0,fP.O0)(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,fE.$h)(this,!1),(0,fE.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,fE.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,fE.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new fH(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let fV=(0,fP.hE)(()=>new fH(136,1,32));function fz(e,t){let r=fV(fi(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?fw(fp(e,t)):"boolean"==typeof e?function(e,t={}){let r=new Uint8Array(1);return(r[0]=Number(e),"number"==typeof t.size)?(fc(r,{size:t.size}),fs(r,{size:t.size})):r}(e,t):fi(e)?fw(e,t):fv(e,t)}(e):e);return"bytes"===(t||"hex")?r:fd(r)}class fG extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let fq=new fG(8192);async function fK({hash:e,signature:t}){let i=fi(e)?e:fd(e),{secp256k1:n}=await r.e(38).then(r.bind(r,5038)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){let{r:e,s:r,v:i,yParity:s}=t,o=fW(Number(s??i));return new n.Signature(fu(e),fu(r)).addRecoveryBit(o)}let e=fi(t)?t:fd(t),r=fW(function(e,t={}){return Number(fu(e,t))}(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})().recoverPublicKey(i.substring(2)).toHex(!1);return`0x${s}`}function fW(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw Error("Invalid yParityOrV value")}async function fQ({hash:e,signature:t}){return function(e){let t=fz(`0x${e.substring(4)}`).substring(26);return function(e,t){if(fq.has(`${e}.${t}`))return fq.get(`${e}.${t}`);let r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),i=fz(fv(r),"bytes"),n=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&i[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());let s=`0x${n.join("")}`;return fq.set(`${e}.${t}`,s),s}(`0x${t}`)}(await fK({hash:e,signature:t}))}var fY=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw TypeError(i+" is ambiguous");t[n]=r}let r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===i;)o++,s++;let l=(e.length-s)*n+1>>>0,c=new Uint8Array(l);for(;s<e.length;){let i=e.charCodeAt(s);if(i>255)return;let n=t[i];if(255===n)return;let o=0;for(let e=l-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*c[e]>>>0,c[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw Error("Non-zero carry");a=o,s++}let u=l-a;for(;u!==l&&0===c[u];)u++;let h=new Uint8Array(o+(l-u)),d=o;for(;u!==l;)h[d++]=c[u++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0,l=t.length;for(;a!==l&&0===t[a];)a++,n++;let c=(l-a)*s+1>>>0,u=new Uint8Array(c);for(;a!==l;){let e=t[a],i=0;for(let t=c-1;(0!==e||i<o)&&-1!==t;t--,i++)e+=256*u[t]>>>0,u[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");o=i,a++}let h=c-o;for(;h!==c&&0===u[h];)h++;let d=i.repeat(n);for(;h<c;++h)d+=e.charAt(u[h]);return d},decodeUnsafe:o,decode:function(e){let t=o(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function fJ(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function fZ(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=fJ(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return r}var fX=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===l;)i++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,c=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,f=o-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*c[f]>>>0,c[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===c[p];)p++;for(var g=l.repeat(r);p<o;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let f0=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},f1=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},f2=e=>new TextEncoder().encode(e),f3=e=>new TextDecoder().decode(e);class f4{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class f8{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return f6(this,e)}}class f5{constructor(e){this.decoders=e}or(e){return f6(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let f6=(e,t)=>new f5({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class f7{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new f4(e,t,r),this.decoder=new f8(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let f9=({name:e,prefix:t,encode:r,decode:i})=>new f7(e,t,r,i),pe=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=fX(r,t);return f9({prefix:e,name:t,encode:i,decode:e=>f1(n(e))})},pt=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,l=0,c=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);l=l<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw SyntaxError("Unexpected end of data");return o},pr=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},pi=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>f9({prefix:t,name:e,encode:e=>pr(e,i,r),decode:t=>pt(t,i,r,e)}),pn=f9({prefix:"\x00",name:"identity",encode:e=>f3(e),decode:e=>f2(e)}),ps=pi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),po=pi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),pa=pe({prefix:"9",name:"base10",alphabet:"0123456789"}),pl=pi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pc=pi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),pu=pi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ph=pi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pd=pi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pf=pi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pp=pi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pg=pi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),py=pi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pm=pi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pb=pi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),pw=pe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pv=pe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),pE=pe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pA=pe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),px=pi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pI=pi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pT=pi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),p_=pi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),pS=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),pP=pS.reduce((e,t,r)=>(e[r]=t,e),[]),pN=pS.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),pO=f9({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=pP[t],"")},decode:function(e){let t=[];for(let r of e){let e=pN[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var pk={encode:function e(t,r,i){r=r||[];for(var n=i=i||0;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},decode:function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let pC=(e,t=0)=>[pk.decode(e,t),pk.decode.bytes],pB=(e,t,r=0)=>(pk.encode(e,t,r),t),pR=e=>pk.encodingLength(e),pD=(e,t)=>{let r=t.byteLength,i=pR(e),n=i+pR(r),s=new Uint8Array(n+r);return pB(e,s,0),pB(r,s,i),s.set(t,n),new pM(e,r,t,s)},pL=e=>{let t=f1(e),[r,i]=pC(t),[n,s]=pC(t.subarray(i)),o=t.subarray(i+s);if(o.byteLength!==n)throw Error("Incorrect length");return new pM(r,n,o,t)},pU=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&f0(e.bytes,t.bytes);class pM{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let pF=({name:e,code:t,encode:r})=>new p$(e,t,r);class p${constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?pD(this.code,t):t.then(e=>pD(this.code,e))}throw Error("Unknown type, must be binary type")}}let pj=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),pH=pF({name:"sha2-256",code:18,encode:pj("SHA-256")}),pV=pF({name:"sha2-512",code:19,encode:pj("SHA-512")}),pz={code:0,name:"identity",encode:f1,digest:e=>pD(0,f1(e))},pG="raw",pq=85,pK=e=>f1(e),pW=e=>f1(e),pQ=new TextEncoder,pY=new TextDecoder,pJ="json",pZ=512,pX=e=>pQ.encode(JSON.stringify(e)),p0=e=>JSON.parse(pY.decode(e));class p1{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ge,byteLength:ge,code:p9,version:p9,multihash:p9,bytes:p9,_baseCache:ge,asCID:ge})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==p8)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==p5)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return p1.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=pD(e,t);return p1.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&pU(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:i}=this;return 0===r?p3(t,i,e||pE.encoder):p4(t,i,e||pu.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return gt(/^0\.0/,gr),!!(e&&(e[p7]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof p1)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:i,bytes:n}=e;return new p1(t,r,i,n||p6(t,r,i.bytes))}if(null==e||!0!==e[p7])return null;{let{version:t,multihash:r,code:i}=e,n=pL(r);return p1.create(t,i,n)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===p8)return new p1(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${p8}) block encoding`);case 1:{let i=p6(e,t,r.bytes);return new p1(e,t,r,i)}default:throw Error("Invalid version")}}static createV0(e){return p1.create(0,p8,e)}static createV1(e,t){return p1.create(1,e,t)}static decode(e){let[t,r]=p1.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=p1.inspectBytes(e),r=t.size-t.multihashSize,i=f1(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw Error("Incorrect length");let n=i.subarray(t.multihashSize-t.digestSize),s=new pM(t.multihashCode,t.digestSize,n,i);return[0===t.version?p1.createV0(s):p1.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,i]=pC(e.subarray(t));return t+=i,r},i=r(),n=p8;if(18===i?(i=0,t=0):1===i&&(n=r()),0!==i&&1!==i)throw RangeError(`Invalid CID version ${i}`);let s=t,o=r(),a=r(),l=t+a;return{version:i,codec:n,multihashCode:o,digestSize:a,multihashSize:l-s,size:l}}static parse(e,t){let[r,i]=p2(e,t),n=p1.decode(i);return n._baseCache.set(r,e),n}}let p2=(e,t)=>{switch(e[0]){case"Q":return[pE.prefix,(t||pE).decode(`${pE.prefix}${e}`)];case pE.prefix:return[pE.prefix,(t||pE).decode(e)];case pu.prefix:return[pu.prefix,(t||pu).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},p3=(e,t,r)=>{let{prefix:i}=r;if(i!==pE.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=t.get(i);if(null!=n)return n;{let n=r.encode(e).slice(1);return t.set(i,n),n}},p4=(e,t,r)=>{let{prefix:i}=r,n=t.get(i);if(null!=n)return n;{let n=r.encode(e);return t.set(i,n),n}},p8=112,p5=18,p6=(e,t,r)=>{let i=pR(e),n=i+pR(t),s=new Uint8Array(n+r.byteLength);return pB(e,s,0),pB(t,s,i),s.set(r,n),s},p7=Symbol.for("@ipld/js-cid/CID"),p9={writable:!1,configurable:!1,enumerable:!0},ge={writable:!1,enumerable:!1,configurable:!1},gt=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},gr=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,gi={...x,...I,...T,..._,...S,...P,...N,...O,...k,...C};function gn(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...B,...R});let gs=gn("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),go=gn("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=fJ((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),ga={utf8:gs,"utf-8":gs,hex:gi.base16,latin1:go,ascii:go,binary:go,...gi};function gl(e,t="utf8"){let r=ga[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function gc(e,t="utf8"){let r=ga[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}let gu={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var gh=r(9792),gd=r(6593).lW;function gf(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}function gp(e,t){return e.includes(":")?[e]:t.chains||[]}var gg=Object.defineProperty,gy=Object.defineProperties,gm=Object.getOwnPropertyDescriptors,gb=Object.getOwnPropertySymbols,gw=Object.prototype.hasOwnProperty,gv=Object.prototype.propertyIsEnumerable,gE=(e,t,r)=>t in e?gg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gA=(e,t)=>{for(var r in t||(t={}))gw.call(t,r)&&gE(e,r,t[r]);if(gb)for(var r of gb(t))gv.call(t,r)&&gE(e,r,t[r]);return e},gx=(e,t)=>gy(e,gm(t));let gI={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function gT(){return"u">typeof gh&&"u">typeof gh.versions&&"u">typeof gh.versions.node}function g_(){return!(0,d7.getDocument)()&&!!(0,d7.getNavigator)()&&"ReactNative"===navigator.product}function gS(){return!gT()&&!!(0,d7.getNavigator)()&&!!(0,d7.getDocument)()}function gP(){return g_()?gI.reactNative:gT()?gI.node:gS()?gI.browser:gI.unknown}function gN(){var e;try{return g_()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Application)?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function gO(){return(0,d9.D)()||{name:"",description:"",url:"",icons:[""]}}function gk(e,t,i){let n=function(){var e;if(gP()===gI.reactNative&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)){let{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}let t=e?d6(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new d3:"undefined"!=typeof navigator?d6(navigator.userAgent):void 0!==dJ&&dJ.version?new d0(dJ.version.slice(1)):null;if(null===t)return"unknown";let i=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[i,t.name,t.version].join("-"):[i,t.version].join("-")}(),s=function(){var e;let t=gP();return t===gI.browser?[t,(null==(e=(0,d7.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",i].join("-"),n,s].join("/")}function gC(e,t){return e.filter(e=>t.includes(e)).length===e.length}function gB(e){return Object.fromEntries(e.entries())}function gR(e){return new Map(Object.entries(e))}function gD(e=cA.FIVE_MINUTES,t){let r,i,n,s;let o=(0,cA.toMiliseconds)(e||cA.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e),s=Promise.resolve(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,a)=>{if(s)return e(s);n=setTimeout(()=>{let e=Error(t);s=Promise.reject(e),a(e)},o),r=e,i=a})}}function gL(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function gU(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function gM(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function gF(e,t){return(0,cA.fromMiliseconds)((t||Date.now())+(0,cA.toMiliseconds)(e))}function g$(e){return Date.now()>=(0,cA.toMiliseconds)(e)}function gj(e,t){return`${e}${t?`:${t}`:""}`}async function gH({id:e,topic:t,wcDeepLink:i}){var n;try{if(!i)return;let s="string"==typeof i?JSON.parse(i):i,o=s?.href;if("string"!=typeof o)return;let a=function(e,t,r){let i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";n=`${n}${t}${function(e,t=!1){let r=gd.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(i,!0)}`}else n=`${n}/wc?${i}`;return n}(o,e,t),l=gP();if(l===gI.browser){let e;if(!(null!=(n=(0,d7.getDocument)())&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e="_self",function(){try{return window.self!==window.top}catch{return!1}}()?e="_top":("u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||a.startsWith("https://")||a.startsWith("http://"))&&(e="_blank"),window.open(a,e,"noreferrer noopener")}else l===gI.reactNative&&"u">typeof(null==r.g?void 0:r.g.Linking)&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}async function gV(e,t){let r="";try{if(gS()&&(r=localStorage.getItem(t)))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}function gz(e,t){if(!e.includes(t))return null;let r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function gG(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function gq(){return"u">typeof gh&&"true"===gh.env.IS_VITEST}function gK(e){return gd.from(e,"base64").toString("utf-8")}function gW(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function gQ(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function gY(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");gW(e.outputLen),gW(e.blockLen)}function gJ(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function gZ(e,t){gQ(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}let gX=BigInt(4294967296-1),g0=BigInt(32),g1=(e,t,r)=>e<<r|t>>>32-r,g2=(e,t,r)=>t<<r|e>>>32-r,g3=(e,t,r)=>t<<r-32|e>>>64-r,g4=(e,t,r)=>e<<r-32|t>>>64-r,g8="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function g5(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function g6(e,t){return e<<32-t|e>>>t}let g7=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function g9(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function ye(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),gQ(e),e}class yt{clone(){return this._cloneInto()}}function yr(e){let t=t=>e().update(ye(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function yi(e=32){if(g8&&"function"==typeof g8.getRandomValues)return g8.getRandomValues(new Uint8Array(e));if(g8&&"function"==typeof g8.randomBytes)return g8.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let yn=[],ys=[],yo=[],ya=BigInt(0),yl=BigInt(1),yc=BigInt(2),yu=BigInt(7),yh=BigInt(256),yd=BigInt(113);for(let e=0,t=yl,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],yn.push(2*(5*i+r)),ys.push((e+1)*(e+2)/2%64);let n=ya;for(let e=0;e<7;e++)(t=(t<<yl^(t>>yu)*yd)%yh)&yc&&(n^=yl<<(yl<<BigInt(e))-yl);yo.push(n)}let[yf,yp]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&gX),l:Number(e>>g0&gX)}:{h:0|Number(e>>g0&gX),l:0|Number(e&gX)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(yo,!0),yg=(e,t,r)=>r>32?g3(e,t,r):g1(e,t,r),yy=(e,t,r)=>r>32?g4(e,t,r):g2(e,t,r);class ym extends yt{constructor(e,t,r,i=!1,n=24){var s;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,gW(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){g7||g9(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=yg(s,o,1)^r[i],l=yy(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=ys[r],s=yg(t,n,i),o=yy(t,n,i),a=yn[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=yf[i],e[1]^=yp[i]}r.fill(0)}(this.state32,this.rounds),g7||g9(this.state32),this.posOut=0,this.pos=0}update(e){gJ(this);let{blockLen:t,state:r}=this,i=(e=ye(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){gJ(this,!1),gQ(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return gW(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(gZ(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new ym(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let yb=yr(()=>new ym(136,1,32));function yw(e){let t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+gd.from(yb(r)).toString("hex")}async function yv(e,t,r,i,n,s){switch(r.t){case"eip191":return await yE(e,t,r.s);case"eip1271":return await yA(e,t,r.s,i,n,s);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function yE(e,t,r){return(await fQ({hash:yw(t),signature:r})).toLowerCase()===e.toLowerCase()}async function yA(e,t,r,i,n,s){let o=gf(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),l=yw(t).substring(2),c=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:o+l+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a},"latest"]})}),{result:u}=await c.json();return!!u&&u.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}var yx=Object.defineProperty,yI=Object.defineProperties,yT=Object.getOwnPropertyDescriptors,y_=Object.getOwnPropertySymbols,yS=Object.prototype.hasOwnProperty,yP=Object.prototype.propertyIsEnumerable,yN=(e,t,r)=>t in e?yx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yO=(e,t)=>{for(var r in t||(t={}))yS.call(t,r)&&yN(e,r,t[r]);if(y_)for(var r of y_(t))yP.call(t,r)&&yN(e,r,t[r]);return e},yk=(e,t)=>yI(e,yT(t));let yC=e=>e?.split(":"),yB=e=>{let t=e&&yC(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]},yR=e=>{let t=e&&yC(e);if(t)return t[2]+":"+t[3]},yD=e=>{let t=e&&yC(e);if(t)return t.pop()};async function yL(e){let{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=yU(n,n.iss),o=yD(n.iss);return await yv(o,s,i,yR(n.iss),r)}let yU=(e,t)=>{let r=`${e.domain} wants you to sign in with your Ethereum account:`,i=yD(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0,s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${yB(t)}`,l=`Nonce: ${e.nonce}`,c=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,p=yV(e.resources);return p&&(n=function(e="",t){yM(t);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;let i=[],n=0;Object.keys(t.att).forEach(e=>{let r=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));r.sort((e,t)=>e.action.localeCompare(t.action));let s={};r.forEach(e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)});let o=Object.keys(s).map(t=>(n++,`(${n}) '${t}': '${s[t].join("', '")}' for '${e}'.`));i.push(o.join(", ").replace(".,","."))});let s=i.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}(n,y$(p))),[r,i,"",n,"",s,o,a,l,c,u,h,d,f].filter(e=>null!=e).join(`
`)};function yM(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let r=e.att[t];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(e=>{let t=r[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function yF(e){return yM(e),`urn:recap:${gd.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function y$(e){var t;let r=(t=e.replace("urn:recap:",""),JSON.parse(gd.from(t,"base64").toString("utf-8")));return yM(r),r}function yj(e){var t;let r=y$(e);yM(r);let i=null==(t=r.att)?void 0:t.eip155;return i?Object.keys(i).map(e=>e.split("/")[1]):[]}function yH(e){let t=y$(e);yM(t);let r=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)})}),[...new Set(r.flat())]}function yV(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}function yz(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function yG(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function yq(e,...t){if(!yG(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function yK(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function yW(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}let yQ=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),yY=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function yJ(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(yG(e))e=y0(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function yZ(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function yX(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}function y0(e){return Uint8Array.from(e)}function y1(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let y2=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),y3=y2("expand 16-byte k"),y4=y2("expand 32-byte k"),y8=yQ(y3),y5=yQ(y4);function y6(e,t){return e<<t|e>>>32-t}function y7(e){return e.byteOffset%4==0}let y9=4294967296-1,me=new Uint32Array,mt=(e,t)=>255&e[t++]|(255&e[t++])<<8;class mr{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,yq(e=yJ(e),32);let t=mt(e,0),r=mt(e,2),i=mt(e,4),n=mt(e,6),s=mt(e,8),o=mt(e,10),a=mt(e,12),l=mt(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=mt(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],u=n[5],h=n[6],d=n[7],f=n[8],p=n[9],g=mt(e,t+0),y=mt(e,t+2),m=mt(e,t+4),b=mt(e,t+6),w=mt(e,t+8),v=mt(e,t+10),E=mt(e,t+12),A=mt(e,t+14),x=i[0]+(8191&g),I=i[1]+((g>>>13|y<<3)&8191),T=i[2]+((y>>>10|m<<6)&8191),_=i[3]+((m>>>7|b<<9)&8191),S=i[4]+((b>>>4|w<<12)&8191),P=i[5]+(w>>>1&8191),N=i[6]+((w>>>14|v<<2)&8191),O=i[7]+((v>>>11|E<<5)&8191),k=i[8]+((E>>>8|A<<8)&8191),C=i[9]+(A>>>5|(r?0:2048)),B=0,R=0+x*s+5*p*I+5*f*T+5*d*_+5*h*S;B=R>>>13,R&=8191,R+=5*u*P+5*c*N+5*l*O+5*a*k+5*o*C,B+=R>>>13,R&=8191;let D=B+x*o+I*s+5*p*T+5*f*_+5*d*S;B=D>>>13,D&=8191,D+=5*h*P+5*u*N+5*c*O+5*l*k+5*a*C,B+=D>>>13,D&=8191;let L=B+x*a+I*o+T*s+5*p*_+5*f*S;B=L>>>13,L&=8191,L+=5*d*P+5*h*N+5*u*O+5*c*k+5*l*C,B+=L>>>13,L&=8191;let U=B+x*l+I*a+T*o+_*s+5*p*S;B=U>>>13,U&=8191,U+=5*f*P+5*d*N+5*h*O+5*u*k+5*c*C,B+=U>>>13,U&=8191;let M=B+x*c+I*l+T*a+_*o+S*s;B=M>>>13,M&=8191,M+=5*p*P+5*f*N+5*d*O+5*h*k+5*u*C,B+=M>>>13,M&=8191;let F=B+x*u+I*c+T*l+_*a+S*o;B=F>>>13,F&=8191,F+=P*s+5*p*N+5*f*O+5*d*k+5*h*C,B+=F>>>13,F&=8191;let $=B+x*h+I*u+T*c+_*l+S*a;B=$>>>13,$&=8191,$+=P*o+N*s+5*p*O+5*f*k+5*d*C,B+=$>>>13,$&=8191;let j=B+x*d+I*h+T*u+_*c+S*l;B=j>>>13,j&=8191,j+=P*a+N*o+O*s+5*p*k+5*f*C,B+=j>>>13,j&=8191;let H=B+x*f+I*d+T*h+_*u+S*c;B=H>>>13,H&=8191,H+=P*l+N*a+O*o+k*s+5*p*C,B+=H>>>13,H&=8191;let V=B+x*p+I*f+T*d+_*h+S*u;B=V>>>13,V&=8191,V+=P*c+N*l+O*a+k*o+C*s,B+=V>>>13,V&=8191,R=8191&(B=(B=(B<<2)+B|0)+R|0),B>>>=13,D+=B,i[0]=R,i[1]=D,i[2]=L,i[3]=U,i[4]=M,i[5]=F,i[6]=$,i[7]=j,i[8]=H,i[9]=V}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;y1(r)}update(e){yK(this);let{buffer:t,blockLen:r}=this,i=(e=yJ(e)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){y1(this.h,this.r,this.buffer,this.pad)}digestInto(e){yK(this),function(e,t){yq(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let mi=function(e){let t=(t,r)=>e(r).update(yJ(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new mr(e)),mn=function(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return yz(n),yz(o),yW(s),yW(r),(t,a,l,c,u=0)=>{yq(t),yq(a),yq(l);let h=l.length;if(void 0===c&&(c=new Uint8Array(h)),yq(c),yz(u),u<0||u>=y9)throw Error("arx: counter overflow");if(c.length<h)throw Error(`arx: output (${c.length}) is shorter than data (${h})`);let d=[],f=t.length,p,g;if(32===f)d.push(p=y0(t)),g=y5;else if(16===f&&r)(p=new Uint8Array(32)).set(t),p.set(t,16),g=y8,d.push(p);else throw Error(`arx: invalid 32-byte key, got length=${f}`);y7(a)||d.push(a=y0(a));let y=yQ(p);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,y,yQ(a.subarray(0,16)),y),a=a.subarray(16)}let m=16-n;if(m!==a.length)throw Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){let e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,d.push(a)}return function(e,t,r,i,n,s,o,a){let l=n.length,c=new Uint8Array(64),u=yQ(c),h=y7(n)&&y7(s),d=h?yQ(n):me,f=h?yQ(s):me;for(let p=0;p<l;o++){if(e(t,r,i,u,o,a),o>=y9)throw Error("arx: counter overflow");let g=Math.min(64,l-p);if(h&&64===g){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=d[r]^u[t];p+=64;continue}for(let e=0,t;e<g;e++)s[t=p+e]=n[t]^c[e];p+=g}}(e,g,y,yQ(a),l,c,u,o),y1(...d),c}}(function(e,t,r,i,n,s=20){let o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],h=t[1],d=t[2],f=t[3],p=t[4],g=t[5],y=t[6],m=t[7],b=r[0],w=r[1],v=r[2],E=o,A=a,x=l,I=c,T=u,_=h,S=d,P=f,N=p,O=g,k=y,C=m,B=n,R=b,D=w,L=v;for(let e=0;e<s;e+=2)N=N+(B=y6(B^(E=E+T|0),16))|0,E=E+(T=y6(T^N,12))|0,N=N+(B=y6(B^E,8))|0,T=y6(T^N,7),O=O+(R=y6(R^(A=A+_|0),16))|0,A=A+(_=y6(_^O,12))|0,O=O+(R=y6(R^A,8))|0,_=y6(_^O,7),k=k+(D=y6(D^(x=x+S|0),16))|0,x=x+(S=y6(S^k,12))|0,k=k+(D=y6(D^x,8))|0,S=y6(S^k,7),C=C+(L=y6(L^(I=I+P|0),16))|0,I=I+(P=y6(P^C,12))|0,C=C+(L=y6(L^I,8))|0,P=y6(P^C,7),k=k+(L=y6(L^(E=E+_|0),16))|0,E=E+(_=y6(_^k,12))|0,k=k+(L=y6(L^E,8))|0,_=y6(_^k,7),C=C+(B=y6(B^(A=A+S|0),16))|0,A=A+(S=y6(S^C,12))|0,C=C+(B=y6(B^A,8))|0,S=y6(S^C,7),N=N+(R=y6(R^(x=x+P|0),16))|0,x=x+(P=y6(P^N,12))|0,N=N+(R=y6(R^x,8))|0,P=y6(P^N,7),O=O+(D=y6(D^(I=I+T|0),16))|0,I=I+(T=y6(T^O,12))|0,O=O+(D=y6(D^I,8))|0,T=y6(T^O,7);let U=0;i[U++]=o+E|0,i[U++]=a+A|0,i[U++]=l+x|0,i[U++]=c+I|0,i[U++]=u+T|0,i[U++]=h+_|0,i[U++]=d+S|0,i[U++]=f+P|0,i[U++]=p+N|0,i[U++]=g+O|0,i[U++]=y+k|0,i[U++]=m+C|0,i[U++]=n+B|0,i[U++]=b+R|0,i[U++]=w+D|0,i[U++]=v+L|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),ms=new Uint8Array(16),mo=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(ms.subarray(r))},ma=new Uint8Array(32);function ml(e,t,r,i,n){let s=e(t,r,ma),o=mi.create(s);n&&mo(o,n),mo(o,i);let a=new Uint8Array(16),l=yY(a);yX(l,0,BigInt(n?n.length:0),!0),yX(l,8,BigInt(i.length),!0),o.update(a);let c=o.digest();return y1(s,a),c}let mc=((e,t)=>{function r(i,...n){if(yq(i),void 0!==e.nonceLength){let t=n[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?yq(t):yq(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==n[1]&&yq(n[1]);let o=t(i,...n),a=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");yq(t)}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,yq(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(yq(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e,t,r)=>({encrypt(i,n){let s=i.length;(n=yZ(s+16,n,!1)).set(i);let o=n.subarray(0,-16);mn(e,t,o,o,1);let a=ml(mn,e,t,o,r);return n.set(a,s),y1(a),n},decrypt(i,n){n=yZ(i.length-16,n,!1);let s=i.subarray(0,-16),o=i.subarray(-16),a=ml(mn,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(o,a))throw Error("invalid tag");return n.set(i.subarray(0,-16)),mn(e,t,n,n,1),y1(a),n}}));class mu extends yt{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,gY(e);let r=ye(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return gJ(this),this.iHash.update(e),this}digestInto(e){gJ(this),gQ(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let mh=(e,t,r)=>new mu(e,t).update(r).digest();mh.create=(e,t)=>new mu(e,t);let md=new Uint8Array([0]),mf=new Uint8Array,mp=(e,t,r,i,n)=>{var s;return function(e,t,r,i=32){if(gY(e),gW(i),i>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let n=Math.ceil(i/e.outputLen);void 0===r&&(r=mf);let s=new Uint8Array(n*e.outputLen),o=mh.create(e,t),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)md[0]=t+1,a.update(0===t?mf:l).update(r).update(md).digestInto(l),s.set(l,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),md.fill(0),s.slice(0,i)}(e,(s=r,gY(e),void 0===s&&(s=new Uint8Array(e.outputLen)),mh(e,ye(s),ye(t))),i,n)};class mg extends yt{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=g5(this.buffer)}update(e){gJ(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=ye(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=g5(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gJ(this),gZ(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=g5(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let my=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mm=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mb=new Uint32Array(64);class mw extends mg{constructor(){super(64,32,8,!1),this.A=0|mm[0],this.B=0|mm[1],this.C=0|mm[2],this.D=0|mm[3],this.E=0|mm[4],this.F=0|mm[5],this.G=0|mm[6],this.H=0|mm[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)mb[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=mb[e-15],r=mb[e-2],i=g6(t,7)^g6(t,18)^t>>>3,n=g6(r,17)^g6(r,19)^r>>>10;mb[e]=n+mb[e-7]+i+mb[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){var u,h,d,f;let t=c+(g6(o,6)^g6(o,11)^g6(o,25))+((u=o)&a^~u&l)+my[e]+mb[e]|0,p=(g6(r,2)^g6(r,13)^g6(r,22))+((h=r)&(d=i)^h&(f=n)^d&f)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+p|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){mb.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let mv=yr(()=>new mw),mE=BigInt(0),mA=BigInt(1),mx=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mI(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function mT(e){if(!mI(e))throw Error("Uint8Array expected")}function m_(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let mS=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function mP(e){mT(e);let t="";for(let r=0;r<e.length;r++)t+=mS[e[r]];return t}function mN(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function mO(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?mE:BigInt("0x"+e)}let mk={_0:48,_9:57,A:65,F:70,a:97,f:102};function mC(e){return e>=mk._0&&e<=mk._9?e-mk._0:e>=mk.A&&e<=mk.F?e-(mk.A-10):e>=mk.a&&e<=mk.f?e-(mk.a-10):void 0}function mB(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=mC(e.charCodeAt(n)),s=mC(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function mR(e){return mO(mP(e))}function mD(e){return mT(e),mO(mP(Uint8Array.from(e).reverse()))}function mL(e,t){return mB(e.toString(16).padStart(2*t,"0"))}function mU(e,t){return mL(e,t).reverse()}function mM(e,t,r){let i;if("string"==typeof t)try{i=mB(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(mI(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function mF(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];mT(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let m$=e=>"bigint"==typeof e&&mE<=e;function mj(e,t,r){return m$(e)&&m$(t)&&m$(r)&&t<=e&&e<r}function mH(e,t,r,i){if(!mj(t,r,i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function mV(e){let t;for(t=0;e>mE;e>>=mA,t+=1);return t}let mz=e=>(mx<<BigInt(e-1))-mA,mG=e=>new Uint8Array(e),mq=e=>Uint8Array.from(e);function mK(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=mG(e),n=mG(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=mG())=>{n=a(mq([0]),e),i=a(),0!==e.length&&(n=a(mq([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return mF(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let mW={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||mI(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function mQ(e,t,r={}){let i=(t,r,i)=>{let n=mW[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function mY(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}var mJ=Object.freeze({__proto__:null,isBytes:mI,abytes:mT,abool:m_,bytesToHex:mP,numberToHexUnpadded:mN,hexToNumber:mO,hexToBytes:mB,bytesToNumberBE:mR,bytesToNumberLE:mD,numberToBytesBE:mL,numberToBytesLE:mU,numberToVarBytesBE:function(e){return mB(mN(e))},ensureBytes:mM,concatBytes:mF,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},inRange:mj,aInRange:mH,bitLen:mV,bitGet:function(e,t){return e>>BigInt(t)&mA},bitSet:function(e,t,r){return e|(r?mA:mE)<<BigInt(t)},bitMask:mz,createHmacDrbg:mK,validateObject:mQ,notImplemented:()=>{throw Error("not implemented")},memoized:mY});let mZ=BigInt(0),mX=BigInt(1),m0=BigInt(2),m1=BigInt(3),m2=BigInt(4),m3=BigInt(5),m4=BigInt(8);function m8(e,t){let r=e%t;return r>=mZ?r:t+r}function m5(e,t,r){if(t<mZ)throw Error("invalid exponent, negatives unsupported");if(r<=mZ)throw Error("invalid modulus");if(r===mX)return mZ;let i=mX;for(;t>mZ;)t&mX&&(i=i*e%r),e=e*e%r,t>>=mX;return i}function m6(e,t,r){let i=e;for(;t-- >mZ;)i*=i,i%=r;return i}function m7(e,t){if(e===mZ)throw Error("invert: expected non-zero number");if(t<=mZ)throw Error("invert: expected positive modulus, got "+t);let r=m8(e,t),i=t,n=mZ,s=mX;for(;r!==mZ;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==mX)throw Error("invert: does not exist");return m8(n,t)}let m9=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function be(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function bt(e,t,r=!1,i={}){let n;if(e<=mZ)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=be(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:mz(s),ZERO:mZ,ONE:mX,create:t=>m8(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return mZ<=t&&t<e},is0:e=>e===mZ,isOdd:e=>(e&mX)===mX,neg:t=>m8(-t,e),eql:(e,t)=>e===t,sqr:t=>m8(t*t,e),add:(t,r)=>m8(t+r,e),sub:(t,r)=>m8(t-r,e),mul:(t,r)=>m8(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<mZ)throw Error("invalid exponent, negatives unsupported");if(r===mZ)return e.ONE;if(r===mX)return t;let i=e.ONE,n=t;for(;r>mZ;)r&mX&&(i=e.mul(i,n)),n=e.sqr(n),r>>=mX;return i})(a,e,t),div:(t,r)=>m8(t*m7(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>m7(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%m2===m1){let t=(e+mX)/m2;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%m4===m3){let t=(e-m3)/m4;return function(e,r){let i=e.mul(r,m0),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,m0),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-mX)/m0;for(t=e-mX,r=0;t%m0===mZ;t/=m0,r++);for(i=m0;i<e&&m5(i,n,e)!==e-mX;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+mX)/m2;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+mX)/m0;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,mX<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?mU(e,o):mL(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?mD(e):mR(e)}});return Object.freeze(a)}function br(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function bi(e){let t=br(e);return t+Math.ceil(t/2)}let bn=BigInt(0),bs=BigInt(1);function bo(e,t){let r=t.negate();return e?r:t}function ba(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function bl(e,t){return ba(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let bc=new WeakMap,bu=new WeakMap;function bh(e){return bu.get(e)||1}function bd(e){return mQ(e.Fp,m9.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),mQ(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...be(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);let bf=BigInt(0),bp=BigInt(1),bg=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let by=BigInt(1),bm=BigInt(2),bb=BigInt(3),bw=BigInt(5);BigInt(8);let bv=function(e){let t=(mQ(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:r}=t,i=e=>m8(e,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),l=t.powPminus2||(e=>m5(e,r-BigInt(2),r));function c(e,t,r){let n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}let u=(t.a-BigInt(2))/BigInt(4);function h(e,t){let h=function(e,t){mH("u",e,bf,r),mH("scalar",t,bf,r);let s=bp,o=bf,a=e,h=bp,d=bf,f;for(let r=BigInt(n-1);r>=bf;r--){let n=t>>r&bp;d^=n,s=(f=c(d,s,a))[0],a=f[1],o=(f=c(d,o,h))[0],h=f[1],d=n;let l=s+o,p=i(l*l),g=s-o,y=i(g*g),m=p-y,b=a+h,w=i((a-h)*l),v=i(b*g),E=w+v,A=w-v;a=i(E*E),h=i(e*i(A*A)),s=i(p*y),o=i(m*(p+i(u*m)))}return s=(f=c(d,s,a))[0],a=f[1],o=(f=c(d,o,h))[0],h=f[1],i(s*l(o))}(function(e){let t=mM("u coordinate",e,s);return 32===o&&(t[31]&=127),mD(t)}(t),function(e){let t=mM("scalar",e),r=t.length;if(r!==s&&r!==o)throw Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return mD(a(t))}(e));if(h===bf)throw Error("invalid private or public key received");return mU(i(h),s)}let d=mU(i(t.Gu),s);function f(e){return h(e,d)}return{scalarMult:h,scalarMultBase:f,getSharedSecret:(e,t)=>h(e,t),getPublicKey:e=>f(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:d}}({P:bg,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:t,b2:r}=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%bg*e%bg,o=m6(s,bm,bg)*s%bg,a=m6(o,by,bg)*e%bg,l=m6(a,bw,bg)*a%bg,c=m6(l,t,bg)*l%bg,u=m6(c,r,bg)*c%bg,h=m6(u,i,bg)*u%bg,d=m6(h,n,bg)*h%bg,f=m6(d,n,bg)*h%bg,p=m6(f,t,bg)*l%bg;return{pow_p_5_8:m6(p,bm,bg)*e%bg,b2:s}}(e);return m8(m6(t,bb,bg)*r,bg)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:yi});function bE(e){void 0!==e.lowS&&m_("lowS",e.lowS),void 0!==e.prehash&&m_("prehash",e.prehash)}let{bytesToNumberBE:bA,hexToBytes:bx}=mJ;class bI extends Error{constructor(e=""){super(e)}}let bT={Err:bI,_tlv:{encode:(e,t)=>{let{Err:r}=bT;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=mN(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?mN(n.length/2|128):"";return mN(e)+s+n+t},decode(e,t){let{Err:r}=bT,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=bT;if(e<b_)throw new t("integer: negative integers are not allowed");let r=mN(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=bT;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return bA(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=bT,n="string"==typeof e?bx(e):e;mT(n);let{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=i.decode(2,s),{v:c,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=bT,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},b_=BigInt(0),bS=BigInt(1);BigInt(2);let bP=BigInt(3);BigInt(4);let bN=bt(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),bO=function(e,t){let r=t=>(function(e){let t=function(e){let t=bd(e);return mQ(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return m8(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){var t;let r=function(e){let t=bd(e);mQ(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:i}=r,n=bt(r.n,r.nBitLength),s=r.toBytes||((e,t,r)=>{let n=t.toAffine();return mF(Uint8Array.from([4]),i.toBytes(n.x),i.toBytes(n.y))}),o=r.fromBytes||(e=>{let t=e.subarray(1);return{x:i.fromBytes(t.subarray(0,i.BYTES)),y:i.fromBytes(t.subarray(i.BYTES,2*i.BYTES))}});function a(e){let{a:t,b:n}=r,s=i.sqr(e),o=i.mul(s,e);return i.add(i.add(o,i.mul(e,t)),n)}if(!i.eql(i.sqr(r.Gy),a(r.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=r;if(i&&"bigint"!=typeof e){if(mI(e)&&(e=mP(e)),"string"!=typeof e||!i.includes(e.length))throw Error("invalid private key");e=e.padStart(2*n,"0")}try{t="bigint"==typeof e?e:mR(mM("private key",e,n))}catch{throw Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return s&&(t=m8(t,o)),mH("private key",t,bS,o),t}function c(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let u=mY((e,t)=>{let{px:r,py:n,pz:s}=e;if(i.eql(s,i.ONE))return{x:r,y:n};let o=e.is0();null==t&&(t=o?i.ONE:i.inv(s));let a=i.mul(r,t),l=i.mul(n,t),c=i.mul(s,t);if(o)return{x:i.ZERO,y:i.ZERO};if(!i.eql(c,i.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),h=mY(e=>{if(e.is0()){if(r.allowInfinityPoint&&!i.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=e.toAffine();if(!i.isValid(t)||!i.isValid(n))throw Error("bad point: x or y not FE");let s=i.sqr(n),o=a(t);if(!i.eql(s,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!i.isValid(e))throw Error("x required");if(null==t||!i.isValid(t))throw Error("y required");if(null==r||!i.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!i.isValid(t)||!i.isValid(r))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let n=e=>i.eql(e,i.ZERO);return n(t)&&n(r)?d.ZERO:new d(t,r,i.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(o(mM("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}static msm(e,t){return function(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=mV(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o,u=n;for(let e=c;e>=0;e-=o){l.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let t=n;for(let e=l.length-1,r=n;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(d,n,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){let{y:e}=this.toAffine();if(i.isOdd)return!i.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:r,pz:n}=this,{px:s,py:o,pz:a}=e,l=i.eql(i.mul(t,a),i.mul(s,n)),u=i.eql(i.mul(r,a),i.mul(o,n));return l&&u}negate(){return new d(this.px,i.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,n=i.mul(t,bP),{px:s,py:o,pz:a}=this,l=i.ZERO,c=i.ZERO,u=i.ZERO,h=i.mul(s,s),f=i.mul(o,o),p=i.mul(a,a),g=i.mul(s,o);return g=i.add(g,g),u=i.mul(s,a),u=i.add(u,u),l=i.mul(e,u),c=i.mul(n,p),c=i.add(l,c),l=i.sub(f,c),c=i.add(f,c),c=i.mul(l,c),l=i.mul(g,l),u=i.mul(n,u),p=i.mul(e,p),g=i.sub(h,p),g=i.mul(e,g),g=i.add(g,u),u=i.add(h,h),h=i.add(u,h),h=i.add(h,p),h=i.mul(h,g),c=i.add(c,h),p=i.mul(o,a),p=i.add(p,p),h=i.mul(p,g),l=i.sub(l,h),u=i.mul(p,f),u=i.add(u,u),new d(l,c,u=i.add(u,u))}add(e){c(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,u=i.ZERO,h=i.ZERO,f=i.ZERO,p=r.a,g=i.mul(r.b,bP),y=i.mul(t,o),m=i.mul(n,a),b=i.mul(s,l),w=i.add(t,n),v=i.add(o,a);w=i.mul(w,v),v=i.add(y,m),w=i.sub(w,v),v=i.add(t,s);let E=i.add(o,l);return v=i.mul(v,E),E=i.add(y,b),v=i.sub(v,E),E=i.add(n,s),u=i.add(a,l),E=i.mul(E,u),u=i.add(m,b),E=i.sub(E,u),f=i.mul(p,v),u=i.mul(g,b),f=i.add(u,f),u=i.sub(m,f),f=i.add(m,f),h=i.mul(u,f),m=i.add(y,y),m=i.add(m,y),b=i.mul(p,b),v=i.mul(g,v),m=i.add(m,b),b=i.sub(y,b),b=i.mul(p,b),v=i.add(v,b),y=i.mul(m,v),h=i.add(h,y),y=i.mul(E,v),u=i.mul(w,u),u=i.sub(u,y),y=i.mul(w,m),f=i.mul(E,f),new d(u,h,f=i.add(f,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return p.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:n}=r;mH("scalar",e,b_,n);let s=d.ZERO;if(e===b_)return s;if(this.is0()||e===bS)return this;if(!t||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:o,k1:a,k2neg:l,k2:c}=t.splitScalar(e),u=s,h=s,f=this;for(;a>b_||c>b_;)a&bS&&(u=u.add(f)),c&bS&&(h=h.add(f)),f=f.double(),a>>=bS,c>>=bS;return o&&(u=u.negate()),l&&(h=h.negate()),h=new d(i.mul(h.px,t.beta),h.py,h.pz),u.add(h)}multiply(e){let t,n;let{endo:s,n:o}=r;if(mH("scalar",e,bS,o),s){let{k1neg:r,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:h,f:f}=this.wNAF(l);c=p.constTimeNegate(r,c),h=p.constTimeNegate(a,h),h=new d(i.mul(h.px,s.beta),h.py,h.pz),t=c.add(h),n=u.add(f)}else{let{p:r,f:i}=this.wNAF(e);t=r,n=i}return d.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=d.BASE,n=(e,t)=>t!==b_&&t!==bS&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===bS)return!0;if(t)return t(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===bS?this:t?t(d,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return m_("isCompressed",e),this.assertValidity(),s(d,this,e)}toHex(e=!0){return m_("isCompressed",e),mP(this.toRawBytes(e))}}d.BASE=new d(r.Gx,r.Gy,i.ONE),d.ZERO=new d(i.ZERO,i.ONE,i.ZERO);let f=r.nBitLength,p=(t=r.endo?Math.ceil(f/2):f,{constTimeNegate:bo,hasPrecomputes:e=>1!==bh(e),unsafeLadder(e,t,r=d.ZERO){let i=e;for(;t>bn;)t&bs&&(r=r.add(i)),i=i.double(),t>>=bs;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=bl(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=bl(e,t),o=d.ZERO,a=d.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&l);i>>=u,n>s&&(n-=c,i+=bs);let h=t+Math.abs(n)-1,d=e%2!=0,f=n<0;0===n?a=a.add(bo(d,r[t])):o=o.add(bo(f,r[h]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=d.ZERO){let{windows:s,windowSize:o}=bl(e,t),a=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===bn)break;let s=Number(i&a);if(i>>=c,s>o&&(s-=l,i+=bs),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),n=n.add(u)}return n},getPrecomputes(e,t,r){let i=bc.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&bc.set(t,r(i))),i},wNAFCached(e,t,r){let i=bh(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=bh(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){ba(r,t),bu.set(e,r),bc.delete(e)}});return{CURVE:r,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:function(e){return mj(e,bS,r.n)}}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x);return m_("isCompressed",i),i?mF(Uint8Array.from([t.hasEvenY()?2:3]),s):mF(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e;let t=mR(o);if(!mj(t,bS,r.ORDER))throw Error("Point is not on curve");let n=c(t);try{e=r.sqrt(n)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&i)==1!=((e&bS)===bS)&&(e=r.neg(e)),{x:t,y:e}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+n+", or uncompressed "+s+", got "+t)}}),h=e=>mP(mL(e,t.nByteLength)),d=(e,t,r)=>mR(e.slice(t,r));class f{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new f(d(e=mM("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=bT.toSig(mM("DER",e));return new f(t,r)}assertValidity(){mH("r",this.r,bS,i),mH("s",this.s,bS,i)}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:s,recovery:l}=this,c=y(mM("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",f=a.fromHex(d+h(u)),p=m7(u,i),g=o(-c*p),m=o(s*p),b=a.BASE.multiplyAndAddUnsafe(f,g,m);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>i>>bS}normalizeS(){return this.hasHighS()?new f(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return mB(this.toDERHex())}toDERHex(){return bT.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mB(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function p(e){let t=mI(e),r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=mR(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},y=t.bits2int_modN||function(e){return o(g(e))},m=mz(t.nBitLength);function b(e){return mH("num < 2^"+t.nBitLength,e,b_,m),mL(e,t.nByteLength)}let w={lowS:t.lowS,prehash:!1},v={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=w){let{seed:c,k2sig:h}=function(e,n,s=w){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:p,extraEntropy:m}=s;null==d&&(d=!0),e=mM("msgHash",e),bE(s),p&&(e=mM("prehashed msgHash",c(e)));let v=y(e),E=l(n),A=[b(E),b(v)];if(null!=m&&!1!==m){let e=!0===m?h(r.BYTES):m;A.push(mM("extraEntropy",e))}return{seed:mF(...A),k2sig:function(e){let t=g(e);if(!u(t))return;let r=m7(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===b_)return;let l=o(r*o(v+s*E));if(l===b_)return;let c=(n.x===s?0:2)|Number(n.y&bS),h=l;return d&&l>i>>bS&&(h=l>i>>bS?o(-l):l,c^=1),new f(s,h,c)}}}(e,n,s);return mK(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=v){let l,c;r=mM("msgHash",r),n=mM("publicKey",n);let{lowS:u,prehash:h,format:d}=s;if(bE(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw Error("format must be compact or der");let p="string"==typeof e||mI(e),g=!p&&!d&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!p&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(l=new f(e.r,e.s)),p){try{"compact"!==d&&(l=f.fromDER(e))}catch(e){if(!(e instanceof bT.Err))throw e}l||"der"===d||(l=f.fromCompact(e))}c=a.fromHex(n)}catch{return!1}if(!l||u&&l.hasHighS())return!1;h&&(r=t.hash(r));let{r:m,s:b}=l,w=y(r),E=m7(b,i),A=o(w*E),x=o(m*E),I=a.BASE.multiplyAndAddUnsafe(c,A,x)?.toAffine();return!!I&&o(I.x)===m},ProjectivePoint:a,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=bi(t.n);return function(e,t,r=!1){let i=e.length,n=br(t),s=bi(t);if(i<16||i<s||i>1024)throw Error("expected "+s+"-1024 bytes of input, got "+i);let o=m8(r?mD(e):mR(e),t-mX)+mX;return r?mU(o,n):mL(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>mh(t,e,function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];gQ(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}(...r)),randomBytes:yi});return{...r(t),create:r}}({a:bN.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:bN,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},mv),bk="base10",bC="base16",bB="base64pad",bR="base64url",bD="utf8";function bL(){return gc(yi(32),bC)}function bU(e){return gc(mv(gl(e,bC)),bC)}function bM(e){return gc(mv(gl(e,bD)),bC)}function bF(e){return Number(gc(e,bk))}function b$(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function bj(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function bH(e){if(2===bF(e.type))return gc(fZ([e.type,e.sealed]),bB);if(1===bF(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return gc(fZ([e.type,e.senderPublicKey,e.iv,e.sealed]),bB)}return gc(fZ([e.type,e.iv,e.sealed]),bB)}function bV(e){let t=gl((e.encoding||bB)===bR?bj(e.encoded):e.encoded,bB),r=t.slice(0,1);if(1===bF(r)){let e=t.slice(1,33),i=t.slice(33,45);return{type:r,sealed:t.slice(45),iv:i,senderPublicKey:e}}if(2===bF(r))return{type:r,sealed:t.slice(1),iv:yi(12)};let i=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:i}}function bz(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function bG(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function bq(e){return e?.relay||{protocol:"irn"}}function bK(e){let t=gu[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}function bW(e){var t;if(!e.includes("wc:")){let t=gK(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o="u">typeof i?e.substring(i):"",a=new URLSearchParams(o),l={};a.forEach((e,t)=>{l[t]=e});let c="string"==typeof l.methods?l.methods.split(","):void 0;return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:l.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(l),methods:c,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function bQ(e){let t=new URLSearchParams,r=function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay);Object.keys(r).sort().forEach(e=>{t.set(e,r[e])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));let i=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${i}`}function bY(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function bJ(e){let t=[];return e.forEach(e=>{let[r,i]=e.split(":");t.push(`${r}:${i}`)}),t}function bZ(e,t){let r=function(e){let t={};return e?.forEach(e=>{var r;let[i,n]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(e),null==(r=t[i].chains)||r.push(`${i}:${n}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(let[t,i]of Object.entries(r))i.methods?i.methods=function(e=[],t=[]){return[...new Set([...e,...t])]}(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let bX={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},b0={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function b1(e,t){let{message:r,code:i}=b0[e];return{message:t?`${r} ${t}`:r,code:i}}function b2(e,t){let{message:r,code:i}=bX[e];return{message:t?`${r} ${t}`:r,code:i}}function b3(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function b4(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function b8(e){return typeof e>"u"}function b5(e,t){return!!(t&&b8(e))||"string"==typeof e&&!!e.trim().length}function b6(e,t){return!!(t&&b8(e))||"number"==typeof e&&!isNaN(e)}function b7(e){return!!(b5(e,!1)&&e.includes(":"))&&2===e.split(":").length}function b9(e){let t=!0;return b3(e)?e.length&&(t=e.every(e=>b5(e,!1))):t=!1,t}function we(e,t){let r=null;return Object.values(e).forEach(e=>{var i;let n;if(r)return;let s=(i=`${t}, namespace`,n=null,b9(e?.methods)?b9(e?.events)||(n=b2("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):n=b2("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),n);s&&(r=s)}),r}function wt(e,t){let r=null;if(e&&b4(e)){let i;let n=we(e,t);n&&(r=n);let s=(i=null,Object.values(e).forEach(e=>{var r,n;let s;if(i)return;let o=(r=e?.accounts,n=`${t} namespace`,s=null,b3(r)?r.forEach(e=>{s||function(e){if(b5(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&b7(e)}}return!1}(e)||(s=b2("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=b2("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(i=o)}),i);s&&(r=s)}else r=b1("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function wr(e){return b5(e.protocol,!0)}function wi(e){return"u">typeof e}function wn(e,t){return!(!b7(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...bJ(e.accounts))}),t})(e).includes(t))}function ws(e,t,r){let i=null,n=function(e){let t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let i=bJ(e[r].accounts);i?.forEach(i=>{t[i]={accounts:e[r].accounts.filter(e=>e.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(n),a=Object.keys(s),l=wo(Object.keys(e)),c=wo(Object.keys(t)),u=l.filter(e=>!c.includes(e));return u.length&&(i=b1("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),gC(o,a)||(i=b1("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||i)return;let n=bJ(t[e].accounts);n.includes(e)||(i=b1("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${n.toString()}`))}),o.forEach(e=>{i||(gC(n[e].methods,s[e].methods)?gC(n[e].events,s[e].events)||(i=b1("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=b1("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),i}function wo(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function wa(){let e=gP();return new Promise(t=>{switch(e){case gI.browser:t(gS()&&navigator?.onLine);break;case gI.reactNative:t(wl());break;case gI.node:default:t(!0)}})}async function wl(){if(g_()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo){let e=await (null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}let wc={};class wu{static get(e){return wc[e]}static set(e,t){wc[e]=t}static delete(e){delete wc[e]}}let wh="INTERNAL_ERROR",wd="SERVER_ERROR",wf=[-32700,-32600,-32601,-32602,-32603],wp={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[wh]:{code:-32603,message:"Internal error"},[wd]:{code:-32e3,message:"Server error"}};function wg(e){return Object.keys(wp).includes(e)?wp[e]:wp[wd]}var wy=r(498);function wm(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function wb(e=6){return BigInt(wm(e))}function ww(e,t,r){return{id:r||wm(),jsonrpc:"2.0",method:e,params:t}}function wv(e,t){return{id:e,jsonrpc:"2.0",result:t}}function wE(e,t,r){var i,n,s;return{id:e,jsonrpc:"2.0",error:void 0===(i=t)?wg(wh):("string"==typeof i&&(i=Object.assign(Object.assign({},wg(wd)),{message:i})),void 0!==r&&(i.data=r),n=i.code,wf.includes(n)&&(s=i.code,i=Object.values(wp).find(e=>e.code===s)||wp[wd]),i)}}class wA{}class wx extends wA{constructor(){super()}}class wI extends wx{constructor(e){super()}}function wT(e){return function(e,t){let r=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}(e,"^wss?:")}function w_(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function wS(e){return w_(e)&&"method"in e}function wP(e){return w_(e)&&(wN(e)||wO(e))}function wN(e){return"result"in e}function wO(e){return"error"in e}class wk extends wI{constructor(e){super(e),this.events=new F.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(ww(e.method,e.params||[],e.id||wb().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(e){i(e)}this.events.on(`${e.id}`,e=>{wO(e)?i(e.error):r(e.result)});try{await this.connection.send(e,t)}catch(e){i(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),wP(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}let wC=()=>"u">typeof WebSocket||"u">typeof r.g&&"u">typeof r.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,wB=e=>e.split("?")[0],wR="u">typeof WebSocket?WebSocket:"u">typeof r.g&&"u">typeof r.g.WebSocket?r.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:r(6475);class wD{constructor(e){if(this.url=e,this.events=new F.EventEmitter,this.registering=!1,!wT(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(Error("Connection already closed"));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(cQ(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!wT(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{let i=(0,wy.isReactNative)()?void 0:{rejectUnauthorized:!RegExp("wss?://localhost(:d{2,5})?").test(e)},n=new wR(e,[],i);wC()?n.onerror=e=>{r(this.emitError(e.error))}:n.on("error",e=>{r(this.emitError(e))}),n.onopen=()=>{this.onOpen(n),t(n)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?cW(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=wE(e,r.message||r.toString());this.events.emit("payload",i)}parseError(e,t=this.url){var r;return r=wB(t),e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable WS RPC url at ${r}`):e}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${wB(this.url)}`));return this.events.emit("register_error",t),t}}var wL=r(6593).lW,wU=r(9792);let wM="core",wF=`wc@2:${wM}:`,w$={logger:"error"},wj={database:":memory:"},wH="client_ed25519_seed",wV=cA.ONE_DAY,wz=cA.SIX_HOURS,wG="wss://relay.walletconnect.org",wq={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},wK={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},wW="2.19.2",wQ={link_mode:"link_mode",relay:"relay"},wY={inbound:"inbound",outbound:"outbound"},wJ="WALLETCONNECT_LINK_MODE_APPS",wZ={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},wX=(cA.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:cA.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:cA.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:cA.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:cA.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:cA.ONE_DAY,prompt:!1,tag:0},res:{ttl:cA.ONE_DAY,prompt:!1,tag:0}}}),w0={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},w1={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},w2={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},w3="https://verify.walletconnect.org",w4=`${w3}/v3`,w8=["https://verify.walletconnect.com",w3],w5={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},w6={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},w7={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},w9={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ve={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},vt={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var vr=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===l;)i++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,c=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,f=o-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*c[f]>>>0,c[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===c[p];)p++;for(var g=l.repeat(r);p<o;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};let vi=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},vn=e=>new TextEncoder().encode(e),vs=e=>new TextDecoder().decode(e);class vo{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class va{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return vc(this,e)}}class vl{constructor(e){this.decoders=e}or(e){return vc(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let vc=(e,t)=>new vl({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class vu{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new vo(e,t,r),this.decoder=new va(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let vh=({name:e,prefix:t,encode:r,decode:i})=>new vu(e,t,r,i),vd=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=vr(r,t);return vh({prefix:e,name:t,encode:i,decode:e=>vi(n(e))})},vf=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,l=0,c=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);l=l<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw SyntaxError("Unexpected end of data");return o},vp=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},vg=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>vh({prefix:t,name:e,encode:e=>vp(e,i,r),decode:t=>vf(t,i,r,e)});var vy=Object.freeze({__proto__:null,identity:vh({prefix:"\x00",name:"identity",encode:e=>vs(e),decode:e=>vn(e)})}),vm=Object.freeze({__proto__:null,base2:vg({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),vb=Object.freeze({__proto__:null,base8:vg({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),vw=Object.freeze({__proto__:null,base10:vd({prefix:"9",name:"base10",alphabet:"0123456789"})}),vv=Object.freeze({__proto__:null,base16:vg({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:vg({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let vE=vg({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vA=vg({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vx=vg({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vI=vg({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vT=vg({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),v_=vg({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var vS=Object.freeze({__proto__:null,base32:vE,base32upper:vA,base32pad:vx,base32padupper:vI,base32hex:vT,base32hexupper:v_,base32hexpad:vg({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:vg({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:vg({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),vP=Object.freeze({__proto__:null,base36:vd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:vd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),vN=Object.freeze({__proto__:null,base58btc:vd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:vd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let vO=vg({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var vk=Object.freeze({__proto__:null,base64:vO,base64pad:vg({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:vg({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:vg({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let vC=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),vB=vC.reduce((e,t,r)=>(e[r]=t,e),[]),vR=vC.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var vD=Object.freeze({__proto__:null,base256emoji:vh({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=vB[t],"")},decode:function(e){let t=[];for(let r of e){let e=vR[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})}),vL={encode:function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},decode:function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let vU=(e,t,r=0)=>(vL.encode(e,t,r),t),vM=e=>vL.encodingLength(e),vF=(e,t)=>{let r=t.byteLength,i=vM(e),n=i+vM(r),s=new Uint8Array(n+r);return vU(e,s,0),vU(r,s,i),s.set(t,n),new v$(e,r,t,s)};class v${constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let vj=({name:e,code:t,encode:r})=>new vH(e,t,r);class vH{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?vF(this.code,t):t.then(e=>vF(this.code,e))}throw Error("Unknown type, must be binary type")}}let vV=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var vz=Object.freeze({__proto__:null,sha256:vj({name:"sha2-256",code:18,encode:vV("SHA-256")}),sha512:vj({name:"sha2-512",code:19,encode:vV("SHA-512")})}),vG=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:vi,digest:e=>vF(0,vi(e))}});new TextEncoder,new TextDecoder;let vq={...vy,...vm,...vb,...vw,...vv,...vS,...vP,...vN,...vk,...vD};function vK(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...vz,...vG});let vW=vK("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),vQ=vK("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),vY={utf8:vW,"utf-8":vW,hex:vq.base16,latin1:vQ,ascii:vQ,binary:vQ,...vq};var vJ=Object.defineProperty,vZ=(e,t,r)=>t in e?vJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vX=(e,t,r)=>vZ(e,"symbol"!=typeof t?t+"":t,r);class v0{constructor(e,t){this.core=e,this.logger=t,vX(this,"keychain",new Map),vX(this,"name","keychain"),vX(this,"version","0.3"),vX(this,"initialized",!1),vX(this,"storagePrefix",wF),vX(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),vX(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),vX(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),vX(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=b1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),vX(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=ug(t,this.name)}get context(){return up(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,gB(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?gR(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}}var v1=Object.defineProperty,v2=(e,t,r)=>t in e?v1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v3=(e,t,r)=>v2(e,"symbol"!=typeof t?t+"":t,r);class v4{constructor(e,t,r){this.core=e,this.logger=t,v3(this,"name","crypto"),v3(this,"keychain"),v3(this,"randomSessionIdentifier",bL()),v3(this,"initialized",!1),v3(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),v3(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),v3(this,"getClientId",async()=>(this.isInitialized(),dK(dQ(await this.getClientSeed()).publicKey))),v3(this,"generateKeyPair",()=>{this.isInitialized();let e=function(){let e=bv.utils.randomPrivateKey(),t=bv.getPublicKey(e);return{privateKey:gc(e,bC),publicKey:gc(t,bC)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),v3(this,"signJWT",async e=>{this.isInitialized();let t=dQ(await this.getClientSeed()),r=this.randomSessionIdentifier;return await dY(r,e,wV,t)}),v3(this,"generateSharedKey",(e,t,r)=>{var i;this.isInitialized();let n=(i=this.getPrivateKey(e),gc(mp(mv,bv.getSharedSecret(gl(i,bC),gl(t,bC)),void 0,void 0,32),bC));return this.setSymKey(n,r)}),v3(this,"setSymKey",async(e,t)=>{this.isInitialized();let r=t||bU(e);return await this.keychain.set(r,e),r}),v3(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),v3(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),v3(this,"encode",async(e,t,r)=>{this.isInitialized();let i=bz(r),n=cQ(t);if(2===i.type)return function(e,t){let r=gl("2",bk),i=yi(12),n=bH({type:r,sealed:gl(e,bD),iv:i});return t===bR?b$(n):n}(n,r?.encoding);if(bG(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){var t;let r=(t="u">typeof e.type?e.type:0,gl(`${t}`,bk));if(1===bF(r)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let i="u">typeof e.senderPublicKey?gl(e.senderPublicKey,bC):void 0,n="u">typeof e.iv?gl(e.iv,bC):yi(12),s=bH({type:r,sealed:mc(gl(e.symKey,bC),n).encrypt(gl(e.message,bD)),iv:n,senderPublicKey:i});return e.encoding===bR?b$(s):s}({type:o,symKey:s,message:n,senderPublicKey:a,encoding:r?.encoding})}),v3(this,"decode",async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=bV({encoded:e,encoding:t?.encoding});return bz({type:bF(r.type),senderPublicKey:"u">typeof r.senderPublicKey?gc(r.senderPublicKey,bC):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===i.type)return cW(function(e,t){let{sealed:r}=bV({encoded:e,encoding:t});return gc(r,bD)}(t,r?.encoding));if(bG(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let i=this.getSymKey(e),n=function(e){let t=gl(e.symKey,bC),{sealed:r,iv:i}=bV({encoded:e.encoded,encoding:e.encoding}),n=mc(t,i).decrypt(r);if(null===n)throw Error("Failed to decrypt");return gc(n,bD)}({symKey:i,encoded:t,encoding:r?.encoding});return cW(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),v3(this,"getPayloadType",(e,t=bB)=>bF(bV({encoded:e,encoding:t}).type)),v3(this,"getPayloadSenderPublicKey",(e,t=bB)=>{let r=bV({encoded:e,encoding:t});return r.senderPublicKey?gc(r.senderPublicKey,bC):void 0}),this.core=e,this.logger=ug(t,this.name),this.keychain=r||new v0(this.core,this.logger)}get context(){return up(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(wH)}catch{e=bL(),await this.keychain.set(wH,e)}return function(e,t="utf8"){let r=vY[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}}var v8=Object.defineProperty,v5=Object.defineProperties,v6=Object.getOwnPropertyDescriptors,v7=Object.getOwnPropertySymbols,v9=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Et=(e,t,r)=>t in e?v8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Er=(e,t)=>{for(var r in t||(t={}))v9.call(t,r)&&Et(e,r,t[r]);if(v7)for(var r of v7(t))Ee.call(t,r)&&Et(e,r,t[r]);return e},Ei=(e,t)=>v5(e,v6(t)),En=(e,t,r)=>Et(e,"symbol"!=typeof t?t+"":t,r);class Es extends uI{constructor(e,t){super(e,t),this.logger=e,this.core=t,En(this,"messages",new Map),En(this,"messagesWithoutClientAck",new Map),En(this,"name","messages"),En(this,"version","0.3"),En(this,"initialized",!1),En(this,"storagePrefix",wF),En(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e);let t=await this.getRelayerMessagesWithoutClientAck();"u">typeof t&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),En(this,"set",async(e,t,r)=>{this.isInitialized();let i=bM(t),n=this.messages.get(e);if(typeof n>"u"&&(n={}),"u">typeof n[i])return i;if(n[i]=t,this.messages.set(e,n),r===wY.inbound){let r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,Ei(Er({},r),{[i]:t}))}return await this.persist(),i}),En(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),En(this,"getWithoutAck",e=>{this.isInitialized();let t={};for(let r of e){let e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t}),En(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[bM(t)])),En(this,"ack",async(e,t)=>{this.isInitialized();let r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;let i=bM(t);delete r[i],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()}),En(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()}),this.logger=ug(e,this.name),this.core=t}get context(){return up(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,gB(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,gB(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?gR(e):void 0}async getRelayerMessagesWithoutClientAck(){let e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return"u">typeof e?gR(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}}var Eo=Object.defineProperty,Ea=Object.defineProperties,El=Object.getOwnPropertyDescriptors,Ec=Object.getOwnPropertySymbols,Eu=Object.prototype.hasOwnProperty,Eh=Object.prototype.propertyIsEnumerable,Ed=(e,t,r)=>t in e?Eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ef=(e,t)=>{for(var r in t||(t={}))Eu.call(t,r)&&Ed(e,r,t[r]);if(Ec)for(var r of Ec(t))Eh.call(t,r)&&Ed(e,r,t[r]);return e},Ep=(e,t)=>Ea(e,El(t)),Eg=(e,t,r)=>Ed(e,"symbol"!=typeof t?t+"":t,r);class Ey extends uT{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Eg(this,"events",new F.EventEmitter),Eg(this,"name","publisher"),Eg(this,"queue",new Map),Eg(this,"publishTimeout",(0,cA.toMiliseconds)(cA.ONE_MINUTE)),Eg(this,"initialPublishTimeout",(0,cA.toMiliseconds)(15*cA.ONE_SECOND)),Eg(this,"needsTransportRestart",!1),Eg(this,"publish",async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let n=r?.ttl||wz,s=bq(r),o=r?.prompt||!1,a=r?.tag||0,l=r?.id||wb().toString(),c={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:l,attestation:r?.attestation,tvf:r?.tvf}},u=`Failed to publish payload, please try again. id:${l} tag:${a}`;try{let i=new Promise(async i=>{let s=({id:e})=>{c.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(wq.publish,s),i(c))};this.relayer.events.on(wq.publish,s);let u=gL(new Promise((i,s)=>{this.rpcPublish({topic:e,message:t,ttl:n,prompt:o,tag:a,id:l,attestation:r?.attestation,tvf:r?.tvf}).then(i).catch(e=>{this.logger.warn(e,e?.message),s(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${l} tag:${a}`);try{await u,this.events.removeListener(wq.publish,s)}catch(e){this.queue.set(l,Ep(Ef({},c),{attempt:1})),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:l,topic:e,message:t,opts:r}}),await gL(i,this.publishTimeout,u)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(i=r?.internal)&&i.throwOnFailedPublish)throw e}finally{this.queue.delete(l)}}),Eg(this,"on",(e,t)=>{this.events.on(e,t)}),Eg(this,"once",(e,t)=>{this.events.once(e,t)}),Eg(this,"off",(e,t)=>{this.events.off(e,t)}),Eg(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=ug(t,this.name),this.registerEventListeners()}get context(){return up(this.logger)}async rpcPublish(e){var t,r,i,n;let{topic:s,message:o,ttl:a=wz,prompt:l,tag:c,id:u,attestation:h,tvf:d}=e,f={method:bK(bq().protocol).publish,params:Ef({topic:s,message:o,ttl:a,prompt:l,tag:c,attestation:h},d),id:u};b8(null==(t=f.params)?void 0:t.prompt)&&(null==(r=f.params)||delete r.prompt),b8(null==(i=f.params)?void 0:i.tag)&&(null==(n=f.params)||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});let p=await this.relayer.request(f);return this.relayer.events.emit(wq.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{let r=e.attempt+1;this.queue.set(t,Ep(Ef({},e),{attempt:r}));let{topic:i,message:n,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Ep(Ef({},e),{topic:i,message:n,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(c_.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(wq.connection_stalled);return}this.checkQueue()}),this.relayer.on(wq.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Em=Object.defineProperty,Eb=(e,t,r)=>t in e?Em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ew=(e,t,r)=>Eb(e,"symbol"!=typeof t?t+"":t,r);class Ev{constructor(){Ew(this,"map",new Map),Ew(this,"set",(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),Ew(this,"get",e=>this.map.get(e)||[]),Ew(this,"exists",(e,t)=>this.get(e).includes(t)),Ew(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Ew(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var EE=Object.defineProperty,EA=Object.defineProperties,Ex=Object.getOwnPropertyDescriptors,EI=Object.getOwnPropertySymbols,ET=Object.prototype.hasOwnProperty,E_=Object.prototype.propertyIsEnumerable,ES=(e,t,r)=>t in e?EE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EP=(e,t)=>{for(var r in t||(t={}))ET.call(t,r)&&ES(e,r,t[r]);if(EI)for(var r of EI(t))E_.call(t,r)&&ES(e,r,t[r]);return e},EN=(e,t)=>EA(e,Ex(t)),EO=(e,t,r)=>ES(e,"symbol"!=typeof t?t+"":t,r);class Ek extends uP{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,EO(this,"subscriptions",new Map),EO(this,"topicMap",new Ev),EO(this,"events",new F.EventEmitter),EO(this,"name","subscription"),EO(this,"version","0.3"),EO(this,"pending",new Map),EO(this,"cached",[]),EO(this,"initialized",!1),EO(this,"storagePrefix",wF),EO(this,"subscribeTimeout",(0,cA.toMiliseconds)(cA.ONE_MINUTE)),EO(this,"initialSubscribeTimeout",(0,cA.toMiliseconds)(15*cA.ONE_SECOND)),EO(this,"clientId"),EO(this,"batchSubscribeTopicsLimit",500),EO(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),EO(this,"subscribe",async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=bq(t),i={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,i);let n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),EO(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),EO(this,"isSubscribed",e=>new Promise(t=>{t(this.topicMap.topics.includes(e))})),EO(this,"isKnownTopic",e=>new Promise(t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some(t=>t.topic===e))})),EO(this,"on",(e,t)=>{this.events.on(e,t)}),EO(this,"once",(e,t)=>{this.events.once(e,t)}),EO(this,"off",(e,t)=>{this.events.off(e,t)}),EO(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),EO(this,"start",async()=>{await this.onConnect()}),EO(this,"stop",async()=>{await this.onDisconnect()}),EO(this,"restart",async()=>{await this.restore(),await this.onRestart()}),EO(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),EO(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(c_.pulse,async()=>{await this.checkPending()}),this.events.on(wZ.created,async e=>{let t=wZ.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(wZ.deleted,async e=>{let t=wZ.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}),this.relayer=e,this.logger=ug(t,this.name),this.clientId=""}get context(){return up(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=bq(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);let n=b2("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i;r&&r?.transportType!==wQ.relay||await this.restartToComplete({topic:e,id:e,relay:t});let n={method:bK(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{let t=await this.getSubscriptionId(e);if(r?.transportType===wQ.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(e=>this.logger.warn(e))},(0,cA.toMiliseconds)(cA.ONE_SECOND)),t;let i=new Promise(async t=>{let r=i=>{i.topic===e&&(this.events.removeListener(wZ.created,r),t(i.id))};this.events.on(wZ.created,r);try{let i=await gL(new Promise((e,t)=>{this.relayer.request(n).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(wZ.created,r),t(i)}catch{}}),o=await gL(i,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(wq.connection_stalled),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:bK(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await gL(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(wq.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:bK(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await gL(new Promise((e,t)=>{this.relayer.request(r).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(wq.connection_stalled)}return t}rpcUnsubscribe(e,t,r){let i={method:bK(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,EN(EP({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,EP({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,EP({},t)),this.topicMap.set(t.topic,e),this.events.emit(wZ.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=b1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(wZ.deleted,EN(EP({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wZ.sync)}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(wZ.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=b1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>EN(EP({},e),{id:await this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await (t=(0,cA.toMiliseconds)(cA.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return bM(e+await this.getClientId())}}var EC=Object.defineProperty,EB=Object.getOwnPropertySymbols,ER=Object.prototype.hasOwnProperty,ED=Object.prototype.propertyIsEnumerable,EL=(e,t,r)=>t in e?EC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EU=(e,t)=>{for(var r in t||(t={}))ER.call(t,r)&&EL(e,r,t[r]);if(EB)for(var r of EB(t))ED.call(t,r)&&EL(e,r,t[r]);return e},EM=(e,t,r)=>EL(e,"symbol"!=typeof t?t+"":t,r);class EF extends u_{constructor(e){super(e),EM(this,"protocol","wc"),EM(this,"version",2),EM(this,"core"),EM(this,"logger"),EM(this,"events",new F.EventEmitter),EM(this,"provider"),EM(this,"messages"),EM(this,"subscriber"),EM(this,"publisher"),EM(this,"name","relayer"),EM(this,"transportExplicitlyClosed",!1),EM(this,"initialized",!1),EM(this,"connectionAttemptInProgress",!1),EM(this,"relayUrl"),EM(this,"projectId"),EM(this,"packageName"),EM(this,"bundleId"),EM(this,"hasExperiencedNetworkDisruption",!1),EM(this,"pingTimeout"),EM(this,"heartBeatTimeout",(0,cA.toMiliseconds)(cA.THIRTY_SECONDS+cA.FIVE_SECONDS)),EM(this,"reconnectTimeout"),EM(this,"connectPromise"),EM(this,"reconnectInProgress",!1),EM(this,"requestsInFlight",[]),EM(this,"connectTimeout",(0,cA.toMiliseconds)(15*cA.ONE_SECOND)),EM(this,"request",async e=>{var t,r;this.logger.debug("Publishing Request Payload");let i=e.id||wb().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let n=`${i}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);let s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==n),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}}),EM(this,"resetPingTimeout",()=>{gT()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,r,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(i=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||i.call(r)}catch(e){this.logger.warn(e,e?.message)}},this.heartBeatTimeout))}),EM(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),EM(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit(wq.connect)}),EM(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),EM(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(wq.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),EM(this,"registerProviderListeners",()=>{this.provider.on(wK.payload,this.onPayloadHandler),this.provider.on(wK.connect,this.onConnectHandler),this.provider.on(wK.disconnect,this.onDisconnectHandler),this.provider.on(wK.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?ug(e.logger,this.name):c5()(uf({level:e.logger||"error"})),this.messages=new Es(this.logger,e.core),this.subscriber=new Ek(this,this.logger),this.publisher=new Ey(this,this.logger),this.relayUrl=e?.relayUrl||wG,this.projectId=e.projectId,g_()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="android"?this.packageName=gN():g_()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="ios"&&(this.bundleId=gN()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return up(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0||void 0!==this.connectPromise}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:wQ.relay},wY.outbound)}async subscribe(e,t){var r,i,n;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish),o=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"",a,l=t=>{t.topic===e&&(this.subscriber.off(wZ.created,l),a())};return await Promise.all([new Promise(e=>{a=e,this.subscriber.on(wZ.created,l)}),new Promise(async(r,i)=>{o=await this.subscriber.subscribe(e,EU({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&i(e)})||o,r()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await gL(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await wa())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=gF(cA.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(wq.message,e),await this.recordMessageEvent(e,wY.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(wK.disconnect,r),await gL(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(wK.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(wK.disconnect,r),await this.subscriber.start().then(e).catch(t).finally(()=>{this.provider.off(wK.disconnect,r)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,cA.toMiliseconds)(1*t))),t++}}startPingTimeout(){var e,t,r,i,n;if(gT())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(i=null==(r=this.provider)?void 0:r.connection)?void 0:i.socket)||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new wk(new wD(function({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:l}){let c=r.split("?"),u=gk(e,t,i),h=function(e,t){let r=new URLSearchParams(e);for(let e of Object.keys(t).sort())if(t.hasOwnProperty(e)){let i=t[e];void 0!==i&&r.set(e,i)}return r.toString()}(c[1]||"",{auth:n,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:l||void 0,bundleId:a||void 0});return c[0]+"?"+h}({sdkVersion:wW,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){let{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),wS(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:wQ.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(EU({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else wP(e)&&this.events.emit(wq.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,wY.inbound),this.events.emit(wq.message,e))}async acknowledgePayload(e){let t=wv(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(wK.payload,this.onPayloadHandler),this.provider.off(wK.connect,this.onConnectHandler),this.provider.off(wK.disconnect,this.onDisconnectHandler),this.provider.off(wK.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await wa();!function(e){switch(gP()){case gI.browser:!g_()&&gS()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case gI.reactNative:g_()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener(t=>e(t?.isConnected));case gI.node:}}(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(wq.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,cA.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),this.connected||await this.connect()}}function E$(){}function Ej(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function EH(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function EV(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let Ez="[object Arguments]",EG="[object Object]";var Eq=Object.defineProperty,EK=Object.getOwnPropertySymbols,EW=Object.prototype.hasOwnProperty,EQ=Object.prototype.propertyIsEnumerable,EY=(e,t,r)=>t in e?Eq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EJ=(e,t)=>{for(var r in t||(t={}))EW.call(t,r)&&EY(e,r,t[r]);if(EK)for(var r of EK(t))EQ.call(t,r)&&EY(e,r,t[r]);return e},EZ=(e,t,r)=>EY(e,"symbol"!=typeof t?t+"":t,r);class EX extends uS{constructor(e,t,r,i=wF,n){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,EZ(this,"map",new Map),EZ(this,"version","0.3"),EZ(this,"cached",[]),EZ(this,"initialized",!1),EZ(this,"getKey"),EZ(this,"storagePrefix",wF),EZ(this,"recentlyDeleted",[]),EZ(this,"recentlyDeletedLimit",200),EZ(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!b8(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),EZ(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),EZ(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),EZ(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>(function e(t,r,i,n,s,o,a){let l=a(t,r,i,n,s,o);if(void 0!==l)return l;if(typeof t==typeof r)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===r;case"number":return t===r||Object.is(t,r)}return function t(r,i,n,s){if(Object.is(r,i))return!0;let o=EV(r),a=EV(i);if(o===Ez&&(o=EG),a===Ez&&(a=EG),o!==a)return!1;switch(o){case"[object String]":return r.toString()===i.toString();case"[object Number]":{let e=r.valueOf(),t=i.valueOf();return e===t||Number.isNaN(e)&&Number.isNaN(t)}case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(r.valueOf(),i.valueOf());case"[object RegExp]":return r.source===i.source&&r.flags===i.flags;case"[object Function]":return r===i}let l=(n=n??new Map).get(r),c=n.get(i);if(null!=l&&null!=c)return l===i;n.set(r,i),n.set(i,r);try{switch(o){case"[object Map]":if(r.size!==i.size)return!1;for(let[t,o]of r.entries())if(!i.has(t)||!e(o,i.get(t),t,r,i,n,s))return!1;return!0;case"[object Set]":{if(r.size!==i.size)return!1;let t=Array.from(r.values()),o=Array.from(i.values());for(let a=0;a<t.length;a++){let l=t[a],c=o.findIndex(t=>e(l,t,void 0,r,i,n,s));if(-1===c)return!1;o.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if("u">typeof wL&&wL.isBuffer(r)!==wL.isBuffer(i)||r.length!==i.length)return!1;for(let t=0;t<r.length;t++)if(!e(r[t],i[t],t,r,i,n,s))return!1;return!0;case"[object ArrayBuffer]":return r.byteLength===i.byteLength&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object DataView]":return r.byteLength===i.byteLength&&r.byteOffset===i.byteOffset&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object Error]":return r.name===i.name&&r.message===i.message;case EG:{if(!(t(r.constructor,i.constructor,n,s)||Ej(r)&&Ej(i)))return!1;let o=[...Object.keys(r),...EH(r)],a=[...Object.keys(i),...EH(i)];if(o.length!==a.length)return!1;for(let t=0;t<o.length;t++){let a=o[t],l=r[a];if(!Object.hasOwn(i,a))return!1;let c=i[a];if(!e(l,c,a,r,i,n,s))return!1}return!0}default:return!1}}finally{n.delete(r),n.delete(i)}}(t,r,o,a)})(t[r],e[r],void 0,void 0,void 0,void 0,E$))):this.values)),EZ(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=EJ(EJ({},this.getData(e)),t);this.map.set(e,r),await this.persist()}),EZ(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=ug(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return up(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=b1("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=b1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=b1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}}var E0=Object.defineProperty,E1=(e,t,r)=>t in e?E0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E2=(e,t,r)=>E1(e,"symbol"!=typeof t?t+"":t,r);class E3{constructor(e,t){this.core=e,this.logger=t,E2(this,"name","pairing"),E2(this,"version","0.3"),E2(this,"events",new($())),E2(this,"pairings"),E2(this,"initialized",!1),E2(this,"storagePrefix",wF),E2(this,"ignoredPayloadTypes",[1]),E2(this,"registeredMethods",[]),E2(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),E2(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),E2(this,"create",async e=>{this.isInitialized();let t=bL(),r=await this.core.crypto.setSymKey(t),i=gF(cA.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},o=bQ({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(w0.create,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}}),E2(this,"pair",async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[w5.pairing_started]}});this.isValidPair(e,r);let{topic:i,symKey:n,relay:s,expiryTimestamp:o,methods:a}=bW(e.uri);if(r.props.properties.topic=i,r.addTrace(w5.pairing_uri_validation_success),r.addTrace(w5.pairing_uri_not_expired),this.pairings.keys.includes(i)){if(t=this.pairings.get(i),r.addTrace(w5.existing_pairing),t.active)throw r.setError(w6.active_pairing_already_exists),Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);r.addTrace(w5.pairing_not_expired)}let l=o||gF(cA.FIVE_MINUTES),c={topic:i,relay:s,expiry:l,active:!1,methods:a};this.core.expirer.set(i,l),await this.pairings.set(i,c),r.addTrace(w5.store_new_pairing),e.activatePairing&&await this.activate({topic:i}),this.events.emit(w0.create,c),r.addTrace(w5.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(n,i),r.addTrace(w5.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError(w6.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:s})}catch(e){throw r.setError(w6.subscribe_pairing_topic_failure),e}return r.addTrace(w5.subscribe_pairing_topic_success),c}),E2(this,"activate",async({topic:e})=>{this.isInitialized();let t=gF(cA.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),E2(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=gD();this.events.once(gj("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}}),E2(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),E2(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),E2(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),E2(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",b2("USER_DISCONNECTED")),await this.deletePairing(t))}),E2(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return bQ({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})}),E2(this,"sendRequest",async(e,t,r)=>{let i=ww(t,r),n=await this.core.crypto.encode(e,i),s=wX[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id}),E2(this,"sendResult",async(e,t,r)=>{let i=wv(e,r),n=await this.core.crypto.encode(t,i),s=wX[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)}),E2(this,"sendError",async(e,t,r)=>{let i=wE(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=wX[s]?wX[s].res:wX.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)}),E2(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,b2("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),E2(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>g$(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),E2(this,"onRelayEventRequest",async e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}}),E2(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)}),E2(this,"onPairingPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(w0.ping,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),E2(this,"onPairingPingResponse",(e,t)=>{let{id:r}=t;setTimeout(()=>{wN(t)?this.events.emit(gj("pairing_ping",r),{}):wO(t)&&this.events.emit(gj("pairing_ping",r),{error:t.error})},500)}),E2(this,"onPairingDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(w0.delete,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),E2(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=b2("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),E2(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(b2("WC_METHOD_UNSUPPORTED",e))}),E2(this,"isValidPair",(e,t)=>{var r;if(!wi(e)){let{message:r}=b1("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(w6.malformed_pairing_uri),Error(r)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(b5(e,!1)){if(t(e))return!0;let r=gK(e);return t(r)}}catch{}return!1}(e.uri)){let{message:r}=b1("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(w6.malformed_pairing_uri),Error(r)}let i=bW(e?.uri);if(!(null!=(r=i?.relay)&&r.protocol)){let{message:e}=b1("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(w6.malformed_pairing_uri),Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=b1("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(w6.malformed_pairing_uri),Error(e)}if(null!=i&&i.expiryTimestamp&&(0,cA.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError(w6.pairing_expired);let{message:e}=b1("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),E2(this,"isValidPing",async e=>{if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),E2(this,"isValidDisconnect",async e=>{if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),E2(this,"isValidPairingTopic",async e=>{if(!b5(e,!1)){let{message:t}=b1("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=b1("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(g$(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=b1("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=ug(t,this.name),this.pairings=new EX(this.core,this.logger,this.name,this.storagePrefix)}get context(){return up(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(wq.message,async e=>{let{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==wQ.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{let e=await this.core.crypto.decode(t,r);wS(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):wP(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(w2.expired,async e=>{let{topic:t}=gM(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(w0.expire,{topic:t}))})}}var E4=Object.defineProperty,E8=(e,t,r)=>t in e?E4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E5=(e,t,r)=>E8(e,"symbol"!=typeof t?t+"":t,r);class E6 extends ux{constructor(e,t){super(e,t),this.core=e,this.logger=t,E5(this,"records",new Map),E5(this,"events",new F.EventEmitter),E5(this,"name","history"),E5(this,"version","0.3"),E5(this,"cached",[]),E5(this,"initialized",!1),E5(this,"storagePrefix",wF),E5(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),E5(this,"set",(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:gF(cA.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(w1.created,i)}),E5(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=wO(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(w1.updated,t))}),E5(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),E5(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(w1.deleted,r))}),this.persist()}),E5(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),E5(this,"on",(e,t)=>{this.events.on(e,t)}),E5(this,"once",(e,t)=>{this.events.once(e,t)}),E5(this,"off",(e,t)=>{this.events.off(e,t)}),E5(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=ug(t,this.name)}get context(){return up(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:ww(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=b1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(w1.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=b1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(w1.created,e=>{let t=w1.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(w1.updated,e=>{let t=w1.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(w1.deleted,e=>{let t=w1.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(c_.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,cA.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(w1.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}}var E7=Object.defineProperty,E9=(e,t,r)=>t in e?E7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ae=(e,t,r)=>E9(e,"symbol"!=typeof t?t+"":t,r);class At extends uN{constructor(e,t){super(e,t),this.core=e,this.logger=t,Ae(this,"expirations",new Map),Ae(this,"events",new F.EventEmitter),Ae(this,"name","expirer"),Ae(this,"version","0.3"),Ae(this,"cached",[]),Ae(this,"initialized",!1),Ae(this,"storagePrefix",wF),Ae(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ae(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),Ae(this,"set",(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(w2.created,{target:r,expiration:i})}),Ae(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),Ae(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(w2.deleted,{target:t,expiration:r})}}),Ae(this,"on",(e,t)=>{this.events.on(e,t)}),Ae(this,"once",(e,t)=>{this.events.once(e,t)}),Ae(this,"off",(e,t)=>{this.events.off(e,t)}),Ae(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=ug(t,this.name)}get context(){return up(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return gU("topic",e);if("number"==typeof e)return gU("id",e);let{message:t}=b1("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(w2.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=b1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=b1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,cA.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(w2.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(c_.pulse,()=>this.checkExpirations()),this.events.on(w2.created,e=>{let t=w2.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(w2.expired,e=>{let t=w2.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(w2.deleted,e=>{let t=w2.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}}var Ar=Object.defineProperty,Ai=(e,t,r)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,An=(e,t,r)=>Ai(e,"symbol"!=typeof t?t+"":t,r);class As extends uO{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,An(this,"name","verify-api"),An(this,"abortController"),An(this,"isDevEnv"),An(this,"verifyUrlV3",w4),An(this,"storagePrefix",wF),An(this,"version",2),An(this,"publicKey"),An(this,"fetchPromise"),An(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,cA.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),An(this,"register",async e=>{if(!gS()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{let e=(0,d7.getDocument)(),t=this.startAbortTimer(5*cA.ONE_SECOND),i=await new Promise((i,s)=>{let o=()=>{window.removeEventListener("message",l),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let l=n=>{if(n.data&&"string"==typeof n.data)try{let s=JSON.parse(n.data);if("verify_attestation"===s.type){if(dW(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",l),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",l,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",i),i}catch(e){this.logger.warn(e)}return""}),An(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:i}=e;if(""===t){this.logger.debug("resolve: attestationId is empty, skipping");return}if(t){if(dW(t).payload.id!==i)return;let e=await this.isValidJwtAttestation(t);if(e){if(!e.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return e}}if(!r)return;let n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)}),An(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*cA.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0}),An(this,"getVerifyUrl",e=>{let t=e||w3;return w8.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${w3}`),t=w3),t}),An(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(cA.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),An(this,"persistPublicKey",async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e}),An(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),An(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),An(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),An(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),An(this,"validateAttestation",(e,t)=>{let r=function(e,t){let[r,i,n]=e.split("."),s=gd.from(bj(n),"base64");if(64!==s.length)throw Error("Invalid signature length");let o=s.slice(0,32),a=s.slice(32,64),l=mv(`${r}.${i}`),c=function(e){let t=gd.from(e.x,"base64"),r=gd.from(e.y,"base64");return fZ([new Uint8Array([4]),t,r])}(t);if(!bO.verify(fZ([o,a]),l,c))throw Error("Invalid signature");return dW(e).payload}(e,t.publicKey),i={hasExpired:(0,cA.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}}),this.logger=ug(t,this.name),this.abortController=new AbortController,this.isDevEnv=gq(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return up(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,cA.toMiliseconds)(e))}}var Ao=Object.defineProperty,Aa=(e,t,r)=>t in e?Ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Al=(e,t,r)=>Aa(e,"symbol"!=typeof t?t+"":t,r);class Ac extends uk{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Al(this,"context","echo"),Al(this,"registerDeviceToken",async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})}),this.logger=ug(t,this.context)}}var Au=Object.defineProperty,Ah=Object.getOwnPropertySymbols,Ad=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable,Ap=(e,t,r)=>t in e?Au(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ag=(e,t)=>{for(var r in t||(t={}))Ad.call(t,r)&&Ap(e,r,t[r]);if(Ah)for(var r of Ah(t))Af.call(t,r)&&Ap(e,r,t[r]);return e},Ay=(e,t,r)=>Ap(e,"symbol"!=typeof t?t+"":t,r);class Am extends uC{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,Ay(this,"context","event-client"),Ay(this,"storagePrefix",wF),Ay(this,"storageVersion",.1),Ay(this,"events",new Map),Ay(this,"shouldPersist",!1),Ay(this,"init",async()=>{if(!gq())try{let e={eventId:gG(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:gk(this.core.relayer.protocol,this.core.relayer.version,wW)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),Ay(this,"createEvent",e=>{let{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=gG(),o=this.core.projectId||"",a=Ag({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,a),this.shouldPersist=!0),a}),Ay(this,"getEvent",e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let i=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(i)return Ag(Ag({},i),this.setMethods(i.eventId))}),Ay(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),Ay(this,"setEventListeners",()=>{this.core.heartbeat.on(c_.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,cA.fromMiliseconds)(Date.now())-(0,cA.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),Ay(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),Ay(this,"addTrace",(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)}),Ay(this,"setError",(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)}),Ay(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ay(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,Ag(Ag({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),Ay(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),Ay(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${wW}${t}`,{method:"POST",body:JSON.stringify(e)})}),Ay(this,"getAppDomain",()=>gO().url),this.logger=ug(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Ab=Object.defineProperty,Aw=Object.getOwnPropertySymbols,Av=Object.prototype.hasOwnProperty,AE=Object.prototype.propertyIsEnumerable,AA=(e,t,r)=>t in e?Ab(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ax=(e,t)=>{for(var r in t||(t={}))Av.call(t,r)&&AA(e,r,t[r]);if(Aw)for(var r of Aw(t))AE.call(t,r)&&AA(e,r,t[r]);return e},AI=(e,t,r)=>AA(e,"symbol"!=typeof t?t+"":t,r);class AT extends uw{constructor(e){var t,r;super(e),AI(this,"protocol","wc"),AI(this,"version",2),AI(this,"name",wM),AI(this,"relayUrl"),AI(this,"projectId"),AI(this,"customStoragePrefix"),AI(this,"events",new F.EventEmitter),AI(this,"logger"),AI(this,"heartbeat"),AI(this,"relayer"),AI(this,"crypto"),AI(this,"storage"),AI(this,"history"),AI(this,"expirer"),AI(this,"pairing"),AI(this,"verify"),AI(this,"echoClient"),AI(this,"linkModeSupportedApps"),AI(this,"eventClient"),AI(this,"initialized",!1),AI(this,"logChunkController"),AI(this,"on",(e,t)=>this.events.on(e,t)),AI(this,"once",(e,t)=>this.events.once(e,t)),AI(this,"off",(e,t)=>this.events.off(e,t)),AI(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),AI(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let i={topic:e,message:t,publishedAt:Date.now(),transportType:wQ.link_mode};this.relayer.onLinkMessageEvent(i,{sessionExists:r})});let i=this.getGlobalCore(e?.customStoragePrefix);if(i)try{return this.customStoragePrefix=i.customStoragePrefix,this.logger=i.logger,this.heartbeat=i.heartbeat,this.crypto=i.crypto,this.history=i.history,this.expirer=i.expirer,this.storage=i.storage,this.relayer=i.relayer,this.pairing=i.pairing,this.verify=i.verify,this.echoClient=i.echoClient,this.linkModeSupportedApps=i.linkModeSupportedApps,this.eventClient=i.eventClient,this.initialized=i.initialized,this.logChunkController=i.logChunkController,i}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||wG,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let{logger:n,chunkLoggerController:s}="u">typeof(r={opts:uf({level:"string"==typeof e?.logger&&e.logger?e.logger:w$.logger,name:wM}),maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger}).loggerOverride&&"string"!=typeof r.loggerOverride?{logger:r.loggerOverride,chunkLoggerController:null}:"u">typeof window?function(e){var t,r;let i=new ur(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:c5()(ud(uh({},e.opts),{level:"trace",browser:ud(uh({},null==(r=e.opts)?void 0:r.browser),{write:e=>i.write(e)})})),chunkLoggerController:i}}(r):function(e){var t;let r=new ui(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:c5()(ud(uh({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(r);this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ug(n,this.name),this.heartbeat=new cS,this.crypto=new v4(this,this.logger,e?.keychain),this.history=new E6(this,this.logger),this.expirer=new At(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new c4(Ax(Ax({},wj),e?.storageOptions)),this.relayer=new EF({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new E3(this,this.logger),this.verify=new As(this,this.logger,this.storage),this.echoClient=new Ac(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Am(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){let t=new AT(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return up(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(wJ,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(wJ)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;let t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){console.warn("Failed to get global WalletConnect core",e);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;let r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return"u">typeof wU&&"true"===wU.env.DISABLE_GLOBAL_CORE}catch{return!0}}}let A_="client",AS=`wc@2:${A_}:`,AP={name:A_,logger:"error"},AN="WALLETCONNECT_DEEPLINK_CHOICE",AO="Proposal expired",Ak=cA.SEVEN_DAYS,AC={wc_sessionPropose:{req:{ttl:cA.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:cA.ONE_DAY,prompt:!1,tag:1104},res:{ttl:cA.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:cA.ONE_DAY,prompt:!1,tag:1106},res:{ttl:cA.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:cA.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:cA.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:cA.ONE_DAY,prompt:!1,tag:1112},res:{ttl:cA.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:cA.ONE_DAY,prompt:!1,tag:1114},res:{ttl:cA.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:cA.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:cA.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:cA.FIVE_MINUTES,prompt:!1,tag:1119}}},AB={min:cA.FIVE_MINUTES,max:cA.SEVEN_DAYS},AR={idle:"IDLE",active:"ACTIVE"},AD={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},AL=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],AU="wc@1.5:auth:",AM=`${AU}:PUB_KEY`;var AF=Object.defineProperty,A$=Object.defineProperties,Aj=Object.getOwnPropertyDescriptors,AH=Object.getOwnPropertySymbols,AV=Object.prototype.hasOwnProperty,Az=Object.prototype.propertyIsEnumerable,AG=(e,t,r)=>t in e?AF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Aq=(e,t)=>{for(var r in t||(t={}))AV.call(t,r)&&AG(e,r,t[r]);if(AH)for(var r of AH(t))Az.call(t,r)&&AG(e,r,t[r]);return e},AK=(e,t)=>A$(e,Aj(t)),AW=(e,t,r)=>AG(e,"symbol"!=typeof t?t+"":t,r);class AQ extends uU{constructor(e){super(e),AW(this,"name","engine"),AW(this,"events",new($())),AW(this,"initialized",!1),AW(this,"requestQueue",{state:AR.idle,queue:[]}),AW(this,"sessionRequestQueue",{state:AR.idle,queue:[]}),AW(this,"requestQueueDelay",cA.ONE_SECOND),AW(this,"expectedPairingMethodMap",new Map),AW(this,"recentlyDeletedMap",new Map),AW(this,"recentlyDeletedLimit",200),AW(this,"relayMessageCache",[]),AW(this,"pendingSessions",new Map),AW(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(AC)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,cA.toMiliseconds)(this.requestQueueDelay)))}),AW(this,"connect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=AK(Aq({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=t,l=r,c,u=!1;try{if(l){let e=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),u=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),e}if(!l||!u){let{topic:e,uri:t}=await this.client.core.pairing.create();l=e,c=t}if(!l){let{message:e}=b1("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw Error(e)}let h=await this.client.core.crypto.generateKeyPair(),d=AC.wc_sessionPropose.req.ttl||cA.FIVE_MINUTES,f=gF(d),p=AK(Aq(Aq({requiredNamespaces:i,optionalNamespaces:n,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:l},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:wm()}),g=gj("session_connect",p.id),{reject:y,resolve:m,done:b}=gD(d,AO),w=({id:e})=>{e===p.id&&(this.client.events.off("proposal_expire",w),this.pendingSessions.delete(p.id),this.events.emit(g,{error:{message:AO,code:0}}))};return this.client.events.on("proposal_expire",w),this.events.once(g,({error:e,session:t})=>{this.client.events.off("proposal_expire",w),e?y(e):t&&m(t)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:c,approval:b}}),AW(this,"pair",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}}),AW(this,"approve",async e=>{var t,r,i;let n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[w7.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError(w9.no_internet_connection),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError(w9.proposal_not_found),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError(w9.session_approve_namespace_validation_failure),e}let{id:s,relayProtocol:o,namespaces:a,sessionProperties:l,scopedProperties:c,sessionConfig:u}=e,h=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:n.eventId});let{pairingTopic:d,proposer:f,requiredNamespaces:p,optionalNamespaces:g}=h,y=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});y||(y=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:w7.session_approve_started,properties:{topic:d,trace:[w7.session_approve_started,w7.session_namespaces_validation_success]}}));let m=await this.client.core.crypto.generateKeyPair(),b=f.publicKey,w=await this.client.core.crypto.generateSharedKey(m,b),v=Aq(Aq(Aq({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:m,metadata:this.client.metadata},expiry:gF(Ak)},l&&{sessionProperties:l}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),E=wQ.relay;y.addTrace(w7.subscribing_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:E})}catch(e){throw y.setError(w9.subscribe_session_topic_failure),e}y.addTrace(w7.subscribe_session_topic_success);let A=AK(Aq({},v),{topic:w,requiredNamespaces:p,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:v.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:m,transportType:wQ.relay});await this.client.session.set(w,A),y.addTrace(w7.store_session);try{y.addTrace(w7.publishing_session_settle),await this.sendRequest({topic:w,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch(e=>{throw y?.setError(w9.session_settle_publish_failure),e}),y.addTrace(w7.session_settle_publish_success),y.addTrace(w7.publishing_session_approve),await this.sendResult({id:s,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:m},throwOnFailedPublish:!0}).catch(e=>{throw y?.setError(w9.session_approve_publish_failure),e}),y.addTrace(w7.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(w,b2("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(w),e}return this.client.core.eventClient.deleteEvent({eventId:y.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:f.metadata}),await this.client.proposal.delete(s,b2("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(w,gF(Ak)),{topic:w,acknowledged:()=>Promise.resolve(this.client.session.get(w))}}),AW(this,"reject",async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:r,reason:i}=e;try{t=this.client.proposal.get(r).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),e}t&&(await this.sendError({id:r,topic:t,error:i,rpcOpts:AC.wc_sessionPropose.reject}),await this.client.proposal.delete(r,b2("USER_DISCONNECTED")))}),AW(this,"update",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:r}=e,{done:i,resolve:n,reject:s}=gD(),o=wm(),a=wb().toString(),l=this.client.session.get(t).namespaces;return this.events.once(gj("session_update",o),({error:e})=>{e?s(e):n()}),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:l}),s(e)}),{acknowledged:i}}),AW(this,"extend",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,r=wm(),{done:i,resolve:n,reject:s}=gD();return this.events.once(gj("session_extend",r),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,gF(Ak)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:i}}),AW(this,"request",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:r,topic:i,expiry:n=AC.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===wQ.relay&&await this.confirmOnlineStateOrThrow();let o=wm(),a=wb().toString(),{done:l,resolve:c,reject:u}=gD(n,"Request expired. Please try again.");this.events.once(gj("session_request",o),({error:e,result:t})=>{e?u(e):c(t)});let h="wc_sessionRequest",d=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(d)return await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:h,params:{request:AK(Aq({},r),{expiryTimestamp:gF(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0,appLink:d}).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),await l();let f={request:AK(Aq({},r),{expiryTimestamp:gF(n)}),chainId:t},p=this.shouldSetTVF(h,f);return await Promise.all([new Promise(async e=>{await this.sendRequest(Aq({clientRpcId:o,relayRpcId:a,topic:i,method:h,params:f,expiry:n,throwOnFailedPublish:!0},p&&{tvf:this.getTVFParams(o,f)})).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await gV(this.client.core.storage,AN);await gH({id:o,topic:i,wcDeepLink:e})}e()}),l()]).then(e=>e[2])}),AW(this,"respond",async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:i}=r,n=this.client.session.get(t);n.transportType===wQ.relay&&await this.confirmOnlineStateOrThrow();let s=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);wN(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):wO(r)&&await this.sendError({id:i,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)}),AW(this,"ping",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=wm(),r=wb().toString(),{done:i,resolve:n,reject:s}=gD();this.events.once(gj("session_ping",e),({error:e})=>{e?s(e):n()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))}),AW(this,"emit",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:r,chainId:i}=e,n=wb().toString(),s=wm();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i},throwOnFailedPublish:!0,relayRpcId:n,clientRpcId:s})}),AW(this,"disconnect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:b2("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=b1("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}}),AW(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r),s=!0;return!!gC(n,i)&&(i.forEach(t=>{let{accounts:i,methods:n,events:o}=e.namespaces[t],a=bJ(i),l=r[t];gC(gp(t,l),a)&&gC(l.methods,n)&&gC(l.events,o)||(s=!1)}),s)})(t,e)))),AW(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),AW(this,"authenticate",async(e,t)=>{var r,i,n;let s;this.isInitialized(),this.isValidAuthenticate(e);let o=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),a=o?wQ.link_mode:wQ.relay;a===wQ.relay&&await this.confirmOnlineStateOrThrow();let{chains:l,statement:c="",uri:u,domain:h,nonce:d,type:f,exp:p,nbf:g,methods:y=[],expiry:m}=e,b=[...e.resources||[]],{topic:w,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:v}});let E=await this.client.core.crypto.generateKeyPair(),A=bU(E);if(await Promise.all([this.client.auth.authKeys.set(AM,{responseTopic:A,publicKey:E}),this.client.auth.pairingTopics.set(A,{topic:A,pairingTopic:w})]),await this.client.core.relayer.subscribe(A,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${w}`),y.length>0){let{namespace:e}=gf(l[0]),t=yF(function(e,t,r,i={}){return r?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,r={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[r]})))}(t,r,i)}}}(e,"request",y));yV(b)&&(i=t,n=b.pop(),t=yF(function(e,t){yM(e),yM(t);let r=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),i={att:{}};return r.forEach(r=>{var n,s;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort((e,t)=>e.localeCompare(t)).forEach(n=>{var s,o;i.att[r]=yk(yO({},i.att[r]),{[n]:(null==(s=e.att[r])?void 0:s[n])||(null==(o=t.att[r])?void 0:o[n])})})}),i}(y$(i),y$(n)))),b.push(t)}let x=m&&m>AC.wc_sessionAuthenticate.req.ttl?m:AC.wc_sessionAuthenticate.req.ttl,I={authPayload:{type:f??"caip122",chains:l,statement:c,aud:u,domain:h,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:b},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:gF(x)},T={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:l,methods:[...new Set(["personal_sign",...y])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:gF(AC.wc_sessionPropose.req.ttl),id:wm()},{done:_,resolve:S,reject:P}=gD(x,"Request expired"),N=wm(),O=gj("session_connect",T.id),k=gj("session_request",N),C=async({error:e,session:t})=>{this.events.off(k,B),e?P(e):t&&S({session:t})},B=async e=>{var r,i,n;let s;if(await this.deletePendingAuthRequest(N,{message:"fulfilled",code:0}),e.error){let t=b2("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(O,C),P(e.error.message))}await this.deleteProposal(T.id),this.events.off(O,C);let{cacaos:o,responder:l}=e.result,c=[],u=[];for(let e of o){await yL({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),P(b2("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,r=yV(t.resources),i=[yR(t.iss)],n=yD(t.iss);if(r){let e=yj(r),t=yH(r);c.push(...e),i.push(...t)}for(let e of i)u.push(`${e}:${n}`)}let h=await this.client.core.crypto.generateSharedKey(E,l.publicKey);c.length>0&&(s={topic:h,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:l,controller:l.publicKey,expiry:gF(Ak),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:bZ([...new Set(c)],[...new Set(u)]),transportType:a},await this.client.core.relayer.subscribe(h,{transportType:a}),await this.client.session.set(h,s),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:l.metadata}),s=this.client.session.get(h)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(i=l.metadata.redirect)&&i.linkMode&&null!=(n=l.metadata.redirect)&&n.universal&&t&&(this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.session.update(h,{transportType:wQ.link_mode})),S({auths:o,session:s})};this.events.once(O,C),this.events.once(k,B);try{if(o){let e=ww("wc_sessionAuthenticate",I,N);this.client.core.history.set(w,e);let r=await this.client.core.crypto.encode("",e,{type:2,encoding:bR});s=bY(t,w,r)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:I,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:N}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:T,expiry:AC.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:T.id})])}catch(e){throw this.events.off(O,C),this.events.off(k,B),e}return await this.setProposal(T.id,T),await this.setAuthRequest(N,{request:AK(Aq({},I),{verifyContext:{}}),pairingTopic:w,transportType:a}),{uri:s??v,response:_}}),AW(this,"approveSessionAuthenticate",async e=>{let t;let{id:r,auths:i}=e,n=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[ve.authenticated_session_approve_started]}});try{this.isInitialized()}catch(e){throw n.setError(vt.no_internet_connection),e}let s=this.getPendingAuthRequest(r);if(!s)throw n.setError(vt.authenticated_session_pending_request_not_found),Error(`Could not find pending auth request with id ${r}`);let o=s.transportType||wQ.relay;o===wQ.relay&&await this.confirmOnlineStateOrThrow();let a=s.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),c=bU(a),u={type:1,receiverPublicKey:a,senderPublicKey:l},h=[],d=[];for(let e of i){if(!await yL({cacao:e,projectId:this.client.core.projectId})){n.setError(vt.invalid_cacao);let e=b2("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:c,error:e,encodeOpts:u}),Error(e.message)}n.addTrace(ve.cacaos_verified);let{p:t}=e,i=yV(t.resources),s=[yR(t.iss)],o=yD(t.iss);if(i){let e=yj(i),t=yH(i);h.push(...e),s.push(...t)}for(let e of s)d.push(`${e}:${o}`)}let f=await this.client.core.crypto.generateSharedKey(l,a);if(n.addTrace(ve.create_authenticated_session_topic),h?.length>0){t={topic:f,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:a,metadata:s.requester.metadata},controller:a,expiry:gF(Ak),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:bZ([...new Set(h)],[...new Set(d)]),transportType:o},n.addTrace(ve.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:o})}catch(e){throw n.setError(vt.subscribe_authenticated_session_topic_failure),e}n.addTrace(ve.subscribe_authenticated_session_topic_success),await this.client.session.set(f,t),n.addTrace(ve.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}n.addTrace(ve.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,o)})}catch(e){throw n.setError(vt.authenticated_session_approve_publish_failure),e}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:t}}),AW(this,"rejectSessionAuthenticate",async e=>{this.isInitialized();let{id:t,reason:r}=e,i=this.getPendingAuthRequest(t);if(!i)throw Error(`Could not find pending auth request with id ${t}`);i.transportType===wQ.relay&&await this.confirmOnlineStateOrThrow();let n=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=bU(n);await this.sendError({id:t,topic:o,error:r,encodeOpts:{type:1,receiverPublicKey:n,senderPublicKey:s},rpcOpts:AC.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,b2("USER_DISCONNECTED"))}),AW(this,"formatAuthMessage",e=>{this.isInitialized();let{request:t,iss:r}=e;return yU(t,r)}),AW(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),AW(this,"cleanupDuplicatePairings",async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}}),AW(this,"deleteSession",async e=>{var t;let{topic:r,expirerHasDeleted:i=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,b2("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(AN).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,b2("USER_DISCONNECTED"))}),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=AR.idle),n&&this.client.events.emit("session_delete",{id:s,topic:r})}),AW(this,"deleteProposal",async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(w9.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,b2("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")}),AW(this,"deletePendingSessionRequest",async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=AR.idle,this.client.events.emit("session_request_expire",{id:e}))}),AW(this,"deletePendingAuthRequest",async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])}),AW(this,"setExpiry",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),AW(this,"setProposal",async(e,t)=>{this.client.core.expirer.set(e,gF(AC.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),AW(this,"setAuthRequest",async(e,t)=>{let{request:r,pairingTopic:i,transportType:n=wQ.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:i,verifyContext:r.verifyContext,transportType:n})}),AW(this,"setPendingSessionRequest",async e=>{let{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||gF(AC.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n})}),AW(this,"sendRequest",async e=>{let t,i;let{topic:n,method:s,params:o,expiry:a,relayRpcId:l,clientRpcId:c,throwOnFailedPublish:u,appLink:h,tvf:d}=e,f=ww(s,o,c),p=!!h;try{let e=p?bR:bB;t=await this.client.core.crypto.encode(n,f,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),e}if(AL.includes(s)){let e=bM(JSON.stringify(f)),r=bM(t);i=await this.client.core.verify.register({id:r,decryptedId:e})}let g=AC[s].req;if(g.attestation=i,a&&(g.ttl=a),l&&(g.id=l),this.client.core.history.set(n,f),p){let e=bY(h,n,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=AC[s].req;a&&(e.ttl=a),l&&(e.id=l),e.tvf=AK(Aq({},d),{correlationId:f.id}),u?(e.internal=AK(Aq({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,e)):this.client.core.relayer.publish(n,t,e).catch(e=>this.client.logger.error(e))}return f.id}),AW(this,"sendResult",async e=>{let t,i,n;let{id:s,topic:o,result:a,throwOnFailedPublish:l,encodeOpts:c,appLink:u}=e,h=wv(s,a),d=u&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=d?bR:bB;t=await this.client.core.crypto.encode(o,h,AK(Aq({},c||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${o} failed`),e}try{let e=(i=await this.client.core.history.get(o,s)).request;try{this.shouldSetTVF(e.method,e.params)&&(n=this.getTVFParams(s,e.params,a))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${o}, ${s}) failed`),e}if(d){let e=bY(u,o,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=AC[i.request.method].res;e.tvf=AK(Aq({},n),{correlationId:s}),l?(e.internal=AK(Aq({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,t,e)):this.client.core.relayer.publish(o,t,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(h)}),AW(this,"sendError",async e=>{let t,i;let{id:n,topic:s,error:o,encodeOpts:a,rpcOpts:l,appLink:c}=e,u=wE(n,o),h=c&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=h?bR:bB;t=await this.client.core.crypto.encode(s,u,AK(Aq({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}try{i=await this.client.core.history.get(s,n)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),e}if(h){let e=bY(c,s,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=i.request.method,r=l||AC[e].res;this.client.core.relayer.publish(s,t,r)}await this.client.core.history.resolve(u)}),AW(this,"cleanup",async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;g$(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{g$(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])}),AW(this,"onProviderMessageEvent",async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)}),AW(this,"onRelayEventRequest",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),AW(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===AR.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=AR.active;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=AR.idle}),AW(this,"processRequest",async e=>{let{topic:t,payload:r,attestation:i,transportType:n,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}}),AW(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r,transportType:i}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}}),AW(this,"onRelayEventUnknownPayload",e=>{let{topic:t}=e,{message:r}=b1("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)}),AW(this,"shouldIgnorePairingRequest",e=>{let{topic:t,requestMethod:r}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),AW(this,"onSessionProposeRequest",async e=>{let{topic:t,payload:r,attestation:i,encryptedId:n}=e,{params:s,id:o}=r;try{let e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(w6.proposal_listener_not_found)),this.isValidConnect(Aq({},r.params));let a=s.expiryTimestamp||gF(AC.wc_sessionPropose.req.ttl),l=Aq({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,l);let c=await this.getVerifyContext({attestationId:i,hash:bM(JSON.stringify(r)),encryptedId:n,metadata:l.proposer.metadata});e?.addTrace(w5.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:l,verifyContext:c})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:AC.wc_sessionPropose.autoReject}),this.client.logger.error(e)}}),AW(this,"onSessionProposeResponse",async(e,t,r)=>{let{id:i}=t;if(wN(t)){let{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});let s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});let o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let l=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:e,proposalId:i,publicKey:o});let c=await this.client.core.relayer.subscribe(l,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else if(wO(t)){await this.client.proposal.delete(i,b2("USER_DISCONNECTED"));let e=gj("session_connect",i);if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}}),AW(this,"onSessionSettleRequest",async(e,t)=>{let{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:l,sessionConfig:c}=t.params,u=[...this.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);let h=this.client.proposal.get(u.proposalId),d=AK(Aq(Aq(Aq({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:n.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),l&&{scopedProperties:l}),c&&{sessionConfig:c}),{transportType:wQ.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(gj("session_connect",u.proposalId),{session:d}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),AW(this,"onSessionSettleResponse",async(e,t)=>{let{id:r}=t;wN(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(gj("session_approve",r),{})):wO(t)&&(await this.client.session.delete(e,b2("USER_DISCONNECTED")),this.events.emit(gj("session_approve",r),{error:t.error}))}),AW(this,"onSessionUpdateRequest",async(e,t)=>{let{params:r,id:i}=t;try{let t=`${e}_session_update`,n=wu.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:e,error:b2("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Aq({topic:e},r));try{wu.set(t,i),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw wu.delete(t),e}this.client.events.emit("session_update",{id:i,topic:e,params:r})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),AW(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),AW(this,"onSessionUpdateResponse",(e,t)=>{let{id:r}=t,i=gj("session_update",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);wN(t)?this.events.emit(gj("session_update",r),{}):wO(t)&&this.events.emit(gj("session_update",r),{error:t.error})}),AW(this,"onSessionExtendRequest",async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,gF(Ak)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),AW(this,"onSessionExtendResponse",(e,t)=>{let{id:r}=t,i=gj("session_extend",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);wN(t)?this.events.emit(gj("session_extend",r),{}):wO(t)&&this.events.emit(gj("session_extend",r),{error:t.error})}),AW(this,"onSessionPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),AW(this,"onSessionPingResponse",(e,t)=>{let{id:r}=t,i=gj("session_ping",r);setTimeout(()=>{if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners 2176`);wN(t)?this.events.emit(gj("session_ping",r),{}):wO(t)&&this.events.emit(gj("session_ping",r),{error:t.error})},500)}),AW(this,"onSessionDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(wq.publish,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:b2("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}}),AW(this,"onSessionRequest",async e=>{var t,r,i;let{topic:n,payload:s,attestation:o,encryptedId:a,transportType:l}=e,{id:c,params:u}=s;try{await this.isValidRequest(Aq({topic:n},u));let e=this.client.session.get(n),s=await this.getVerifyContext({attestationId:o,hash:bM(JSON.stringify(ww("wc_sessionRequest",u,c))),encryptedId:a,metadata:e.peer.metadata,transportType:l}),h={id:c,topic:n,params:u,verifyContext:s};await this.setPendingSessionRequest(h),l===wQ.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(e){await this.sendError({id:c,topic:n,error:e}),this.client.logger.error(e)}}),AW(this,"onSessionRequestResponse",(e,t)=>{let{id:r}=t,i=gj("session_request",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);wN(t)?this.events.emit(gj("session_request",r),{result:t.result}):wO(t)&&this.events.emit(gj("session_request",r),{error:t.error})}),AW(this,"onSessionEventRequest",async(e,t)=>{let{id:r,params:i}=t;try{let t=`${e}_session_event_${i.event.name}`,n=wu.get(t);if(n&&this.isRequestOutOfSync(n,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(Aq({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),wu.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),AW(this,"onSessionAuthenticateResponse",(e,t)=>{let{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),wN(t)?this.events.emit(gj("session_request",r),{result:t.result}):wO(t)&&this.events.emit(gj("session_request",r),{error:t.error})}),AW(this,"onSessionAuthenticateRequest",async e=>{var t;let{topic:r,payload:i,attestation:n,encryptedId:s,transportType:o}=e;try{let{requester:e,authPayload:a,expiryTimestamp:l}=i.params,c=await this.getVerifyContext({attestationId:n,hash:bM(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:r,id:i.id,authPayload:a,verifyContext:c,expiryTimestamp:l};await this.setAuthRequest(i.id,{request:u,pairingTopic:r,transportType:o}),o===wQ.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id,verifyContext:c})}catch(s){this.client.logger.error(s);let e=i.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),n=this.getAppLinkIfEnabled(i.params.requester.metadata,o);await this.sendError({id:i.id,topic:r,error:s,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:AC.wc_sessionAuthenticate.autoReject,appLink:n})}}),AW(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),AW(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=AR.idle,this.processSessionRequestQueue()},(0,cA.toMiliseconds)(this.requestQueueDelay))}),AW(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let r=gj("session_request",e.request.id);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit(gj("session_request",e.request.id),{error:t})})}),AW(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===AR.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=AR.active,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}}),AW(this,"emitSessionRequest",e=>{this.client.events.emit("session_request",e)}),AW(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:ww("wc_sessionPropose",AK(Aq({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})}),AW(this,"isValidConnect",async e=>{let t;if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=e;if(b8(r)||await this.isValidPairingTopic(r),t=!1,a?a&&b3(a)&&a.length&&a.forEach(e=>{t=wr(e)}):t=!0,!t){let{message:e}=b1("MISSING_OR_INVALID",`connect() relays: ${a}`);throw Error(e)}if(b8(i)||0===b4(i)||this.validateNamespaces(i,"requiredNamespaces"),b8(n)||0===b4(n)||this.validateNamespaces(n,"optionalNamespaces"),b8(s)||this.validateSessionProps(s,"sessionProperties"),!b8(o)){this.validateSessionProps(o,"scopedProperties");let e=Object.keys(i||{}).concat(Object.keys(n||{}));if(!Object.keys(o).every(t=>e.includes(t)))throw Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(e)}`)}}),AW(this,"validateNamespaces",(e,t)=>{let r=function(e,t,r){let i=null;if(e&&b4(e)){let n;let s=we(e,t);s&&(i=s);let o=(n=null,Object.entries(e).forEach(([e,i])=>{var s,o;let a;if(n)return;let l=(s=gp(e,i),o=`${t} ${r}`,a=null,b3(s)&&s.length?s.forEach(e=>{a||b7(e)||(a=b2("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):b7(e)||(a=b2("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);l&&(n=l)}),n);o&&(i=o)}else i=b1("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw Error(r.message)}),AW(this,"isValidApprove",async e=>{if(!wi(e))throw Error(b1("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:i,sessionProperties:n,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let o=this.client.proposal.get(t),a=wt(r,"approve()");if(a)throw Error(a.message);let l=ws(o.requiredNamespaces,r,"approve()");if(l)throw Error(l.message);if(!b5(i,!0)){let{message:e}=b1("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(e)}if(b8(n)||this.validateSessionProps(n,"sessionProperties"),!b8(s)){this.validateSessionProps(s,"scopedProperties");let e=new Set(Object.keys(r));if(!Object.keys(s).every(t=>e.has(t)))throw Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}}),AW(this,"isValidReject",async e=>{if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!b6(r.code,!1)||!r.message||!b5(r.message,!1)){let{message:e}=b1("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}}),AW(this,"isValidSessionSettleRequest",e=>{let t;if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:i,namespaces:n,expiry:s}=e;if(!wr(r)){let{message:e}=b1("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,b5(i?.publicKey,!1)||(t=b1("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=wt(n,"onSessionSettleRequest()");if(a)throw Error(a.message);if(g$(s)){let{message:e}=b1("EXPIRED","onSessionSettleRequest()");throw Error(e)}}),AW(this,"isValidUpdate",async e=>{if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let i=this.client.session.get(t),n=wt(r,"update()");if(n)throw Error(n.message);let s=ws(i.requiredNamespaces,r,"update()");if(s)throw Error(s.message)}),AW(this,"isValidExtend",async e=>{if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),AW(this,"isValidRequest",async e=>{var t;if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:i,chainId:n,expiry:s}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!wn(o,n)){let{message:e}=b1("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(b8(i)||!b5(i.method,!1)){let{message:e}=b1("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(b5(t=i.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{bJ(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,n).includes(t))){let{message:e}=b1("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(s&&(!b6(s,!1)||!(s<=AB.max)||!(s>=AB.min))){let{message:e}=b1("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${AB.min} and ${AB.max}`);throw Error(e)}}),AW(this,"isValidRespond",async e=>{var t;if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(b8(i)||b8(i.result)&&b8(i.error)||!b6(i.id,!1)||!b5(i.jsonrpc,!1)){let{message:e}=b1("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(e)}}),AW(this,"isValidPing",async e=>{if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),AW(this,"isValidEmit",async e=>{var t;if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:i,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!wn(s,n)){let{message:e}=b1("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(b8(i)||!b5(i.name,!1)){let{message:e}=b1("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}if(!(b5(t=i.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{bJ(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,n).includes(t))){let{message:e}=b1("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}}),AW(this,"isValidDisconnect",async e=>{if(!wi(e)){let{message:t}=b1("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),AW(this,"isValidAuthenticate",e=>{let{chains:t,uri:r,domain:i,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!b5(r,!1))throw Error("uri is required parameter");if(!b5(i,!1))throw Error("domain is required parameter");if(!b5(n,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>gf(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=gf(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),AW(this,"getVerifyContext",async e=>{let{attestationId:t,hash:r,encryptedId:i,metadata:n,transportType:s}=e,o={verified:{verifyUrl:n.verifyUrl||w3,validation:"UNKNOWN",origin:n.url||""}};try{if(s===wQ.link_mode){let e=this.getAppLinkIfEnabled(n,s);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}let e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:i,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o}),AW(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach((r,i)=>{if(null==r){let{message:n}=b1("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[i]}`);throw Error(n)}})}),AW(this,"getPendingAuthRequest",e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),AW(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}}),AW(this,"checkRecentlyDeleted",e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:r}=b1("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(r)}}),AW(this,"isLinkModeEnabled",(e,t)=>{var i,n,s,o,a,l,c,u,h;return!!e&&t===wQ.link_mode&&(null==(n=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:n.linkMode)===!0&&(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)!==void 0&&(null==(l=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:l.universal)!==""&&(null==(c=e?.redirect)?void 0:c.universal)!==void 0&&(null==(u=e?.redirect)?void 0:u.universal)!==""&&(null==(h=e?.redirect)?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==r.g?void 0:r.g.Linking)}),AW(this,"getAppLinkIfEnabled",(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0}),AW(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=gz(e,"topic")||"",r=decodeURIComponent(gz(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:wQ.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:i})}),AW(this,"registerLinkModeListeners",async()=>{var e;if(gq()||g_()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==r.g?void 0:r.g.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}),AW(this,"shouldSetTVF",(e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;let{request:r}=t;return Object.keys(AD).includes(r.method)}),AW(this,"getTVFParams",(e,t,r)=>{var i,n;try{let s=t.request.method,o=this.extractTxHashesFromResult(s,r);return AK(Aq({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(n=null==(i=t.request.params)?void 0:i[0])?void 0:n.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}}),AW(this,"isValidContractData",e=>{var t;if(!e)return!1;try{let r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;let i=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(i)&&i.length%2==0}catch{}return!1}),AW(this,"extractTxHashesFromResult",(e,t)=>{try{let r=AD[e];if("string"==typeof t)return[t];let i=t[r.key];if(b3(i))return"solana_signAllTransactions"===e?i.map(e=>(function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let i=r[0];if(0===i)throw Error("No signatures found");if(r.length<1+64*i)throw Error("Transaction data too short for claimed signature count");if(r.length<100)throw Error("Transaction too short");let n=gd.from(e,"base64").slice(1,65);return fY.encode(n)})(e)):i;if("string"==typeof i)return[i]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]})}async processPendingMessageEvents(){try{let e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(let[e,r]of Object.entries(t))for(let t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){let{message:e}=b1("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(wq.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){let{topic:t,message:r,attestation:i,transportType:n}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(AM)?this.client.auth.authKeys.get(AM):{responseTopic:void 0,publicKey:void 0};try{let e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:n===wQ.link_mode?bR:bB});wS(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:i,transportType:n,encryptedId:bM(r)})):wP(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:n}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:n}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(w2.expired,async e=>{let{topic:t,id:r}=gM(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,b1("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,b1("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(w0.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(w0.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!b5(e,!1)){let{message:t}=b1("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=b1("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(g$(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=b1("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!b5(e,!1)){let{message:t}=b1("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=b1("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(g$(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=b1("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=b1("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(b5(e,!1)){let{message:t}=b1("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=b1("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=b1("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=b1("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(g$(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=b1("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class AY extends EX{constructor(e,t){super(e,t,"proposal",AS),this.core=e,this.logger=t}}class AJ extends EX{constructor(e,t){super(e,t,"session",AS),this.core=e,this.logger=t}}class AZ extends EX{constructor(e,t){super(e,t,"request",AS,e=>e.id),this.core=e,this.logger=t}}class AX extends EX{constructor(e,t){super(e,t,"authKeys",AU,()=>AM),this.core=e,this.logger=t}}class A0 extends EX{constructor(e,t){super(e,t,"pairingTopics",AU),this.core=e,this.logger=t}}class A1 extends EX{constructor(e,t){super(e,t,"requests",AU,e=>e.id),this.core=e,this.logger=t}}var A2=Object.defineProperty,A3=(e,t,r)=>t in e?A2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A4=(e,t,r)=>A3(e,"symbol"!=typeof t?t+"":t,r);class A8{constructor(e,t){this.core=e,this.logger=t,A4(this,"authKeys"),A4(this,"pairingTopics"),A4(this,"requests"),this.authKeys=new AX(this.core,this.logger),this.pairingTopics=new A0(this.core,this.logger),this.requests=new A1(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var A5=Object.defineProperty,A6=(e,t,r)=>t in e?A5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A7=(e,t,r)=>A6(e,"symbol"!=typeof t?t+"":t,r);class A9 extends uL{constructor(e){super(e),A7(this,"protocol","wc"),A7(this,"version",2),A7(this,"name",AP.name),A7(this,"metadata"),A7(this,"core"),A7(this,"logger"),A7(this,"events",new F.EventEmitter),A7(this,"engine"),A7(this,"session"),A7(this,"proposal"),A7(this,"pendingRequest"),A7(this,"auth"),A7(this,"signConfig"),A7(this,"on",(e,t)=>this.events.on(e,t)),A7(this,"once",(e,t)=>this.events.once(e,t)),A7(this,"off",(e,t)=>this.events.off(e,t)),A7(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),A7(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),A7(this,"connect",async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"pair",async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"approve",async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"reject",async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"update",async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"extend",async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"request",async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"respond",async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"ping",async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"emit",async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"disconnect",async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"find",e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),A7(this,"authenticate",async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"approveSessionAuthenticate",async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),A7(this,"rejectSessionAuthenticate",async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),this.name=e?.name||AP.name,this.metadata=function(e){var t,r;let i=gO();try{return null!=e&&e.url&&i.url&&e.url!==i.url&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${i.url}. This is probably unintended and can lead to issues.`),e.url=i.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(e=>""!==e)),gx(gA(gA({},i),e),{url:e?.url||i.url,name:e?.name||i.name,description:e?.description||i.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:i.icons})}catch(t){return console.warn("Error populating app metadata",t),e||i}}(e?.metadata),this.signConfig=e?.signConfig;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:c5()(uf({level:e?.logger||AP.logger}));this.core=e?.core||new AT(e),this.logger=ug(t,this.name),this.session=new AJ(this.core,this.logger),this.proposal=new AY(this.core,this.logger),this.pendingRequest=new AZ(this.core,this.logger),this.engine=new AQ(this),this.auth=new A8(this.core,this.logger)}static async init(e){let t=new A9(e);return await t.initialize(),t}get context(){return up(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},(0,cA.toMiliseconds)(cA.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var xe=r(3749);class xt{constructor(e){this.openModal=xe.jb.open,this.closeModal=xe.jb.close,this.subscribeModal=xe.jb.subscribe,this.setTheme=xe.ThemeCtrl.setThemeConfig,xe.ThemeCtrl.setThemeConfig(e),xe.ConfigCtrl.setConfig(e),this.initUi()}async initUi(){if("undefined"!=typeof window){await r.e(124).then(r.bind(r,3124));let e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),xe.OptionsCtrl.setIsUiLoaded(!0)}}}var xr=r(6593).lW,xi={purpose:"identification",payload:{type:"text",content:`The following dApp would like to see your public address: ${"u">typeof window?window.origin:""}`}},xn={test:{number:0,id:"0x000000000b2bce3c70bc649a02749e8687721b09ed2e15997f466536b20bb127",size:170,parentID:"0xffffffff00000000000000000000000000000000000000000000000000000000",timestamp:1530014400,gasLimit:1e7,beneficiary:"0x0000000000000000000000000000000000000000",gasUsed:0,totalScore:0,txsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",txsFeatures:0,stateRoot:"0x4ec3af0acbad1ae467ad569337d2fe8576fe303928d35b8cdd91de47e9ac84bb",receiptsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",signer:"0x0000000000000000000000000000000000000000",isTrunk:!0,transactions:[]}},xs={main:"0xA11413086e163e41901bb81fdc5617c975Fa5a1A",test:"0xc403b8EA53F707d7d4de095f0A20bC491Cf2bc94",abi:[{inputs:[{internalType:"string[]",name:"names",type:"string[]"}],name:"getAddresses",outputs:[{internalType:"address[]",name:"addresses",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"addresses",type:"address[]"}],name:"getNames",outputs:[{internalType:"string[]",name:"names",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string[]",name:"names",type:"string[]"}],name:"getNamehashes",outputs:[{internalType:"bytes32[]",name:"nodes",type:"bytes32[]"}],stateMutability:"pure",type:"function"}]},xo={requiresCertificate:!0},xa={"wallet-connect":{requiresCertificate:!1},veworld:xo,sync2:xo,sync:xo},xl=Object.keys(xa);Object.freeze(xa),Object.freeze(xl);var xc=((E=xc||{}).RequestTransaction="thor_sendTransaction",E.SignCertificate="thor_signCertificate",E.SignTypedData="thor_signTypedData",E),xu={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},xh=0,xd={configure(e){xh=xu[e]},debug(e,t,...r){xh>=4&&console.log(`[${e}] (${t})`,...r)},info(e,t,...r){xh>=3&&console.info(`[${e}] (${t})`,...r)},warn(e,t,...r){xh>=2&&console.warn(`[${e}] (${t})`,...r)},error(e,t,...r){xh>=1&&console.error(`[${e}] (${t})`,...r)}},xf="dappkit@vechain",xp={WALLET_SOURCE:`${xf}/source`,ACCOUNT:`${xf}/account`,CERTIFICATE:`${xf}/connectionCertificate`,ACCOUNT_DOMAIN:`${xf}/accountDomain`},xg="dappkit@vechain/v2",xy={WALLET_SOURCE:`${xg}/source`,ACCOUNT:`${xg}/account`,CERTIFICATE:`${xg}/connectionCertificate`,ACCOUNT_DOMAIN:`${xg}/accountDomain`},xm={setAccount:e=>{xd.debug("LocalStorage","setAccount",e),e?localStorage.setItem(xy.ACCOUNT,e):localStorage.removeItem(xy.ACCOUNT)},setSource:e=>{xd.debug("LocalStorage","setSource",e),e?localStorage.setItem(xy.WALLET_SOURCE,e):localStorage.removeItem(xy.WALLET_SOURCE)},setConnectionCertificate:e=>{if(xd.debug("LocalStorage","setConnectionCertificate",e),e){let t=M.H1.of(M.H_.of(JSON.stringify(e)).bytes);localStorage.setItem(xy.CERTIFICATE,t.toString())}else localStorage.removeItem(xy.CERTIFICATE)},setAccountDomain:e=>{xd.debug("LocalStorage","setAccountDomain",e),e?localStorage.setItem(xy.ACCOUNT_DOMAIN,e):localStorage.removeItem(xy.ACCOUNT_DOMAIN)},getAccountDomain:()=>localStorage.getItem(xy.ACCOUNT_DOMAIN)||null,getAccount:()=>localStorage.getItem(xy.ACCOUNT)||null,getSource:()=>localStorage.getItem(xy.WALLET_SOURCE)||null,getConnectionCertificate:()=>{let e=localStorage.getItem(xy.CERTIFICATE);return e?JSON.parse(M.H_.of(M.H1.of(e).bytes).toString()):null},wipeV1:()=>{localStorage.removeItem(xp.WALLET_SOURCE),localStorage.removeItem(xp.ACCOUNT),localStorage.removeItem(xp.CERTIFICATE),localStorage.removeItem(xp.ACCOUNT_DOMAIN)}},xb={},xw=({projectId:e,metadata:t})=>{let r=xb[e];if(r)return r;let i=A9.init({projectId:e,metadata:t}),n={get:async()=>{try{return await i}catch(e){throw console.error("Failed to initialise the wallet connect sign client",e),Error("Failed to initialise the wallet connect sign client")}}};return xb[e]=n,n},xv={},xE=["0x00000000851caf3cfdb6e899cf5958bfb1ac3413d346d43539627e6be7ec1b4a","0x000000000b2bce3c70bc649a02749e8687721b09ed2e15997f466536b20bb127"].map(e=>`vechain:${e.slice(-32)}`),xA=e=>{let t=xv[e];if(t)return t;let r=new xt({projectId:e,explorerRecommendedWalletIds:"NONE",mobileWallets:[{name:"VeWorld",id:"veworld-mobile",links:{native:"veworld://org.vechain.veworld.app/",universal:"https://veworld.com"}}],chains:xE,themeVariables:{"--wcm-z-index":"99999999"},walletImages:{"veworld-mobile":"https://www.veworld.net/assets/logo/logo.svg"}});return xv[e]=r,r},xx=({genesisId:e,wcClient:t,web3Modal:r,onDisconnected:i})=>{let n=e.then(e=>`vechain:${e.slice(-32)}`),s;t.get().then(e=>{o(e),a(e).catch(e=>{throw e})}).catch(()=>{throw Error("Failed to get the wallet connect sign client")}),window&&(window.onfocus=async()=>{s&&await (await t.get()).ping({topic:s.topic})});let o=e=>{e.on("session_update",({topic:t,params:r})=>{xd.debug("wallet connect signer","session_update",{topic:t,params:r});let{namespaces:i}=r;s={...e.session.get(t),namespaces:i}}),e.on("session_delete",()=>{i(),d().catch(()=>{throw Error("Failed to disconnect")})})},a=async t=>{if("u">typeof s)return;xd.debug("wallet connect signer","restore session");let r=t.session.keys,i=await e;for(let e of r){let r=t.session.get(e);for(let e of r.namespaces.vechain.accounts)if(e.split(":")[1]===i.slice(-32)){s=r;return}}},l=async t=>{if(!s)return;xd.debug("wallet connect signer","validate session");let r=s.namespaces.vechain.accounts[0],i=r.split(":")[2],n=r.split(":")[1];if(n===(await e).slice(-32)&&!(t&&t.toLowerCase()!==i.toLowerCase()))return{address:i,networkIdentifier:n,topic:s.topic}},c=async()=>{xd.debug("wallet connect signer","connect");let e=await t.get(),i={methods:Object.values(xc),chains:[await n],events:[]};try{let t=await e.connect({requiredNamespaces:{vechain:i}});return t.uri&&await r.openModal({uri:t.uri}),await new Promise((e,i)=>{let n=r.subscribeModal(e=>{e.open||(i(Error("User closed modal while connecting")),n())});t.approval().then(t=>{s=t,n(),e(t)}).catch(e=>{r.closeModal(),i(e)})})}catch(e){throw console.error("wc connect failed",e),Error("wc connect failed")}},u=async e=>{let t=await l(e);return t?t.topic:(await c()).topic},h=async(e,r)=>{let i=await u(r);return(await t.get()).request({topic:i,chainId:await n,request:e})},d=async()=>{if(!s)return;let e=s.topic;s=void 0;let r=await t.get();try{await r.disconnect({topic:e,reason:b2("USER_DISCONNECTED")})}catch(e){throw console.error("SignClient.disconnect failed",e),Error("SignClient.disconnect failed")}};return{signTx:async(e,t={})=>h({method:"thor_sendTransaction",params:[{message:e,options:t}]}),signCert:async(e,t={})=>h({method:"thor_signCertificate",params:[{message:e,options:t}]}),disconnect:d,connect:async()=>{s||(s=await c());let e=s.namespaces.vechain;if(!e)throw Error("Failed to create a vechain session with wallet connect");let t=e.accounts[0];try{return{account:t.split(":")[2],verified:!1}}catch(e){throw console.error("Failed to get account from session",e),Error("Failed to get account from session")}}}},xI={},xT=(e,t)=>{if(!xI[e]){let r=document.createElement("script"),i=new Promise((e,i)=>{r.onload=()=>e(window[t]),r.onerror=e=>i(Error(e.toString()))});xI[e]=i,r.src=e,document.body.appendChild(r)}return xI[e]},x_=async e=>{let t=await e;return xT("https://unpkg.com/@vechain/connex-wallet-buddy@0.1","ConnexWalletBuddy").then(e=>{let r=new TextEncoder;return e.create(t,()=>xr.from(M.fL.randomBytes(16)).toString("hex").replace("0x",""),e=>{let t;return t="string"==typeof e?r.encode(e):e,M.pF.of(t).toString().replace("0x","")})})},xS=async()=>{if(!window.connex)throw Error("Connex is not available");let e=window.connex.vendor;return Promise.resolve({signTx:(t,r={})=>{let i=e.sign("tx");if(r.delegator){let e=r.delegator.url;i.delegate(async t=>(await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json())}return r.onAccepted?.(),i.request(t)},signCert:(t,r={})=>{let i=e.sign("cert");return r.onAccepted?.(),i.request(t)}})},xP=({source:e,thor:t,walletConnectOptions:r,onDisconnected:i,connectionCertificate:n})=>{xd.debug("createWallet",e);let s=t.blocks.getGenesisBlock().then(e=>{if(!e)throw Error("Failed to get genesis block");return e.id});switch(e){case"sync":if(!window.connex)throw Error("Connex is not available");return new xC(xS(s),n);case"sync2":return new xC(x_(s),n);case"veworld":{if(!window.vechain)throw Error("VeWorld Extension is not installed");let e=s.then(e=>{if(!window.vechain)throw Error("VeWorld Extension is not installed");return new xC(Promise.resolve(window.vechain.newConnexSigner(e)),n)}).catch(e=>{throw xd.error("createWallet","veworld",e),e});return new xC(e,n)}case"wallet-connect":{if(!r)throw Error("WalletConnect options are not provided");let{projectId:e,metadata:t,modal:n}=r;return xx({genesisId:s,wcClient:xw({projectId:e,metadata:t}),web3Modal:n??xA(e),onDisconnected:i})}}},xN=(e,t=10,r=7)=>e.length>t+r+1?`${e.slice(0,t)}\u2026${e.slice(-r)}`:e,xO=async({address:e,thor:t})=>{if(!e)return null;let r=(await t.blocks.getGenesisBlock())?.id===xn.test.id?xs.test:xs.main;return(await t.contracts.executeCall(r,M.Yh.ofAbi(xs.abi).getFunction("getNames"),[[e]])).result.array[0]||null},xk=class{constructor(e,t){this.options=e,this.thor=t,this.wallets={},this.setAccountDomain=e=>{e?(this.state.isAccountDomainLoading=!0,xO({address:e,thor:this.thor}).then(e=>{this.state.accountDomain=e}).catch(e=>{console.error("Error getting account domain",e),this.state.accountDomain=null}).finally(()=>{this.state.isAccountDomainLoading=!1})):(this.state.accountDomain=null,this.state.isAccountDomainLoading=!1)},this.setAddress=e=>{this.state.address=e},this.setAddressAndDomain=e=>{this.setAddress(e),this.setAccountDomain(e)},this.signConnectionCertificate=async e=>{let t=e?.message||this.options.connectionCertificate?.message||xi,r=e?.options||this.options.connectionCertificate?.options||{},{annex:{domain:i,signer:n,timestamp:s},signature:o}=await this.wallet.signCert(t,r),a={...t,signature:o,signer:n,domain:i,timestamp:s};try{return M.KB.of(a).verify(),this.state.address=n,this.state.connectionCertificate=a,{account:n,verified:!0,connectionCertificate:a}}catch(e){return console.error("Failed to sign connection certificate",e),{account:n,verified:!1}}finally{this.options.walletConnectOptions?.modal?.onConnectionCertificateSigned?.()}},this.connect=e=>this.wallet.connect(e).then(e=>("wallet-connect"===this.state.source&&this.options.requireCertificate&&this.options.walletConnectOptions?.modal?.askForConnectionCertificate?this.options.walletConnectOptions.modal.askForConnectionCertificate():(this.setAddressAndDomain(e.account),this.state.connectionCertificate=e.connectionCertificate??null),e)).catch(e=>{throw xd.error("WalletManager","connect",e),e}),this.disconnect=(e=!1)=>{if(!this.state.source){this.state.source=null,this.setAddressAndDomain(null),this.state.connectionCertificate=null;return}xd.debug("WalletManager","disconnect","current source",this.state.source);let t=this.wallets[this.state.source];if(t&&!e&&t.disconnect){let e=t.disconnect();e instanceof Promise&&e.catch(e=>{xd.error("WalletManager","disconnect",e)})}this.state.source=null,this.setAddressAndDomain(null),this.state.connectionCertificate=null},this.signTx=(e,t={})=>this.wallet.signTx(e,t).then(e=>(this.state.address=e.signer,e)).catch(e=>{throw xd.error("WalletManager","signTx",e),e}),this.signCert=(e,t={})=>this.wallet.signCert(e,t).then(e=>(this.state.address=e.annex.signer,e)).catch(e=>{throw xd.error("WalletManager","signCert",e),e}),this.signTypedData=async(e,t,r,i)=>{if(!this.wallet.signTypedData)return Promise.reject(Error("signTypedData is not supported"));try{return await this.wallet.signTypedData(e,t,r,i)}catch(e){throw xd.error("WalletManager","signTypedData",e),e}},this.setSource=e=>{if(this.state.source!==e){if(this.state.source&&this.state.source!==e&&this.disconnect(),"wallet-connect"===e&&!this.options.walletConnectOptions)throw Error("WalletConnect options are not provided");if("veworld"===e&&!window.vechain)throw Error("VeWorld Extension is not installed");xd.debug("WalletManager","setSource",e),this.disconnect(),this.state.source=e}},this.subscribe=e=>(0,cv.Ld)(this.state,()=>{e(this.state)}),this.subscribeToKey=(e,t)=>(0,cE.VW)(this.state,e,e=>{t(e)}),this.initState=e=>{let t=this.getAvailableSources();if(!e)return(0,cv.sj)({source:null,address:null,accountDomain:null,isAccountDomainLoading:!1,availableSources:t,connectionCertificate:null});xm.wipeV1();let r=xm.getAccount(),i=xm.getAccountDomain(),n=xm.getSource(),s=xm.getConnectionCertificate();return(0,cv.sj)({source:n,address:r,accountDomain:i,isAccountDomainLoading:!1,availableSources:t,connectionCertificate:s})},this.initPersistence=e=>{e&&(this.subscribeToKey("address",xm.setAccount),this.subscribeToKey("accountDomain",xm.setAccountDomain),this.subscribeToKey("source",xm.setSource),this.subscribeToKey("connectionCertificate",xm.setConnectionCertificate))},this.getAvailableSources=()=>{let e=this.options.allowedWallets??xl,t=[];return e.includes("veworld")&&t.push("veworld"),this.options.walletConnectOptions&&e.includes("wallet-connect")&&t.push("wallet-connect"),e.includes("sync2")&&t.push("sync2"),window.connex&&e.includes("sync")&&t.push("sync"),t},this.setFirstDetectedSource=()=>{window.vechain?this.setSource("veworld"):this.options.walletConnectOptions?this.setSource("wallet-connect"):window.connex?this.setSource("sync"):this.setSource("sync2")},this.state=this.initState(e.usePersistence??!1),this.initPersistence(e.usePersistence??!1),xd.debug("WalletManager","constructor",this.state),window.vechain?.isInAppBrowser===!0?this.setSource("veworld"):e.useFirstDetectedSource&&this.setFirstDetectedSource()}get wallet(){let e=this.state.source;if(xd.debug("WalletManager","get wallet","current source",e),!e)throw Error("No wallet selected");let t=this.wallets[e];if(!t){if(!xl.includes(e))throw Error(`No wallet found for: ${e}`);xd.debug("WalletManager","get wallet","creating a new wallet",e),t=xP({...this.options,source:e,onDisconnected:()=>this.disconnect(!0),thor:this.thor}),this.wallets[e]=t}return t}},xC=class{constructor(e,t){this.wallet=e,this.connect=async e=>{let t=e?.message||this.certificateData.message,r=e?.options??this.certificateData.options,{annex:{domain:i,signer:n,timestamp:s},signature:o}=await this.signCert(t,r),a={...t,signature:o,signer:n,domain:i,timestamp:s};try{return M.KB.of(a).verify(),{account:n,verified:!0,connectionCertificate:a}}catch(e){return console.error("Failed to verify connection certificate",e),{account:n,verified:!1}}},this.signCert=(e,t)=>this.wallet.then(r=>r.signCert(e,t)),this.signTx=(e,t)=>this.wallet.then(r=>(t.delegator?.url===""&&(t.delegator=void 0),0===t.gas&&(t.gas=void 0),""===t.comment&&(t.comment=void 0),""===t.dependsOn&&(t.dependsOn=void 0),r.signTx(e,t))),this.signTypedData=(e,t,r,i)=>this.wallet.then(n=>{if(!n.signTypedData)throw Error("signTypedData is not implemented");return n?.signTypedData(e,t,r,i)}),this.disconnect=()=>Promise.resolve(),this.certificateData={message:t?.message??xi,options:t?.options??{}}}},xB=class e extends a9{constructor(e,t){super(t),this.walletManager=e}get address(){return this.walletManager.state.address}connect(t){return new e(this.walletManager,t)}async getAddress(){let e=this.walletManager.state.address;if(null===e)throw new U._g("VeChainPrivateKeySigner.getAddress()","No wallet is connected",{});return Promise.resolve(e)}async signTransaction(e){if(null===this.provider)throw new U._g("VeChainPrivateKeySigner.signTransaction()","Thor provider is not found into the wallet. Please attach a Provider to your wallet instance.",{transactionToSign:e});return(await this._signFlow(e,a4(await this.provider?.wallet?.getGasPayer()).gasPayerOrNull())).txid}async sendTransaction(e){if(null===this.provider)throw new U._g("VeChainPrivateKeySigner.sendTransaction()","Thor provider is not found into the wallet. Please attach a Provider to your wallet instance.",{transactionToSend:e});return this.signTransaction(e)}async signMessage(e){return Promise.reject(Error("Method not implemented."))}signTypedData(e,t,r,i,n){return this.walletManager.signTypedData(e,t,r,n)}signPayload(){return Promise.reject(Error("Method not implemented."))}async _signFlow(e,t){let r=await this.populateTransaction(e),i=[];Array.isArray(e.clauses)&&(i=r.clauses.map(e=>({to:e.to,value:e.value,data:e.data,comment:"",abi:void 0})));let n={signer:this.address,gas:Number(e.gas),dependsOn:r.dependsOn??"",delegator:{url:t?.gasPayerServiceUrl??""}};return this.walletManager.signTx(i,n)}},xR=class{constructor(e){e.logLevel&&(xd.configure(e.logLevel),xd.debug("DAppKit","constructor",e));let{node:t}=e;"string"==typeof t?this.thor=a7.at(t):this.thor=new a7(t),this.wallet=new xk(e,this.thor),this.signer=new xB(this.wallet,new cb(this.thor))}}},7844:function(e,t,r){"use strict";r.d(t,{dL:function(){return lE},Yh:function(){return lT},Nu:function(){return lx},mn:function(){return lI},NQ:function(){return lA},kL:function(){return lD},pF:function(){return lU},KB:function(){return cc},AU:function(){return cB},aH:function(){return lP},BW:function(){return lB},pU:function(){return lv},de:function(){return lN},H1:function(){return lO},GN:function(){return lR},bj:function(){return cN},h0:function(){return cs},kG:function(){return co},bg:function(){return ck},fL:function(){return lC},DP:function(){return cO},pI:function(){return cl},YW:function(){return cF},iU:function(){return cR},H_:function(){return lS},nL:function(){return lV},KL:function(){return lz},nF:function(){return lG},r_:function(){return cS},o1:function(){return cI},$f:function(){return c_},k:function(){return cM}});var i,n,s,o,a,l,c,u,h={};r.r(h),r.d(h,{gk:function(){return tV},dQ:function(){return t2},ci:function(){return tG},bytesToNumberBE:function(){return tY},ty:function(){return tJ},eV:function(){return t1},n$:function(){return t8},ql:function(){return t0},hexToBytes:function(){return tQ},_t:function(){return tH},tL:function(){return tZ},S5:function(){return tX},FF:function(){return t6}});var d={};r.r(d),r.d(d,{dQ:function(){return o6},ci:function(){return oZ},bytesToNumberBE:function(){return o1},ty:function(){return o2},eV:function(){return o5},n$:function(){return ae},ql:function(){return o8},hexToBytes:function(){return o0},tL:function(){return o3},S5:function(){return o4},FF:function(){return ar}});var f=r(3633),p=r(632);class g extends Error{constructor(e,t={}){let r=t.cause instanceof g?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof g&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],"Version: abitype@1.0.8"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}}class y extends g{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class m extends g{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class b extends g{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class w extends g{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class v extends g{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class E extends g{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}function A(e,t){let r=e.exec(t);return r?.groups}let x=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,I=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,T=/^\(.+?\).*?$/,_=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,S=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,P=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/,N=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function O(e){return N.test(e)}let k=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/,C=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/,B=/^receive\(\) external payable$/,R=new Set(["memory","indexed","storage","calldata"]),D=new Set(["indexed"]),L=new Set(["calldata","memory","storage"]);class U extends g{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class M extends g{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class F extends g{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class $ extends g{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class j extends g{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class H extends g{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class V extends g{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class z extends g{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}let G=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function q(e,t={}){if(P.test(e))return function(e,t={}){let r=A(P,e);if(!r)throw new $({signature:e,type:"function"});let i=J(r.parameters),n=[],s=i.length;for(let e=0;e<s;e++)n.push(Y(i[e],{modifiers:L,structs:t,type:"function"}));let o=[];if(r.returns){let e=J(r.returns),i=e.length;for(let r=0;r<i;r++)o.push(Y(e[r],{modifiers:L,structs:t,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:n,outputs:o}}(e,t);if(S.test(e))return function(e,t={}){let r=A(S,e);if(!r)throw new $({signature:e,type:"event"});let i=J(r.parameters),n=[],s=i.length;for(let e=0;e<s;e++)n.push(Y(i[e],{modifiers:D,structs:t,type:"event"}));return{name:r.name,type:"event",inputs:n}}(e,t);if(_.test(e))return function(e,t={}){let r=A(_,e);if(!r)throw new $({signature:e,type:"error"});let i=J(r.parameters),n=[],s=i.length;for(let e=0;e<s;e++)n.push(Y(i[e],{structs:t,type:"error"}));return{name:r.name,type:"error",inputs:n}}(e,t);if(k.test(e))return function(e,t={}){let r=A(k,e);if(!r)throw new $({signature:e,type:"constructor"});let i=J(r.parameters),n=[],s=i.length;for(let e=0;e<s;e++)n.push(Y(i[e],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:n}}(e,t);if(C.test(e))return function(e){let t=A(C,e);if(!t)throw new $({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}(e);if(B.test(e))return{type:"receive",stateMutability:"payable"};throw new j({signature:e})}let K=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,W=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Q=/^u?int$/;function Y(e,t){var r,i;let n;let s=function(e,t,r){let i="";if(r)for(let e of Object.entries(r)){if(!e)continue;let t="";for(let r of e[1])t+=`[${r.type}${r.name?`:${r.name}`:""}]`;i+=`(${e[0]}{${t}})`}return t?`${t}:${e}${i}`:e}(e,t?.type,t?.structs);if(G.has(s))return G.get(s);let o=T.test(e),a=A(o?W:K,e);if(!a)throw new m({param:e});if(a.name&&("address"===(r=a.name)||"bool"===r||"function"===r||"string"===r||"tuple"===r||x.test(r)||I.test(r)||X.test(r)))throw new b({param:e,name:a.name});let l=a.name?{name:a.name}:{},c="indexed"===a.modifier?{indexed:!0}:{},u=t?.structs??{},h={};if(o){n="tuple";let e=J(a.type),t=[],r=e.length;for(let i=0;i<r;i++)t.push(Y(e[i],{structs:u}));h={components:t}}else if(a.type in u)n="tuple",h={components:u[a.type]};else if(Q.test(a.type))n=`${a.type}256`;else if(n=a.type,t?.type!=="struct"&&!Z(n))throw new F({type:n});if(a.modifier){if(!t?.modifiers?.has?.(a.modifier))throw new w({param:e,type:t?.type,modifier:a.modifier});if(L.has(a.modifier)&&(i=n,!a.array&&"bytes"!==i&&"string"!==i&&"tuple"!==i))throw new v({param:e,type:t?.type,modifier:a.modifier})}let d={type:`${n}${a.array??""}`,...l,...c,...h};return G.set(s,d),d}function J(e,t=[],r="",i=0){let n=e.trim().length;for(let s=0;s<n;s++){let n=e[s],o=e.slice(s+1);switch(n){case",":return 0===i?J(o,[...t,r.trim()]):J(o,t,`${r}${n}`,i);case"(":return J(o,t,`${r}${n}`,i+1);case")":return J(o,t,`${r}${n}`,i-1);default:return J(o,t,`${r}${n}`,i)}}if(""===r)return t;if(0!==i)throw new z({current:r,depth:i});return t.push(r.trim()),t}function Z(e){return"address"===e||"bool"===e||"function"===e||"string"===e||x.test(e)||I.test(e)}let X=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function ee(e){let t={},r=e.length;for(let i=0;i<r;i++){let r=e[i];if(!O(r))continue;let n=A(N,r);if(!n)throw new $({signature:r,type:"struct"});let s=n.properties.split(";"),o=[],a=s.length;for(let e=0;e<a;e++){let t=s[e].trim();if(!t)continue;let r=Y(t,{type:"struct"});o.push(r)}if(!o.length)throw new H({signature:r});t[n.name]=o}let i={},n=Object.entries(t),s=n.length;for(let e=0;e<s;e++){let[r,s]=n[e];i[r]=function e(t,r,i=new Set){let n=[],s=t.length;for(let o=0;o<s;o++){let s=t[o];if(T.test(s.type))n.push(s);else{let t=A(et,s.type);if(!t?.type)throw new E({abiParameter:s});let{array:o,type:a}=t;if(a in r){if(i.has(a))throw new V({type:a});n.push({...s,type:`tuple${o??""}`,components:e(r[a]??[],r,new Set([...i,a]))})}else if(Z(a))n.push(s);else throw new M({type:a})}}return n}(s,t)}return i}let et=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function er(e){let t=[];if("string"==typeof e){let r=J(e),i=r.length;for(let e=0;e<i;e++)t.push(Y(r[e],{modifiers:R}))}else{let r=ee(e),i=e.length;for(let n=0;n<i;n++){let i=e[n];if(O(i))continue;let s=J(i),o=s.length;for(let e=0;e<o;e++)t.push(Y(s[e],{modifiers:R,structs:r}))}}if(0===t.length)throw new y({params:e});return t}var ei=r(7925),en=r(5867),es=r(1302);class eo extends es.G{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class ea extends es.G{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class el extends es.G{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}let ec={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new el({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new ea({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new eo({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new eo({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};var eu=r(4419),eh=r(9272);function ed(e,{dir:t="left"}={}){let r="string"==typeof e?e.replace("0x",""):e,i=0;for(let e=0;e<r.length-1&&"0"===r["left"===t?e:r.length-e-1].toString();e++)i++;return(r="left"===t?r.slice(i):r.slice(0,r.length-i),"string"==typeof e)?(1===r.length&&"right"===t&&(r=`${r}0`),`0x${r.length%2==1?`0${r}`:r}`):r}var ef=r(9341),ep=r(129),eg=r(6305);function ey(e,t={}){void 0!==t.size&&(0,ep.Yf)(e,{size:t.size});let r=(0,eg.ci)(e,t);return(0,ep.ly)(r,t)}var em=r(4269),eb=r(5417);function ew(e,t){let r="string"==typeof t?(0,em.nr)(t):t,i=function(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(ec);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}(r);if(0===(0,eu.d)(r)&&e.length>0)throw new ei.wb;if((0,eu.d)(t)&&32>(0,eu.d)(t))throw new ei.xB({data:"string"==typeof t?t:(0,eg.ci)(t),params:e,size:(0,eu.d)(t)});let n=0,s=[];for(let t=0;t<e.length;++t){let r=e[t];i.setPosition(n);let[o,a]=function e(t,r,{staticPosition:i}){let n=(0,eb.S)(r.type);if(n){let[s,o]=n;return function(t,r,{length:i,staticPosition:n}){if(!i){let i=n+ey(t.readBytes(32)),s=i+32;t.setPosition(i);let o=ey(t.readBytes(32)),a=ev(r),l=0,c=[];for(let i=0;i<o;++i){t.setPosition(s+(a?32*i:l));let[n,o]=e(t,r,{staticPosition:s});l+=o,c.push(n)}return t.setPosition(n+32),[c,32]}if(ev(r)){let s=n+ey(t.readBytes(32)),o=[];for(let n=0;n<i;++n){t.setPosition(s+32*n);let[i]=e(t,r,{staticPosition:s});o.push(i)}return t.setPosition(n+32),[o,32]}let s=0,o=[];for(let a=0;a<i;++a){let[i,a]=e(t,r,{staticPosition:n+s});s+=a,o.push(i)}return[o,s]}(t,{...r,type:o},{length:s,staticPosition:i})}if("tuple"===r.type)return function(t,r,{staticPosition:i}){let n=0===r.components.length||r.components.some(({name:e})=>!e),s=n?[]:{},o=0;if(ev(r)){let a=i+ey(t.readBytes(32));for(let i=0;i<r.components.length;++i){let l=r.components[i];t.setPosition(a+o);let[c,u]=e(t,l,{staticPosition:a});o+=u,s[n?i:l?.name]=c}return t.setPosition(i+32),[s,32]}for(let a=0;a<r.components.length;++a){let l=r.components[a],[c,u]=e(t,l,{staticPosition:i});s[n?a:l?.name]=c,o+=u}return[s,o]}(t,r,{staticPosition:i});if("address"===r.type)return function(e){let t=e.readBytes(32);return[(0,en.x)((0,eg.ci)((0,eh.T4)(t,-20))),32]}(t);if("bool"===r.type)return[function(e,t={}){let r=e;if(void 0!==t.size&&((0,ep.Yf)(r,{size:t.size}),r=ed(r)),r.length>1||r[0]>1)throw new ef.yr(r);return!!r[0]}(t.readBytes(32),{size:32}),32];if(r.type.startsWith("bytes"))return function(e,t,{staticPosition:r}){let[i,n]=t.type.split("bytes");if(!n){let t=ey(e.readBytes(32));e.setPosition(r+t);let i=ey(e.readBytes(32));if(0===i)return e.setPosition(r+32),["0x",32];let n=e.readBytes(i);return e.setPosition(r+32),[(0,eg.ci)(n),32]}return[(0,eg.ci)(e.readBytes(Number.parseInt(n),32)),32]}(t,r,{staticPosition:i});if(r.type.startsWith("uint")||r.type.startsWith("int"))return function(e,t){let r=t.type.startsWith("int"),i=Number.parseInt(t.type.split("int")[1]||"256"),n=e.readBytes(32);return[i>48?function(e,t={}){void 0!==t.size&&(0,ep.Yf)(e,{size:t.size});let r=(0,eg.ci)(e,t);return(0,ep.y_)(r,t)}(n,{signed:r}):ey(n,{signed:r}),32]}(t,r);if("string"===r.type)return function(e,{staticPosition:t}){let r=ey(e.readBytes(32));e.setPosition(t+r);let i=ey(e.readBytes(32));if(0===i)return e.setPosition(t+32),["",32];let n=function(e,t={}){let r=e;return void 0!==t.size&&((0,ep.Yf)(r,{size:t.size}),r=ed(r,{dir:"right"})),new TextDecoder().decode(r)}(ed(e.readBytes(i,32)));return e.setPosition(t+32),[n,32]}(t,{staticPosition:i});throw new ei.CI(r.type,{docsPath:"/docs/contract/decodeAbiParameters"})}(i,r,{staticPosition:0});n+=a,s.push(o)}return s}function ev(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(ev);let r=(0,eb.S)(e.type);return!!(r&&ev({...e,type:r[1]}))}let eE=/^tuple(?<array>(\[(\d*)\])*)$/;function eA(e){let t="",r=e.length;for(let i=0;i<r;i++)t+=function e(t){let r=t.type;if(eE.test(t.type)&&"components"in t){r="(";let i=t.components.length;for(let n=0;n<i;n++)r+=e(t.components[n]),n<i-1&&(r+=", ");let n=A(eE,t.type);return r+=`)${n?.array??""}`,e({...t,type:r})}return("indexed"in t&&t.indexed&&(r=`${r} indexed`),t.name)?`${r} ${t.name}`:r}(e[i]),i!==r-1&&(t+=", ");return t}let ex=e=>(function(e){let t=!0,r="",i=0,n="",s=!1;for(let o=0;o<e.length;o++){let a=e[o];if(["(",")",","].includes(a)&&(t=!0),"("===a&&i++,")"===a&&i--,t){if(0===i){if(" "===a&&["event","function",""].includes(n))n="";else if(n+=a,")"===a){s=!0;break}continue}if(" "===a){","!==e[o-1]&&","!==r&&",("!==r&&(r="",t=!1);continue}n+=a,r+=a}}if(!s)throw new es.G("Unable to normalize signature.");return n})("string"==typeof e?e:"function"===e.type?`function ${e.name}(${eA(e.inputs)})${e.stateMutability&&"nonpayable"!==e.stateMutability?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${eA(e.outputs)})`:""}`:"event"===e.type?`event ${e.name}(${eA(e.inputs)})`:"error"===e.type?`error ${e.name}(${eA(e.inputs)})`:"constructor"===e.type?`constructor(${eA(e.inputs)})${"payable"===e.stateMutability?" payable":""}`:"fallback"===e.type?`fallback() external${"payable"===e.stateMutability?" payable":""}`:"receive() external payable");var eI=r(8151);let eT=e=>(0,eI.w)((0,em.O0)(e));function e_(e){return eT(ex(e))}var eS=r(3113);let eP="/docs/contract/decodeEventLog";class eN extends es.G{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}var eO=r(9067),ek=r(1880);let eC=e=>(0,eh.tP)(e_(e),0,4);function eB(e){let t;let{abi:r,args:i=[],name:n}=e,s=(0,eO.v)(n,{strict:!1}),o=r.filter(e=>s?"function"===e.type?eC(e)===n:"event"===e.type&&e_(e)===n:"name"in e&&e.name===n);if(0!==o.length){if(1===o.length)return o[0];for(let e of o)if("inputs"in e){if(!i||0===i.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===i.length&&i.every((t,r)=>{let i="inputs"in e&&e.inputs[r];return!!i&&function e(t,r){let i=typeof t,n=r.type;switch(n){case"address":return(0,ek.U)(t,{strict:!1});case"bool":return"boolean"===i;case"function":case"string":return"string"===i;default:if("tuple"===n&&"components"in r)return Object.values(r.components).every((r,i)=>e(Object.values(t)[i],r));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n))return"number"===i||"bigint"===i;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n))return"string"===i||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n))return Array.isArray(t)&&t.every(t=>e(t,{...r,type:n.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,i)})){if(t&&"inputs"in t&&t.inputs){let r=function e(t,r,i){for(let n in t){let s=t[n],o=r[n];if("tuple"===s.type&&"tuple"===o.type&&"components"in s&&"components"in o)return e(s.components,o.components,i[n]);let a=[s.type,o.type];if(a.includes("address")&&a.includes("bytes20")||(a.includes("address")&&a.includes("string")||a.includes("address")&&a.includes("bytes"))&&(0,ek.U)(i[n],{strict:!1}))return a}}(e.inputs,t.inputs,i);if(r)throw new ei.S4({abiItem:e,type:r[0]},{abiItem:t,type:r[1]})}t=e}}return t||o[0]}}let eR="/docs/contract/encodeEventTopics";function eD({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,eI.w)((0,em.O0)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new eN(e.type);return(0,eb.E)([e],[t])}var eL=r(1676);let eU="/docs/contract/encodeFunctionData",eM="/docs/contract/decodeFunctionResult";var eF=r(5341);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let e$=BigInt(0),ej=BigInt(1);function eH(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}function eV(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function ez(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?e$:BigInt("0x"+e)}function eG(e){return ez((0,eF.ci)(e))}function eq(e){return(0,eF.gk)(e),ez((0,eF.ci)(Uint8Array.from(e).reverse()))}function eK(e,t){return(0,eF.nr)(e.toString(16).padStart(2*t,"0"))}function eW(e,t){return eK(e,t).reverse()}function eQ(e,t,r){let i;if("string"==typeof t)try{i=(0,eF.nr)(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if((0,eF._t)(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}let eY=e=>"bigint"==typeof e&&e$<=e,eJ=e=>(ej<<BigInt(e))-ej;function eZ(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function i(t,r,i){let n=e[t];if(i&&void 0===n)return;let s=typeof n;if(s!==r||null===n)throw Error(`param "${t}" is invalid: expected ${r}, got ${s}`)}Object.entries(t).forEach(([e,t])=>i(e,t,!1)),Object.entries(r).forEach(([e,t])=>i(e,t,!0))}function eX(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}function e0(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function e1(e,...t){if(!(e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function e2(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let e3="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,e4=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e8=(e,t)=>e<<32-t|e>>>t,e5=(e,t)=>e<<t|e>>>32-t>>>0;new Uint8Array(new Uint32Array([287454020]).buffer)[0];let e6=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),e7={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function e9(e){return e>=e7._0&&e<=e7._9?e-e7._0:e>=e7._A&&e<=e7._F?e-(e7._A-10):e>=e7._a&&e<=e7._f?e-(e7._a-10):void 0}function te(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function tt(e){return"string"==typeof e&&(e=te(e)),e1(e),e}function tr(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];e1(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class ti{clone(){return this._cloneInto()}}function tn(e){let t=t=>e().update(tt(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ts(e=32){if(e3&&"function"==typeof e3.getRandomValues)return e3.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}class to extends ti{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");e0(e.outputLen),e0(e.blockLen)}(e);let r=tt(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return e2(this),this.iHash.update(e),this}digestInto(e){e2(this),e1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let ta=(e,t,r)=>new to(e,t).update(r).digest();ta.create=(e,t)=>new to(e,t);let tl=(e,t,r)=>e&t^~e&r,tc=(e,t,r)=>e&t^e&r^t&r;class tu extends ti{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e4(this.buffer)}update(e){e2(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=tt(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=e4(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){e2(this),function(e,t){e1(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=e4(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let th=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),td=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),tf=td.map(e=>(9*e+5)%16),tp=[td],tg=[tf];for(let e=0;e<4;e++)for(let t of[tp,tg])t.push(t[e].map(e=>th[e]));let ty=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),tm=tp.map((e,t)=>e.map(e=>ty[t][e])),tb=tg.map((e,t)=>e.map(e=>ty[t][e])),tw=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),tv=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function tE(e,t,r,i){return 0===e?t^r^i:1===e?t&r|~t&i:2===e?(t|~r)^i:3===e?t&i|r&~i:t^(r|~i)}let tA=new Uint32Array(16);class tx extends tu{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:i,h4:n}=this;return[e,t,r,i,n]}set(e,t,r,i,n){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|i,this.h4=0|n}process(e,t){for(let r=0;r<16;r++,t+=4)tA[r]=e.getUint32(t,!0);let r=0|this.h0,i=r,n=0|this.h1,s=n,o=0|this.h2,a=o,l=0|this.h3,c=l,u=0|this.h4,h=u;for(let e=0;e<5;e++){let t=4-e,d=tw[e],f=tv[e],p=tp[e],g=tg[e],y=tm[e],m=tb[e];for(let t=0;t<16;t++){let i=e5(r+tE(e,n,o,l)+tA[p[t]]+d,y[t])+u|0;r=u,u=l,l=0|e5(o,10),o=n,n=i}for(let e=0;e<16;e++){let r=e5(i+tE(t,s,a,c)+tA[g[e]]+f,m[e])+h|0;i=h,h=c,c=0|e5(a,10),a=s,s=r}}this.set(this.h1+o+c|0,this.h2+l+h|0,this.h3+u+i|0,this.h4+r+s|0,this.h0+n+a|0)}roundClean(){tA.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}let tI=tn(()=>new tx),tT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t_=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tS=new Uint32Array(64);class tP extends tu{constructor(){super(64,32,8,!1),this.A=0|t_[0],this.B=0|t_[1],this.C=0|t_[2],this.D=0|t_[3],this.E=0|t_[4],this.F=0|t_[5],this.G=0|t_[6],this.H=0|t_[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)tS[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=tS[e-15],r=tS[e-2],i=e8(t,7)^e8(t,18)^t>>>3,n=e8(r,17)^e8(r,19)^r>>>10;tS[e]=n+tS[e-7]+i+tS[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(e8(o,6)^e8(o,11)^e8(o,25))+tl(o,a,l)+tT[e]+tS[e]|0,u=(e8(r,2)^e8(r,13)^e8(r,22))+tc(r,i,n)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+u|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){tS.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let tN=tn(()=>new tP),tO=BigInt(4294967296-1),tk=BigInt(32);function tC(e,t=!1){return t?{h:Number(e&tO),l:Number(e>>tk&tO)}:{h:0|Number(e>>tk&tO),l:0|Number(e&tO)}}var tB={fromBig:tC,split:function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=tC(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]},toBig:(e,t)=>BigInt(e>>>0)<<tk|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)};let[tR,tD]=tB.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),tL=new Uint32Array(80),tU=new Uint32Array(80);class tM extends tu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)tL[r]=e.getUint32(t),tU[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|tL[e-15],r=0|tU[e-15],i=tB.rotrSH(t,r,1)^tB.rotrSH(t,r,8)^tB.shrSH(t,r,7),n=tB.rotrSL(t,r,1)^tB.rotrSL(t,r,8)^tB.shrSL(t,r,7),s=0|tL[e-2],o=0|tU[e-2],a=tB.rotrSH(s,o,19)^tB.rotrBH(s,o,61)^tB.shrSH(s,o,6),l=tB.rotrSL(s,o,19)^tB.rotrBL(s,o,61)^tB.shrSL(s,o,6),c=tB.add4L(n,l,tU[e-7],tU[e-16]),u=tB.add4H(c,i,a,tL[e-7],tL[e-16]);tL[e]=0|u,tU[e]=0|c}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){let t=tB.rotrSH(u,h,14)^tB.rotrSH(u,h,18)^tB.rotrBH(u,h,41),b=tB.rotrSL(u,h,14)^tB.rotrSL(u,h,18)^tB.rotrBL(u,h,41),w=u&d^~u&p,v=h&f^~h&g,E=tB.add5L(m,b,v,tD[e],tU[e]),A=tB.add5H(E,y,t,w,tR[e],tL[e]),x=0|E,I=tB.rotrSH(r,i,28)^tB.rotrBH(r,i,34)^tB.rotrBH(r,i,39),T=tB.rotrSL(r,i,28)^tB.rotrBL(r,i,34)^tB.rotrBL(r,i,39),_=r&n^r&o^n&o,S=i&s^i&a^s&a;y=0|p,m=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=tB.add(0|l,0|c,0|A,0|x)),l=0|o,c=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let P=tB.add3L(x,T,S);r=tB.add3H(P,A,I,_),i=0|P}({h:r,l:i}=tB.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=tB.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=tB.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=tB.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=tB.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=tB.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=tB.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=tB.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(r,i,n,s,o,a,l,c,u,h,d,f,p,g,y,m)}roundClean(){tL.fill(0),tU.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let tF=tn(()=>new tM),t$=BigInt(1),tj=BigInt(2);function tH(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function tV(e){if(!tH(e))throw Error("Uint8Array expected")}let tz=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tG(e){tV(e);let t="";for(let r=0;r<e.length;r++)t+=tz[e[r]];return t}function tq(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}let tK={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function tW(e){return e>=tK._0&&e<=tK._9?e-tK._0:e>=tK._A&&e<=tK._F?e-(tK._A-10):e>=tK._a&&e<=tK._f?e-(tK._a-10):void 0}function tQ(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=tW(e.charCodeAt(n)),s=tW(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function tY(e){return tq(tG(e))}function tJ(e){return tV(e),tq(tG(Uint8Array.from(e).reverse()))}function tZ(e,t){return tQ(e.toString(16).padStart(2*t,"0"))}function tX(e,t){return tZ(e,t).reverse()}function t0(e,t,r){let i;if("string"==typeof t)try{i=tQ(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(tH(t))i=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let n=i.length;if("number"==typeof r&&n!==r)throw Error(`${e} expected ${r} bytes, got ${n}`);return i}function t1(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];tV(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let t2=e=>(tj<<BigInt(e-1))-t$,t3=e=>new Uint8Array(e),t4=e=>Uint8Array.from(e);function t8(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=t3(e),n=t3(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=t3())=>{n=a(t4([0]),e),i=a(),0!==e.length&&(n=a(t4([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return t1(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let t5={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||tH(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function t6(e,t,r={}){let i=(t,r,i)=>{let n=t5[r];if("function"!=typeof n)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!i||void 0!==s)&&!n(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let t7=BigInt(0),t9=BigInt(1),re=BigInt(2),rt=BigInt(3),rr=BigInt(4),ri=BigInt(5),rn=BigInt(8);function rs(e,t){let r=e%t;return r>=t7?r:t+r}function ro(e,t,r){let i=e;for(;t-- >t7;)i*=i,i%=r;return i}function ra(e,t){if(e===t7||t<=t7)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=rs(e,t),i=t,n=t7,s=t9,o=t9,a=t7;for(;r!==t7;){let e=i/r,t=i%r,l=n-o*e,c=s-a*e;i=r,r=t,n=o,s=a,o=l,a=c}if(i!==t9)throw Error("invert: does not exist");return rs(n,t)}BigInt(9),BigInt(16);let rl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rc(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function ru(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function rh(e){let t=ru(e);return t+Math.ceil(t/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let rd=BigInt(0),rf=BigInt(1);function rp(e){return t6(e.Fp,rl.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),t6(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{bytesToNumberBE:rg,hexToBytes:ry}=h,rm={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=rm;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],i=e.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:rg(i),l:e.subarray(r+2)}},toSig(e){let{Err:t}=rm,r="string"==typeof e?ry(e):e;tV(r);let i=r.length;if(i<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");let{d:n,l:s}=rm._parseInt(r.subarray(2)),{d:o,l:a}=rm._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:n,s:o}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},i=t(r(e.s)),n=t(r(e.r)),s=i.length/2,o=n.length/2,a=r(s),l=r(o);return`30${r(o+s+4)}02${l}${n}02${a}${i}`}},rb=BigInt(0),rw=BigInt(1),rv=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let rE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),rA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rx=BigInt(1),rI=BigInt(2),rT=(e,t)=>(e+t/rI)/t,r_=function(e,t,r=!1,i={}){if(e<=t7)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:n,nByteLength:s}=rc(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let o=function(e){if(e%rr===rt){let t=(e+t9)/rr;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%rn===ri){let t=(e-ri)/rn;return function(e,r){let i=e.mul(r,re),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,re),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-t9)/re;for(t=e-t9,r=0;t%re===t7;t/=re,r++);for(i=re;i<e&&function(e,t,r){if(r<=t7||t<t7)throw Error("Expected power/modulo > 0");if(r===t9)return t7;let i=t9;for(;t>t7;)t&t9&&(i=i*e%r),e=e*e%r,t>>=t9;return i}(i,n,e)!==e-t9;i++);if(1===r){let t=(e+t9)/rr;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+t9)/re;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,t9<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e),a=Object.freeze({ORDER:e,BITS:n,BYTES:s,MASK:t2(n),ZERO:t7,ONE:t9,create:t=>rs(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return t7<=t&&t<e},is0:e=>e===t7,isOdd:e=>(e&t9)===t9,neg:t=>rs(-t,e),eql:(e,t)=>e===t,sqr:t=>rs(t*t,e),add:(t,r)=>rs(t+r,e),sub:(t,r)=>rs(t-r,e),mul:(t,r)=>rs(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<t7)throw Error("Expected power > 0");if(r===t7)return e.ONE;if(r===t9)return t;let i=e.ONE,n=t;for(;r>t7;)r&t9&&(i=e.mul(i,n)),n=e.sqr(n),r>>=t9;return i})(a,e,t),div:(t,r)=>rs(t*ra(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ra(t,e),sqrt:i.sqrt||(e=>o(a,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?tX(e,s):tZ(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?tJ(e):tY(e)}});return Object.freeze(a)}(rE,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),l=e*e*e%rE,c=l*l*e%rE,u=ro(c,t,rE)*c%rE,h=ro(u,t,rE)*c%rE,d=ro(h,rI,rE)*l%rE,f=ro(d,i,rE)*d%rE,p=ro(f,n,rE)*f%rE,g=ro(p,o,rE)*p%rE,y=ro(g,a,rE)*g%rE,m=ro(y,o,rE)*p%rE,b=ro(m,t,rE)*c%rE,w=ro(b,s,rE)*f%rE,v=ro(w,r,rE)*l%rE,E=ro(v,rI,rE);if(!r_.eql(r_.sqr(E),e))throw Error("Cannot find square root");return E}}),rS=function(e,t){let r=t=>(function(e){let t=function(e){let t=rp(e);return t6(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return rs(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){let t=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(e){let t=rp(e);t6(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,i=t.toBytes||((e,t,i)=>{let n=t.toAffine();return t1(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),n=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:i,b:n}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,i)),n)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&rb<e&&e<t.n}function a(e){if(!o(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=t;if(i&&"bigint"!=typeof e){if(tH(e)&&(e=tG(e)),"string"!=typeof e||!i.includes(e.length))throw Error("Invalid key");e=e.padStart(2*n,"0")}try{r="bigint"==typeof e?e:tY(t0("private key",e,n))}catch(t){throw Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return s&&(r=rs(r,o)),a(r),r}let c=new Map;function u(e){if(!(e instanceof h))throw Error("ProjectivePoint expected")}class h{constructor(e,t,i){if(this.px=e,this.py=t,this.pz=i,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==i||!r.isValid(i))throw Error("z required")}static fromAffine(e){let{x:t,y:i}=e||{};if(!e||!r.isValid(t)||!r.isValid(i))throw Error("invalid affine point");if(e instanceof h)throw Error("projective point not allowed");let n=e=>r.eql(e,r.ZERO);return n(t)&&n(i)?h.ZERO:new h(t,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)}static fromHex(e){let t=h.fromAffine(n(t0("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:i}=this.toAffine();if(!r.isValid(e)||!r.isValid(i))throw Error("bad point: x or y not FE");let n=r.sqr(i),o=s(e);if(!r.eql(n,o))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:i,pz:n}=this,{px:s,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(s,n)),c=r.eql(r.mul(i,a),r.mul(o,n));return l&&c}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:i}=t,n=r.mul(i,rv),{px:s,py:o,pz:a}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),u=r.mul(s,a),u=r.add(u,u),l=r.mul(e,u),c=r.mul(n,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(n,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,g),l=r.sub(l,d),u=r.mul(p,f),u=r.add(u,u),new h(l,c,u=r.add(u,u))}add(e){u(e);let{px:i,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,c=r.ZERO,d=r.ZERO,f=r.ZERO,p=t.a,g=r.mul(t.b,rv),y=r.mul(i,o),m=r.mul(n,a),b=r.mul(s,l),w=r.add(i,n),v=r.add(o,a);w=r.mul(w,v),v=r.add(y,m),w=r.sub(w,v),v=r.add(i,s);let E=r.add(o,l);return v=r.mul(v,E),E=r.add(y,b),v=r.sub(v,E),E=r.add(n,s),c=r.add(a,l),E=r.mul(E,c),c=r.add(m,b),E=r.sub(E,c),f=r.mul(p,v),c=r.mul(g,b),f=r.add(c,f),c=r.sub(m,f),f=r.add(m,f),d=r.mul(c,f),m=r.add(y,y),m=r.add(m,y),b=r.mul(p,b),v=r.mul(g,v),m=r.add(m,b),b=r.sub(y,b),b=r.mul(p,b),v=r.add(v,b),y=r.mul(m,v),d=r.add(d,y),y=r.mul(E,v),c=r.mul(w,c),c=r.sub(c,y),y=r.mul(w,m),f=r.mul(E,f),new h(c,d,f=r.add(f,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,c,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)})}multiplyUnsafe(e){let i=h.ZERO;if(e===rb)return i;if(a(e),e===rw)return this;let{endo:n}=t;if(!n)return f.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:l,k2:c}=n.splitScalar(e),u=i,d=i,p=this;for(;o>rb||c>rb;)o&rw&&(u=u.add(p)),c&rw&&(d=d.add(p)),p=p.double(),o>>=rw,c>>=rw;return s&&(u=u.negate()),l&&(d=d.negate()),d=new h(r.mul(d.px,n.beta),d.py,d.pz),u.add(d)}multiply(e){let i,n;a(e);let{endo:s}=t;if(s){let{k1neg:t,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:d,f:p}=this.wNAF(l);c=f.constTimeNegate(t,c),d=f.constTimeNegate(a,d),d=new h(r.mul(d.px,s.beta),d.py,d.pz),i=c.add(d),n=u.add(p)}else{let{p:t,f:r}=this.wNAF(e);i=t,n=r}return h.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=h.BASE,n=(e,t)=>t!==rb&&t!==rw&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:i,pz:n}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(n));let o=r.mul(t,e),a=r.mul(i,e),l=r.mul(n,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===rw)return!0;if(r)return r(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===rw?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),i(h,this,e)}toHex(e=!0){return tG(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let d=t.nBitLength,f=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let i=e.ZERO,n=t;for(;r>rd;)r&rf&&(i=i.add(n)),n=n.double(),r>>=rf;return i},precomputeWindow(e,t){let{windows:r,windowSize:n}=i(t),s=[],o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,n,s){let{windows:o,windowSize:a}=i(t),l=e.ZERO,c=e.BASE,u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<o;e++){let t=e*a,i=Number(s&u);s>>=d,i>a&&(i-=h,s+=rf);let o=t+Math.abs(i)-1,f=e%2!=0,p=i<0;0===i?c=c.add(r(f,n[t])):l=l.add(r(p,n[o]))}return{p:l,f:c}},wNAFCached(e,t,r,i){let n=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,n),1!==n&&t.set(e,i(s))),this.wNAF(n,s,r)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x),o=t1;return i?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e;let t=tY(o);if(!(rb<t&&t<r.ORDER))throw Error("Point is not on curve");let n=c(t);try{e=r.sqrt(n)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&i)==1!=((e&rw)===rw)&&(e=r.neg(e)),{x:t,y:e}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${n} compressed bytes or ${s} uncompressed bytes`)}}),h=e=>tG(tZ(e,t.nByteLength)),d=(e,t,r)=>tY(e.slice(t,r));class f{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new f(d(e=t0("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=rm.toSig(t0("DER",e));return new f(t,r)}assertValidity(){if(!u(this.r))throw Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s,recovery:l}=this,c=y(t0("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",f=a.fromHex(d+h(u)),p=ra(u,i),g=o(-c*p),m=o(s*p),b=a.BASE.multiplyAndAddUnsafe(f,g,m);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>i>>rw}normalizeS(){return this.hasHighS()?new f(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return tQ(this.toDERHex())}toDERHex(){return rm.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tQ(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function p(e){let t=tH(e),r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){let r=tY(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},y=t.bits2int_modN||function(e){return o(g(e))},m=t2(t.nBitLength);function b(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(rb<=e&&e<m))throw Error(`bigint expected < 2^${t.nBitLength}`);return tZ(e,t.nByteLength)}let w={lowS:t.lowS,prehash:!1},v={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=w){let{seed:c,k2sig:h}=function(e,n,s=w){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:p,extraEntropy:m}=s;null==d&&(d=!0),e=t0("msgHash",e),p&&(e=t0("prehashed msgHash",c(e)));let v=y(e),E=l(n),A=[b(E),b(v)];if(null!=m&&!1!==m){let e=!0===m?h(r.BYTES):m;A.push(t0("extraEntropy",e))}return{seed:t1(...A),k2sig:function(e){let t=g(e);if(!u(t))return;let r=ra(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===rb)return;let l=o(r*o(v+s*E));if(l===rb)return;let c=(n.x===s?0:2)|Number(n.y&rw),h=l;if(d&&l>i>>rw)h=l>i>>rw?o(-l):l,c^=1;return new f(s,h,c)}}}(e,n,s);return t8(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=v){let l,c;if(r=t0("msgHash",r),n=t0("publicKey",n),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:u,prehash:h}=s;try{if("string"==typeof e||tH(e))try{c=f.fromDER(e)}catch(t){if(!(t instanceof rm.Err))throw t;c=f.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;c=new f(t,r)}else throw Error("PARSE");l=a.fromHex(n)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&c.hasHighS())return!1;h&&(r=t.hash(r));let{r:d,s:p}=c,g=y(r),m=ra(p,i),b=o(g*m),w=o(d*m),E=a.BASE.multiplyAndAddUnsafe(l,b,w)?.toAffine();return!!E&&o(E.x)===d},ProjectivePoint:a,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=rh(t.n);return function(e,t,r=!1){let i=e.length,n=ru(t),s=rh(t);if(i<16||i<s||i>1024)throw Error(`expected ${s}-1024 bytes of input, got ${i}`);let o=rs(r?tY(e):tJ(e),t-t9)+t9;return r?tX(o,n):tZ(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>ta(t,e,tr(...r)),randomBytes:ts});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:r_,n:rA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-rx*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),s=rT(t*e,rA),o=rT(-r*e,rA),a=rs(e-s*t-o*i,rA),l=rs(-s*r-o*t,rA),c=a>n,u=l>n;if(c&&(a=rA-a),u&&(l=rA-l),a>n||l>n)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:a,k2neg:u,k2:l}}}},tN);function rP(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function rN(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function rO(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function rk(e=""){if("string"!=typeof e)throw Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw Error("join.decode input should be string");return t.split(e)}}}function rC(e,t,r){if(t<2)throw Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw Error("convertRadix: data should be array");if(!e.length)return[];let i=0,n=[],s=Array.from(e);for(s.forEach(e=>{if(e<0||e>=t)throw Error(`Wrong integer: ${e}`)});;){let e=0,o=!0;for(let n=i;n<s.length;n++){let a=s[n],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!=t*e)throw Error("convertRadix: carry overflow");e=l%r;let c=Math.floor(l/r);if(s[n]=c,!Number.isSafeInteger(c)||c*r+e!==l)throw Error("convertRadix: carry overflow");o&&(c?o=!1:i=n)}if(n.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)n.push(0);return n.reverse()}BigInt(0),rS.ProjectivePoint;let rB=(e,t)=>t?rB(t,e%t):e,rR=rN({encode:e=>{if(!rP(e))throw Error("radix.encode input should be Uint8Array");return rC(Array.from(e),256,58)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw Error("radix.decode input should be array of numbers");return Uint8Array.from(rC(e,58,256))}},rO("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),rk("")),rD=rS.ProjectivePoint,rL=rN(function(e,t){if("function"!=typeof t)throw Error("checksum fn should be function");return{encode(r){if(!rP(r))throw Error("checksum.encode: input should be Uint8Array");let i=t(r).slice(0,e),n=new Uint8Array(r.length+e);return n.set(r),n.set(i,r.length),n},decode(r){if(!rP(r))throw Error("checksum.decode: input should be Uint8Array");let i=r.slice(0,-e),n=t(i).slice(0,e),s=r.slice(-e);for(let t=0;t<e;t++)if(n[t]!==s[t])throw Error("Invalid checksum");return i}}}(4,e=>tN(tN(e))),rR);function rU(e){return BigInt(`0x${function(e){e1(e);let t="";for(let r=0;r<e.length;r++)t+=e6[e[r]];return t}(e)}`)}let rM=te("Bitcoin seed"),rF={private:76066276,public:76067358},r$=e=>tI(tN(e)),rj=e=>e4(e).getUint32(0,!1),rH=e=>{if(!Number.isSafeInteger(e)||e<0||e>4294967296-1)throw Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);let t=new Uint8Array(4);return e4(t).setUint32(0,e,!1),t};class rV{get fingerprint(){if(!this.pubHash)throw Error("No publicKey set!");return rj(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let e=this.privateKey;if(!e)throw Error("No private key");return rL.encode(this.serialize(this.versions.private,tr(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw Error("No public key");return rL.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=rF){if(e1(e),8*e.length<128||8*e.length>512)throw Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);let r=ta(tF,rM,e);return new rV({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=rF){let r=rL.decode(e),i=e4(r),n=i.getUint32(0,!1),s={versions:t,depth:r[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:r.slice(13,45)},o=r.slice(45),a=0===o[0];if(n!==t[a?"private":"public"])throw Error("Version mismatch");return new rV(a?{...s,privateKey:o.slice(1)}:{...s,publicKey:o})}static fromJSON(e){return rV.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||rF,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!rS.utils.isValidPrivateKey(e.privateKey))throw Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:rU(e.privateKey),this.privKeyBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=e9(e.charCodeAt(n)),s=e9(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}(this.privKey.toString(16).padStart(64,"0")),this.pubKey=rS.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=rD.fromHex(e.publicKey).toRawBytes(!0);else throw Error("HDKey: no public or private key provided");this.pubHash=r$(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;let t=e.replace(/^[mM]'?\//,"").split("/"),r=this;for(let e of t){let t=/^(\d+)('?)$/.exec(e),i=t&&t[1];if(!t||3!==t.length||"string"!=typeof i)throw Error(`Invalid child index: ${e}`);let n=+i;if(!Number.isSafeInteger(n)||n>=2147483648)throw Error("Invalid index");"'"===t[2]&&(n+=2147483648),r=r.deriveChild(n)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw Error("No publicKey or chainCode set");let t=rH(e);if(e>=2147483648){let e=this.privateKey;if(!e)throw Error("Could not derive hardened child key");t=tr(new Uint8Array([0]),e,t)}else t=tr(this.pubKey,t);let r=ta(tF,this.chainCode,t),i=rU(r.slice(0,32)),n=r.slice(32);if(!rS.utils.isValidPrivateKey(i))throw Error("Tweak bigger than curve order");let s={versions:this.versions,chainCode:n,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){let e=rs(this.privKey+i,rS.CURVE.n);if(!rS.utils.isValidPrivateKey(e))throw Error("The tweak was out of range or the resulted private key is invalid");s.privateKey=e}else{let e=rD.fromHex(this.pubKey).add(rD.fromPrivateKey(i));if(e.equals(rD.ZERO))throw Error("The tweak was equal to negative P, which made the result key invalid");s.publicKey=e.toRawBytes(!0)}return new rV(s)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw Error("No privateKey set!");return e1(e,32),rS.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){let r;if(e1(e,32),e1(t,64),!this.publicKey)throw Error("No publicKey set!");try{r=rS.Signature.fromCompact(t)}catch(e){return!1}return rS.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw Error("No chainCode set");return e1(t,33),tr(rH(e),new Uint8Array([this.depth]),rH(this.parentFingerprint),rH(this.index),this.chainCode,t)}}class rz extends eF.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,eF.z3)(e);let r=(0,eF.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),(0,eF.ru)(n)}update(e){return(0,eF.$h)(this),this.iHash.update(e),this}digestInto(e){(0,eF.$h)(this),(0,eF.gk)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let rG=(e,t,r)=>new rz(e,t).update(r).digest();function rq(e,t,r,i){var n;let s;let{c:o,dkLen:a,DK:l,PRF:c,PRFSalt:u}=function(e,t,r,i){(0,eF.z3)(e);let{c:n,dkLen:s,asyncTick:o}=(0,eF.U5)({dkLen:32,asyncTick:10},i);if((0,eF.k8)(n),(0,eF.k8)(s),(0,eF.k8)(o),n<1)throw Error("iterations (c) should be >= 1");let a=(0,eF.A0)(t),l=(0,eF.A0)(r),c=new Uint8Array(s),u=rG.create(e,a),h=u._cloneInto().update(l);return{c:n,dkLen:s,asyncTick:o,DK:c,PRF:u,PRFSalt:h}}(e,t,r,i),h=new Uint8Array(4),d=(0,eF.GL)(h),f=new Uint8Array(c.outputLen);for(let e=1,t=0;t<a;e++,t+=c.outputLen){let r=l.subarray(t,t+c.outputLen);d.setInt32(0,e,!1),(s=u._cloneInto(s)).update(h).digestInto(f),r.set(f.subarray(0,r.length));for(let e=1;e<o;e++){c._cloneInto(s).update(f).digestInto(f);for(let e=0;e<r.length;e++)r[e]^=f[e]}}return n=s,c.destroy(),u.destroy(),n&&n.destroy(),(0,eF.ru)(f),l}rG.create=(e,t)=>new rz(e,t);class rK extends eF.kb{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=(0,eF.GL)(this.buffer)}update(e){(0,eF.$h)(this),e=(0,eF.O0)(e),(0,eF.gk)(e);let{view:t,buffer:r,blockLen:i}=this,n=e.length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=(0,eF.GL)(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,eF.$h)(this),(0,eF.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,(0,eF.ru)(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=(0,eF.GL)(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=n,e.length=i,e.pos=o,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let rW=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rQ=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var rY=r(6699);let rJ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rZ=new Uint32Array(64);class rX extends rK{constructor(e=32){super(64,e,8,!1),this.A=0|rW[0],this.B=0|rW[1],this.C=0|rW[2],this.D=0|rW[3],this.E=0|rW[4],this.F=0|rW[5],this.G=0|rW[6],this.H=0|rW[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)rZ[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=rZ[e-15],r=rZ[e-2],i=(0,eF.np)(t,7)^(0,eF.np)(t,18)^t>>>3,n=(0,eF.np)(r,17)^(0,eF.np)(r,19)^r>>>10;rZ[e]=n+rZ[e-7]+i+rZ[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){var u,h,d,f;let t=c+((0,eF.np)(o,6)^(0,eF.np)(o,11)^(0,eF.np)(o,25))+((u=o)&a^~u&l)+rJ[e]+rZ[e]|0,p=((0,eF.np)(r,2)^(0,eF.np)(r,13)^(0,eF.np)(r,22))+((h=r)&(d=i)^h&(f=n)^d&f)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+p|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){(0,eF.ru)(rZ)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,eF.ru)(this.buffer)}}let r0=rY.Vl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),r1=r0[0],r2=r0[1],r3=new Uint32Array(80),r4=new Uint32Array(80);class r8 extends rK{constructor(e=64){super(128,e,16,!1),this.Ah=0|rQ[0],this.Al=0|rQ[1],this.Bh=0|rQ[2],this.Bl=0|rQ[3],this.Ch=0|rQ[4],this.Cl=0|rQ[5],this.Dh=0|rQ[6],this.Dl=0|rQ[7],this.Eh=0|rQ[8],this.El=0|rQ[9],this.Fh=0|rQ[10],this.Fl=0|rQ[11],this.Gh=0|rQ[12],this.Gl=0|rQ[13],this.Hh=0|rQ[14],this.Hl=0|rQ[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)r3[r]=e.getUint32(t),r4[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|r3[e-15],r=0|r4[e-15],i=rY.m_(t,r,1)^rY.m_(t,r,8)^rY.NI(t,r,7),n=rY.Ou(t,r,1)^rY.Ou(t,r,8)^rY.Iq(t,r,7),s=0|r3[e-2],o=0|r4[e-2],a=rY.m_(s,o,19)^rY.FL(s,o,61)^rY.NI(s,o,6),l=rY.Ou(s,o,19)^rY.$p(s,o,61)^rY.Iq(s,o,6),c=rY.Xb(n,l,r4[e-7],r4[e-16]),u=rY.u8(c,i,a,r3[e-7],r3[e-16]);r3[e]=0|u,r4[e]=0|c}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){let t=rY.m_(u,h,14)^rY.m_(u,h,18)^rY.FL(u,h,41),b=rY.Ou(u,h,14)^rY.Ou(u,h,18)^rY.$p(u,h,41),w=u&d^~u&p,v=h&f^~h&g,E=rY.zP(m,b,v,r2[e],r4[e]),A=rY.pp(E,y,t,w,r1[e],r3[e]),x=0|E,I=rY.m_(r,i,28)^rY.FL(r,i,34)^rY.FL(r,i,39),T=rY.Ou(r,i,28)^rY.$p(r,i,34)^rY.$p(r,i,39),_=r&n^r&o^n&o,S=i&s^i&a^s&a;y=0|p,m=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=rY.IH(0|l,0|c,0|A,0|x)),l=0|o,c=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let P=rY.ac(x,T,S);r=rY.Fn(P,A,I,_),i=0|P}({h:r,l:i}=rY.IH(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=rY.IH(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=rY.IH(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=rY.IH(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=rY.IH(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=rY.IH(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=rY.IH(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=rY.IH(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(r,i,n,s,o,a,l,c,u,h,d,f,p,g,y,m)}roundClean(){(0,eF.ru)(r3,r4)}destroy(){(0,eF.ru)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let r5=(0,eF.V1)(()=>new rX),r6=(0,eF.V1)(()=>new r8);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function r7(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function r9(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function ie(e){if("function"!=typeof e)throw Error("function expected");return!0}function it(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function ir(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function ii(e){if(!Array.isArray(e))throw Error("array expected")}function is(e,t){if(!r9(!0,t))throw Error(`${e}: array of strings expected`)}function io(e,t){if(!r9(!1,t))throw Error(`${e}: array of numbers expected`)}function ia(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function il(e){let t="string"==typeof e?e.split(""):e,r=t.length;is("alphabet",t);let i=new Map(t.map((e,t)=>[e,t]));return{encode:i=>(ii(i),i.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=r)throw Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${e}`);return t[i]})),decode:t=>(ii(t),t.map(t=>{it("alphabet.decode",t);let r=i.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function ic(e=""){return it("join",e),{encode:t=>(is("join.decode",t),t.join(e)),decode:t=>(it("join.decode",t),t.split(e))}}function iu(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(ii(e),!e.length)return[];let i=0,n=[],s=Array.from(e,e=>{if(ir(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),o=s.length;for(;;){let e=0,a=!0;for(let n=i;n<o;n++){let o=s[n],l=t*e,c=l+o;if(!Number.isSafeInteger(c)||l/t!==e||c-o!==l)throw Error("convertRadix: carry overflow");let u=c/r;e=c%r;let h=Math.floor(u);if(s[n]=h,!Number.isSafeInteger(h)||h*r+e!==c)throw Error("convertRadix: carry overflow");a&&(h?a=!1:i=n)}if(n.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)n.push(0);return n.reverse()}let ih=(e,t)=>0===t?e:ih(t,e%t),id=(e,t)=>e+(t-ih(e,t)),ip=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function ig(e,t,r,i){if(ii(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(id(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${id(t,r)}`);let n=0,s=0,o=ip[t],a=ip[r]-1,l=[];for(let i of e){if(ir(i),i>=o)throw Error(`convertRadix2: invalid data word=${i} from=${t}`);if(n=n<<t|i,s+t>32)throw Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)l.push((n>>s-r&a)>>>0);let e=ip[s];if(void 0===e)throw Error("invalid carry");n&=e-1}if(n=n<<r-s&a,!i&&s>=t)throw Error("Excess padding");if(!i&&n>0)throw Error(`Non-zero padding: ${n}`);return i&&s>0&&l.push(n>>>0),l}function iy(e){return ir(e),{encode:t=>{if(!r7(t))throw Error("radix.encode input should be Uint8Array");return iu(Array.from(t),256,e)},decode:t=>(io("radix.decode",t),Uint8Array.from(iu(t,e,256)))}}let im={alphabet:il,chain:ia,checksum:function(e,t){return ir(e),ie(t),{encode(r){if(!r7(r))throw Error("checksum.encode: input should be Uint8Array");let i=t(r).slice(0,e),n=new Uint8Array(r.length+e);return n.set(r),n.set(i,r.length),n},decode(r){if(!r7(r))throw Error("checksum.decode: input should be Uint8Array");let i=r.slice(0,-e),n=r.slice(-e),s=t(i).slice(0,e);for(let t=0;t<e;t++)if(s[t]!==n[t])throw Error("Invalid checksum");return i}}},convertRadix:iu,convertRadix2:ig,radix:iy,radix2:function(e,t=!1){if(ir(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(id(8,e)>32||id(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!r7(r))throw Error("radix2.encode input should be Uint8Array");return ig(Array.from(r),8,e,!t)},decode:r=>(io("radix2.decode",r),Uint8Array.from(ig(r,e,8,t)))}},join:ic,padding:function(e,t="="){return ir(e),it("padding",t),{encode(r){for(is("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){is("padding.decode",r);let i=r.length;if(i*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;i>0&&r[i-1]===t;i--)if((i-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,i)}}}},ib=("function"==typeof Uint8Array.from([]).toBase64&&Uint8Array.fromBase64,ia(iy(58),il("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),ic(""))),iw=[996825010,642813549,513874426,1027748829,705979059];"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex||ie(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()});/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */let iv=e=>"あいこくしん"===e[0];function iE(e){if("string"!=typeof e)throw TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function iA(e){let t=iE(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw Error("Invalid mnemonic");return{nfkd:t,words:r}}function ix(e){(0,eF.gk)(e,16,20,24,28,32)}let iI=e=>{let t=8-e.length/4;return new Uint8Array([r5(e)[0]>>t<<t])};function iT(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw Error("Wordlist: expected array of 2048 strings");return e.forEach(e=>{if("string"!=typeof e)throw Error("wordlist: non-string element: "+e)}),im.chain(im.checksum(1,iI),im.radix2(11,!0),im.alphabet(e))}function i_(e,t){return ix(e),iT(t).encode(e).join(iv(t)?"　":" ")}let iS=e=>iE("mnemonic"+e);function iP(e,t=""){return rq(r6,iA(e).nfkd,iS(t),{c:2048,dkLen:64})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let iN=BigInt(0),iO=BigInt(1),ik=BigInt(2),iC=BigInt(3),iB=BigInt(4),iR=BigInt(5),iD=BigInt(8);function iL(e,t){let r=e%t;return r>=iN?r:t+r}function iU(e,t,r){let i=e;for(;t-- >iN;)i*=i,i%=r;return i}function iM(e,t){if(e===iN)throw Error("invert: expected non-zero number");if(t<=iN)throw Error("invert: expected positive modulus, got "+t);let r=iL(e,t),i=t,n=iN,s=iO,o=iO,a=iN;for(;r!==iN;){let e=i/r,t=i%r,l=n-o*e,c=s-a*e;i=r,r=t,n=o,s=a,o=l,a=c}if(i!==iO)throw Error("invert: does not exist");return iL(n,t)}function iF(e,t){let r=(e.ORDER+iO)/iB,i=e.pow(t,r);if(!e.eql(e.sqr(i),t))throw Error("Cannot find square root");return i}function i$(e,t){let r=(e.ORDER-iR)/iD,i=e.mul(t,ik),n=e.pow(i,r),s=e.mul(t,n),o=e.mul(e.mul(s,ik),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw Error("Cannot find square root");return a}let ij=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function iH(e,t,r=!1){let i=Array(t.length).fill(r?e.ZERO:void 0),n=t.reduce((t,r,n)=>e.is0(r)?t:(i[n]=t,e.mul(t,r)),e.ONE),s=e.inv(n);return t.reduceRight((t,r,n)=>e.is0(r)?t:(i[n]=e.mul(t,i[n]),e.mul(t,r)),s),i}function iV(e,t){let r=(e.ORDER-iO)/ik,i=e.pow(t,r),n=e.eql(i,e.ONE),s=e.eql(i,e.ZERO),o=e.eql(i,e.neg(e.ONE));if(!n&&!s&&!o)throw Error("invalid Legendre symbol result");return n?1:s?0:-1}function iz(e,t,r=!1,i={}){let n,s,o;if(e<=iN)throw Error("invalid field: expected ORDER > 0, got "+e);if("object"==typeof t&&null!=t){if(i.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(s=t.BITS),t.sqrt&&(o=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE)}else"number"==typeof t&&(s=t),i.sqrt&&(o=i.sqrt);let{nBitLength:a,nByteLength:l}=function(e,t){void 0!==t&&(0,eF.k8)(t);let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}(e,s);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let c=Object.freeze({ORDER:e,isLE:r,BITS:a,BYTES:l,MASK:eJ(a),ZERO:iN,ONE:iO,create:t=>iL(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return iN<=t&&t<e},is0:e=>e===iN,isValidNot0:e=>!c.is0(e)&&c.isValid(e),isOdd:e=>(e&iO)===iO,neg:t=>iL(-t,e),eql:(e,t)=>e===t,sqr:t=>iL(t*t,e),add:(t,r)=>iL(t+r,e),sub:(t,r)=>iL(t-r,e),mul:(t,r)=>iL(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<iN)throw Error("invalid exponent, negatives unsupported");if(r===iN)return e.ONE;if(r===iO)return t;let i=e.ONE,n=t;for(;r>iN;)r&iO&&(i=e.mul(i,n)),n=e.sqr(n),r>>=iO;return i})(c,e,t),div:(t,r)=>iL(t*iM(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>iM(t,e),sqrt:o||(t=>(!n&&(n=e%iB===iC?iF:e%iD===iR?i$:function(e){if(e<BigInt(3))throw Error("sqrt is not defined for small field");let t=e-iO,r=0;for(;t%ik===iN;)t/=ik,r++;let i=ik,n=iz(e);for(;1===iV(n,i);)if(i++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return iF;let s=n.pow(i,t),o=(t+iO)/ik;return function(e,i){if(e.is0(i))return i;if(1!==iV(e,i))throw Error("Cannot find square root");let n=r,a=e.mul(e.ONE,s),l=e.pow(i,t),c=e.pow(i,o);for(;!e.eql(l,e.ONE);){if(e.is0(l))return e.ZERO;let t=1,r=e.sqr(l);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===n)throw Error("Cannot find square root");let i=iO<<BigInt(n-t-1),s=e.pow(a,i);n=t,a=e.sqr(s),l=e.mul(l,a),c=e.mul(c,s)}return c}}(e)),n(c,t))),toBytes:e=>r?eW(e,l):eK(e,l),fromBytes:e=>{if(e.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+e.length);return r?eq(e):eG(e)},invertBatch:e=>iH(c,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(c)}function iG(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function iq(e){let t=iG(e);return t+Math.ceil(t/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let iK=BigInt(0),iW=BigInt(1);function iQ(e,t){let r=t.negate();return e?r:t}function iY(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function iJ(e,t){iY(e,t);let r=Math.ceil(t/e)+1,i=2**(e-1),n=2**e;return{windows:r,windowSize:i,mask:eJ(e),maxNumber:n,shiftBy:BigInt(e)}}function iZ(e,t,r){let{windowSize:i,mask:n,maxNumber:s,shiftBy:o}=r,a=Number(e&n),l=e>>o;a>i&&(a-=s,l+=iW);let c=t*i,u=c+Math.abs(a)-1;return{nextN:l,offset:u,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:c}}let iX=new WeakMap,i0=new WeakMap;function i1(e){return i0.get(e)||1}function i2(e){if(e!==iK)throw Error("invalid wNAF")}function i3(e,t){if(!t)return iz(e);if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return eZ(t,ij.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),t}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function i4(e){void 0!==e.lowS&&eH("lowS",e.lowS),void 0!==e.prehash&&eH("prehash",e.prehash)}class i8 extends Error{constructor(e=""){super(e)}}let i5={Err:i8,_tlv:{encode:(e,t)=>{let{Err:r}=i5;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=eV(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?eV(n.length/2|128):"";return eV(e)+s+n+t},decode(e,t){let{Err:r}=i5,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=i5;if(e<i6)throw new t("integer: negative integers are not allowed");let r=eV(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=i5;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return eG(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=i5,n=eQ("signature",e),{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=i.decode(2,s),{v:c,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=i5,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},i6=BigInt(0),i7=BigInt(1),i9=BigInt(2),ne=BigInt(3),nt=BigInt(4);function nr(e,t,r){let{BYTES:i}=e;return function(n){let s;if("bigint"==typeof n)s=n;else{let r=eQ("private key",n);if(t){if(!t.includes(2*r.length))throw Error("invalid private key");let e=new Uint8Array(i);e.set(r,e.length-r.length),r=e}try{s=e.fromBytes(r)}catch(e){throw Error(`invalid private key: expected ui8a of size ${i}, got ${typeof n}`)}}if(r&&(s=e.create(s)),!e.isValidNot0(s))throw Error("invalid private key: out of range [1..N-1]");return s}}function ni(e){return Uint8Array.of(e?2:3)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let nn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},ns=BigInt(0),no=BigInt(1),na=BigInt(2),nl=(e,t)=>(e+t/na)/t,nc=iz(nn.p,void 0,void 0,{sqrt:function(e){let t=nn.p,r=BigInt(3),i=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=iU(u,r,t)*u%t,d=iU(h,r,t)*u%t,f=iU(d,na,t)*c%t,p=iU(f,n,t)*f%t,g=iU(p,s,t)*p%t,y=iU(g,a,t)*g%t,m=iU(y,l,t)*y%t,b=iU(m,a,t)*g%t,w=iU(b,r,t)*u%t,v=iU(w,o,t)*p%t,E=iU(v,i,t)*c%t,A=iU(E,na,t);if(!nc.eql(nc.sqr(A),e))throw Error("Cannot find square root");return A}}),nu=function(e,t){let r=t=>(function(e){let{CURVE:t,curveOpts:r,ecdsaOpts:i}=function(e){let{CURVE:t,curveOpts:r}=function(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:iz(t.n,e.nBitLength),allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:r}}(e);return{CURVE:t,curveOpts:r,ecdsaOpts:{hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN}}}(e),n=function(e,t,r={}){eZ(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let i=t.randomBytes||eF.O6,n=t.hmac||((e,...r)=>rG(t.hash,e,(0,eF.eV)(...r))),{Fp:s,Fn:o}=e,{ORDER:a,BITS:l}=o;function c(e,t){if(!o.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..CURVE.n`)}class u{constructor(e,t,r){c("r",e),c("s",t),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){let t=o.BYTES,r=eQ("compactSignature",e,2*t);return new u(o.fromBytes(r.subarray(0,t)),o.fromBytes(r.subarray(t,2*t)))}static fromDER(e){let{r:t,s:r}=i5.toSig(eQ("DER",e));return new u(t,r)}assertValidity(){}addRecoveryBit(e){return new u(this.r,this.s,e)}recoverPublicKey(t){let r=s.ORDER,{r:i,s:n,recovery:l}=this;if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");if(a*i9<r&&l>1)throw Error("recovery id is ambiguous for h>1 curve");let c=2===l||3===l?i+a:i;if(!s.isValid(c))throw Error("recovery id 2 or 3 invalid");let u=s.toBytes(c),h=e.fromHex((0,eF.eV)(ni((1&l)==0),u)),d=o.inv(c),f=p(eQ("msgHash",t)),g=o.create(-f*d),y=o.create(n*d),m=e.BASE.multiplyUnsafe(g).add(h.multiplyUnsafe(y));if(m.is0())throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return this.s>a>>i7}normalizeS(){return this.hasHighS()?new u(this.r,o.neg(this.s),this.recovery):this}toBytes(e){if("compact"===e)return(0,eF.eV)(o.toBytes(this.r),o.toBytes(this.s));if("der"===e)return(0,eF.nr)(i5.hexFromSig(this));throw Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,eF.ci)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,eF.ci)(this.toBytes("compact"))}}let h=nr(o,r.allowedPrivateKeyLengths,r.wrapPrivateKey);function d(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let i=eQ("key",t).length,n=s.BYTES,a=n+1;if(!r.allowedPrivateKeyLengths&&o.BYTES!==a)return i===a||i===2*n+1}let f=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=eG(e),r=8*e.length-l;return r>0?t>>BigInt(r):t},p=t.bits2int_modN||function(e){return o.create(f(e))},g=eJ(l);function y(e){return!function(e,t,r,i){if(!(eY(t)&&eY(r)&&eY(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}("num < 2^"+l,e,i6,g),o.toBytes(e)}let m={lowS:t.lowS,prehash:!1},b={lowS:t.lowS,prehash:!1};return e.BASE.precompute(8),Object.freeze({getPublicKey:function(t,r=!0){return e.fromPrivateKey(t).toBytes(r)},getSharedSecret:function(t,r,i=!0){if(!0===d(t))throw Error("first arg must be private key");if(!1===d(r))throw Error("second arg must be public key");return e.fromHex(r).multiply(h(t)).toBytes(i)},sign:function(r,l,c=m){let{seed:d,k2sig:g}=function(r,n,l=m){if(["recovered","canonical"].some(e=>e in l))throw Error("sign() legacy options not supported");let{hash:c}=t,{lowS:d,prehash:g,extraEntropy:b}=l;null==d&&(d=!0),r=eQ("msgHash",r),i4(l),g&&(r=eQ("prehashed msgHash",c(r)));let w=p(r),v=h(n),E=[y(v),y(w)];if(null!=b&&!1!==b){let e=!0===b?i(s.BYTES):b;E.push(eQ("extraEntropy",e))}return{seed:(0,eF.eV)(...E),k2sig:function(t){let r=f(t);if(!o.isValidNot0(r))return;let i=o.inv(r),n=e.BASE.multiply(r).toAffine(),s=o.create(n.x);if(s===i6)return;let l=o.create(i*o.create(w+s*v));if(l===i6)return;let c=(n.x===s?0:2)|Number(n.y&i7),h=l;if(d&&l>a>>i7)h=l>a>>i7?o.neg(l):l,c^=1;return new u(s,h,c)}}}(r,l,c);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=e=>new Uint8Array(e),n=e=>Uint8Array.of(e),s=i(e),o=i(e),a=0,l=()=>{s.fill(1),o.fill(0),a=0},c=(...e)=>r(o,s,...e),u=(e=i(0))=>{o=c(n(0),e),s=c(),0!==e.length&&(o=c(n(1),e),s=c())},h=()=>{if(a++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(s=c()).slice();r.push(t),e+=s.length}return(0,eF.eV)(...r)};return(e,t)=>{let r;for(l(),u(e);!(r=t(h()));)u();return l(),r}})(t.hash.outputLen,o.BYTES,n)(d,g)},verify:function(r,i,n,s=b){let a,l;i=eQ("msgHash",i),n=eQ("publicKey",n),i4(s);let{lowS:c,prehash:h,format:d}=s;if("strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==d&&!["compact","der","js"].includes(d))throw Error('format must be "compact", "der" or "js"');let f="string"==typeof r||(0,eF._t)(r),g=!f&&!d&&"object"==typeof r&&null!==r&&"bigint"==typeof r.r&&"bigint"==typeof r.s;if(!f&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g){if(void 0===d||"js"===d)l=new u(r.r,r.s);else throw Error("invalid format")}if(f){try{"compact"!==d&&(l=u.fromDER(r))}catch(e){if(!(e instanceof i5.Err))throw e}l||"der"===d||(l=u.fromCompact(r))}a=e.fromHex(n)}catch(e){return!1}if(!l||c&&l.hasHighS())return!1;h&&(i=t.hash(i));let{r:y,s:m}=l,w=p(i),v=o.inv(m),E=o.create(w*v),A=o.create(y*v),x=e.BASE.multiplyUnsafe(E).add(a.multiplyUnsafe(A));return!x.is0()&&o.create(x.x)===y},utils:{isValidPrivateKey(e){try{return h(e),!0}catch(e){return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>(function(e,t,r=!1){let i=e.length,n=iG(t),s=iq(t);if(i<16||i<s||i>1024)throw Error("expected "+s+"-1024 bytes of input, got "+i);let o=iL(r?eq(e):eG(e),t-iO)+iO;return r?eW(o,n):eK(o,n)})(i(iq(a)),a),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},Point:e,Signature:u})}(function(e,t={}){var r,i,n;let{Fp:s,Fn:o}=function(e,t,r={}){if(!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>iK))throw Error(`CURVE.${e} must be positive bigint`)}let i=i3(t.p,r.Fp),n=i3(t.n,r.Fn);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!i.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{Fp:i,Fn:n}}("weierstrass",e,t),{h:a,n:l}=e;eZ(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:c}=t;if(c&&(!s.is0(e.a)||"bigint"!=typeof c.beta||"function"!=typeof c.splitScalar))throw Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!s.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let h=t.toBytes||function(e,t,r){let{x:i,y:n}=t.toAffine(),o=s.toBytes(i);if(eH("isCompressed",r),!r)return(0,eF.eV)(Uint8Array.of(4),o,s.toBytes(n));{u();let e=!s.isOdd(n);return(0,eF.eV)(ni(e),o)}},d=t.fromBytes||function(e){(0,eF.gk)(e);let t=s.BYTES,r=t+1,i=2*t+1,n=e.length,o=e[0],a=e.subarray(1);if(n===r&&(2===o||3===o)){let e;let t=s.fromBytes(a);if(!s.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=f(t);try{e=s.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return u(),(1&o)==1!==s.isOdd(e)&&(e=s.neg(e)),{x:t,y:e}}if(n===i&&4===o){let e=s.fromBytes(a.subarray(0*t,1*t)),r=s.fromBytes(a.subarray(1*t,2*t));if(!p(e,r))throw Error("bad point: is not on curve");return{x:e,y:r}}throw Error(`bad point: got length ${n}, expected compressed=${r} or uncompressed=${i}`)},f=(r=e.a,i=e.b,function(e){let t=s.sqr(e),n=s.mul(t,e);return s.add(s.add(n,s.mul(e,r)),i)});function p(e,t){let r=s.sqr(t),i=f(e);return s.eql(r,i)}if(!p(e.Gx,e.Gy))throw Error("bad curve params: generator point");let g=s.mul(s.pow(e.a,ne),nt),y=s.mul(s.sqr(e.b),BigInt(27));if(s.is0(s.add(g,y)))throw Error("bad curve params: a or b");function m(e,t,r=!1){if(!s.isValid(t)||r&&s.is0(t))throw Error(`bad point coordinate ${e}`);return t}function b(e){if(!(e instanceof A))throw Error("ProjectivePoint expected")}let w=eX((e,t)=>{let{px:r,py:i,pz:n}=e;if(s.eql(n,s.ONE))return{x:r,y:i};let o=e.is0();null==t&&(t=o?s.ONE:s.inv(n));let a=s.mul(r,t),l=s.mul(i,t),c=s.mul(n,t);if(o)return{x:s.ZERO,y:s.ZERO};if(!s.eql(c,s.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),v=eX(e=>{if(e.is0()){if(t.allowInfinityPoint&&!s.is0(e.py))return;throw Error("bad point: ZERO")}let{x:r,y:i}=e.toAffine();if(!s.isValid(r)||!s.isValid(i))throw Error("bad point: x or y not field elements");if(!p(r,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function E(e,t,r,i,n){return r=new A(s.mul(r.px,e),r.py,r.pz),t=iQ(i,t),r=iQ(n,r),t.add(r)}class A{constructor(e,t,r){this.px=m("x",e),this.py=m("y",t,!0),this.pz=m("z",r),Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!s.isValid(t)||!s.isValid(r))throw Error("invalid affine point");if(e instanceof A)throw Error("projective point not allowed");return s.is0(t)&&s.is0(r)?A.ZERO:new A(t,r,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){return function(e,t,r){let i=iH(e.Fp,r.map(e=>e.pz));return r.map((e,t)=>e.toAffine(i[t])).map(e.fromAffine)}(A,0,e)}static fromBytes(e){return(0,eF.gk)(e),A.fromHex(e)}static fromHex(e){let t=A.fromAffine(d(eQ("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){let r=nr(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return A.BASE.multiply(r(e))}static msm(e,t){return function(e,t,r,i){!function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t);let n=r.length,s=i.length;if(n!==s)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,a=function(e){let t;for(t=0;e>e$;e>>=ej,t+=1);return t}(BigInt(n)),l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);let c=eJ(l),u=Array(Number(c)+1).fill(o),h=Math.floor((t.BITS-1)/l)*l,d=o;for(let e=h;e>=0;e-=l){u.fill(o);for(let t=0;t<s;t++){let n=Number(i[t]>>BigInt(e)&c);u[n]=u[n].add(r[t])}let t=o;for(let e=u.length-1,r=o;e>0;e--)r=r.add(u[e]),t=t.add(r);if(d=d.add(t),0!==e)for(let e=0;e<l;e++)d=d.double()}return d}(A,o,e,t)}precompute(e=8,t=!0){return I.setWindowSize(this,e),t||this.multiply(ne),this}_setWindowSize(e){this.precompute(e)}assertValidity(){v(this)}hasEvenY(){let{y:e}=this.toAffine();if(!s.isOdd)throw Error("Field doesn't support isOdd");return!s.isOdd(e)}equals(e){b(e);let{px:t,py:r,pz:i}=this,{px:n,py:o,pz:a}=e,l=s.eql(s.mul(t,a),s.mul(n,i)),c=s.eql(s.mul(r,a),s.mul(o,i));return l&&c}negate(){return new A(this.px,s.neg(this.py),this.pz)}double(){let{a:t,b:r}=e,i=s.mul(r,ne),{px:n,py:o,pz:a}=this,l=s.ZERO,c=s.ZERO,u=s.ZERO,h=s.mul(n,n),d=s.mul(o,o),f=s.mul(a,a),p=s.mul(n,o);return p=s.add(p,p),u=s.mul(n,a),u=s.add(u,u),l=s.mul(t,u),c=s.mul(i,f),c=s.add(l,c),l=s.sub(d,c),c=s.add(d,c),c=s.mul(l,c),l=s.mul(p,l),u=s.mul(i,u),f=s.mul(t,f),p=s.sub(h,f),p=s.mul(t,p),p=s.add(p,u),u=s.add(h,h),h=s.add(u,h),h=s.add(h,f),h=s.mul(h,p),c=s.add(c,h),f=s.mul(o,a),f=s.add(f,f),h=s.mul(f,p),l=s.sub(l,h),u=s.mul(f,d),u=s.add(u,u),new A(l,c,u=s.add(u,u))}add(t){b(t);let{px:r,py:i,pz:n}=this,{px:o,py:a,pz:l}=t,c=s.ZERO,u=s.ZERO,h=s.ZERO,d=e.a,f=s.mul(e.b,ne),p=s.mul(r,o),g=s.mul(i,a),y=s.mul(n,l),m=s.add(r,i),w=s.add(o,a);m=s.mul(m,w),w=s.add(p,g),m=s.sub(m,w),w=s.add(r,n);let v=s.add(o,l);return w=s.mul(w,v),v=s.add(p,y),w=s.sub(w,v),v=s.add(i,n),c=s.add(a,l),v=s.mul(v,c),c=s.add(g,y),v=s.sub(v,c),h=s.mul(d,w),c=s.mul(f,y),h=s.add(c,h),c=s.sub(g,h),h=s.add(g,h),u=s.mul(c,h),g=s.add(p,p),g=s.add(g,p),y=s.mul(d,y),w=s.mul(f,w),g=s.add(g,y),y=s.sub(p,y),y=s.mul(d,y),w=s.add(w,y),p=s.mul(g,w),u=s.add(u,p),p=s.mul(v,w),c=s.mul(m,c),c=s.sub(c,p),p=s.mul(m,g),h=s.mul(v,h),new A(c,u,h=s.add(h,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(A.ZERO)}multiply(e){let r,i;let{endo:n}=t;if(!o.isValidNot0(e))throw Error("invalid scalar: out of range");let s=e=>I.wNAFCached(this,e,A.normalizeZ);if(n){let{k1neg:t,k1:o,k2neg:a,k2:l}=n.splitScalar(e),{p:c,f:u}=s(o),{p:h,f:d}=s(l);i=u.add(d),r=E(n.beta,c,h,t,a)}else{let{p:t,f:n}=s(e);r=t,i=n}return A.normalizeZ([r,i])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!o.isValid(e))throw Error("invalid scalar: out of range");if(e===i6||this.is0())return A.ZERO;if(e===i7)return this;if(I.hasPrecomputes(this))return this.multiply(e);if(!r)return I.wNAFCachedUnsafe(this,e);{let{k1neg:t,k1:i,k2neg:n,k2:s}=r.splitScalar(e),{p1:o,p2:a}=function(e,t,r,i){let n=t,s=e.ZERO,o=e.ZERO;for(;r>iK||i>iK;)r&iW&&(s=s.add(n)),i&iW&&(o=o.add(n)),n=n.double(),r>>=iW,i>>=iW;return{p1:s,p2:o}}(A,this,i,s);return E(r.beta,o,a,t,n)}}multiplyAndAddUnsafe(e,t,r){let i=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return i.is0()?void 0:i}toAffine(e){return w(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return a===i7||(e?e(A,this):I.wNAFCachedUnsafe(this,l).is0())}clearCofactor(){let{clearCofactor:e}=t;return a===i7?this:e?e(A,this):this.multiplyUnsafe(a)}toBytes(e=!0){return eH("isCompressed",e),this.assertValidity(),h(A,this,e)}toRawBytes(e=!0){return this.toBytes(e)}toHex(e=!0){return(0,eF.ci)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}A.BASE=new A(e.Gx,e.Gy,s.ONE),A.ZERO=new A(s.ZERO,s.ONE,s.ZERO),A.Fp=s,A.Fn=o;let x=o.BITS,I=(n=t.endo?Math.ceil(x/2):x,{constTimeNegate:iQ,hasPrecomputes:e=>1!==i1(e),unsafeLadder(e,t,r=A.ZERO){let i=e;for(;t>iK;)t&iW&&(r=r.add(i)),i=i.double(),t>>=iW;return r},precomputeWindow(e,t){let{windows:r,windowSize:i}=iJ(t,n),s=[],o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,t,r){let i=A.ZERO,s=A.BASE,o=iJ(e,n);for(let e=0;e<o.windows;e++){let{nextN:n,offset:a,isZero:l,isNeg:c,isNegF:u,offsetF:h}=iZ(r,e,o);r=n,l?s=s.add(iQ(u,t[h])):i=i.add(iQ(c,t[a]))}return i2(r),{p:i,f:s}},wNAFUnsafe(e,t,r,i=A.ZERO){let s=iJ(e,n);for(let e=0;e<s.windows&&r!==iK;e++){let{nextN:n,offset:o,isZero:a,isNeg:l}=iZ(r,e,s);if(r=n,!a){let e=t[o];i=i.add(l?e.negate():e)}}return i2(r),i},getPrecomputes(e,t,r){let i=iX.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(i=r(i)),iX.set(t,i))),i},wNAFCached(e,t,r){let i=i1(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=i1(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,t){iY(t,n),i0.set(e,t),iX.delete(e)}});return A}(t,r),i,r);return Object.assign({},n,{ProjectivePoint:n.Point,CURVE:e})})({...e,hash:t});return{...r(t),create:r}}({...nn,Fp:nc,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=nn.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-no*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=BigInt("0x100000000000000000000000000000000"),o=nl(r*e,t),a=nl(-i*e,t),l=iL(e-o*r-a*n,t),c=iL(-o*i-a*r,t),u=l>s,h=c>s;if(u&&(l=t-l),h&&(c=t-c),l>s||c>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:l,k2neg:h,k2:c}}}},r5);var nh=r(8183);let nd=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),nf=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),np=new Uint32Array(32);function ng(e,t,r,i,n,s){let o=n[s],a=n[s+1],l=np[2*e],c=np[2*e+1],u=np[2*t],h=np[2*t+1],d=np[2*r],f=np[2*r+1],p=np[2*i],g=np[2*i+1],y=rY.ac(l,u,o);c=rY.Fn(y,c,h,a),l=0|y,({Dh:g,Dl:p}={Dh:g^c,Dl:p^l}),({Dh:g,Dl:p}={Dh:rY.$m(g,p),Dl:rY.j(g,p)}),({h:f,l:d}=rY.IH(f,d,g,p)),({Bh:h,Bl:u}={Bh:h^f,Bl:u^d}),({Bh:h,Bl:u}={Bh:rY.m_(h,u,24),Bl:rY.Ou(h,u,24)}),np[2*e]=l,np[2*e+1]=c,np[2*t]=u,np[2*t+1]=h,np[2*r]=d,np[2*r+1]=f,np[2*i]=p,np[2*i+1]=g}function ny(e,t,r,i,n,s){let o=n[s],a=n[s+1],l=np[2*e],c=np[2*e+1],u=np[2*t],h=np[2*t+1],d=np[2*r],f=np[2*r+1],p=np[2*i],g=np[2*i+1],y=rY.ac(l,u,o);c=rY.Fn(y,c,h,a),l=0|y,({Dh:g,Dl:p}={Dh:g^c,Dl:p^l}),({Dh:g,Dl:p}={Dh:rY.m_(g,p,16),Dl:rY.Ou(g,p,16)}),({h:f,l:d}=rY.IH(f,d,g,p)),({Bh:h,Bl:u}={Bh:h^f,Bl:u^d}),({Bh:h,Bl:u}={Bh:rY.FL(h,u,63),Bl:rY.$p(h,u,63)}),np[2*e]=l,np[2*e+1]=c,np[2*t]=u,np[2*t+1]=h,np[2*r]=d,np[2*r+1]=f,np[2*i]=p,np[2*i+1]=g}class nm extends eF.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,(0,eF.k8)(e),(0,eF.k8)(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=(0,eF.Jq)(this.buffer)}update(e){(0,eF.$h)(this),e=(0,eF.O0)(e),(0,eF.gk)(e);let{blockLen:t,buffer:r,buffer32:i}=this,n=e.length,s=e.byteOffset,o=e.buffer;for(let a=0;a<n;){this.pos===t&&((0,eF.Ux)(i),this.compress(i,0,!1),(0,eF.Ux)(i),this.pos=0);let l=Math.min(t-this.pos,n-a),c=s+a;if(l===t&&!(c%4)&&a+l<n){let e=new Uint32Array(o,c,Math.floor((n-a)/4));(0,eF.Ux)(e);for(let r=0;a+t<n;r+=i.length,a+=t)this.length+=t,this.compress(e,r,!1);(0,eF.Ux)(e);continue}r.set(e.subarray(a,a+l),this.pos),this.pos+=l,this.length+=l,a+=l}return this}digestInto(e){(0,eF.$h)(this),(0,eF.eB)(e,this);let{pos:t,buffer32:r}=this;this.finished=!0,(0,eF.ru)(this.buffer.subarray(t)),(0,eF.Ux)(r),this.compress(r,0,!0),(0,eF.Ux)(r);let i=(0,eF.Jq)(e);this.get().forEach((e,t)=>i[t]=(0,eF.N$)(e))}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){let{buffer:t,length:r,finished:i,destroyed:n,outputLen:s,pos:o}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.buffer.set(t),e.destroyed=n,e.finished=i,e.length=r,e.pos=o,e.outputLen=s,e}clone(){return this._cloneInto()}}class nb extends nm{constructor(e={}){let t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|nf[0],this.v0h=0|nf[1],this.v1l=0|nf[2],this.v1h=0|nf[3],this.v2l=0|nf[4],this.v2h=0|nf[5],this.v3l=0|nf[6],this.v3h=0|nf[7],this.v4l=0|nf[8],this.v4h=0|nf[9],this.v5l=0|nf[10],this.v5h=0|nf[11],this.v6l=0|nf[12],this.v6h=0|nf[13],this.v7l=0|nf[14],this.v7h=0|nf[15],function(e,t={},r,i,n){if((0,eF.k8)(r),e<0||e>r)throw Error("outputLen bigger than keyLen");let{key:s,salt:o,personalization:a}=t;if(void 0!==s&&(s.length<1||s.length>r))throw Error("key length must be undefined or 1.."+r);if(void 0!==o&&o.length!==i)throw Error("salt must be undefined or "+i);if(void 0!==a&&a.length!==n)throw Error("personalization must be undefined or "+n)}(t,e,64,16,16);let{key:r,personalization:i,salt:n}=e,s=0;if(void 0!==r&&(s=(r=(0,eF.O0)(r)).length),this.v0l^=this.outputLen|s<<8|16842752,void 0!==n){n=(0,eF.O0)(n);let e=(0,eF.Jq)(n);this.v4l^=(0,eF.N$)(e[0]),this.v4h^=(0,eF.N$)(e[1]),this.v5l^=(0,eF.N$)(e[2]),this.v5h^=(0,eF.N$)(e[3])}if(void 0!==i){i=(0,eF.O0)(i);let e=(0,eF.Jq)(i);this.v6l^=(0,eF.N$)(e[0]),this.v6h^=(0,eF.N$)(e[1]),this.v7l^=(0,eF.N$)(e[2]),this.v7h^=(0,eF.N$)(e[3])}if(void 0!==r){let e=new Uint8Array(this.blockLen);e.set(r),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:n,v2h:s,v3l:o,v3h:a,v4l:l,v4h:c,v5l:u,v5h:h,v6l:d,v6h:f,v7l:p,v7h:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|r,this.v1h=0|i,this.v2l=0|n,this.v2h=0|s,this.v3l=0|o,this.v3h=0|a,this.v4l=0|l,this.v4h=0|c,this.v5l=0|u,this.v5h=0|h,this.v6l=0|d,this.v6h=0|f,this.v7l=0|p,this.v7h=0|g}compress(e,t,r){this.get().forEach((e,t)=>np[t]=e),np.set(nf,16);let{h:i,l:n}=rY.Ev(BigInt(this.length));np[24]=nf[8]^n,np[25]=nf[9]^i,r&&(np[28]=~np[28],np[29]=~np[29]);let s=0;for(let r=0;r<12;r++)ng(0,4,8,12,e,t+2*nd[s++]),ny(0,4,8,12,e,t+2*nd[s++]),ng(1,5,9,13,e,t+2*nd[s++]),ny(1,5,9,13,e,t+2*nd[s++]),ng(2,6,10,14,e,t+2*nd[s++]),ny(2,6,10,14,e,t+2*nd[s++]),ng(3,7,11,15,e,t+2*nd[s++]),ny(3,7,11,15,e,t+2*nd[s++]),ng(0,5,10,15,e,t+2*nd[s++]),ny(0,5,10,15,e,t+2*nd[s++]),ng(1,6,11,12,e,t+2*nd[s++]),ny(1,6,11,12,e,t+2*nd[s++]),ng(2,7,8,13,e,t+2*nd[s++]),ny(2,7,8,13,e,t+2*nd[s++]),ng(3,4,9,14,e,t+2*nd[s++]),ny(3,4,9,14,e,t+2*nd[s++]);this.v0l^=np[0]^np[16],this.v0h^=np[1]^np[17],this.v1l^=np[2]^np[18],this.v1h^=np[3]^np[19],this.v2l^=np[4]^np[20],this.v2h^=np[5]^np[21],this.v3l^=np[6]^np[22],this.v3h^=np[7]^np[23],this.v4l^=np[8]^np[24],this.v4h^=np[9]^np[25],this.v5l^=np[10]^np[26],this.v5h^=np[11]^np[27],this.v6l^=np[12]^np[28],this.v6h^=np[13]^np[29],this.v7l^=np[14]^np[30],this.v7h^=np[15]^np[31],(0,eF.ru)(np)}destroy(){this.destroyed=!0,(0,eF.ru)(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let nw=(0,eF.WV)(e=>new nb(e));function nv(e,t,r){if(r>e.length)throw Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function nE(e){if(0===e[0])throw Error("invalid RLP: extra zeros");return nI(function(e){let t="";for(let r=0;r<e.length;r++)t+=nx[e[r]];return t}(e))}function nA(e,t){if(e<56)return Uint8Array.from([e+t]);let r=nS(e),i=nS(t+55+r.length/2);return Uint8Array.from(nT(i+r))}let nx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nI(e){let t=Number.parseInt(e,16);if(Number.isNaN(t))throw Error("Invalid byte sequence");return t}function nT(e){if("string"!=typeof e)throw TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let i=2*r;t[r]=nI(e.slice(i,i+2))}return t}function n_(...e){if(1===e.length)return e[0];let t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}function nS(e){if(e<0)throw Error("Invalid integer as argument, must be unsigned!");let t=e.toString(16);return t.length%2?`0${t}`:t}function nP(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function nN(e){if(e instanceof Uint8Array)return e;if("string"==typeof e){var t;return nP(e)?nT((t="string"!=typeof e?e:nP(e)?e.slice(2):e).length%2?`0${t}`:t):new TextEncoder().encode(e)}if("number"==typeof e||"bigint"==typeof e)return e?nT(nS(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw Error("toBytes: received unsupported type "+typeof e)}let nO={encode:function e(t){if(Array.isArray(t)){let r=[],i=0;for(let n=0;n<t.length;n++){let s=e(t[n]);r.push(s),i+=s.length}return n_(nA(i,192),...r)}let r=nN(t);return 1===r.length&&r[0]<128?r:n_(nA(r.length,128),r)},decode:function(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);let r=function e(t){let r,i,n,s,o;let a=[],l=t[0];if(l<=127)return{data:t.slice(0,1),remainder:t.subarray(1)};if(l<=183){if(r=l-127,n=128===l?Uint8Array.from([]):nv(t,1,r),2===r&&n[0]<128)throw Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:t.subarray(r)}}if(l<=191){if(i=l-182,t.length-1<i)throw Error("invalid RLP: not enough bytes for string length");if((r=nE(nv(t,1,i)))<=55)throw Error("invalid RLP: expected string length to be greater than 55");return{data:n=nv(t,i,r+i),remainder:t.subarray(r+i)}}if(l<=247){for(s=nv(t,1,r=l-191);s.length;)o=e(s),a.push(o.data),s=o.remainder;return{data:a,remainder:t.subarray(r)}}{if((r=nE(nv(t,1,i=l-246)))<56)throw Error("invalid RLP: encoded list too short");let n=i+r;if(n>t.length)throw Error("invalid RLP: total length is larger than the data");for(s=nv(t,i,n);s.length;)o=e(s),a.push(o.data),s=o.remainder;return{data:a,remainder:t.subarray(n)}}}(nN(e));if(t)return{data:r.data,remainder:r.remainder.slice()};if(0!==r.remainder.length)throw Error("invalid RLP: remainder must be zero");return r.data}};/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function nk(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function nC(e,...t){if(!nk(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function nB(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function nR(e,t){nC(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function nD(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function nL(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let nU=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],nM="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,nF=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function n$(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(nk(e))e=nH(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function nj(e){return e.byteOffset%4==0}function nH(e){return Uint8Array.from(e)}let nV=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split("\n");var nz=r(3251),nG=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},nq=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r};let nK={16:10,24:12,32:14},nW=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],nQ=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],nY=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],nJ=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],nZ=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],nX=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],n0=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],n1=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],n2=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],n3=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],n4=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],n8=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],n5=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],n6=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],n7=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function n9(e){let t=[];for(let r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}class se{get key(){return nG(this,s,"f").slice()}constructor(e){let t;if(s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),!(this instanceof se))throw Error("AES must be instanitated with `new`");nq(this,s,new Uint8Array(e),"f");let r=nK[this.key.length];if(null==r)throw TypeError("invalid key size (must be 16, 24 or 32 bytes)");nq(this,a,[],"f"),nq(this,o,[],"f");for(let e=0;e<=r;e++)nG(this,a,"f").push([0,0,0,0]),nG(this,o,"f").push([0,0,0,0]);let i=(r+1)*4,n=this.key.length/4,l=n9(this.key);for(let e=0;e<n;e++)t=e>>2,nG(this,a,"f")[t][e%4]=l[e],nG(this,o,"f")[r-t][e%4]=l[e];let c=0,u=n,h;for(;u<i;){if(h=l[n-1],l[0]^=nQ[h>>16&255]<<24^nQ[h>>8&255]<<16^nQ[255&h]<<8^nQ[h>>24&255]^nW[c]<<24,c+=1,8!=n)for(let e=1;e<n;e++)l[e]^=l[e-1];else{for(let e=1;e<n/2;e++)l[e]^=l[e-1];h=l[n/2-1],l[n/2]^=nQ[255&h]^nQ[h>>8&255]<<8^nQ[h>>16&255]<<16^nQ[h>>24&255]<<24;for(let e=n/2+1;e<n;e++)l[e]^=l[e-1]}let e=0,t,s;for(;e<n&&u<i;)t=u>>2,s=u%4,nG(this,a,"f")[t][s]=l[e],nG(this,o,"f")[r-t][s]=l[e++],u++}for(let e=1;e<r;e++)for(let t=0;t<4;t++)h=nG(this,o,"f")[e][t],nG(this,o,"f")[e][t]=n8[h>>24&255]^n5[h>>16&255]^n6[h>>8&255]^n7[255&h]}encrypt(e){if(16!=e.length)throw TypeError("invalid plaintext size (must be 16 bytes)");let t=nG(this,a,"f").length-1,r=[0,0,0,0],i=n9(e);for(let e=0;e<4;e++)i[e]^=nG(this,a,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=nJ[i[t]>>24&255]^nZ[i[(t+1)%4]>>16&255]^nX[i[(t+2)%4]>>8&255]^n0[255&i[(t+3)%4]]^nG(this,a,"f")[e][t];i=r.slice()}let n=new Uint8Array(16),s=0;for(let e=0;e<4;e++)s=nG(this,a,"f")[t][e],n[4*e]=(nQ[i[e]>>24&255]^s>>24)&255,n[4*e+1]=(nQ[i[(e+1)%4]>>16&255]^s>>16)&255,n[4*e+2]=(nQ[i[(e+2)%4]>>8&255]^s>>8)&255,n[4*e+3]=(nQ[255&i[(e+3)%4]]^s)&255;return n}decrypt(e){if(16!=e.length)throw TypeError("invalid ciphertext size (must be 16 bytes)");let t=nG(this,o,"f").length-1,r=[0,0,0,0],i=n9(e);for(let e=0;e<4;e++)i[e]^=nG(this,o,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=n1[i[t]>>24&255]^n2[i[(t+3)%4]>>16&255]^n3[i[(t+2)%4]>>8&255]^n4[255&i[(t+1)%4]]^nG(this,o,"f")[e][t];i=r.slice()}let n=new Uint8Array(16),s=0;for(let e=0;e<4;e++)s=nG(this,o,"f")[t][e],n[4*e]=(nY[i[e]>>24&255]^s>>24)&255,n[4*e+1]=(nY[i[(e+3)%4]>>16&255]^s>>16)&255,n[4*e+2]=(nY[i[(e+2)%4]>>8&255]^s>>8)&255,n[4*e+3]=(nY[255&i[(e+1)%4]]^s)&255;return n}}s=new WeakMap,o=new WeakMap,a=new WeakMap;class st{constructor(e,t,r){if(r&&!(this instanceof r))throw Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new se(t)},name:{enumerable:!0,value:e}})}}new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakSet;var sr=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},si=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class sn extends st{constructor(e,t){super("CTR",e,sn),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),sr(this,u,new Uint8Array(16),"f"),si(this,u,"f").fill(0),sr(this,l,si(this,u,"f"),"f"),sr(this,c,16,"f"),null==t&&(t=1),"number"==typeof t?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(si(this,u,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)si(this,u,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(16!==e.length)throw TypeError("invalid counter initial Uint8Array value length");si(this,u,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(255===si(this,u,"f")[e])si(this,u,"f")[e]=0;else{si(this,u,"f")[e]++;break}}encrypt(e){var t,r;let i=new Uint8Array(e);for(let e=0;e<i.length;e++)16===si(this,c,"f")&&(sr(this,l,this.aes.encrypt(si(this,u,"f")),"f"),sr(this,c,0,"f"),this.increment()),i[e]^=si(this,l,"f")[sr(this,c,(r=si(this,c,"f"),t=r++,r),"f"),t];return i}decrypt(e){return this.encrypt(e)}}function ss(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function so(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function sa(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");ss(e.outputLen),ss(e.blockLen)}function sl(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function sc(e,t){so(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}l=new WeakMap,c=new WeakMap,u=new WeakMap,new WeakMap,new WeakMap,new WeakMap;let su=BigInt(4294967296-1),sh=BigInt(32);function sd(e,t=!1){return t?{h:Number(e&su),l:Number(e>>sh&su)}:{h:0|Number(e>>sh&su),l:0|Number(e&su)}}function sf(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=sd(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}let sp=(e,t,r)=>e<<r|t>>>32-r,sg=(e,t,r)=>t<<r|e>>>32-r,sy=(e,t,r)=>t<<r-32|e>>>64-r,sm=(e,t,r)=>e<<r-32|t>>>64-r;var sb={fromBig:sd,split:sf,toBig:(e,t)=>BigInt(e>>>0)<<sh|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:sp,rotlSL:sg,rotlBH:sy,rotlBL:sm,add:function(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)};let sw="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,sv=e=>e instanceof Uint8Array,sE=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),sA=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),sx=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");let sI=async()=>{};async function sT(e,t,r){let i=Date.now();for(let n=0;n<e;n++){r(n);let e=Date.now()-i;e>=0&&e<t||(await sI(),i+=e)}}function s_(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!sv(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}class sS{clone(){return this._cloneInto()}}let sP={}.toString;function sN(e,t){if(void 0!==t&&"[object Object]"!==sP.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)}function sO(e){let t=t=>e().update(s_(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function sk(e=32){if(sw&&"function"==typeof sw.getRandomValues)return sw.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}let[sC,sB,sR]=[[],[],[]],sD=BigInt(0),sL=BigInt(1),sU=BigInt(2),sM=BigInt(7),sF=BigInt(256),s$=BigInt(113);for(let e=0,t=sL,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],sC.push(2*(5*i+r)),sB.push((e+1)*(e+2)/2%64);let n=sD;for(let e=0;e<7;e++)(t=(t<<sL^(t>>sM)*s$)%sF)&sU&&(n^=sL<<(sL<<BigInt(e))-sL);sR.push(n)}let[sj,sH]=sf(sR,!0),sV=(e,t,r)=>r>32?sy(e,t,r):sp(e,t,r),sz=(e,t,r)=>r>32?sm(e,t,r):sg(e,t,r);class sG extends sS{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ss(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=sE(this.state)}keccak(){!function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=sV(s,o,1)^r[i],l=sz(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=sB[r],s=sV(t,n,i),o=sz(t,n,i),a=sC[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=sj[i],e[1]^=sH[i]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){sl(this);let{blockLen:t,state:r}=this,i=(e=s_(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){sl(this,!1),so(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ss(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(sc(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new sG(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let sq=sO(()=>new sG(136,1,32)),sK="6.13.4";function sW(e,t,r){for(let i in t){let n=t[i],s=r?r[i]:null;s&&function(e,t,r){let i=t.split("|").map(e=>e.trim());for(let r=0;r<i.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let n=Error(`invalid value for type ${t}`);throw n.code="INVALID_ARGUMENT",n.argument=`value.${r}`,n.value=e,n}(n,s,i),Object.defineProperty(e,i,{enumerable:!0,value:n,writable:!1})}}function sQ(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(sQ).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let i=0;i<e.length;i++)r+=t[e[i]>>4]+t[15&e[i]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return sQ(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let t=Object.keys(e);return t.sort(),"{ "+t.map(t=>`${sQ(t)}: ${sQ(e[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function sY(e,t,r,i){if(!e)throw function(e,t,r){let i,n=e;{let i=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${sQ(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];i.push(e+"="+sQ(t))}}i.push(`code=${t}`),i.push(`version=${sK}`),i.length&&(e+=" ("+i.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":i=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=RangeError(e);break;default:i=Error(e)}return sW(i,{code:t}),r&&Object.assign(i,r),null==i.shortMessage&&sW(i,{shortMessage:n}),i}(t,r,i)}function sJ(e,t,r,i){sY(e,t,"INVALID_ARGUMENT",{argument:r,value:i})}let sZ=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);function sX(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let i=0;i<t.length;i++)t[i]=parseInt(e.substring(r,r+2),16),r+=2;return t}sJ(!1,"invalid BytesLike value",t||"value",e)}function s0(e,t){return sX(e,t,!1)}function s1(e,t){return sX(e,t,!0)}function s2(e,t){return!!("string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/))&&("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0)}let s3="0123456789abcdef";function s4(e){let t=s0(e),r="0x";for(let e=0;e<t.length;e++){let i=t[e];r+=s3[(240&i)>>4]+s3[15&i]}return r}function s8(e){return"0x"+e.map(e=>s4(e).substring(2)).join("")}function s5(e){return s2(e,!0)?(e.length-2)/2:s0(e).length}let s6=!1,s7=function(e){return sq(e)},s9=s7;function oe(e){let t=s0(e,"data");return s4(s9(t))}oe._=s7,oe.lock=function(){s6=!0},oe.register=function(e){if(s6)throw TypeError("keccak256 is locked");s9=e},Object.freeze(oe);let ot=BigInt(0),or=BigInt(36);function oi(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let i=s0(oe(r));for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&i[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let on={};for(let e=0;e<10;e++)on[String(e)]=String(e);for(let e=0;e<26;e++)on[String.fromCharCode(65+e)]=String(10+e);let os=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function oo(e){if(sJ("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=oi(e);return sJ(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){sJ(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>on[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=ot;for(let r=0;r<e.length;r++)t=t*or+os[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return oi("0x"+t)}sJ(!1,"invalid address","address",e)}class oa extends sS{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,sa(e);let r=s_(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return sl(this),this.iHash.update(e),this}digestInto(e){sl(this),so(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let ol=(e,t,r)=>new oa(e,t).update(r).digest();function oc(e,t,r,i){var n;let s;let{c:o,dkLen:a,DK:l,PRF:c,PRFSalt:u}=function(e,t,r,i){sa(e);let{c:n,dkLen:s,asyncTick:o}=sN({dkLen:32,asyncTick:10},i);if(ss(n),ss(s),ss(o),n<1)throw Error("PBKDF2: iterations (c) should be >= 1");let a=s_(t),l=s_(r),c=new Uint8Array(s),u=ol.create(e,a),h=u._cloneInto().update(l);return{c:n,dkLen:s,asyncTick:o,DK:c,PRF:u,PRFSalt:h}}(e,t,r,i),h=new Uint8Array(4),d=sA(h),f=new Uint8Array(c.outputLen);for(let e=1,t=0;t<a;e++,t+=c.outputLen){let r=l.subarray(t,t+c.outputLen);d.setInt32(0,e,!1),(s=u._cloneInto(s)).update(h).digestInto(f),r.set(f.subarray(0,r.length));for(let e=1;e<o;e++){c._cloneInto(s).update(f).digestInto(f);for(let e=0;e<r.length;e++)r[e]^=f[e]}}return n=s,c.destroy(),u.destroy(),n&&n.destroy(),f.fill(0),l}ol.create=(e,t)=>new oa(e,t);class ou extends sS{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=sA(this.buffer)}update(e){sl(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=s_(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=sA(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){sl(this),sc(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=sA(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let oh=(e,t,r)=>e&t^~e&r,od=(e,t,r)=>e&t^e&r^t&r,of=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),op=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),og=new Uint32Array(64);class oy extends ou{constructor(){super(64,32,8,!1),this.A=0|op[0],this.B=0|op[1],this.C=0|op[2],this.D=0|op[3],this.E=0|op[4],this.F=0|op[5],this.G=0|op[6],this.H=0|op[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)og[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=og[e-15],r=og[e-2],i=sx(t,7)^sx(t,18)^t>>>3,n=sx(r,17)^sx(r,19)^r>>>10;og[e]=n+og[e-7]+i+og[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(sx(o,6)^sx(o,11)^sx(o,25))+oh(o,a,l)+of[e]+og[e]|0,u=(sx(r,2)^sx(r,13)^sx(r,22))+od(r,i,n)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+u|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){og.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let om=sO(()=>new oy),[ob,ow]=sb.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ov=new Uint32Array(80),oE=new Uint32Array(80);class oA extends ou{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)ov[r]=e.getUint32(t),oE[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|ov[e-15],r=0|oE[e-15],i=sb.rotrSH(t,r,1)^sb.rotrSH(t,r,8)^sb.shrSH(t,r,7),n=sb.rotrSL(t,r,1)^sb.rotrSL(t,r,8)^sb.shrSL(t,r,7),s=0|ov[e-2],o=0|oE[e-2],a=sb.rotrSH(s,o,19)^sb.rotrBH(s,o,61)^sb.shrSH(s,o,6),l=sb.rotrSL(s,o,19)^sb.rotrBL(s,o,61)^sb.shrSL(s,o,6),c=sb.add4L(n,l,oE[e-7],oE[e-16]),u=sb.add4H(c,i,a,ov[e-7],ov[e-16]);ov[e]=0|u,oE[e]=0|c}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){let t=sb.rotrSH(u,h,14)^sb.rotrSH(u,h,18)^sb.rotrBH(u,h,41),b=sb.rotrSL(u,h,14)^sb.rotrSL(u,h,18)^sb.rotrBL(u,h,41),w=u&d^~u&p,v=h&f^~h&g,E=sb.add5L(m,b,v,ow[e],oE[e]),A=sb.add5H(E,y,t,w,ob[e],ov[e]),x=0|E,I=sb.rotrSH(r,i,28)^sb.rotrBH(r,i,34)^sb.rotrBH(r,i,39),T=sb.rotrSL(r,i,28)^sb.rotrBL(r,i,34)^sb.rotrBL(r,i,39),_=r&n^r&o^n&o,S=i&s^i&a^s&a;y=0|p,m=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=sb.add(0|l,0|c,0|A,0|x)),l=0|o,c=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let P=sb.add3L(x,T,S);r=sb.add3H(P,A,I,_),i=0|P}({h:r,l:i}=sb.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=sb.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=sb.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=sb.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=sb.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=sb.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=sb.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=sb.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(r,i,n,s,o,a,l,c,u,h,d,f,p,g,y,m)}roundClean(){ov.fill(0),oE.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let ox=sO(()=>new oA),oI=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}(),oT=oI.crypto||oI.msCrypto,o_=!1,oS=function(e,t,r,i,n){return function(e,t,r,i,n){let s={sha256:om,sha512:ox}[n];return sJ(null!=s,"invalid pbkdf2 algorithm","algorithm",n),oc(s,e,t,{c:r,dkLen:i})}(e,t,r,i,n)},oP=oS;function oN(e,t,r,i,n){let s=s0(e,"password"),o=s0(t,"salt");return s4(oP(s,o,r,i,n))}oN._=oS,oN.lock=function(){o_=!0},oN.register=function(e){if(o_)throw Error("pbkdf2 is locked");oP=e},Object.freeze(oN);let oO=(e,t)=>e<<t|e>>>32-t;function ok(e,t,r,i,n,s){let o=e[t++]^r[i++],a=e[t++]^r[i++],l=e[t++]^r[i++],c=e[t++]^r[i++],u=e[t++]^r[i++],h=e[t++]^r[i++],d=e[t++]^r[i++],f=e[t++]^r[i++],p=e[t++]^r[i++],g=e[t++]^r[i++],y=e[t++]^r[i++],m=e[t++]^r[i++],b=e[t++]^r[i++],w=e[t++]^r[i++],v=e[t++]^r[i++],E=e[t++]^r[i++],A=o,x=a,I=l,T=c,_=u,S=h,P=d,N=f,O=p,k=g,C=y,B=m,R=b,D=w,L=v,U=E;for(let e=0;e<8;e+=2)_^=oO(A+R|0,7),O^=oO(_+A|0,9),R^=oO(O+_|0,13),A^=oO(R+O|0,18),k^=oO(S+x|0,7),D^=oO(k+S|0,9),x^=oO(D+k|0,13),S^=oO(x+D|0,18),L^=oO(C+P|0,7),I^=oO(L+C|0,9),P^=oO(I+L|0,13),C^=oO(P+I|0,18),T^=oO(U+B|0,7),N^=oO(T+U|0,9),B^=oO(N+T|0,13),U^=oO(B+N|0,18),x^=oO(A+T|0,7),I^=oO(x+A|0,9),T^=oO(I+x|0,13),A^=oO(T+I|0,18),P^=oO(S+_|0,7),N^=oO(P+S|0,9),_^=oO(N+P|0,13),S^=oO(_+N|0,18),B^=oO(C+k|0,7),O^=oO(B+C|0,9),k^=oO(O+B|0,13),C^=oO(k+O|0,18),R^=oO(U+L|0,7),D^=oO(R+U|0,9),L^=oO(D+R|0,13),U^=oO(L+D|0,18);n[s++]=o+A|0,n[s++]=a+x|0,n[s++]=l+I|0,n[s++]=c+T|0,n[s++]=u+_|0,n[s++]=h+S|0,n[s++]=d+P|0,n[s++]=f+N|0,n[s++]=p+O|0,n[s++]=g+k|0,n[s++]=y+C|0,n[s++]=m+B|0,n[s++]=b+R|0,n[s++]=w+D|0,n[s++]=v+L|0,n[s++]=E+U|0}function oC(e,t,r,i,n){let s=i+0,o=i+16*n;for(let i=0;i<16;i++)r[o+i]=e[t+(2*n-1)*16+i];for(let i=0;i<n;i++,s+=16,t+=16)ok(r,o,e,t,r,s),i>0&&(o+=16),ok(r,s,e,t+=16,r,o)}function oB(e,t,r){let{N:i,r:n,p:s,dkLen:o,asyncTick:a,maxmem:l,onProgress:c}=sN({dkLen:32,asyncTick:10,maxmem:1073742848},r);if(ss(i),ss(n),ss(s),ss(o),ss(a),ss(l),void 0!==c&&"function"!=typeof c)throw Error("progressCb should be function");let u=128*n,h=u/4;if(i<=1||(i&i-1)!=0||i>=2**(u/8)||i>4294967296)throw Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(s<0||s>(4294967296-1)*32/u)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(o<0||o>(4294967296-1)*32)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let d=u*(i+s);if(d>l)throw Error(`Scrypt: parameters too large, ${d} (128 * r * (N + p)) > ${l} (maxmem)`);let f=oc(om,e,t,{c:1,dkLen:u*s}),p=sE(f),g=sE(new Uint8Array(u*i)),y=sE(new Uint8Array(u)),m=()=>{};if(c){let e=2*i*s,t=Math.max(Math.floor(e/1e4),1),r=0;m=()=>{r++,c&&(!(r%t)||r===e)&&c(r/e)}}return{N:i,r:n,p:s,dkLen:o,blockSize32:h,V:g,B32:p,B:f,tmp:y,blockMixCb:m,asyncTick:a}}function oR(e,t,r,i,n){let s=oc(om,e,r,{c:1,dkLen:t});return r.fill(0),i.fill(0),n.fill(0),s}async function oD(e,t,r){let{N:i,r:n,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:d,asyncTick:f}=oB(e,t,r);for(let e=0;e<s;e++){let t=a*e;for(let e=0;e<a;e++)l[e]=c[t+e];let r=0;await sT(i-1,f,()=>{oC(l,r,l,r+=a,n),d()}),oC(l,(i-1)*a,c,t,n),d(),await sT(i,f,()=>{let e=c[t+a-16]%i;for(let r=0;r<a;r++)h[r]=c[t+r]^l[e*a+r];oC(h,0,c,t,n),d()})}return oR(e,o,u,l,h)}let oL=!1,oU=!1,oM=async function(e,t,r,i,n,s,o){return await oD(e,t,{N:r,r:i,p:n,dkLen:s,onProgress:o})},oF=function(e,t,r,i,n,s){return function(e,t,r){let{N:i,r:n,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:d}=oB(e,t,r);for(let e=0;e<s;e++){let t=a*e;for(let e=0;e<a;e++)l[e]=c[t+e];for(let e=0,t=0;e<i-1;e++)oC(l,t,l,t+=a,n),d();oC(l,(i-1)*a,c,t,n),d();for(let e=0;e<i;e++){let e=c[t+a-16]%i;for(let r=0;r<a;r++)h[r]=c[t+r]^l[e*a+r];oC(h,0,c,t,n),d()}}return oR(e,o,u,l,h)}(e,t,{N:r,r:i,p:n,dkLen:s})},o$=oM,oj=oF;async function oH(e,t,r,i,n,s,o){let a=s0(e,"passwd"),l=s0(t,"salt");return s4(await o$(a,l,r,i,n,s,o))}function oV(e,t,r,i,n,s){let o=s0(e,"passwd"),a=s0(t,"salt");return s4(oj(o,a,r,i,n,s))}oH._=oM,oH.lock=function(){oU=!0},oH.register=function(e){if(oU)throw Error("scrypt is locked");o$=e},Object.freeze(oH),oV._=oF,oV.lock=function(){oL=!0},oV.register=function(e){if(oL)throw Error("scryptSync is locked");oj=e},Object.freeze(oV);let oz=!1,oG=function(e){return new Uint8Array(function(e){sY(null!=oT,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),sJ(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);let t=new Uint8Array(e);return oT.getRandomValues(t),t}(e))},oq=oG;function oK(e){return oq(e)}oK._=oG,oK.lock=function(){oz=!0},oK.register=function(e){if(oz)throw Error("randomBytes is locked");oq=e},Object.freeze(oK),BigInt(0);let oW=BigInt(1),oQ=BigInt(2),oY=e=>e instanceof Uint8Array,oJ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function oZ(e){if(!oY(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=oJ[e[r]];return t}function oX(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function o0(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let i=2*t,n=Number.parseInt(e.slice(i,i+2),16);if(Number.isNaN(n)||n<0)throw Error("Invalid byte sequence");r[t]=n}return r}function o1(e){return oX(oZ(e))}function o2(e){if(!oY(e))throw Error("Uint8Array expected");return oX(oZ(Uint8Array.from(e).reverse()))}function o3(e,t){return o0(e.toString(16).padStart(2*t,"0"))}function o4(e,t){return o3(e,t).reverse()}function o8(e,t,r){let i;if("string"==typeof t)try{i=o0(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(oY(t))i=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let n=i.length;if("number"==typeof r&&n!==r)throw Error(`${e} expected ${r} bytes, got ${n}`);return i}function o5(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!oY(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let o6=e=>(oQ<<BigInt(e-1))-oW,o7=e=>new Uint8Array(e),o9=e=>Uint8Array.from(e);function ae(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=o7(e),n=o7(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=o7())=>{n=a(o9([0]),e),i=a(),0!==e.length&&(n=a(o9([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return o5(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let at={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ar(e,t,r={}){let i=(t,r,i)=>{let n=at[r];if("function"!=typeof n)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!i||void 0!==s)&&!n(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let ai=BigInt(0),an=BigInt(1),as=BigInt(2),ao=BigInt(3),aa=BigInt(4),al=BigInt(5),ac=BigInt(8);function au(e,t){let r=e%t;return r>=ai?r:t+r}function ah(e,t,r){let i=e;for(;t-- >ai;)i*=i,i%=r;return i}function ad(e,t){if(e===ai||t<=ai)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=au(e,t),i=t,n=ai,s=an,o=an,a=ai;for(;r!==ai;){let e=i/r,t=i%r,l=n-o*e,c=s-a*e;i=r,r=t,n=o,s=a,o=l,a=c}if(i!==an)throw Error("invert: does not exist");return au(n,t)}BigInt(9),BigInt(16);let af=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ap(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function ag(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function ay(e){let t=ag(e);return t+Math.ceil(t/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let am=BigInt(0),ab=BigInt(1);function aw(e){return ar(e.Fp,af.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ar(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ap(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{bytesToNumberBE:av,hexToBytes:aE}=d,aA={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=aA;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],i=e.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:av(i),l:e.subarray(r+2)}},toSig(e){let{Err:t}=aA,r="string"==typeof e?aE(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let i=r.length;if(i<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");let{d:n,l:s}=aA._parseInt(r.subarray(2)),{d:o,l:a}=aA._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:n,s:o}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},i=t(r(e.s)),n=t(r(e.r)),s=i.length/2,o=n.length/2,a=r(s),l=r(o);return`30${r(o+s+4)}02${l}${n}02${a}${i}`}},ax=BigInt(0),aI=BigInt(1),aT=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let a_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),aS=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aP=BigInt(1),aN=BigInt(2),aO=(e,t)=>(e+t/aN)/t,ak=function(e,t,r=!1,i={}){if(e<=ai)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:n,nByteLength:s}=ap(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let o=function(e){if(e%aa===ao){let t=(e+an)/aa;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%ac===al){let t=(e-al)/ac;return function(e,r){let i=e.mul(r,as),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,as),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-an)/as;for(t=e-an,r=0;t%as===ai;t/=as,r++);for(i=as;i<e&&function(e,t,r){if(r<=ai||t<ai)throw Error("Expected power/modulo > 0");if(r===an)return ai;let i=an;for(;t>ai;)t&an&&(i=i*e%r),e=e*e%r,t>>=an;return i}(i,n,e)!==e-an;i++);if(1===r){let t=(e+an)/aa;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+an)/as;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,an<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e),a=Object.freeze({ORDER:e,BITS:n,BYTES:s,MASK:o6(n),ZERO:ai,ONE:an,create:t=>au(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return ai<=t&&t<e},is0:e=>e===ai,isOdd:e=>(e&an)===an,neg:t=>au(-t,e),eql:(e,t)=>e===t,sqr:t=>au(t*t,e),add:(t,r)=>au(t+r,e),sub:(t,r)=>au(t-r,e),mul:(t,r)=>au(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<ai)throw Error("Expected power > 0");if(r===ai)return e.ONE;if(r===an)return t;let i=e.ONE,n=t;for(;r>ai;)r&an&&(i=e.mul(i,n)),n=e.sqr(n),r>>=an;return i})(a,e,t),div:(t,r)=>au(t*ad(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ad(t,e),sqrt:i.sqrt||(e=>o(a,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?o4(e,s):o3(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?o2(e):o1(e)}});return Object.freeze(a)}(a_,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),l=e*e*e%a_,c=l*l*e%a_,u=ah(c,t,a_)*c%a_,h=ah(u,t,a_)*c%a_,d=ah(h,aN,a_)*l%a_,f=ah(d,i,a_)*d%a_,p=ah(f,n,a_)*f%a_,g=ah(p,o,a_)*p%a_,y=ah(g,a,a_)*g%a_,m=ah(y,o,a_)*p%a_,b=ah(m,t,a_)*c%a_,w=ah(b,s,a_)*f%a_,v=ah(w,r,a_)*l%a_,E=ah(v,aN,a_);if(!ak.eql(ak.sqr(E),e))throw Error("Cannot find square root");return E}}),aC=function(e,t){let r=t=>(function(e){let t=function(e){let t=aw(e);return ar(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return au(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){let t=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(e){let t=aw(e);ar(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,i=t.toBytes||((e,t,i)=>{let n=t.toAffine();return o5(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),n=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:i,b:n}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,i)),n)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&ax<e&&e<t.n}function a(e){if(!o(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=t;if(i&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=oZ(e)),"string"!=typeof e||!i.includes(e.length))throw Error("Invalid key");e=e.padStart(2*n,"0")}try{r="bigint"==typeof e?e:o1(o8("private key",e,n))}catch(t){throw Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return s&&(r=au(r,o)),a(r),r}let c=new Map;function u(e){if(!(e instanceof h))throw Error("ProjectivePoint expected")}class h{constructor(e,t,i){if(this.px=e,this.py=t,this.pz=i,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==i||!r.isValid(i))throw Error("z required")}static fromAffine(e){let{x:t,y:i}=e||{};if(!e||!r.isValid(t)||!r.isValid(i))throw Error("invalid affine point");if(e instanceof h)throw Error("projective point not allowed");let n=e=>r.eql(e,r.ZERO);return n(t)&&n(i)?h.ZERO:new h(t,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)}static fromHex(e){let t=h.fromAffine(n(o8("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:i}=this.toAffine();if(!r.isValid(e)||!r.isValid(i))throw Error("bad point: x or y not FE");let n=r.sqr(i),o=s(e);if(!r.eql(n,o))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:i,pz:n}=this,{px:s,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(s,n)),c=r.eql(r.mul(i,a),r.mul(o,n));return l&&c}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:i}=t,n=r.mul(i,aT),{px:s,py:o,pz:a}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),u=r.mul(s,a),u=r.add(u,u),l=r.mul(e,u),c=r.mul(n,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(n,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,g),l=r.sub(l,d),u=r.mul(p,f),u=r.add(u,u),new h(l,c,u=r.add(u,u))}add(e){u(e);let{px:i,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,c=r.ZERO,d=r.ZERO,f=r.ZERO,p=t.a,g=r.mul(t.b,aT),y=r.mul(i,o),m=r.mul(n,a),b=r.mul(s,l),w=r.add(i,n),v=r.add(o,a);w=r.mul(w,v),v=r.add(y,m),w=r.sub(w,v),v=r.add(i,s);let E=r.add(o,l);return v=r.mul(v,E),E=r.add(y,b),v=r.sub(v,E),E=r.add(n,s),c=r.add(a,l),E=r.mul(E,c),c=r.add(m,b),E=r.sub(E,c),f=r.mul(p,v),c=r.mul(g,b),f=r.add(c,f),c=r.sub(m,f),f=r.add(m,f),d=r.mul(c,f),m=r.add(y,y),m=r.add(m,y),b=r.mul(p,b),v=r.mul(g,v),m=r.add(m,b),b=r.sub(y,b),b=r.mul(p,b),v=r.add(v,b),y=r.mul(m,v),d=r.add(d,y),y=r.mul(E,v),c=r.mul(w,c),c=r.sub(c,y),y=r.mul(w,m),f=r.mul(E,f),new h(c,d,f=r.add(f,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,c,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)})}multiplyUnsafe(e){let i=h.ZERO;if(e===ax)return i;if(a(e),e===aI)return this;let{endo:n}=t;if(!n)return f.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:l,k2:c}=n.splitScalar(e),u=i,d=i,p=this;for(;o>ax||c>ax;)o&aI&&(u=u.add(p)),c&aI&&(d=d.add(p)),p=p.double(),o>>=aI,c>>=aI;return s&&(u=u.negate()),l&&(d=d.negate()),d=new h(r.mul(d.px,n.beta),d.py,d.pz),u.add(d)}multiply(e){let i,n;a(e);let{endo:s}=t;if(s){let{k1neg:t,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:d,f:p}=this.wNAF(l);c=f.constTimeNegate(t,c),d=f.constTimeNegate(a,d),d=new h(r.mul(d.px,s.beta),d.py,d.pz),i=c.add(d),n=u.add(p)}else{let{p:t,f:r}=this.wNAF(e);i=t,n=r}return h.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=h.BASE,n=(e,t)=>t!==ax&&t!==aI&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:i,pz:n}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(n));let o=r.mul(t,e),a=r.mul(i,e),l=r.mul(n,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===aI)return!0;if(r)return r(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===aI?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),i(h,this,e)}toHex(e=!0){return oZ(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let d=t.nBitLength,f=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let i=e.ZERO,n=t;for(;r>am;)r&ab&&(i=i.add(n)),n=n.double(),r>>=ab;return i},precomputeWindow(e,t){let{windows:r,windowSize:n}=i(t),s=[],o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,n,s){let{windows:o,windowSize:a}=i(t),l=e.ZERO,c=e.BASE,u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<o;e++){let t=e*a,i=Number(s&u);s>>=d,i>a&&(i-=h,s+=ab);let o=t+Math.abs(i)-1,f=e%2!=0,p=i<0;0===i?c=c.add(r(f,n[t])):l=l.add(r(p,n[o]))}return{p:l,f:c}},wNAFCached(e,t,r,i){let n=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,n),1!==n&&t.set(e,i(s))),this.wNAF(n,s,r)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x),o=o5;return i?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e=o1(o);if(!(ax<e&&e<r.ORDER))throw Error("Point is not on curve");let t=c(e),n=r.sqrt(t);return(1&i)==1!=((n&aI)===aI)&&(n=r.neg(n)),{x:e,y:n}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${n} compressed bytes or ${s} uncompressed bytes`)}}),h=e=>oZ(o3(e,t.nByteLength)),d=(e,t,r)=>o1(e.slice(t,r));class f{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new f(d(e=o8("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=aA.toSig(o8("DER",e));return new f(t,r)}assertValidity(){if(!u(this.r))throw Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s,recovery:l}=this,c=y(o8("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",f=a.fromHex(d+h(u)),p=ad(u,i),g=o(-c*p),m=o(s*p),b=a.BASE.multiplyAndAddUnsafe(f,g,m);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>i>>aI}normalizeS(){return this.hasHighS()?new f(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return o0(this.toDERHex())}toDERHex(){return aA.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return o0(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function p(e){let t=e instanceof Uint8Array,r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){let r=o1(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},y=t.bits2int_modN||function(e){return o(g(e))},m=o6(t.nBitLength);function b(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(ax<=e&&e<m))throw Error(`bigint expected < 2^${t.nBitLength}`);return o3(e,t.nByteLength)}let w={lowS:t.lowS,prehash:!1},v={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=w){let{seed:c,k2sig:h}=function(e,n,s=w){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:p,extraEntropy:m}=s;null==d&&(d=!0),e=o8("msgHash",e),p&&(e=o8("prehashed msgHash",c(e)));let v=y(e),E=l(n),A=[b(E),b(v)];if(null!=m){let e=!0===m?h(r.BYTES):m;A.push(o8("extraEntropy",e))}return{seed:o5(...A),k2sig:function(e){let t=g(e);if(!u(t))return;let r=ad(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===ax)return;let l=o(r*o(v+s*E));if(l===ax)return;let c=(n.x===s?0:2)|Number(n.y&aI),h=l;if(d&&l>i>>aI)h=l>i>>aI?o(-l):l,c^=1;return new f(s,h,c)}}}(e,n,s);return ae(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=v){let l,c;if(r=o8("msgHash",r),n=o8("publicKey",n),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:u,prehash:h}=s;try{if("string"==typeof e||e instanceof Uint8Array)try{c=f.fromDER(e)}catch(t){if(!(t instanceof aA.Err))throw t;c=f.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;c=new f(t,r)}else throw Error("PARSE");l=a.fromHex(n)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&c.hasHighS())return!1;h&&(r=t.hash(r));let{r:d,s:p}=c,g=y(r),m=ad(p,i),b=o(g*m),w=o(d*m),E=a.BASE.multiplyAndAddUnsafe(l,b,w)?.toAffine();return!!E&&o(E.x)===d},ProjectivePoint:a,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=ay(t.n);return function(e,t,r=!1){let i=e.length,n=ag(t),s=ay(t);if(i<16||i<s||i>1024)throw Error(`expected ${s}-1024 bytes of input, got ${i}`);let o=au(r?o1(e):o2(e),t-an)+an;return r?o4(o,n):o3(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>ol(t,e,function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!sv(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(...r)),randomBytes:sk});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:ak,n:aS,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-aP*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),s=aO(t*e,aS),o=aO(-r*e,aS),a=au(e-s*t-o*i,aS),l=au(-s*r-o*t,aS),c=a>n,u=l>n;if(c&&(a=aS-a),u&&(l=aS-l),a>n||l>n)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:a,k2neg:u,k2:l}}}},om),aB=(BigInt(0),aC.ProjectivePoint,BigInt(0));function aR(e,t){switch(typeof e){case"bigint":return e;case"number":return sJ(Number.isInteger(e),"underflow",t||"value",e),sJ(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(r){sJ(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}sJ(!1,"invalid BigNumberish value",t||"value",e)}function aD(e,t){let r=aR(e,t);return sY(r>=aB,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}function aL(e,t){switch(typeof e){case"bigint":return sJ(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),Number(e);case"number":return sJ(Number.isInteger(e),"underflow",t||"value",e),sJ(e>=-9007199254740991&&e<=9007199254740991,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return aL(BigInt(e),t)}catch(r){sJ(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}sJ(!1,"invalid numeric value",t||"value",e)}function aU(e,t){let r=aD(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let i=aL(t,"width");for(sY(2*i>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*i;)r="0"+r}return"0x"+r}BigInt(1);let aM="0x0000000000000000000000000000000000000000000000000000000000000000",aF=BigInt(0),a$=BigInt(1),aj=BigInt(2),aH=BigInt(27),aV=BigInt(28),az=BigInt(35),aG={};function aq(e){return function(e,t,r){let i=s0(e);sY(t>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:t,offset:t+1});let n=new Uint8Array(t);return n.fill(0),r?n.set(i,t-i.length):n.set(i,0),s4(n)}(function(e){let t=aD(e,"value");if(t===aB)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let i=new Uint8Array(r.length/2);for(let e=0;e<i.length;e++){let t=2*e;i[e]=parseInt(r.substring(t,t+2),16)}return i}(e),32,!0)}class aK{#k;#C;#B;#R;get r(){return this.#k}set r(e){sJ(32===s5(e),"invalid r","value",e),this.#k=s4(e)}get s(){return this.#C}set s(e){sJ(32===s5(e),"invalid s","value",e);let t=s4(e);sJ(8>parseInt(t.substring(0,3)),"non-canonical s","value",t),this.#C=t}get v(){return this.#B}set v(e){let t=aL(e,"value");sJ(27===t||28===t,"invalid v","v",e),this.#B=t}get networkV(){return this.#R}get legacyChainId(){let e=this.networkV;return null==e?null:aK.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){let e=s0(this.s);return this.yParity&&(e[0]|=128),s4(e)}get compactSerialized(){return s8([this.r,this.yParityAndS])}get serialized(){return s8([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,i){!function(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),sY(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}(e,aG,"Signature"),this.#k=t,this.#C=r,this.#B=i,this.#R=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new aK(aG,this.r,this.s,this.v);return this.networkV&&(e.#R=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=aR(e,"v");return t==aH||t==aV?aF:(sJ(t>=az,"invalid EIP-155 v","v",e),(t-az)/aj)}static getChainIdV(e,t){return aR(e)*aj+BigInt(35+t-27)}static getNormalizedV(e){let t=aR(e);return t===aF||t===aH?27:t===a$||t===aV?28:(sJ(t>=az,"invalid v","v",e),t&a$?27:28)}static from(e){function t(t,r){sJ(t,r,"signature",e)}if(null==e)return new aK(aG,aM,aM,27);if("string"==typeof e){let r=s0(e,"signature");if(64===r.length){let e=s4(r.slice(0,32)),t=r.slice(32,64),i=128&t[0]?28:27;return t[0]&=127,new aK(aG,e,s4(t),i)}if(65===r.length){let e=s4(r.slice(0,32)),i=r.slice(32,64);t((128&i[0])==0,"non-canonical s");let n=aK.getNormalizedV(r[64]);return new aK(aG,e,s4(i),n)}t(!1,"invalid raw signature length")}if(e instanceof aK)return e.clone();let r=e.r;t(null!=r,"missing r");let i=aq(r),n=function(e,r){if(null!=e)return aq(e);if(null!=r){t(s2(r,32),"invalid yParityAndS");let e=s0(r);return e[0]&=127,s4(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t((128&s0(n)[0])==0,"non-canonical s");let{networkV:s,v:o}=function(e,r,i){if(null!=e){let t=aR(e);return{networkV:t>=az?t:void 0,v:aK.getNormalizedV(t)}}if(null!=r)return t(s2(r,32),"invalid yParityAndS"),{v:128&s0(r)[0]?28:27};if(null!=i){switch(aL(i,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),a=new aK(aG,i,n,o);return s&&(a.#R=s),t(null==e.yParity||aL(e.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}class aW{#D;constructor(e){sJ(32===s5(e),"invalid private key","privateKey","[REDACTED]"),this.#D=s4(e)}get privateKey(){return this.#D}get publicKey(){return aW.computePublicKey(this.#D)}get compressedPublicKey(){return aW.computePublicKey(this.#D,!0)}sign(e){sJ(32===s5(e),"invalid digest length","digest",e);let t=aC.sign(s1(e),s1(this.#D),{lowS:!0});return aK.from({r:aU(t.r,32),s:aU(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=aW.computePublicKey(e);return s4(aC.getSharedSecret(s1(this.#D),s0(t),!1))}static computePublicKey(e,t){let r=s0(e,"key");if(32===r.length)return s4(aC.getPublicKey(r,!!t));if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}return s4(aC.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){sJ(32===s5(e),"invalid digest length","digest",e);let r=aK.from(t),i=aC.Signature.fromCompact(s1(s8([r.r,r.s]))),n=(i=i.addRecoveryBit(r.yParity)).recoverPublicKey(s1(e));return sJ(null!=n,"invalid signautre for digest","signature",t),"0x"+n.toHex(!1)}static addPoints(e,t,r){let i=aC.ProjectivePoint.fromHex(aW.computePublicKey(e).substring(2)),n=aC.ProjectivePoint.fromHex(aW.computePublicKey(t).substring(2));return"0x"+i.add(n).toHex(!!r)}}function aQ(e,t,r,i,n){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let i=t+1;i<r.length&&r[i]>>6==2;i++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}function aY(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function aJ(e){return"string"==typeof e?function(e,t){sJ("string"==typeof e,"invalid string value","str",e),null!=t&&(sY(sZ.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}}),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if((64512&i)==55296){t++;let n=e.charCodeAt(t);sJ(t<e.length&&(64512&n)==56320,"invalid surrogate pair","str",e);let s=65536+((1023&i)<<10)+(1023&n);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return new Uint8Array(r)}(e,"NFKC"):s1(e)}function aZ(e,t){let r=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);sJ(null!=r,"invalid path","path",t);let i=r[1],n=r[3],s="!"===r[4],o=e;for(let e of i.toLowerCase().split(".")){if(Array.isArray(o)){if(!e.match(/^[0-9]+$/))break;o=o[parseInt(e)]}else if("object"==typeof o){let t=null;for(let r in o)if(r.toLowerCase()===e){t=o[r];break}o=t}else o=null;if(null==o)break}if(sJ(!s||null!=o,"missing required value","path",i),n&&null!=o){if("int"===n){if("string"==typeof o&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if("number"===n&&"string"==typeof o&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if("data"===n&&"string"==typeof o){var a;return"string"!=typeof(a=o)||a.startsWith("0x")||(a="0x"+a),s1(a)}if("array"===n&&Array.isArray(o)||n===typeof o)return o;sJ(!1,`wrong type found for ${n} `,"path",i)}return o}Object.freeze({error:function(e,t,r,i,n){sJ(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:aQ,replace:function(e,t,r,i,n){return"OVERLONG"===e?(sJ("number"==typeof n,"invalid bad code point for replacement","badCodepoint",n),i.push(n),0):(i.push(65533),aQ(e,t,r,i,n))}});let aX="m/44'/60'/0'/0/0";function a0(e,t){let r=s0(t),i=aZ(e,"crypto.ciphertext:data!");sJ(s4(oe(s8([r.slice(16,32),i]))).substring(2)===aZ(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");let n=function(e,t,r){if("aes-128-ctr"===aZ(e,"crypto.cipher:string"))return s4(new sn(t,aZ(e,"crypto.cipherparams.iv:data!")).decrypt(r));sY(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(e,r.slice(0,16),i),s=oo(oe("0x"+("string"==typeof n?aW.computePublicKey(n,!1):n.publicKey).substring(4)).substring(26));if(e.address){let t=e.address.toLowerCase();t.startsWith("0x")||(t="0x"+t),sJ(oo(t)===s,"keystore address/privateKey mismatch","address",e.address)}let o={address:s,privateKey:n};if("0.1"===aZ(e,"x-ethers.version:string")){let t=r.slice(32,64),i=aZ(e,"x-ethers.mnemonicCiphertext:data!"),n=new sn(t,aZ(e,"x-ethers.mnemonicCounter:data!"));o.mnemonic={path:aZ(e,"x-ethers.path:string")||aX,locale:aZ(e,"x-ethers.locale:string")||"en",entropy:s4(s0(n.decrypt(i)))}}return o}function a1(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}async function a2(e,t,r){let i=JSON.parse(e),n=aJ(t),s=function(e){let t=aZ(e,"crypto.kdf:string");if(t&&"string"==typeof t){if("scrypt"===t.toLowerCase()){let r=aZ(e,"crypto.kdfparams.salt:data!"),i=aZ(e,"crypto.kdfparams.n:int!"),n=aZ(e,"crypto.kdfparams.r:int!"),s=aZ(e,"crypto.kdfparams.p:int!");sJ(i>0&&(i&i-1)==0,"invalid kdf.N","kdf.N",i),sJ(n>0&&s>0,"invalid kdf","kdf",t);let o=aZ(e,"crypto.kdfparams.dklen:int!");return sJ(32===o,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:r,N:i,r:n,p:s,dkLen:64}}if("pbkdf2"===t.toLowerCase()){let t=aZ(e,"crypto.kdfparams.salt:data!"),r=aZ(e,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();sJ("sha256"===i||"sha512"===i,"invalid kdf.pdf","kdf.pdf",r);let n=aZ(e,"crypto.kdfparams.c:int!"),s=aZ(e,"crypto.kdfparams.dklen:int!");return sJ(32===s,"invalid kdf.dklen","kdf.dklen",s),{name:"pbkdf2",salt:t,count:n,dkLen:s,algorithm:i}}}sJ(!1,"unsupported key-derivation function","kdf",t)}(i);if("pbkdf2"===s.name){r&&(r(0),await a1(0));let{salt:e,count:t,dkLen:o,algorithm:a}=s,l=oN(n,e,t,o,a);return r&&(r(1),await a1(0)),a0(i,l)}sY("scrypt"===s.name,"cannot be reached","UNKNOWN_ERROR",{params:s});let{salt:o,N:a,r:l,p:c,dkLen:u}=s;return a0(i,await oH(n,o,a,l,c,u,r))}async function a3(e,t,r){null==r&&(r={});let i=aJ(t),n=function(e){let t=null!=e.salt?s0(e.salt,"options.salt"):oK(32),r=131072,i=8,n=1;return e.scrypt&&(e.scrypt.N&&(r=e.scrypt.N),e.scrypt.r&&(i=e.scrypt.r),e.scrypt.p&&(n=e.scrypt.p)),sJ("number"==typeof r&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),sJ("number"==typeof i&&i>0&&Number.isSafeInteger(i),"invalid scrypt r parameter","options.r",i),sJ("number"==typeof n&&n>0&&Number.isSafeInteger(n),"invalid scrypt p parameter","options.p",n),{name:"scrypt",dkLen:32,salt:t,N:r,r:i,p:n}}(r);return function(e,t,r,i){let n=s0(r.privateKey,"privateKey"),s=null!=i.iv?s0(i.iv,"options.iv"):oK(16);sJ(16===s.length,"invalid options.iv length","options.iv",i.iv);let o=null!=i.uuid?s0(i.uuid,"options.uuid"):oK(16);sJ(16===o.length,"invalid options.uuid length","options.uuid",i.iv);let a=e.slice(0,16),l=e.slice(16,32),c=s0(new sn(a,s).encrypt(n)),u=oe(s8([l,c])),h={address:r.address.substring(2).toLowerCase(),id:function(e){let t=s0(e,"randomBytes");t[6]=15&t[6]|64,t[8]=63&t[8]|128;let r=s4(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:s4(s).substring(2)},ciphertext:s4(c).substring(2),kdf:"scrypt",kdfparams:{salt:s4(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:u.substring(2)}};if(r.mnemonic){let t=null!=i.client?i.client:`ethers/${sK}`,n=r.mnemonic.path||aX,s=r.mnemonic.locale||"en",o=e.slice(32,64),a=s0(r.mnemonic.entropy,"account.mnemonic.entropy"),l=oK(16),c=s0(new sn(o,l).encrypt(a)),u=new Date,d="UTC--"+(u.getUTCFullYear()+"-"+aY(u.getUTCMonth()+1,2)+"-"+aY(u.getUTCDate(),2)+"T"+aY(u.getUTCHours(),2)+"-"+aY(u.getUTCMinutes(),2)+"-")+aY(u.getUTCSeconds(),2)+".0Z--"+h.address;h["x-ethers"]={client:t,gethFilename:d,path:n,locale:s,mnemonicCounter:s4(l).substring(2),mnemonicCiphertext:s4(c).substring(2),version:"0.1"}}return JSON.stringify(h)}(s0(await oH(i,n.salt,n.N,n.r,n.p,64,r.progressCallback)),n,e,r)}let a4=new Uint8Array(16),a8=nD(a4),a5=(e,t,r,i)=>({s3:r<<31|i>>>1,s2:t<<31|r>>>1,s1:e<<31|t>>>1,s0:e>>>1^-520093696&-(1&i&1)}),a6=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0,a7=e=>e>65536?8:e>1024?4:2;class a9{constructor(e,t){var r;this.blockLen=16,this.outputLen=16,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,nC(e=n$(e),16);let i=(r=e,new DataView(r.buffer,r.byteOffset,r.byteLength)),n=i.getUint32(0,!1),s=i.getUint32(4,!1),o=i.getUint32(8,!1),a=i.getUint32(12,!1),l=[];for(let e=0;e<128;e++)l.push({s0:a6(n),s1:a6(s),s2:a6(o),s3:a6(a)}),{s0:n,s1:s,s2:o,s3:a}=a5(n,s,o,a);let c=a7(t||1024);if(![1,2,4,8].includes(c))throw Error("ghash: invalid window size, expected 2, 4 or 8");this.W=c;let u=128/c,h=this.windowSize=2**c,d=[];for(let e=0;e<u;e++)for(let t=0;t<h;t++){let r=0,i=0,n=0,s=0;for(let o=0;o<c;o++){if(!(t>>>c-o-1&1))continue;let{s0:a,s1:u,s2:h,s3:d}=l[c*e+o];r^=a,i^=u,n^=h,s^=d}d.push({s0:r,s1:i,s2:n,s3:s})}this.t=d}_updateBlock(e,t,r,i){e^=this.s0,t^=this.s1,r^=this.s2,i^=this.s3;let{W:n,t:s,windowSize:o}=this,a=0,l=0,c=0,u=0,h=(1<<n)-1,d=0;for(let f of[e,t,r,i])for(let e=0;e<4;e++){let t=f>>>8*e&255;for(let e=8/n-1;e>=0;e--){let{s0:r,s1:i,s2:f,s3:p}=s[d*o+(t>>>n*e&h)];a^=r,l^=i,c^=f,u^=p,d+=1}}this.s0=a,this.s1=l,this.s2=c,this.s3=u}update(e){nB(this),nC(e=n$(e));let t=nD(e),r=Math.floor(e.length/16),i=e.length%16;for(let e=0;e<r;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return i&&(a4.set(e.subarray(16*r)),this._updateBlock(a8[0],a8[1],a8[2],a8[3]),nL(a8)),this}destroy(){let{t:e}=this;for(let t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){nB(this),nR(e,this),this.finished=!0;let{s0:t,s1:r,s2:i,s3:n}=this,s=nD(e);return s[0]=t,s[1]=r,s[2]=i,s[3]=n,e}digest(){let e=new Uint8Array(16);return this.digestInto(e),this.destroy(),e}}class le extends a9{constructor(e,t){nC(e=n$(e));let r=function(e){e.reverse();let t=1&e[15],r=0;for(let t=0;t<e.length;t++){let i=e[t];e[t]=i>>>1|r,r=(1&i)<<7}return e[0]^=225&-t,e}(nH(e));super(r,t),nL(r)}update(e){e=n$(e),nB(this);let t=nD(e),r=e.length%16,i=Math.floor(e.length/16);for(let e=0;e<i;e++)this._updateBlock(a6(t[4*e+3]),a6(t[4*e+2]),a6(t[4*e+1]),a6(t[4*e+0]));return r&&(a4.set(e.subarray(16*i)),this._updateBlock(a6(a8[3]),a6(a8[2]),a6(a8[1]),a6(a8[0])),nL(a8)),this}digestInto(e){nB(this),nR(e,this),this.finished=!0;let{s0:t,s1:r,s2:i,s3:n}=this,s=nD(e);return s[0]=t,s[1]=r,s[2]=i,s[3]=n,e.reverse()}}function lt(e){let t=(t,r)=>e(r,t.length).update(n$(t)).digest(),r=e(new Uint8Array(16),0);return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=(t,r)=>e(t,r),t}function lr(e){return e<<1^283&-(e>>7)}function li(e,t){let r=0;for(;t>0;t>>=1)r^=e&-(1&t),e=lr(e);return r}lt((e,t)=>new a9(e,t)),lt((e,t)=>new le(e,t));let ln=(()=>{let e=new Uint8Array(256);for(let t=0,r=1;t<256;t++,r^=lr(r))e[t]=r;let t=new Uint8Array(256);t[0]=99;for(let r=0;r<255;r++){let i=e[255-r];i|=i<<8,t[e[r]]=(i^i>>4^i>>5^i>>6^i>>7^99)&255}return nL(e),t})(),ls=ln.map((e,t)=>ln.indexOf(t)),lo=e=>e<<24|e>>>8,la=e=>e<<8|e>>>24;function ll(e,t){if(256!==e.length)throw Error("Wrong sbox length");let r=new Uint32Array(256).map((r,i)=>t(e[i])),i=r.map(la),n=i.map(la),s=n.map(la),o=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let t=0;t<256;t++)for(let c=0;c<256;c++){let u=256*t+c;o[u]=r[t]^i[c],a[u]=n[t]^s[c],l[u]=e[t]<<8|e[c]}return{sbox:e,sbox2:l,T0:r,T1:i,T2:n,T3:s,T01:o,T23:a}}let lc=ll(ln,e=>li(e,3)<<24|e<<16|e<<8|li(e,2)),lu=ll(ls,e=>li(e,11)<<24|li(e,13)<<16|li(e,9)<<8|li(e,14)),lh=(()=>{let e=new Uint8Array(16);for(let t=0,r=1;t<16;t++,r=lr(r))e[t]=r;return e})();function ld(e,t,r,i,n,s){return e[r<<8&65280|i>>>8&255]^t[n>>>8&65280|s>>>24&255]}function lf(e,t,r,i,n){return e[255&t|65280&r]|e[i>>>16&255|n>>>16&65280]<<16}function lp(e,t,r,i,n){let{sbox2:s,T01:o,T23:a}=lc,l=0;t^=e[l++],r^=e[l++],i^=e[l++],n^=e[l++];let c=e.length/4-2;for(let s=0;s<c;s++){let s=e[l++]^ld(o,a,t,r,i,n),c=e[l++]^ld(o,a,r,i,n,t),u=e[l++]^ld(o,a,i,n,t,r),h=e[l++]^ld(o,a,n,t,r,i);t=s,r=c,i=u,n=h}let u=e[l++]^lf(s,t,r,i,n);return{s0:u,s1:e[l++]^lf(s,r,i,n,t),s2:e[l++]^lf(s,i,n,t,r),s3:e[l++]^lf(s,n,t,r,i)}}let lg=((e,t)=>{function r(i,...n){if(nC(i),!nU)throw Error("Non little-endian hardware is not yet supported");if(void 0!==e.nonceLength){let t=n[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?nC(t):nC(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==n[1]&&nC(n[1]);let o=t(i,...n),a=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");nC(t)}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,nC(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(nC(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:16,nonceLength:16},function(e,t){function r(r,i){if(nC(r),void 0!==i&&(nC(i),!nj(i)))throw Error("unaligned destination");let n=function(e){nC(e);let t=e.length;if(![16,24,32].includes(t))throw Error("aes: invalid key size, should be 16, 24 or 32, got "+t);let{sbox2:r}=lc,i=[];nj(e)||i.push(e=nH(e));let n=nD(e),s=n.length,o=e=>lf(r,e,e,e,e),a=new Uint32Array(t+28);a.set(n);for(let e=s;e<a.length;e++){let t=a[e-1];e%s==0?t=o(lo(t))^lh[e/s-1]:s>6&&e%s==4&&(t=o(t)),a[e]=a[e-s]^t}return nL(...i),a}(e),s=nH(t),o=[n,s];nj(r)||o.push(r=nH(r));let a=function(e,t,r,i){nC(t,16),nC(r);let n=r.length;!function(e,t){if(e.buffer===t.buffer&&e.byteOffset<t.byteOffset+t.byteLength&&t.byteOffset<e.byteOffset+e.byteLength&&e.byteOffset<t.byteOffset)throw Error("complex overlap of input and output is not supported")}(r,i=function(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!nj(t))throw Error("invalid output, must be aligned");return t}(n,i));let s=nD(t),{s0:o,s1:a,s2:l,s3:c}=lp(e,s[0],s[1],s[2],s[3]),u=nD(r),h=nD(i);for(let r=0;r+4<=u.length;r+=4){h[r+0]=u[r+0]^o,h[r+1]=u[r+1]^a,h[r+2]=u[r+2]^l,h[r+3]=u[r+3]^c;let i=1;for(let e=t.length-1;e>=0;e--)i=i+(255&t[e])|0,t[e]=255&i,i>>>=8;({s0:o,s1:a,s2:l,s3:c}=lp(e,s[0],s[1],s[2],s[3]))}let d=16*Math.floor(u.length/4);if(d<n){let e=new Uint32Array([o,a,l,c]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(let e=d,s=0;e<n;e++,s++)i[e]=r[e]^t[s];nL(e)}return i}(n,s,r,i);return nL(...o),a}return{encrypt:(e,t)=>r(e,t),decrypt:(e,t)=>r(e,t)}});function ly(e,t,r,i,n,s){let o=e[t++]^r[i++],a=e[t++]^r[i++],l=e[t++]^r[i++],c=e[t++]^r[i++],u=e[t++]^r[i++],h=e[t++]^r[i++],d=e[t++]^r[i++],f=e[t++]^r[i++],p=e[t++]^r[i++],g=e[t++]^r[i++],y=e[t++]^r[i++],m=e[t++]^r[i++],b=e[t++]^r[i++],w=e[t++]^r[i++],v=e[t++]^r[i++],E=e[t++]^r[i++],A=o,x=a,I=l,T=c,_=u,S=h,P=d,N=f,O=p,k=g,C=y,B=m,R=b,D=w,L=v,U=E;for(let e=0;e<8;e+=2)_^=(0,eF.XG)(A+R|0,7),O^=(0,eF.XG)(_+A|0,9),R^=(0,eF.XG)(O+_|0,13),A^=(0,eF.XG)(R+O|0,18),k^=(0,eF.XG)(S+x|0,7),D^=(0,eF.XG)(k+S|0,9),x^=(0,eF.XG)(D+k|0,13),S^=(0,eF.XG)(x+D|0,18),L^=(0,eF.XG)(C+P|0,7),I^=(0,eF.XG)(L+C|0,9),P^=(0,eF.XG)(I+L|0,13),C^=(0,eF.XG)(P+I|0,18),T^=(0,eF.XG)(U+B|0,7),N^=(0,eF.XG)(T+U|0,9),B^=(0,eF.XG)(N+T|0,13),U^=(0,eF.XG)(B+N|0,18),x^=(0,eF.XG)(A+T|0,7),I^=(0,eF.XG)(x+A|0,9),T^=(0,eF.XG)(I+x|0,13),A^=(0,eF.XG)(T+I|0,18),P^=(0,eF.XG)(S+_|0,7),N^=(0,eF.XG)(P+S|0,9),_^=(0,eF.XG)(N+P|0,13),S^=(0,eF.XG)(_+N|0,18),B^=(0,eF.XG)(C+k|0,7),O^=(0,eF.XG)(B+C|0,9),k^=(0,eF.XG)(O+B|0,13),C^=(0,eF.XG)(k+O|0,18),R^=(0,eF.XG)(U+L|0,7),D^=(0,eF.XG)(R+U|0,9),L^=(0,eF.XG)(D+R|0,13),U^=(0,eF.XG)(L+D|0,18);n[s++]=o+A|0,n[s++]=a+x|0,n[s++]=l+I|0,n[s++]=c+T|0,n[s++]=u+_|0,n[s++]=h+S|0,n[s++]=d+P|0,n[s++]=f+N|0,n[s++]=p+O|0,n[s++]=g+k|0,n[s++]=y+C|0,n[s++]=m+B|0,n[s++]=b+R|0,n[s++]=w+D|0,n[s++]=v+L|0,n[s++]=E+U|0}function lm(e,t,r,i,n){let s=i+0,o=i+16*n;for(let i=0;i<16;i++)r[o+i]=e[t+(2*n-1)*16+i];for(let i=0;i<n;i++,s+=16,t+=16)ly(r,o,e,t,r,s),i>0&&(o+=16),ly(r,s,e,t+=16,r,o)}function lb(e,t,r){let{N:i,r:n,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:d}=function(e,t,r){let{N:i,r:n,p:s,dkLen:o,asyncTick:a,maxmem:l,onProgress:c}=(0,eF.U5)({dkLen:32,asyncTick:10,maxmem:1073742848},r);if((0,eF.k8)(i),(0,eF.k8)(n),(0,eF.k8)(s),(0,eF.k8)(o),(0,eF.k8)(a),(0,eF.k8)(l),void 0!==c&&"function"!=typeof c)throw Error("progressCb should be function");let u=128*n,h=u/4;if(i<=1||(i&i-1)!=0||i>4294967296)throw Error("Scrypt: N must be larger than 1, a power of 2, and less than 2^32");if(s<0||s>137438953440/u)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(o<0||o>137438953440)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");if(u*(i+s)>l)throw Error("Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of "+l);let d=rq(r5,e,t,{c:1,dkLen:u*s}),f=(0,eF.Jq)(d),p=(0,eF.Jq)(new Uint8Array(u*i)),g=(0,eF.Jq)(new Uint8Array(u)),y=()=>{};if(c){let e=2*i*s,t=Math.max(Math.floor(e/1e4),1),r=0;y=()=>{r++,c&&(!(r%t)||r===e)&&c(r/e)}}return{N:i,r:n,p:s,dkLen:o,blockSize32:h,V:p,B32:f,B:d,tmp:g,blockMixCb:y,asyncTick:a}}(e,t,r);(0,eF.Ux)(c);for(let e=0;e<s;e++){let t=a*e;for(let e=0;e<a;e++)l[e]=c[t+e];for(let e=0,t=0;e<i-1;e++)lm(l,t,l,t+=a,n),d();lm(l,(i-1)*a,c,t,n),d();for(let e=0;e<i;e++){let e=c[t+a-16]%i;for(let r=0;r<a;r++)h[r]=c[t+r]^l[e*a+r];lm(h,0,c,t,n),d()}}return(0,eF.Ux)(c),function(e,t,r,i,n){let s=rq(r5,e,r,{c:1,dkLen:t});return(0,eF.ru)(r,i,n),s}(e,o,u,l,h)}var lw=Object.defineProperty;((e,t)=>{for(var r in t)lw(e,r,{get:t[r],enumerable:!0})})({},{ABI:()=>lE,ABIContract:()=>lT,ABIEvent:()=>lx,ABIFunction:()=>lI,ABIItem:()=>lA,Account:()=>l_,Address:()=>lD,Blake2b256:()=>lU,BlockId:()=>ca,BlockRef:()=>lL,BloomFilter:()=>lM,BufferKind:()=>l7,Certificate:()=>cc,Clause:()=>cB,Coin:()=>lH,CompactFixedHexBlobKind:()=>ci,ERC1155_ABI:()=>cv,ERC20_ABI:()=>cb,ERC721_ABI:()=>cw,FixedHexBlobKind:()=>ct,FixedPointNumber:()=>lP,HDKey:()=>lB,Hex:()=>lv,HexBlobKind:()=>ce,HexInt:()=>lN,HexUInt:()=>lO,Keccak256:()=>lR,MAINNET_NETWORK:()=>cN,Mnemonic:()=>cn,NUMERIC_REGEX:()=>cT,NumericKind:()=>l9,OptionalFixedHexBlobKind:()=>cr,Quantity:()=>cs,RLP:()=>lW,RLPProfiler:()=>lQ,Revision:()=>co,SOLO_NETWORK:()=>ck,ScalarKind:()=>lK,Secp256k1:()=>lC,Sha256:()=>lk,TESTNET_NETWORK:()=>cO,ThorId:()=>cl,Token:()=>lq,Transaction:()=>cF,TransactionType:()=>cR,Txt:()=>lS,Units:()=>lV,VET:()=>lz,VIP180_ABI:()=>cE,VIP181_ABI:()=>cA,VIP210_ABI:()=>cx,VTHO:()=>lG,VTHO_ADDRESS:()=>cP,ZERO_ADDRESS:()=>cS,ZERO_BYTES:()=>cI,assertCompactFixedHexBlobBuffer:()=>l8,assertFixedHexBlobKindBuffer:()=>l4,assertFixedHexBlobKindData:()=>l3,assertValidHexBlobKindData:()=>l2,assertValidNumericKindBuffer:()=>lX,dataUtils:()=>c_,decodeBufferToHexWithLeadingZeros:()=>l6,decodeBufferToNumberOrHex:()=>l1,encodeBigIntToBuffer:()=>l0,encodeCompactFixedHexBlob:()=>l5,fromTransactionType:()=>cM,keystore:()=>cm,networkInfo:()=>cC,toTransactionType:()=>cU,validateNumericKindData:()=>lY});var lv=class e{static NEGATIVE=-1;static POSITIVE=1;static PREFIX="0x";static RADIX=16;static REGEX_HEX=/^-?(0x)?[0-9a-f]*$/i;static REGEX_HEX_PREFIX=/^-?0x/i;digits;sign;constructor(e,t,r=e=>e.toLowerCase()){this.digits=r(t),this.sign=e}get abs(){return new e(e.POSITIVE,this.digits)}get bi(){return BigInt(this.sign)*ez(this.digits)}get bytes(){return eF.nr(this.alignToBytes().digits)}get n(){if(this.isNumber())return new DataView(this.bytes.buffer).getFloat64(0);throw new p.OH("Hex.n","not an IEEE 754 float 64 number",{hex:this.toString()})}alignToBytes(){return this.digits.length%2==0?this:new e(this.sign,"0"+this.digits)}compareTo(e){if(this.sign===e.sign){let t=Math.max(this.digits.length,e.digits.length),r=this.fit(t).bytes,i=e.fit(t).bytes,n=0,s=0;for(;0===s&&n<r.length;)s=r[n]-i[n],n++;return s}return this.sign-e.sign}fit(t){if(t<this.digits.length){let r=0;for(;this.digits.length-r>t&&"0"===this.digits.at(r);)r++;if(this.digits.length-r===t)return new e(this.sign,this.digits.slice(r));throw new p.ep("Hex.fit",`can't fit in ${t} digits`,{digits:t,hex:this})}return t>this.digits.length?new e(this.sign,"0".repeat(t-this.digits.length)+this.digits):this}isEqual(e){return 0===this.compareTo(e)}isNumber(){return 32===this.digits.length}static isValid(t){return e.REGEX_HEX.test(t)}static isValid0x(t){return e.REGEX_HEX_PREFIX.test(t)&&e.isValid(t)}static of(t){try{if("bigint"==typeof t)return t<0n?new e(this.NEGATIVE,eV(-1n*t)):new e(this.POSITIVE,eV(t));if("number"==typeof t){let r=new DataView(new ArrayBuffer(16));return r.setFloat64(0,t),new e(t<0?this.NEGATIVE:this.POSITIVE,eF.ci(new Uint8Array(r.buffer)))}if("string"==typeof t){if(!this.isValid(t))throw new p.ep("Hex.of","not an hexadecimal string",{exp:t});return t.startsWith("-")?new e(this.NEGATIVE,this.REGEX_HEX_PREFIX.test(t)?t.slice(3):t.slice(1)):new e(this.POSITIVE,this.REGEX_HEX_PREFIX.test(t)?t.slice(2):t)}return new e(this.POSITIVE,eF.ci(t))}catch(e){throw new p.ep("Hex.of","not an hexadecimal expression",{exp:`${t}`},e)}}static random(t){if(t>0)return e.of(eF.O6(t));throw new p.ep("Hex.random","bytes argument not > 0",{bytes:t})}toString(e=!1){if(e){let e=this.digits.replace(/^0+/,"");return(this.sign<0?"-0x":"0x")+(""===e?"0":e)}return(this.sign<0?"-0x":"0x")+this.digits}},lE=class e{types;values;constructor(e=[],t=[]){this.types="string"==typeof e?er(e):e,this.values=t}compareTo(e){return this.types.forEach((t,r)=>{if(t!==e.types[r])return -1}),this.values.forEach((t,r)=>{if(t!==e.values[r])return 1}),0}isEqual(e){return 0===this.compareTo(e)}get bi(){throw new p.OH("ABI.bi","There is no big integer representation for an ABI.",{data:""})}get bytes(){return this.toHex().bytes}get n(){throw new p.OH("ABI.n","There is no number representation for an ABI.",{data:""})}static of(t,r){try{return new e(t,r)}catch(e){throw new p.j7("ABI.of","Types and values must be valid ABI parameters.",{types:t,values:r},e)}}static ofEncoded(t,r){try{let i=lv.of(r),n;if("string"==typeof t){let e=er(t);n=ew(e,i.bytes)}else n=ew([...t],i.bytes);return new e(t,[...n])}catch(e){throw new p.j7("ABI.of","Decoding failed: Data must be a valid ABI type with corresponding valid data.",{types:t,data:r},e)}}parseObjectValues(e){let t=[],r=e=>{let t=[];for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)){let n=e[i];"object"==typeof n&&null!==n?t.push(r(n)):t.push(n)}return t};return t.push(...r(e)),t}getFirstDecodedValue(){return this.values[0]instanceof Object?this.parseObjectValues(this.values[0]):this.values[0]}toHex(){try{let e=(0,eb.E)(this.types,this.values);return lv.of(e)}catch(e){throw new p.j7("ABI.toHex","Encoding failed: Data must be a valid ABI type with corresponding valid data.",{types:this.types,values:this.values},e)}}},lA=class extends lE{signature;stringSignature;constructor(e){switch(super(),typeof e){case"string":this.stringSignature=e;break;case"object":this.stringSignature=ex(e);break;default:this.stringSignature=""}this.signature="string"==typeof e?function(e){let t;if("string"==typeof e)t=q(e);else{let r=ee(e),i=e.length;for(let n=0;n<i;n++){let i=e[n];if(!O(i)){t=q(i,r);break}}}if(!t)throw new U({signature:e});return t}([e]):e}static ofSignature(e,t){return new e(t)}format(e="string"){return"json"===e?JSON.stringify(this.signature):this.stringSignature}get signatureHash(){return e_(this.stringSignature)}compareTo(e){return 0!==super.compareTo(e)?-1:this.stringSignature.localeCompare(e.stringSignature)}},lx=class e extends lA{abiEvent;constructor(e){try{super(e),this.abiEvent=this.signature}catch(t){throw new p.Kf("ABIEvent constructor","Initialization failed: Cannot create Event ABI. Event format is invalid.",{type:"event",value:e},t)}}static parseLog(e,t){try{return function(e){let{abi:t,data:r,strict:i,topics:n}=e,s=i??!0,[o,...a]=n;if(!o)throw new ei.FM({docsPath:eP});let l=t.find(e=>"event"===e.type&&o===e_((0,eS.t)(e)));if(!(l&&"name"in l)||"event"!==l.type)throw new ei.lC(o,{docsPath:eP});let{name:c,inputs:u}=l,h=u?.some(e=>!("name"in e&&e.name)),d=h?[]:{},f=u.map((e,t)=>[e,t]).filter(([e])=>"indexed"in e&&e.indexed);for(let e=0;e<f.length;e++){let[t,r]=f[e],i=a[e];if(!i)throw new ei.Gy({abiItem:l,param:t});d[h?r:t.name||r]=function({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(ew([e],t)||[])[0]}({param:t,value:i})}let p=u.filter(e=>!("indexed"in e&&e.indexed));if(p.length>0){if(r&&"0x"!==r)try{let e=ew(p,r);if(e){if(h)for(let t=0;t<u.length;t++)d[t]=d[t]??e.shift();else for(let t=0;t<p.length;t++)d[p[t].name]=e[t]}}catch(e){if(s){if(e instanceof ei.xB||e instanceof ea)throw new ei.SM({abiItem:l,data:r,params:p,size:(0,eu.d)(r)});throw e}}else if(s)throw new ei.SM({abiItem:l,data:"0x",params:p,size:0})}return{eventName:c,args:Object.values(d).length>0?d:void 0}}({abi:e,data:t.data.toString(),topics:t.topics.map(e=>null===e?e:Array.isArray(e)?e.map(e=>e.toString()):e.toString())})}catch(r){throw new p.j7("ABIEvent.parseLog","Decoding failed: Data must be a valid hex string encoding a compliant ABI type.",{data:{abi:e,data:t.data,topics:t.topics}},r)}}decodeEventLog(t){try{return e.parseLog([this.abiEvent],t)}catch(e){throw new p.j7("ABIEvent.decodeEventLog","Decoding failed: Data must be a valid hex string encoding a compliant ABI type.",{data:t},e)}}decodeEventLogAsArray(e){let t=this.decodeEventLog(e);return void 0===t.args?[]:this.parseObjectValues(t.args)}encodeEventLog(e){try{let t=this.encodeFilterTopics(e),r=[],i=[];return this.abiEvent.inputs.forEach((t,n)=>{if(t.indexed)return;let s=e[n];r.push(t),i.push(s)}),{data:lE.of(r,i).toHex(),topics:t.map(e=>null===e?e:Array.isArray(e)?e.map(e=>lv.of(e)):lv.of(e))}}catch(t){throw new p.j7("ABIEvent.encodeEventLog","Encoding failed: Data format is invalid. Event data must be correctly formatted for ABI-compliant encoding.",{dataToEncode:e},t)}}encodeFilterTopics(e){let t=Array.isArray(e)?e.length:Object.values(e??{}).length;if(this.abiEvent.inputs.length<t)throw new p.j7("ABIEvent.encodeEventLog","Encoding failed: Data format is invalid. Number of values to encode is greater than the inputs.",{valuesToEncode:e});try{return function(e){let{abi:t,eventName:r,args:i}=e,n=t[0];if(r){let e=eB({abi:t,name:r});if(!e)throw new ei.mv(r,{docsPath:eR});n=e}if("event"!==n.type)throw new ei.mv(void 0,{docsPath:eR});let s=e_((0,eS.t)(n)),o=[];if(i&&"inputs"in n){let e=n.inputs?.filter(e=>"indexed"in e&&e.indexed),t=Array.isArray(i)?i:Object.values(i).length>0?e?.map(e=>i[e.name])??[]:[];t.length>0&&(o=e?.map((e,r)=>Array.isArray(t[r])?t[r].map((i,n)=>eD({param:e,value:t[r][n]})):void 0!==t[r]&&null!==t[r]?eD({param:e,value:t[r]}):null)??[])}return[s,...o]}({abi:[this.abiEvent],args:e})}catch(t){throw new p.j7("ABIEvent.encodeEventLog","Encoding failed: Data format is invalid. Event topics values must be correctly formatted for ABI-compliant encoding.",{valuesToEncode:e},t)}}encodeFilterTopicsNoNull(e){return this.encodeFilterTopics(e).map(e=>null===e?void 0:e)}},lI=class extends lA{abiFunction;constructor(e){try{super(e),this.abiFunction=this.signature}catch(t){throw new p.Kf("ABIFunction constructor","Initialization failed: Cannot create Function ABI. Function format is invalid.",{type:"function",value:e},t)}}get signatureHash(){return super.signatureHash.substring(0,10)}decodeData(e){try{return function(e){let{abi:t,data:r}=e,i=(0,eh.tP)(r,0,4),n=t.find(e=>"function"===e.type&&i===eC((0,eS.t)(e)));if(!n)throw new ei.eF(i,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:n.name,args:"inputs"in n&&n.inputs&&n.inputs.length>0?ew(n.inputs,(0,eh.tP)(r,4)):void 0}}({abi:[this.abiFunction],data:e.toString()})}catch(t){throw new p.j7("ABIFunction.decodeData","Decoding failed: Data must be a valid hex string encoding a compliant ABI type.",{data:e},t)}}encodeData(e){try{return lv.of(function(e){let{args:t}=e,{abi:r,functionName:i}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:function(e){let{abi:t,args:r,functionName:i}=e,n=t[0];if(i){let e=eB({abi:t,args:r,name:i});if(!e)throw new ei.xL(i,{docsPath:eU});n=e}if("function"!==n.type)throw new ei.xL(void 0,{docsPath:eU});return{abi:[n],functionName:eC((0,eS.t)(n))}}(e),n=r[0],s="inputs"in n&&n.inputs?(0,eb.E)(n.inputs,t??[]):void 0;return(0,eL.SM)([i,s??"0x"])}({abi:[this.abiFunction],args:e}))}catch(t){throw new p.j7("ABIFunction.encodeData","Encoding failed: Data format is invalid. Function data does not match the expected format for ABI type encoding.",{dataToEncode:e},t)}}decodeResult(e){try{return function(e){let{abi:t,args:r,functionName:i,data:n}=e,s=t[0];if(i){let e=eB({abi:t,args:r,name:i});if(!e)throw new ei.xL(i,{docsPath:eM});s=e}if("function"!==s.type)throw new ei.xL(void 0,{docsPath:eM});if(!s.outputs)throw new ei.MX(s.name,{docsPath:eM});let o=ew(s.outputs,n);return o&&o.length>1?o:o&&1===o.length?o[0]:void 0}({abi:[this.abiFunction],data:e.toString()})}catch(t){throw new p.j7("ABIFunction.decodeResult","Decoding failed: Data must be a valid hex string encoding a compliant ABI type.",{data:e},t)}}decodeOutputAsArray(e){let t=this.decodeResult(e);return this.abiFunction.outputs.length>1?this.parseObjectValues(t):1===this.abiFunction.outputs.length&&"tuple"===this.abiFunction.outputs[0].type?[this.parseObjectValues(t)]:[t]}},lT=class e extends lE{constructor(e){super(),this.abi=e,this.viemABI=e}viemABI;static ofAbi(t){return new e(t)}getFunction(e){let t=eB({abi:this.viemABI,name:e});if(null==t)throw new p.Kf("ABIContract.getFunction()",`Function '${e}' not found in contract ABI.`,{type:"function",value:e});return new lI(t)}getEvent(e){let t=eB({abi:this.viemABI,name:e});if(null==t)throw new p.Kf("ABIContract.getEvent()",`Function '${e}' not found in contract ABI.`,{type:"event",value:e});return new lx(t)}encodeFunctionInput(e,t){try{let r=eB({abi:this.viemABI,name:e});return new lI(r).encodeData(t)}catch(r){throw new p.j7("ABIContract.encodeFunctionInput()","Encoding failed: Data format is invalid. Function data does not match the expected format for ABI type encoding.",{functionName:e,functionData:t},r)}}decodeFunctionInput(e,t){try{let r=eB({abi:this.viemABI,name:e});return new lI(r).decodeData(t)}catch(r){throw new p.j7("ABIContract.decodeFunctionInput()","Decoding failed: Data must be a valid hex string encoding a compliant ABI type.",{functionName:e,encodedFunctionInput:t},r)}}decodeFunctionOutput(e,t){try{let r=eB({abi:this.viemABI,name:e});return new lI(r).decodeResult(t)}catch(r){throw new p.j7("ABIContract.decodeFunctionOutput()","Decoding failed: Data must be a valid hex string encoding a compliant ABI type.",{functionName:e,encodedFunctionOutput:t},r)}}encodeEventLog(e,t){try{let r=eB({abi:this.viemABI,name:e});return new lx(r).encodeEventLog(t)}catch(r){throw new p.j7("ABIContract.encodeEventLog()","Encoding failed: Data format is invalid. Event data does not match the expected format for ABI type encoding.",{eventName:e,dataToEncode:t},r)}}decodeEventLog(e,t){try{let r=eB({abi:this.viemABI,name:e});return new lx(r).decodeEventLog(t)}catch(r){throw new p.j7("ABIContract.encodeEventLog()","Encoding failed: Data format is invalid. Event data does not match the expected format for ABI type encoding.",{eventName:e,dataToDecode:t},r)}}parseLog(e,t){try{return lx.parseLog(this.abi,{data:e,topics:t})}catch(r){throw new p.j7("ABIContract.parseLog()","Decoding failed: Data must be a valid hex string encoding a compliant ABI type.",{data:e,topics:t},r)}}parseLogAsArray(e,t){let r=this.parseLog(e,t);return void 0===r.args?[]:this.parseObjectValues(r.args)}},l_=class{address;balance;transactions;type;constructor(e,t,r="EOA",i){this.address=e,this.balance=t,this.type=r,this.transactions=i??[]}get bi(){throw new p.OH("Account.bi","There is no big integer representation for an account.",{data:""})}get bytes(){throw new p.OH("Account.bytes","There is no bytes representation for an account.",{data:""})}get n(){throw new p.OH("Account.n","There is no number representation for an account.",{data:""})}addTransaction(e){this.transactions.push(e)}compareTo(e){let t=this.type.localeCompare(e.type);if(0===t){let t=this.address.compareTo(e.address);if(0===t){let t=this.balance.code.compareTo(e.balance.code);return 0===t?this.balance.value.compareTo(e.balance.value):t}return t}return t}isEqual(e){return 0===this.compareTo(e)}toString(){return`${this.type} Address: ${this.address.toString()} Balance: ${this.balance.value} ${this.balance.code}`}},lS=class e extends String{static DECODER=new TextDecoder;static NFC="NFC";static ENCODER=new TextEncoder;constructor(t){super(t.normalize(e.NFC))}get bi(){try{return BigInt(this.toString())}catch(e){throw new p.OH("Txt.bi()","Can't cast to big integer",{txt:this.toString()},e)}}get bytes(){return e.ENCODER.encode(this.toString())}get n(){return Number(this.toString())}compareTo(e){return this.toString().localeCompare(e.toString())}isEqual(e){return 0===this.compareTo(e)}toString(){return this.valueOf()}static of(t){return new e("string"==typeof t?t:"bigint"==typeof t||"number"==typeof t?t.toString():e.DECODER.decode(t))}},lP=class e{static BASE=10n;static DEFAULT_FRACTIONAL_DECIMALS=20n;static NaN=new e(0n,0n,NaN);static NEGATIVE_INFINITY=new e(0n,0n,Number.NEGATIVE_INFINITY);static ONE=e.of(1n);static POSITIVE_INFINITY=new e(0n,0n,Number.POSITIVE_INFINITY);static REGEX_INTEGER=/^[-+]?\d+$/;static REGEX_NUMBER=/(^[-+]?\d+(\.\d+)?)$|(^[-+]?\.\d+)$/;static REGEX_NATURAL=/^\d+$/;static ZERO=new e(0n,0n,0);edgeFlag;fractionalDigits;scaledValue;get bi(){if(this.isFinite())return this.scaledValue/e.BASE**this.fractionalDigits;throw new p.OH("FixedPointNumber.bi","not finite value cannot cast to big integer",{this:this.toString()})}get bytes(){return lS.of(this.toString()).bytes}get n(){return this.isNaN()?Number.NaN:this.isNegativeInfinite()?Number.NEGATIVE_INFINITY:this.isPositiveInfinite()?Number.POSITIVE_INFINITY:this.isZero()?0:Number(this.scaledValue)*10**-Number(this.fractionalDigits)}constructor(e,t,r=0){this.fractionalDigits=e,this.edgeFlag=r,this.scaledValue=t}abs(){return this.isNaN()?e.NaN:this.isNegativeInfinite()?e.POSITIVE_INFINITY:new e(this.fractionalDigits,this.scaledValue<0n?-this.scaledValue:this.scaledValue,this.edgeFlag)}compareTo(e){if(this.isNaN()||e.isNaN())throw new p.OH("FixedPointNumber.compareTo","compare between NaN",{this:`${this}`,that:`${e}`});if(this.isNegativeInfinite())return e.isNegativeInfinite()?0:-1;if(this.isPositiveInfinite())return e.isPositiveInfinite()?0:1;if(e.isNegativeInfinite())return 1;if(e.isPositiveInfinite())return -1;let t=this.maxFractionalDigits(e,this.fractionalDigits),r=this.dp(t).scaledValue-e.dp(t).scaledValue;return r<0n?-1:0n===r?0:1}comparedTo(e){try{return this.compareTo(e)}catch{return null}}div(t){if(this.isNaN()||t.isNaN())return e.NaN;if(this.isNegativeInfinite())return t.isInfinite()?e.NaN:t.isPositive()?e.NEGATIVE_INFINITY:e.POSITIVE_INFINITY;if(this.isPositiveInfinite())return t.isInfinite()?e.NaN:t.isPositive()?e.POSITIVE_INFINITY:e.NEGATIVE_INFINITY;if(t.isInfinite())return e.ZERO;if(t.isZero())return this.isZero()?e.NaN:this.isNegative()?e.NEGATIVE_INFINITY:e.POSITIVE_INFINITY;let r=this.maxFractionalDigits(t,this.fractionalDigits);return new e(r,e.div(r,this.dp(r).scaledValue,t.dp(r).scaledValue)).dp(this.fractionalDigits)}static div(t,r,i){return e.BASE**t*r/i}dp(t){let r=BigInt(t);if(r>=0){let t=this.fractionalDigits,i=this.scaledValue;if(r>t)i*=e.BASE**(r-t),t=r;else for(;t>r&&i%e.BASE===0n;)t--,i/=e.BASE;return new e(t,i,this.edgeFlag)}throw new p.ep("FixedPointNumber.scale","negative `dp` arg",{dp:`${r}`})}eq(e){return 0===this.comparedTo(e)}gt(e){let t=this.comparedTo(e);return null!==t&&t>0}gte(e){let t=this.comparedTo(e);return null!==t&&t>=0}idiv(t){if(this.isNaN()||t.isNaN())return e.NaN;if(this.isNegativeInfinite())return t.isInfinite()?e.NaN:t.isPositive()?e.NEGATIVE_INFINITY:e.POSITIVE_INFINITY;if(this.isPositiveInfinite())return t.isInfinite()?e.NaN:t.isPositive()?e.POSITIVE_INFINITY:e.NEGATIVE_INFINITY;if(t.isInfinite())return e.ZERO;if(t.isZero())return this.isZero()?e.NaN:this.isNegative()?e.NEGATIVE_INFINITY:e.POSITIVE_INFINITY;let r=this.maxFractionalDigits(t,this.fractionalDigits);return new e(r,e.idiv(r,this.dp(r).scaledValue,t.dp(r).scaledValue)).dp(this.fractionalDigits)}static idiv(t,r,i){return r/i*e.BASE**t}isEqual(e){return this.eq(e)}isFinite(){return 0===this.edgeFlag}isInfinite(){return this.isNegativeInfinite()||this.isPositiveInfinite()}isInteger(){return!!this.isFinite()&&this.scaledValue%e.BASE**this.fractionalDigits===0n}static isIntegerExpression(e){return this.REGEX_INTEGER.test(e)}isNaN(){return Number.isNaN(this.edgeFlag)}static isNaturalExpression(e){return this.REGEX_NATURAL.test(e)}isNegative(){return this.isFinite()&&this.scaledValue<0n||this.isNegativeInfinite()}isNegativeInfinite(){return this.edgeFlag===Number.NEGATIVE_INFINITY}static isNumberExpression(t){return e.REGEX_NUMBER.test(t)}isPositive(){return this.isFinite()&&this.scaledValue>=0n||this.isPositiveInfinite()}isPositiveInfinite(){return this.edgeFlag===Number.POSITIVE_INFINITY}isZero(){return this.isFinite()&&0n===this.scaledValue}lt(e){let t=this.comparedTo(e);return null!==t&&t<0}lte(e){let t=this.comparedTo(e);return null!==t&&t<=0}maxFractionalDigits(e,t){let r=this.fractionalDigits<e.fractionalDigits?e.fractionalDigits:this.fractionalDigits;return r>t?r:t}minus(t){if(this.isNaN()||t.isNaN())return e.NaN;if(this.isNegativeInfinite())return t.isNegativeInfinite()?e.NaN:e.NEGATIVE_INFINITY;if(this.isPositiveInfinite())return t.isPositiveInfinite()?e.NaN:e.POSITIVE_INFINITY;let r=this.maxFractionalDigits(t,this.fractionalDigits);return new e(r,this.dp(r).scaledValue-t.dp(r).scaledValue).dp(this.fractionalDigits)}modulo(t){if(this.isNaN()||t.isNaN()||this.isInfinite()||t.isInfinite()||t.isZero())return e.NaN;let r=this.maxFractionalDigits(t,this.fractionalDigits),i=this.abs().dp(r).scaledValue,n=t.abs().dp(r).scaledValue;for(;i>=n;)i-=n;return new e(r,i).dp(this.fractionalDigits)}static mul(t,r,i){return t*r/e.BASE**i}negated(){return this.isNegativeInfinite()?e.POSITIVE_INFINITY:this.isPositiveInfinite()?e.NEGATIVE_INFINITY:new e(this.fractionalDigits,-this.scaledValue,this.edgeFlag)}static of(t,r=this.DEFAULT_FRACTIONAL_DECIMALS){try{return t instanceof e?new e(t.fractionalDigits,t.scaledValue,t.edgeFlag):Number.isNaN(t)?new e(r,0n,Number.NaN):t===Number.NEGATIVE_INFINITY?new e(r,-1n,Number.NEGATIVE_INFINITY):t===Number.POSITIVE_INFINITY?new e(r,1n,Number.POSITIVE_INFINITY):new e(r,this.txtToSV(t.toString(),r))}catch(e){throw new p.ep("FixedPointNumber.of","not a number",{exp:t},e)}}plus(t){if(this.isNaN()||t.isNaN())return e.NaN;if(this.isNegativeInfinite())return t.isPositiveInfinite()?e.NaN:e.NEGATIVE_INFINITY;if(this.isPositiveInfinite())return t.isNegativeInfinite()?e.NaN:e.POSITIVE_INFINITY;let r=this.maxFractionalDigits(t,this.fractionalDigits);return new e(r,this.dp(r).scaledValue+t.dp(r).scaledValue).dp(this.fractionalDigits)}pow(t){if(this.isNaN()||t.isNaN())return e.NaN;if(this.isInfinite())return t.isZero()?e.ONE:t.isNegative()?e.ZERO:e.POSITIVE_INFINITY;if(t.isNegativeInfinite())return e.ZERO;if(t.isPositiveInfinite())return e.POSITIVE_INFINITY;if(t.isZero())return e.ONE;let r=t.abs().bi,i=e.of(this),n=e.ONE;for(;r>0n;)r%2n===1n&&(n=n.times(i)),i=i.times(i),r/=2n;return t.isNegative()?e.ONE.div(n):n}static sqr(t,r){if(t<0n)throw RangeError("Value must be positive");let i=r*e.BASE,n=0,s=t,o=0n;for(;s!==o&&n<i;)o=s,s=(s+e.div(r,t,s))/2n,n++;return s}sqrt(){if(this.isNaN()||this.isNegativeInfinite())return e.NaN;if(this.isPositiveInfinite())return e.POSITIVE_INFINITY;try{return new e(this.fractionalDigits,e.sqr(this.scaledValue,this.fractionalDigits))}catch{return e.NaN}}times(t){if(this.isNaN()||t.isNaN())return e.NaN;if(this.isNegativeInfinite())return t.isNegative()?e.POSITIVE_INFINITY:e.NEGATIVE_INFINITY;if(this.isPositiveInfinite())return t.isNegative()?e.NEGATIVE_INFINITY:e.POSITIVE_INFINITY;let r=this.fractionalDigits>t.fractionalDigits?this.fractionalDigits:t.fractionalDigits;return new e(r,e.mul(this.dp(r).scaledValue,t.dp(r).scaledValue,r)).dp(this.fractionalDigits)}toString(t="."){if(0===this.edgeFlag){let r=this.scaledValue<0n?"-":"",i=(this.scaledValue<0n?(-this.scaledValue).toString():this.scaledValue.toString()).padStart(Number(this.fractionalDigits),"0"),n=this.fractionalDigits>0?i.slice(Number(-this.fractionalDigits)):"",s=i.slice(0,i.length-n.length),o=s.length<1?"0":s,a=e.trimEnd(n);return r+o+(a.length>0?t+a:"")}return this.edgeFlag.toString()}static trimEnd(t,r="0"){return t.endsWith(r)?e.trimEnd(t.substring(0,t.length-r.length),r):t}static txtToSV(t,r,i="."){let n=t.charAt(0),s=1n;"-"===n?(s=-1n,t=t.substring(1)):"+"===n&&(t=t.substring(1));let o=e.BASE**r,a=t.lastIndexOf(i);if(a<0)return s*o*BigInt(t);let l=t.substring(0,a),c=t.substring(a+1);return s*o*BigInt(l)+o*BigInt(c)*s/BigInt(10**c.length)}},lN=class e extends lv{get n(){let e=this.bi;if(Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER)return Number(e);throw new p.ep("HexInt.n","not in the safe number range",{bi:`${e}`,hex:this.toString()})}static of(t){try{if(t instanceof lv)return new e(t.sign,t.digits);if("number"==typeof t){if(Number.isInteger(t)){let r=lv.of(BigInt(t));return new e(r.sign,r.digits)}throw new p.ep("HexInt.of","not an integer",{exp:t})}let r=lv.of(t);return new e(r.sign,r.digits)}catch(e){throw new p.ep("HexInt.of","not an hexadecimal integer expression",{exp:`${t}`,e:e})}}},lO=class e extends lN{static REGEX_HEXUINT=/^(0x)?[0-9a-f]*$/i;static REGEX_HEXUINT_PREFIX=/^0x/i;static isValid(t){return e.REGEX_HEXUINT.test(t)}static isValid0x(t){return e.REGEX_HEX_PREFIX.test(t)&&lv.isValid(t)}static of(t){try{let r=lN.of(t);if(r.sign>=lv.POSITIVE)return new e(r.sign,r.digits);throw new p.ep("HexUInt.of","not positive",{exp:`${t}`})}catch(e){throw new p.ep("HexUInt.of","not a hexadecimal positive integer expression",{exp:`${t}`,e:e},e)}}},lk=class e extends lO{static of(t){try{let r=r5(lO.of(t).bytes);return new e(lv.POSITIVE,lO.of(r).digits)}catch(e){throw new p.OH("Sha256.of","hash error",{exp:`${t}`,e:e})}}},lC=class e{static COMPRESSED_PREFIX=2;static SIGNATURE_LENGTH=65;static UNCOMPRESS_PREFIX=4;static VALID_HASH_LENGTH=32;static compressPublicKey(t){if(t.at(0)!==e.UNCOMPRESS_PREFIX)return t;{let r=t.slice(1,33),i=t.slice(33,65),n=1&i[i.length-1];return eF.eV(Uint8Array.of(e.COMPRESSED_PREFIX+n),r)}}static derivePublicKey(t,r=!0){if(e.isValidPrivateKey(t))return nu.getPublicKey(t,r);throw new p.wd("Secp256k1.derivePublicKey","Invalid private key given as input. Ensure it is a valid 32-byte secp256k1 private key.",void 0)}static async generatePrivateKey(){return await new Promise((e,t)=>{try{let t=nu.utils.randomPrivateKey();e(t)}catch(e){t(new p.wd("Secp256k1.generatePrivateKey","Private key generation failed: ensure you have a secure random number generator available at runtime.",void 0,e))}})}static inflatePublicKey(t){if(t.at(0)===e.UNCOMPRESS_PREFIX)return t;{let e=t.slice(0,33);return nu.ProjectivePoint.fromAffine(nu.ProjectivePoint.fromHex(lO.of(e).digits).toAffine()).toRawBytes(!1)}}static isValidMessageHash(t){return t.length===e.VALID_HASH_LENGTH}static isValidPrivateKey(e){return nu.utils.isValidPrivateKey(e)}static randomBytes(e=32){try{return(0,eF.O6)(e)}catch{return global.crypto.getRandomValues(new Uint8Array(e))}}static recover(t,r){if(!e.isValidMessageHash(t))throw new p.sc("Secp256k1.recover","Invalid message hash given as input. Ensure it is a valid 32-byte message hash.",{messageHash:t});if(r.length!==e.SIGNATURE_LENGTH)throw new p.UM("Secp256k1.recover","Invalid signature given as input. Length must be exactly 65 bytes.",{signature:r});let i=r[64];if(0!==i&&1!==i)throw new p.UM("Secp256k1.recover","Invalid signature recovery value. Signature bytes at position 64 must be 0 or 1.",{signature:r,recovery:i});return nu.Signature.fromCompact(r.slice(0,64)).addRecoveryBit(i).recoverPublicKey(t).toRawBytes(!1)}static sign(t,r){var i;if(!e.isValidMessageHash(t))throw new p.sc("Secp256k1.sign","Invalid message hash given as input. Ensure it is a valid 32-byte message hash.",{messageHash:t});if(!e.isValidPrivateKey(r))throw new p.wd("Secp256k1.sign","Invalid private key given as input. Ensure it is a valid 32-byte secp256k1 private key.",void 0);let n=nu.sign(t,r);return eF.eV(eK(n.r,32),eK(n.s,32),(i=n.recovery,(0,eF.nr)(eV(i))))}},lB=class extends rV{static EXTENDED_PRIVATE_KEY_PREFIX=lO.of("0488ade4000000000000000000").bytes;static EXTENDED_PUBLIC_KEY_PREFIX=lO.of("0488b21e000000000000000000").bytes;static VET_DERIVATION_PATH="m/44'/818'/0'/0";static fromMnemonic(e,t=this.VET_DERIVATION_PATH){let r;try{r=rV.fromMasterSeed(iP(e.join(" ").toLowerCase()))}catch(e){throw new p.g4("HDNode.fromMnemonic","Invalid mnemonic words given as input.",void 0,e)}try{return r.derive(t)}catch(e){throw new p.yZ("HDNode.fromMnemonic","Invalid derivation path given as input.",{derivationPath:t},e)}}static fromPrivateKey(e,t){if(32===e.length){let r=eF.eV(this.EXTENDED_PRIVATE_KEY_PREFIX,t,Uint8Array.of(0),e);e.fill(0);let i=lk.of(lk.of(r).bytes).bytes.subarray(0,4),n=eF.eV(r,i);try{return rV.fromExtendedKey(ib.encode(n))}catch{throw new p.wd("HDNode.fromPrivateKey","Invalid private key path given as input.",void 0)}}throw e.fill(0),new p.wd("HDNode.fromPrivateKey()","Invalid private key path given as input. Length must be exactly 32 bytes.",void 0)}static fromPublicKey(e,t){if(32===t.length){let r=eF.eV(this.EXTENDED_PUBLIC_KEY_PREFIX,t,lC.compressPublicKey(e)),i=lk.of(lk.of(r).bytes).bytes.subarray(0,4),n=eF.eV(r,i);try{return rV.fromExtendedKey(ib.encode(n))}catch(t){throw new p.yZ("HDNode.fromPublicKey()","Invalid public key path given as input.",{publicKey:e},t)}}throw new p.yZ("HDNode.fromPublicKey()","Invalid chain code given as input. Length must be exactly 32 bytes.",{chainCode:t})}static isDerivationPathComponentValid(e,t){return 0===t&&"m"===e||lP.isNaturalExpression(e)||lP.isNaturalExpression(e.slice(0,-1))&&e.endsWith("'")}static isDerivationPathValid(e){return/^m(\/\d+'?){3}(\/\d+){1,2}$/.test(e)}},lR=class e extends lO{static of(t){try{let r=(0,nh.fr)(lO.of(t).bytes);return new e(lv.POSITIVE,lO.of(r).digits)}catch(e){throw new p.OH("Keccak256.of","hash error",{exp:`${t}`,e:e})}}},lD=class e extends lO{static DIGITS=40;static checksum(e){let t=e.digits,r=lR.of(lS.of(t).bytes).digits,i="";for(let e=0;e<t.length;e++)i+=parseInt(r[e],16)>7?t[e].toUpperCase():t[e];return"0x"+i}static isValid(t){return lv.isValid0x(t)&&t.length===e.DIGITS+2}static of(t){try{let r=lO.of(t),i=lO.of(r.digits.padStart(40,"0")),n=e.checksum(i);return new e(lv.POSITIVE,"0x0",()=>n.substring(2))}catch(e){throw new p.ep("Address.of","not a valid hexadecimal positive integer expression",{exp:`${t}`},e)}}static ofPrivateKey(t){try{return e.ofPublicKey(lC.derivePublicKey(t,!0))}catch(e){throw new p.ep("Address.ofPrivateKey","not a valid private key",{privateKey:"private key is obfuscated"},e)}}static ofPublicKey(t){try{let r=lC.inflatePublicKey(t),i=lR.of(r.slice(1)).bytes;return e.of(i.slice(12))}catch(e){throw new p.ep("Address.ofPublicKey","not a valid public key",{publicKey:`${t}`},e)}}static ofMnemonic(t,r="m/0"){let i=lB.fromMnemonic(t);try{return e.ofPublicKey(i.derive(r).publicKey)}catch(e){throw new p.yZ("mnemonic.deriveAddress()","Invalid derivation path given as input.",{derivationPath:r},e)}}},lL=class e extends lO{static DIGITS=16;constructor(t){super(lv.POSITIVE,t.fit(e.DIGITS).digits)}static isValid(t){return lv.isValid(t)&&lO.REGEX_HEXUINT_PREFIX.test(t)?t.length===e.DIGITS+2:t.length===e.DIGITS}static isValid0x(t){return lO.REGEX_HEXUINT_PREFIX.test(t)&&e.isValid(t)}static of(t){try{return new e(t instanceof lO?t:lO.of(t))}catch(e){throw new p.ep("BlockRef.of","not a BlockRef expression",{exp:`${t}`},e)}}},lU=class e extends lO{static of(t){try{let r=nw.create({dkLen:32}).update(lO.of(t).bytes).digest();return new e(lv.POSITIVE,lO.of(r).digits)}catch(e){throw new p.OH("Blake2b256.of","hash error",{exp:`${t}`,e:e})}}},lM=class e{bytes;k;constructor(e,t){this.bytes=e,this.k=t}get bi(){return eG(this.bytes)}get n(){let e=this.bi;if(Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER)return Number(e);throw new p.ep("BloomFilter.n","not in the safe number range",{bytes:this.bytes,k:this.k})}compareTo(e){return this.bi<e.bi?-1:this.bi>e.bi?1:this.k-e.k}isEqual(e){return this.bi===e.bi&&this.k===e.k}contains(e){return l$(lj(e instanceof lv?e.bytes:e),this.k,8*this.bytes.byteLength,(e,t)=>(this.bytes[e]&t)===t)}static computeBestBitsPerKey(e){return e<=1?2:e>=30?44:Math.ceil(e/.69)}static computeBestHashFunctionsQuantity(e){let t=Math.floor(.69*e);return t<1?1:t>30?30:t}isJoinable(e){return this.k===e.k&&this.bytes.length===e.bytes.length}join(t){if(this.k!==t.k)throw new p.OH("BloomFilter.join","different k values",{this:this,other:t});if(this.bytes.length!==t.bytes.length)throw new p.OH("BloomFilter.join","different length values",{this:this,other:t});let r=new Uint8Array(this.bytes.length);for(let e=0;e<this.bytes.length;e++)r[e]=this.bytes[e]|t.bytes[e];return new e(r,this.k)}static of(...e){let t=new lF;return t.add(...e),t}},lF=class e{static DEFAULT_K=5;hashMap=new Map;add(...e){for(let t of e)this.hashMap.set(lj(t instanceof lv?t.bytes:t),!0);return this}build(t=e.DEFAULT_K,r=lM.computeBestBitsPerKey(t)){let i=Math.floor((this.hashMap.size*r+7)/8);i=i<8?8:i;let n=new Uint8Array(i),s=8*i;for(let e of this.hashMap.keys())l$(e,t,s,(e,t)=>(n[e]|=t,!0));return new lM(n,t)}};function l$(e,t,r,i){let n=(e>>>17|e<<15)>>>0;for(let s=0;s<t;s++){let t=e%r;if(!i(Math.floor(t/8),1<<t%8))return!1;e=(e+n)%4294967296}return!0}function lj(e){return Number(eG(lU.of(e).bytes.slice(0,4)))}var lH=class{_code;_value;constructor(e,t){this._code=e,this._value=t}get code(){return this._code}get value(){return this._value}get bi(){return this._value.bi}get bytes(){return lS.of(this.toString()).bytes}get n(){return this._value.n}compareTo(e){if(this.code.isEqual(e.code))return this.value.compareTo(e.value);throw new p.ep("Coin.compareTo","not VET currency",{that:`${e}`})}isEqual(e){try{return 0===this.compareTo(e)}catch{return!1}}toString(){return`${this.value.toString()} ${this._code}`}},lV=((i=lV||{})[i.wei=0]="wei",i[i.kwei=3]="kwei",i[i.mwei=6]="mwei",i[i.gwei=9]="gwei",i[i.szabo=12]="szabo",i[i.finney=15]="finney",i[i.ether=18]="ether",i);(e=>{function t(e,t=18){let r=e.div(lP.of(10n**BigInt(t)));return r.isInteger()?`${r}.0`:`${r}`}function r(e,t=18){return lP.of(e).times(lP.of(10n**BigInt(t)))}e.formatEther=function(e){return t(e,18)},e.formatUnits=t,e.parseEther=function(e){return r(e,18)},e.parseUnits=r})(lV||={});var lz=class e extends lH{static CODE=lS.of("\uD835\uDD4DΞT");static WEI_FD=18n;wei=this.value.dp(e.WEI_FD).scaledValue;constructor(t){super(e.CODE,t)}static of(t,r=18){return new e((t instanceof lP?t:lP.of(t)).div(lP.of(10n**(e.WEI_FD-BigInt(r)))))}},lG=class e extends lH{static CODE=lS.of("\uD835\uDD4DTHO");static WEI_FD=18n;wei=this.value.dp(e.WEI_FD).scaledValue;constructor(t){super(e.CODE,t)}static of(t,r=18){return new e((t instanceof lP?t:lP.of(t)).div(lP.of(10n**(e.WEI_FD-BigInt(r)))))}},lq=class{_valueWei;constructor(){this._valueWei=0n}initialize(e,t){this._valueWei=this.convertToWei(e,t)}convertWeiToBaseUnits(){let e=BigInt(this.units-0);return this._valueWei*10n**e}convertToWei(e,t){return e*10n**BigInt(t??this.units)}get value(){return this.convertWeiToBaseUnits()}format(e){let t=10n**BigInt(18),r=this._valueWei/t,i=this._valueWei%t,n=+`${r}.${i}`;return void 0===e?n.toFixed(18-this.units):n.toFixed(e)}},lK=class{},lW=class e{encoded;decoded;constructor(e){this.decoded=ArrayBuffer.isView(e)?nO.decode(e):e,this.encoded=ArrayBuffer.isView(e)?e:nO.encode(e)}get bi(){return function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x"+e)}(function(e){if(nC(e),nM)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=nF[e[r]];return t}(this.bytes))}get bytes(){return this.encoded}get n(){let e=this.bi;if(e<=Number.MAX_SAFE_INTEGER)return Number(e);throw new p.ep("RLP.n","not in the safe number range",{bytes:this.bytes})}compareTo(e){if(this.encoded.length!==e.encoded.length)return -1;for(let t=0;t<this.encoded.length;t++)if(this.encoded[t]!==e.encoded[t])return 1;return 0}isEqual(e){return 0===this.compareTo(e)}toHex(){return lv.of(this.bytes)}static of(t){try{return new e(t)}catch(e){throw new p.yv("RLP.of()",`Error when creating an RLP instance for data ${t}`,{context:"This method creates an RLP instance from a plain value.",data:{data:t}},e)}}static ofEncoded(t){try{return new e(t)}catch(e){throw new p.yv("RLP.ofEncoded()","Error when creating an RLP instance for encoded data.",{context:"This method creates an RLP instance from an encoded value.",data:{encodedData:t}},e)}}static packData(e,t,r){r=""!==r?r+"."+t.name:t.name;let i=t.kind;if(i instanceof lK)return i.data(e,r).encode();if(Array.isArray(i))return i.map(t=>this.packData(e[t.name],t,r));if(!Array.isArray(e))throw new p.yv("RLP.packData()",`Validation error: Expected an array in ${r}.`,{context:r,data:{obj:e,profile:t}});if("item"in i&&Array.isArray(e)){let t=i.item;return e.map((e,i)=>this.packData(e,{name:"#"+i,kind:t},r))}}static unpackData(e,t,r){r=""!==r?r+"."+t.name:t.name;let i=t.kind;if(i instanceof lK){if(!ArrayBuffer.isView(e))throw new p.yv("RLP.unpackData()","Unpacking error: Expected data type is Uint8Array.",{context:r,data:{packed:e,profile:t}});return i.buffer(e,r).decode()}if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)throw new p.yv("RLP.unpackData()",`Unpacking error: Expected ${i.length} items, but got ${e.length}.`,{context:r,data:{packed:e,profile:t}});return i.reduce((t,i,n)=>(t[i.name]=this.unpackData(e[n],i,r),t),{})}if(!Array.isArray(e))throw new p.yv("RLP.unpackData()",`Validation error: Expected an array in ${r}.`,{context:r,data:{packed:e,profile:t}});if("item"in i&&Array.isArray(e)){let t=i.item;return e.map((e,i)=>this.unpackData(e,{name:"#"+i,kind:t},r))}}},lQ=class e extends lW{constructor(e,t){super(e),this.profile=t}static ofObject(t,r){return new e(this.packData(t,r,""),r)}static ofObjectEncoded(t,r){return new e(lW.ofEncoded(t).decoded,r)}get object(){return e.unpackData(this.decoded,this.profile,"")}},lY=(e,t)=>{if("number"!=typeof e&&"string"!=typeof e)throw new p.yv("validateNumericKindData()",`Validation error: Input in ${t} must be a string or number.`,{context:t,data:{data:e}});return"number"==typeof e?lJ(e,t):"string"==typeof e&&lZ(e,t),BigInt(e)},lJ=(e,t)=>{if(!Number.isSafeInteger(e)||e<0)throw new p.yv("_validateNumericKindNumber()",`Validation error: Number in ${t} must be a safe and non-negative integer.`,{context:t,data:{num:e}})},lZ=(e,t)=>{let r=lO.isValid0x(e),i=lP.isNaturalExpression(e);if(!r&&!i)throw new p.yv("_validateNumericKindString()",`Validation error: String in ${t} must represent a non-negative integer in hex or decimal format.`,{context:t,data:{str:e}});if(r&&e.length<=2)throw new p.yv("_validateNumericKindString()",`Validation error: Hex string number in ${t} must be of valid length.`,{context:t,data:{str:e}})},lX=(e,t,r)=>{if(void 0!==r&&e.length>r)throw new p.yv("assertValidNumericKindBuffer()",`Validation error: Buffer in ${t} must be less than ${r} bytes.`,{context:t,data:{buf:e,maxBytes:r}});if(0===e[0])throw new p.yv("assertValidNumericKindBuffer()",`Validation error: Buffer in ${t} must represent a canonical integer (no leading zeros).`,{context:t,data:{buf:e,maxBytes:r}})},l0=(e,t,r)=>{if(0n===e)return Uint8Array.from([]);let i=lv.of(e).digits;if(void 0!==t&&i.length>2*t)throw new p.yv("encodeBigIntToBuffer()",`Validation error: Encoded number in ${r} must fit within ${t} bytes.`,{context:r,data:{hex:i,maxBytes:t}});return lv.of(i).bytes},l1=e=>{if(0===e.length)return 0;let t=lv.of(e).bi,r=Number(t);return Number.isSafeInteger(r)?r:"0x"+t.toString(16)},l2=(e,t)=>{if("string"!=typeof e)throw new p.yv("assertValidHexBlobKindData()","Validation error: Input must be a string.",{context:t,data:{data:e}});if(!lv.isValid(e))throw new p.yv("assertValidHexBlobKindData()","Validation error: Input must be a valid hex string with a '0x' prefix.",{context:t,data:{data:e}});if(e.length%2!=0)throw new p.yv("assertValidHexBlobKindData()","Validation error: Hex string must have an even length.",{context:t,data:{data:e}})},l3=(e,t,r)=>{if(e.length!==2*r+2)throw new p.yv("assertFixedHexBlobKindData()",`Validation error: Hex string in ${t} must be exactly ${r} bytes in length.`,{context:t,data:{data:e,bytes:r}})},l4=(e,t,r)=>{if(e.length!==r)throw new p.yv("assertFixedHexBlobKindData()",`Validation error: Hex string in ${t} must be exactly ${r} bytes in length.`,{context:t,data:{buffer:e,bytes:r}})},l8=(e,t,r)=>{if(e.length>r)throw new p.yv("assertCompactFixedHexBlobBuffer()",`Validation error: Buffer in ${t} must be at most ${r} bytes.`,{context:t,data:{buffer:e,bytes:r}});if(0!==e.length&&0===e[0])throw new p.yv("assertCompactFixedHexBlobBuffer()",`Validation error: Buffer in ${t} should not have leading zero bytes.`,{context:t,data:{buffer:e,bytes:r}})},l5=e=>{let t=e.findIndex(e=>0!==e);return -1!==t?e.subarray(t):Uint8Array.from([])},l6=(e,t)=>lv.of(e).fit(2*t).toString(),l7=class extends lK{data(e,t){if(!ArrayBuffer.isView(e))throw new p.yv("BufferKind.data()",`Validation error: Expected a Uint8Array type in ${t}.`,{context:t,data:{data:e}});return{encode:()=>e}}buffer(e){return{decode:()=>e}}},l9=class extends lK{constructor(e){super(),this.maxBytes=e}data(e,t){let r=lY(e,t);return{encode:()=>l0(r,this.maxBytes,t)}}buffer(e,t){return lX(e,t,this.maxBytes),{decode:()=>l1(e)}}},ce=class extends lK{data(e,t){return l2(e,t),{encode:()=>lO.of(e.slice(2)).bytes}}buffer(e,t){return{decode:()=>lv.of(e).toString()}}},ct=class extends ce{constructor(e){super(),this.bytes=e}data(e,t){let r=super.data(e,t);return l3(e,t,this.bytes),r}buffer(e,t){let r=super.buffer(e,t);return l4(e,t,this.bytes),r}},cr=class extends ct{data(e,t){return null==e?{encode:()=>Uint8Array.from([])}:super.data(e,t)}buffer(e,t){return 0===e.length?{decode:()=>null}:super.buffer(e,t)}},ci=class extends ct{data(e,t){let r=super.data(e,t).encode();return{encode:()=>l5(r)}}buffer(e,t){return l8(e,t,this.bytes),{decode:()=>lv.of(e).fit(2*this.bytes).toString()}}},cn=class e{static ENCODER=new TextEncoder;get bi(){throw new p.OH("Mnemonic.bi","There is no big integer representation for a mnemonic.",{data:""})}get bytes(){return e.ENCODER.encode(e.of().join(" "))}get n(){throw new p.OH("Mnemonic.n","There is no number representation for a mnemonic.",{data:""})}compareTo(e){throw new p.OH("Mnemonic.compareTo","There is no comparison for a mnemonic since it is not stored in memory.",{data:""})}isEqual(e){throw new p.OH("Mnemonic.isEqual","There is no comparison for a mnemonic since it is not stored in memory.",{data:""})}static wordsNoToStrength(e){switch(e){case 12:return 128;case 15:return 160;case 18:return 192;case 21:return 224;case 24:return 256;default:throw new p.ep("Mnemonic.wordsNoToStrength","not a valid number of words",{numberOfWords:e})}}static toPrivateKey(e,t=lB.VET_DERIVATION_PATH){let r=rV.fromMasterSeed(iP(e.join(" ").toLowerCase()));try{return r.derive(t).privateKey}catch(e){throw new p.yZ("mnemonic.derivePrivateKey()","Invalid derivation path given as input.",{derivationPath:t},e)}}static of(t=12,r){try{let i=e.wordsNoToStrength(t);if(null!=r)return i_(r(i/8),nV).split(" ");return(function(e,t=128){if((0,eF.k8)(t),t%32!=0||t>256)throw TypeError("Invalid entropy");return i_((0,eF.O6)(t/8),e)})(nV,i).split(" ")}catch(e){throw new p.g4("Mnemonic.of","error while generating mnemonic",{wordlistSize:t},e)}}static isValid(e){return function(e,t){try{!function(e,t){let{words:r}=iA(e),i=iT(t).decode(r);ix(i)}(e,t)}catch(e){return!1}return!0}(Array.isArray(e)?e.join(" "):e,nV)}},cs=class e extends lO{static of(t){try{let r=lO.of(t),i=0;for(;i<r.digits.length&&"0"===r.digits.at(i);)i++;return new e(r.sign,i===r.digits.length?"0":r.digits.slice(i))}catch(e){throw new p.ep("Quantity.of","not a Quantity expression",{exp:`${t}`},e)}}},co=class e extends lS{static VALID_REVISION_REGEX=/^(best|finalized|next|justified|0x[a-fA-F0-9]+|\d+)$/;static isValid(t){return"number"==typeof t?Number.isInteger(t)&&t>=0:"bigint"==typeof t?t>=BigInt(0):t instanceof lv?e.isValid(t.bi):e.VALID_REVISION_REGEX.test(t)}static of(t){try{if(ArrayBuffer.isView(t)){let r=lS.of(t).toString();if(e.isValid(r))return new e(r);throw new p.ep("Revision.of","not a revision",{value:`${t}`})}if(e.isValid(t))return new e(`${t}`);throw new p.ep("Revision.of","not a revision",{value:`${t}`})}catch(e){throw new p.ep("Revision.of","not a revision",{value:`${t}`,e:e})}}static BEST=e.of("best");static FINALIZED=e.of("finalized");static NEXT=e.of("next");static JUSTIFIED=e.of("justified")},ca=class e extends lO{static DIGITS=64;constructor(t){super(lv.POSITIVE,t.fit(e.DIGITS).digits)}static isValid(t){return lv.isValid(t)&&lO.REGEX_HEXUINT_PREFIX.test(t)?t.length===e.DIGITS+2:t.length===e.DIGITS}static isValid0x(t){return lO.REGEX_HEXUINT_PREFIX.test(t)&&e.isValid(t)}static of(t){try{return new e(t instanceof lO?t:lO.of(t))}catch(e){throw new p.ep("BlockId.of","not a BlockId expression",{exp:`${t}`},e)}}},cl=class e extends ca{constructor(e){super(e)}static of(t){return new e(ca.of(t))}},cc=class e{purpose;payload;domain;timestamp;signer;signature;constructor(e,t,r,i,n,s){if(Number.isSafeInteger(i)&&i>=0){if(lD.isValid(n)){this.purpose=e,this.payload=t,this.domain=r,this.timestamp=i,this.signer=n.toString().toLowerCase();try{this.signature="string"==typeof s?lO.of(s).alignToBytes().toString():s}catch(e){throw new p.ep("Certificate.constructor","invalid signature",{signature:s},e)}}else throw new p.ep("Certificate.constructor","signer is not an address",{signer:n})}else throw new p.ep("Certificate.constructor","not positive safe integer timestamp",{timestamp:i})}static encode(e){return lS.of(f(e)).bytes}encode(){return e.encode({...this,signature:void 0})}isSigned(){return"string"==typeof this.signature&&lO.isValid(this.signature)}static of(t){try{return new e(t.purpose,t.payload,t.domain,t.timestamp,t.signer,t.signature)}catch(e){throw new p.ep("Certificate.of","invalid certificate data",{certifiable:t},e)}}sign(t){return this.signature=void 0,this.signature=lO.of(lC.sign(lU.of(e.encode(this)).bytes,t)).toString(),this}verify(){if(!this.isSigned())throw new p.kA("Certificate.verify","signature missing",{certificate:this});if(lD.ofPublicKey(lC.recover(lU.of(e.encode({...this,signature:void 0})).bytes,lO.of(this.signature).bytes)).toString().toLowerCase()!==this.signer)throw new p.kA("Certificate.verify","signature doesn't match with signer's public key",{certificate:this})}};function cu(e){return function(e){try{let t=JSON.parse(e),r=null!=t.version?parseInt(t.version):0;if(3===r)return!0}catch(e){}return!1}((0,p.WO)(e))}var ch={encrypt:async function(e,t){let r=lC.derivePublicKey(e),i={address:lD.ofPublicKey(r).toString(),privateKey:lO.of(e).toString()};return JSON.parse(await a3(i,t,{scrypt:{N:131072,r:8,p:1}}))},decrypt:async function(e,t){if(!cu(e))throw new p.ru("keystore.decrypt()","Invalid keystore. Ensure the keystore is properly formatted and contains the necessary data.",{keystore:e});try{return await a2((0,p.WO)(e),t)}catch{throw new p.QQ("keystore.decrypt()","Decryption failed: Invalid Password for the given keystore.",{keystore:e})}},isValid:cu},cd="aes-128-ctr",cf="scrypt",cp={N:131072,r:8,p:1},cg={decrypt:function(e,t){return function(e,t){try{if(e.crypto.cipher.toLowerCase()!==cd)throw new p.QQ("(EXPERIMENTAL) keystore.decryptKeystore()","Decryption failed: unsupported crypto cipher algorithm.",{cipher:e.crypto.cipher.toLowerCase()});if(e.crypto.kdf.toLowerCase()!==cf)throw new p.QQ("(EXPERIMENTAL) keystore.decryptKeystore()","Decryption failed: unsupported crypto key derivation function.",{keyDerivationFunction:e.crypto.kdf.toLowerCase()});if(3!==e.version)throw new p.QQ("(EXPERIMENTAL) keystore.decryptKeystore()","Decryption failed: unsupported keystore version.",{version:e.version});let r=function(e){let t=eF.nr(e.crypto.kdfparams.salt),r=e.crypto.kdfparams.n,i=e.crypto.kdfparams.r,n=e.crypto.kdfparams.p;if(r<=0||r&r-1)throw new p.QQ("(EXPERIMENTAL) keystore.decodeScryptParams()","Decryption failed: invalid  keystore.crypto.kdfparams.n parameter.",{keystore:e,N:r});if(i<=0||n<=0)throw new p.QQ("(EXPERIMENTAL) keystore.decodeScryptParams()","Decryption failed: both keystore.crypto.kdfparams.r or keystore.crypto.kdfparams.p parameter must be > 0.",{keystore:e,r:i,p:n});let s=e.crypto.kdfparams.dklen;if(32!==s)throw new p.QQ("(EXPERIMENTAL) keystore.decodeScryptParams()","Decryption failed: keystore.crypto.kdfparams.dklen parameter must be 32",{keystore:e,dkLen:s});return{N:r,dkLen:32,name:cf,p:n,r:i,salt:t}}(e),i=lb(t,r.salt,{N:r.N,r:r.r,p:r.p,dkLen:r.dkLen}),n=eF.nr(e.crypto.ciphertext);if(e.crypto.mac!==lR.of(eF.eV(i.slice(16,32),n)).digits)throw new p.QQ("(EXPERIMENTAL) keystore.decryptKeystore()","Decryption failed: Invalid Password for the given keystore.",{keystore:e});let s=lg(i.slice(0,16),eF.nr(e.crypto.cipherparams.iv)).decrypt(n),o=lD.ofPrivateKey(s).toString();if(""!==e.address&&o!==lD.checksum(lv.of(e.address)))throw new p.QQ("(EXPERIMENTAL) keystore.decryptKeystore()","Decryption failed: address/password mismatch.",{keystoreAddress:e.address});return{address:o,privateKey:lv.of(s).toString()}}finally{t.fill(0)}}(e,t)},encrypt:function(e,t){return function(e,t,r){try{let i,n=function(e){let t=e.salt??lC.randomBytes(32),r=cp.N,i=cp.r,n=cp.p;if(null!=e.scrypt&&(null!=e.scrypt.N&&(r=e.scrypt.N),null!=e.scrypt.r&&(i=e.scrypt.r),null!=e.scrypt.p&&(n=e.scrypt.p)),r<=0||(BigInt(r)&BigInt(r-1))!==BigInt(0))throw new p.QQ("(EXPERIMENTAL) keystore.encodeScryptParams()","Encryption failed: invalid options.scrypt.N parameter.",{options:e,N:r});if(i<=0||!Number.isSafeInteger(i))throw new p.QQ("(EXPERIMENTAL) keystore.encodeScryptParams()","Encryption failed: invalid options.scrypt.r parameter.",{options:e,r:i});if(n<=0||!Number.isSafeInteger(n))throw new p.QQ("(EXPERIMENTAL) keystore.encodeScryptParams()","Encryption failed: invalid options.scrypt.p parameter.",{options:e,p:n});return{name:cf,dkLen:32,N:r,p:n,r:i,salt:t}}(r),s=lb(t,n.salt,{N:n.N,r:n.r,p:n.p,dkLen:n.dkLen}),o=r.iv??lC.randomBytes(16);if(16!==o.length)throw new p.QQ("(EXPERIMENTAL) keystore.encryptKeystore()","Encryption failed: invalid options.iv length.",{iv:o});let a=r.uuid??lC.randomBytes(16);if(16!==a.length)throw new p.QQ("(EXPERIMENTAL) keystore.encryptKeystore()","Encryption failed: invalid options.uuid length.",{uuidRandom:a});let l=s.slice(16,32),c=lg(s.slice(0,16),o).encrypt(e);return{address:lD.ofPrivateKey(e).toString(),crypto:{cipher:cd,cipherparams:{iv:lv.of(o).digits},ciphertext:lv.of(c).digits,kdf:"scrypt",kdfparams:{dklen:32,n:n.N,p:n.p,r:n.r,salt:lv.of(n.salt).digits},mac:lR.of(eF.eV(l,c)).digits},id:(a[6]=15&a[6]|64,a[8]=63&a[8]|128,[(i=lv.of(a).digits).substring(0,8),i.substring(8,12),i.substring(12,16),i.substring(16,20),i.substring(20,32)].join("-")),version:3}}finally{e.fill(0),t.fill(0)}}(e,t,{scrypt:{N:cp.N,r:cp.r,p:cp.p}})},isValid:function(e){try{let t=JSON.parse((0,p.WO)(e));if(t.crypto.cipher.toLowerCase()===cd&&t.crypto.kdf.toLowerCase()===cf&&3===t.version)return!0}catch{}return!1}},cy=!1,cm={encrypt:async function(e,t){return cy&&(0,nz.t)("warning").log({title:"Experimental cryptography",messages:["Remember, you are using an experimental cryptography library.","functions: keystore.encrypt"]}),cy?cg.encrypt(e,lS.of(t).bytes):await ch.encrypt(e,t)},decrypt:async function(e,t){return cy&&(0,nz.t)("warning").log({title:"Experimental cryptography",messages:["Remember, you are using an experimental cryptography library.","functions: keystore.decrypt"]}),cy?cg.decrypt(e,lS.of(t).bytes):await ch.decrypt(e,t)},isValid:function(e){return cy&&(0,nz.t)("warning").log({title:"Experimental cryptography",messages:["Remember, you are using an experimental cryptography library.","functions: keystore.isValid"]}),cy?cg.isValid(e):ch.isValid(e)},useExperimentalCryptography:function(e){cy=e}},cb=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],cw=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"ERC721IncorrectOwner",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721InsufficientApproval",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC721InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC721InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"ERC721InvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC721InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC721InvalidSender",type:"error"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721NonexistentToken",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"mintItem",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],cv=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],cE=cb,cA=cw,cx=cv,cI=e=>new Uint8Array(e),cT=/(^-?\d+(\.\d+)?)$|(^-?\.\d+)$/,c_={decodeBytes32String:e=>{if(!lv.isValid(e)||64!==lv.of(e).digits.length)throw new p.ep("dataUtils.decodeBytes32String()",`Failed to decode value ${e} to string. Value is not a valid hex string or it is not 64 characters long`,{value:e});let t=lv.of(e).bytes,r=t.findIndex(e=>0===e);if(0!==r)return -1!==r?lS.of(t.subarray(0,r)).toString():lS.of(t).toString();{let e=t.findIndex(e=>0!==e);return lS.of(t.subarray(e)).toString()}},encodeBytes32String:(e,t="right")=>{try{let r=lS.of(e).bytes;if(r.length>32)throw new p.ep("dataUtils.encodeBytes32String()",`Failed to encode value ${e} to bytes32 string. Value exceeds 32 bytes.`,{value:e});let i=cI(32-r.length);return"left"===t?lv.of(eF.eV(i,r)).toString():lv.of(eF.eV(r,i)).toString()}catch(t){throw new p.ep("dataUtils.encodeBytes32String()",`Failed to encode value ${e} to bytes32 string.`,{value:e},t)}}},cS="0x0000000000000000000000000000000000000000",cP="0x0000000000000000000000000000456e65726779",cN={genesisBlock:{number:0,id:"0x00000000851caf3cfdb6e899cf5958bfb1ac3413d346d43539627e6be7ec1b4a",size:170,parentID:"0xffffffff53616c757465202620526573706563742c20457468657265756d2100",timestamp:1530316800,gasLimit:1e7,beneficiary:"0x0000000000000000000000000000000000000000",gasUsed:0,totalScore:0,txsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",txsFeatures:0,stateRoot:"0x09bfdf9e24dd5cd5b63f3c1b5d58b97ff02ca0490214a021ed7d99b93867839c",receiptsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",signer:"0x0000000000000000000000000000000000000000",isTrunk:!0,transactions:[]},chainTag:74},cO={genesisBlock:{number:0,id:"0x000000000b2bce3c70bc649a02749e8687721b09ed2e15997f466536b20bb127",size:170,parentID:"0xffffffff00000000000000000000000000000000000000000000000000000000",timestamp:1530014400,gasLimit:1e7,beneficiary:"0x0000000000000000000000000000000000000000",gasUsed:0,totalScore:0,txsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",txsFeatures:0,stateRoot:"0x4ec3af0acbad1ae467ad569337d2fe8576fe303928d35b8cdd91de47e9ac84bb",receiptsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",signer:"0x0000000000000000000000000000000000000000",isTrunk:!0,transactions:[]},chainTag:39},ck={genesisBlock:{number:0,id:"0x00000000c05a20fbca2bf6ae3affba6af4a74b800b585bf7a4988aba7aea69f6",size:170,parentID:"0xffffffff00000000000000000000000000000000000000000000000000000000",timestamp:15264e5,gasLimit:1e7,beneficiary:"0x0000000000000000000000000000000000000000",gasUsed:0,totalScore:0,txsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",txsFeatures:0,stateRoot:"0x93de0ffb1f33bc0af053abc2a87c4af44594f5dcb1cb879dd823686a15d68550",receiptsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",signer:"0x0000000000000000000000000000000000000000",isTrunk:!0,transactions:[]},chainTag:246},cC={mainnet:cN,testnet:cO,solo:ck},cB=class e{static FORMAT_TYPE="json";static NO_DATA=lv.PREFIX;static TRANSFER_NFT_FUNCTION="transferFrom";static TRANSFER_TOKEN_FUNCTION="transfer";to;value;data;comment;abi;static NO_VALUE=lv.PREFIX+"0";constructor(e,t,r,i,n){this.to=e,this.value=t,this.data=r,this.comment=i,this.abi=n}amount(){return lP.of(lN.of(this.value).bi)}static callFunction(t,r,i,n=lz.of(lP.ZERO),s){if(n.value.isFinite()&&n.value.gte(lP.ZERO))return new e(t.toString().toLowerCase(),lv.PREFIX+n.wei.toString(lv.RADIX),r.encodeData(i).toString(),s?.comment,s?.includeABI===!0?r.format(e.FORMAT_TYPE):void 0);throw new p.ep("Clause.callFunction","not finite positive amount",{amount:`${n.value}`})}static deployContract(t,r,i){let n=null!=r&&void 0!==r?t.digits+lE.of(r.types,r.values).toHex().toString().replace(lv.PREFIX,""):t.digits;return new e(null,i?.value??e.NO_VALUE,lv.PREFIX+n,i?.comment)}static transferNFT(t,r,i,n,s){return e.callFunction(t,lT.ofAbi(cw).getFunction(e.TRANSFER_NFT_FUNCTION),[r.toString(),i.toString(),n.bi.toString()],void 0,s)}static transferVTHOToken(t,r){if(r.value.isFinite()&&r.value.isPositive()){let i=lD.of(cP);return this.callFunction(i,lT.ofAbi(cE).getFunction(e.TRANSFER_TOKEN_FUNCTION),[t.toString(),r.wei],void 0,{comment:"Transfer VTHO"})}throw new p.ep("Clause.transferVTHOToken","not positive integer amount",{amount:`${r.value}`})}static transferToken(t,r){if(r.value>=0)return this.callFunction(r.tokenAddress,lT.ofAbi(cE).getFunction(e.TRANSFER_TOKEN_FUNCTION),[t.toString(),r.value],void 0,{comment:`Transfer ${r.name}`});throw new p.ep("Clause.transferToken","not positive integer amount",{amount:`${r.value}`})}static transferVET(t,r,i){if(r.value.isFinite()&&r.value.isPositive())return new e(t.toString().toLowerCase(),lv.PREFIX+r.wei.toString(lv.RADIX),e.NO_DATA,i?.comment);throw new p.ep("Clause.transferVET","not finite positive amount",{amount:`${r.value}`})}},cR=((n=cR||{}).Legacy="legacy",n.EIP1559="eip1559",n),cD={legacy:0,eip1559:81},cL=Object.values(cD);function cU(e){if(!cL.includes(e))throw new p.Si("TransactionType.toTransactionType()","Invalid transaction type",{transactionType:e.toString(),validTypes:cL.map(e=>e.toString()).join(", ")});return e===cD.legacy?"legacy":"eip1559"}function cM(e){return cD[e]}var cF=class e{static BLOCK_REF_LENGTH=8;static GAS_CONSTANTS={TX_GAS:5000n,CLAUSE_GAS:16000n,CLAUSE_GAS_CONTRACT_CREATION:48000n,ZERO_GAS_DATA:4n,NON_ZERO_GAS_DATA:68n};static EIP1559_TX_TYPE_PREFIX=81;static LEGACY_RLP_FIELDS=[{name:"chainTag",kind:new l9(1)},{name:"blockRef",kind:new ci(8)},{name:"expiration",kind:new l9(4)},{name:"clauses",kind:{item:[{name:"to",kind:new cr(20)},{name:"value",kind:new l9(32)},{name:"data",kind:new ce}]}},{name:"gasPriceCoef",kind:new l9(1)},{name:"gas",kind:new l9(8)},{name:"dependsOn",kind:new cr(32)},{name:"nonce",kind:new l9(8)},{name:"reserved",kind:{item:new l7}}];static EIP1559_RLP_FIELDS=[{name:"chainTag",kind:new l9(1)},{name:"blockRef",kind:new ci(8)},{name:"expiration",kind:new l9(4)},{name:"clauses",kind:{item:[{name:"to",kind:new cr(20)},{name:"value",kind:new l9(32)},{name:"data",kind:new ce}]}},{name:"maxPriorityFeePerGas",kind:new l9(32)},{name:"maxFeePerGas",kind:new l9(32)},{name:"gas",kind:new l9(8)},{name:"dependsOn",kind:new cr(32)},{name:"nonce",kind:new l9(8)},{name:"reserved",kind:{item:new l7}}];static RLP_FEATURES={name:"reserved.features",kind:new l9(4)};static RLP_SIGNATURE={name:"signature",kind:new l7};static RLP_SIGNED_LEGACY_TRANSACTION_PROFILE={name:"tx",kind:e.LEGACY_RLP_FIELDS.concat([e.RLP_SIGNATURE])};static RLP_UNSIGNED_LEGACY_TRANSACTION_PROFILE={name:"tx",kind:e.LEGACY_RLP_FIELDS};static RLP_SIGNED_EIP1559_TRANSACTION_PROFILE={name:"tx",kind:e.EIP1559_RLP_FIELDS.concat([e.RLP_SIGNATURE])};static RLP_UNSIGNED_EIP1559_TRANSACTION_PROFILE={name:"tx",kind:e.EIP1559_RLP_FIELDS};body;transactionType;signature;constructor(e,t,r){this.body=e,this.transactionType=t,this.signature=r}get gasPayer(){if(this.isDelegated){if(void 0!==this.signature){let e=this.signature.slice(lC.SIGNATURE_LENGTH,this.signature.length),t=lC.recover(this.getTransactionHash(this.origin).bytes,e);return lD.ofPublicKey(t)}throw new p.$N("Transaction.gasPayer()","missing gas payer signature",{fieldName:"gasPayer"})}throw new p.uS("Transaction.gasPayer()","not delegated transaction",void 0)}get encoded(){return this.encode(this.isSigned)}get id(){if(this.isSigned)return lU.of(eF.eV(this.getTransactionHash().bytes,this.origin.bytes));throw new p.$N("Transaction.id()","not signed transaction: id unavailable",{fieldName:"id"})}get intrinsicGas(){return e.intrinsicGas(this.body.clauses)}get isDelegated(){return e.isDelegated(this.body)}get isSigned(){return void 0!==this.signature&&e.isSignatureLengthValid(this.body,this.signature)}get origin(){if(void 0!==this.signature)return lD.ofPublicKey(lC.recover(this.getTransactionHash().bytes,this.signature.slice(0,lC.SIGNATURE_LENGTH)));throw new p.$N("Transaction.origin()","not signed transaction, no origin",{fieldName:"origin"})}static decode(t,r){let i=t[0],n="legacy";Number(i)===e.EIP1559_TX_TYPE_PREFIX&&(n="eip1559");let s=r?"legacy"===n?e.RLP_SIGNED_LEGACY_TRANSACTION_PROFILE:e.RLP_SIGNED_EIP1559_TRANSACTION_PROFILE:"legacy"===n?e.RLP_UNSIGNED_LEGACY_TRANSACTION_PROFILE:e.RLP_UNSIGNED_EIP1559_TRANSACTION_PROFILE;"eip1559"===n&&(t=t.slice(1));let o=lQ.ofObjectEncoded(t,s).object,a={blockRef:o.blockRef,chainTag:o.chainTag,clauses:o.clauses,dependsOn:o.dependsOn,expiration:o.expiration,gas:o.gas,nonce:o.nonce,...void 0!==o.gasPriceCoef?{gasPriceCoef:o.gasPriceCoef}:{maxFeePerGas:o.maxFeePerGas,maxPriorityFeePerGas:o.maxPriorityFeePerGas}},l=o.reserved.length>0?{...a,reserved:e.decodeReservedField(o.reserved)}:a;return void 0!==o.signature?e.of(l,o.signature):e.of(l)}getTransactionHash(e){let t=lU.of(this.encode(!1));return void 0!==e?lU.of(eF.eV(t.bytes,e.bytes)):t}static intrinsicGas(t){return t.length>0?lG.of(t.reduce((t,r)=>{if(null!==r.to){if(!lD.isValid(r.to)&&!r.to.includes("."))throw new p.ep("Transaction.intrinsicGas","invalid data type in clause: each `to` field must be a valid address.",{clause:r});t+=e.GAS_CONSTANTS.CLAUSE_GAS}else t+=e.GAS_CONSTANTS.CLAUSE_GAS_CONTRACT_CREATION;return t+e.computeUsedGasFor(r.data)},e.GAS_CONSTANTS.TX_GAS),0):lG.of(e.GAS_CONSTANTS.TX_GAS+e.GAS_CONSTANTS.CLAUSE_GAS,0)}static isValidBody(t,r){if("legacy"===r&&(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)||"eip1559"===r&&void 0!==t.gasPriceCoef)return!1;let i=void 0!==t.chainTag&&t.chainTag>=0&&t.chainTag<=255&&void 0!==t.blockRef&&lv.isValid0x(t.blockRef)&&lO.of(t.blockRef).bytes.length===e.BLOCK_REF_LENGTH&&void 0!==t.expiration&&void 0!==t.clauses&&void 0!==t.gas&&void 0!==t.dependsOn&&void 0!==t.nonce,n="eip1559"===r&&void 0!==t.maxFeePerGas&&void 0!==t.maxPriorityFeePerGas&&("string"==typeof t.maxFeePerGas&&lv.isValid0x(t.maxFeePerGas)||"number"==typeof t.maxFeePerGas)&&("string"==typeof t.maxPriorityFeePerGas&&lv.isValid0x(t.maxPriorityFeePerGas)||"number"==typeof t.maxPriorityFeePerGas),s="legacy"===r&&void 0!==t.gasPriceCoef;return"eip1559"===r?i&&n:i&&s}static getTransactionType(e){if(void 0!==e.gasPriceCoef)return"legacy";if(void 0!==e.maxFeePerGas&&void 0!==e.maxPriorityFeePerGas)return"eip1559";throw new p.u7("Transaction.getTransactionType","invalid transaction body",{fieldName:"body",body:e})}static of(t,r){let i=e.getTransactionType(t);if(e.isValidBody(t,i))return new e(t,i,r);throw new p.u7("Transaction.of","invalid body",{fieldName:"body",body:t})}sign(t){if(lC.isValidPrivateKey(t)){if(!this.isDelegated){let r=lC.sign(this.getTransactionHash().bytes,t);return e.of(this.body,r)}throw new p.u7("Transaction.sign","delegated transaction: use signAsSenderAndGasPayer method",{fieldName:"gasPayer",body:this.body})}throw new p.wd("Transaction.sign","invalid private key: ensure it is a secp256k1 key",void 0)}signAsGasPayer(t,r){if(lC.isValidPrivateKey(r)){if(this.isDelegated){let i=this.getTransactionHash(t).bytes;return void 0!==this.signature?new e(this.body,this.transactionType,eF.eV(this.signature.slice(0,lC.SIGNATURE_LENGTH),lC.sign(i,r))):new e(this.body,this.transactionType,lC.sign(i,r))}throw new p.uS("Transaction.signAsGasPayer","not delegated transaction: use sign method",void 0)}throw new p.wd("Transaction.signAsGasPayer","invalid gas payer private key: ensure it is a secp256k1 key",void 0)}signAsSender(t){if(lC.isValidPrivateKey(t)){if(this.isDelegated){let r=this.getTransactionHash().bytes;return new e(this.body,this.transactionType,lC.sign(r,t))}throw new p.uS("Transaction.signAsSender","not delegated transaction: use sign method",void 0)}throw new p.wd("Transaction.signAsSender","invalid sender private key: ensure it is a secp256k1 key",void 0)}signAsSenderAndGasPayer(t,r){if(lC.isValidPrivateKey(t)){if(lC.isValidPrivateKey(r)){if(this.isDelegated){let i=this.getTransactionHash().bytes,n=this.getTransactionHash(lD.ofPublicKey(lC.derivePublicKey(t))).bytes;return e.of(this.body,eF.eV(lC.sign(i,t),lC.sign(n,r)))}throw new p.uS("Transaction.signAsSenderAndGasPayer","not delegated transaction: use sign method",void 0)}throw new p.wd("Transaction.signAsSenderAndGasPayer","invalid gas payer private key: ensure it is a secp256k1 key",void 0)}throw new p.wd("Transaction.signAsSenderAndGasPayer","invalid sender private key: ensure it is a secp256k1 key",void 0)}static computeUsedGasFor(t){if(""!==t&&!lv.isValid(t))throw new p.ep("calculateDataUsedGas()","Invalid data type for gas calculation. Data should be a hexadecimal string.",{data:t});let r=0n;for(let i=2;i<t.length;i+=2)"00"===t.substring(i,i+2)?r+=e.GAS_CONSTANTS.ZERO_GAS_DATA:r+=e.GAS_CONSTANTS.NON_ZERO_GAS_DATA;return r}static decodeReservedField(t){if(t[t.length-1].length>0){let r=e.RLP_FEATURES.kind.buffer(t[0],e.RLP_FEATURES.name).decode();return t.length>1?{features:r,unused:t.slice(1)}:{features:r}}throw new p.u7("Transaction.decodeReservedField","invalid reserved field: fields in the `reserved` property must be properly trimmed",{fieldName:"reserved",reserved:t})}encode(t){let r=this.encodeBodyField({...this.body,clauses:this.body.clauses,reserved:this.encodeReservedField()},t);return"eip1559"===this.transactionType?eF.eV(Uint8Array.from([e.EIP1559_TX_TYPE_PREFIX]),r):r}encodeBodyField(t,r){return r?lQ.ofObject({...t,signature:Uint8Array.from(this.signature)},"eip1559"===this.transactionType?e.RLP_SIGNED_EIP1559_TRANSACTION_PROFILE:e.RLP_SIGNED_LEGACY_TRANSACTION_PROFILE).encoded:lQ.ofObject(t,"eip1559"===this.transactionType?e.RLP_UNSIGNED_EIP1559_TRANSACTION_PROFILE:e.RLP_UNSIGNED_LEGACY_TRANSACTION_PROFILE).encoded}encodeReservedField(){let t=this.body.reserved??{},r=[e.RLP_FEATURES.kind.data(t.features??0,e.RLP_FEATURES.name).encode(),...t.unused??[]];for(;r.length>0&&0===r[r.length-1].length;)r.pop();return r}static isDelegated(e){return(((e.reserved??{}).features??0)&1)==1}static isSignatureLengthValid(e,t){let r=this.isDelegated(e)?2*lC.SIGNATURE_LENGTH:lC.SIGNATURE_LENGTH;return t.length===r}}},632:function(e,t,r){"use strict";r.d(t,{$N:function(){return z},$u:function(){return g},DT:function(){return D},GM:function(){return K},HT:function(){return O},Kf:function(){return c},ND:function(){return R},OH:function(){return Q},OP:function(){return E},QQ:function(){return I},Si:function(){return W},UM:function(){return H},WO:function(){return n},X0:function(){return y},_T:function(){return V},_g:function(){return k},ep:function(){return m},g4:function(){return w},j7:function(){return l},kA:function(){return p},kj:function(){return B},oV:function(){return C},qJ:function(){return a},ru:function(){return x},s$:function(){return T},sc:function(){return j},u7:function(){return G},uS:function(){return q},u_:function(){return A},wd:function(){return $},yZ:function(){return v},yv:function(){return L}});var i=Object.defineProperty;((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})({},{CannotFindTransaction:()=>K,CertificateSignatureMismatch:()=>p,ContractCallError:()=>y,ContractDeploymentFailed:()=>g,InvalidAbiDataToEncodeOrDecode:()=>l,InvalidAbiItem:()=>c,InvalidAbiSignatureFormat:()=>u,InvalidAddress:()=>h,InvalidBloom:()=>d,InvalidBloomParams:()=>f,InvalidCommandLineArguments:()=>U,InvalidConfigurationFile:()=>F,InvalidConfigurationFilePath:()=>M,InvalidDataType:()=>m,InvalidHDKey:()=>v,InvalidHDKeyMnemonic:()=>w,InvalidHTTPParams:()=>A,InvalidHTTPRequest:()=>E,InvalidKeystore:()=>x,InvalidKeystoreParams:()=>I,InvalidOperation:()=>Q,InvalidRLP:()=>L,InvalidSecp256k1MessageHash:()=>j,InvalidSecp256k1PrivateKey:()=>$,InvalidSecp256k1Signature:()=>H,InvalidTransactionField:()=>G,InvalidTransactionType:()=>W,JSONRPCInternalError:()=>C,JSONRPCInvalidDefaultBlock:()=>B,JSONRPCInvalidParams:()=>k,JSONRPCInvalidRequest:()=>N,JSONRPCMethodNotFound:()=>O,JSONRPCMethodNotImplemented:()=>D,JSONRPCParseError:()=>P,JSONRPCProviderError:()=>S,JSONRPCServerError:()=>R,NotDelegatedTransaction:()=>q,PollExecution:()=>T,ProviderMethodError:()=>_,SignerMethodError:()=>V,UnavailableTransactionField:()=>z,UnsupportedOperation:()=>b,VechainSDKError:()=>a,assertInnerError:()=>s,createErrorMessage:()=>o,stringifyData:()=>n});var n=e=>{let t;return JSON.stringify(e,(t=new WeakSet,(e,r)=>{if("object"==typeof r&&null!==r&&""!==e){if(t.has(r))return;t.add(r)}return"bigint"==typeof r?r.toString()+"n":r}),2)};function s(e){return e instanceof Error?e:Error(`Inner error is not an instance of Error. Object:
	${n(e)}`)}function o(e,t,r,i){let s=i?.message!==void 0?`
-Internal error: 
	${i.message}`:"";return`Method '${e}' failed.
-Reason: '${t}'
-Parameters: 
	${n(r)}`+s}var a=class extends Error{constructor(e,t,r,i){super(o(e,t,r,void 0===i?void 0:s(i))),this.methodName=e,this.errorMessage=t,this.data=r,this.innerError=i}},l=class extends a{},c=class extends a{},u=class extends a{},h=class extends a{},d=class extends a{},f=class extends a{},p=class extends a{},g=class extends a{},y=class extends a{},m=class extends a{},b=class extends a{},w=class extends a{},v=class extends a{},E=class extends a{},A=class extends a{},x=class extends a{},I=class extends a{},T=class extends a{},_=class extends a{},S=class extends a{constructor(e,t,r,i,n){super(e,r,{code:t,message:r,data:i},n),this.methodName=e,this.innerError=n}},P=class extends S{constructor(e,t,r,i){super(e,-32700,t,r,i),this.methodName=e,this.innerError=i}},N=class extends S{constructor(e,t,r,i){super(e,-32600,t,r,i),this.methodName=e,this.innerError=i}},O=class extends S{constructor(e,t,r,i){super(e,-32601,t,r,i),this.methodName=e,this.innerError=i}},k=class extends S{constructor(e,t,r,i){super(e,-32602,t,r,i),this.methodName=e,this.innerError=i}},C=class extends S{constructor(e,t,r,i){super(e,-32603,t,r,i),this.methodName=e,this.innerError=i}},B=class extends a{},R=class extends S{constructor(e,t,r,i){super(e,-32e3,t,r,i),this.methodName=e,this.innerError=i}},D=class extends S{constructor(e,t,r,i){super(e,-32004,t,r,i),this.methodName=e,this.innerError=i}},L=class extends a{},U=class extends a{},M=class extends a{},F=class extends a{},$=class extends a{},j=class extends a{},H=class extends a{},V=class extends a{},z=class extends a{},G=class extends a{},q=class extends a{},K=class extends a{},W=class extends a{},Q=class extends a{}},3251:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});var i=Object.defineProperty;((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})({},{VeChainSDKLogger:()=>a});var n={log:e=>{let t=e.messages.map(e=>`- ${e}`).join(`
`);console.log(`
****************** EVENT: ${e.title} ******************
`+t+`
`)}},s={log:e=>{console.error(`
****************** ERROR ON: %s ******************
- Error message: '%s'
- Error data:
%o
- Internal error:
%o
`,e.methodName,e.errorMessage,e.data,e.innerError)}},o={log:e=>{let t=e.messages.map(e=>`- ${e}`).join(`
`);console.warn(`
****************** WARNING: ${e.title} ******************
`+t+`
`)}},a=e=>"error"===e?s:"warning"===e?o:n},3749:function(e,t,r){"use strict";r.d(t,{ConfigCtrl:function(){return I},zv:function(){return b},uA:function(){return v},ExplorerCtrl:function(){return V},jb:function(){return G},OptionsCtrl:function(){return A},AV:function(){return m},ThemeCtrl:function(){return X},ToastCtrl:function(){return et}}),Symbol();let i=Symbol(),n=Object.getPrototypeOf,s=new WeakMap,o=e=>e&&(s.has(e)?s.get(e):n(e)===Object.prototype||n(e)===Array.prototype),a=e=>o(e)&&e[i]||null,l=(e,t=!0)=>{s.set(e,t)},c=e=>"object"==typeof e&&null!==e,u=new WeakMap,h=new WeakSet,[d]=((e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>c(e)&&!h.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),i=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},n=new WeakMap,s=(e,t,r=i)=>{let o=n.get(e);if((null==o?void 0:o[0])===t)return o[1];let a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return l(a,!0),n.set(e,[t,a]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(a,t))return;let i=Reflect.get(e,t),n={value:i,enumerable:!0,configurable:!0};if(h.has(i))l(i,!1);else if(i instanceof Promise)delete n.value,n.get=()=>r(i);else if(u.has(i)){let[e,t]=u.get(i);n.value=s(e,t(),r)}Object.defineProperty(a,t,n)}),Object.preventExtensions(a)},o=new WeakMap,d=[1,1],f=i=>{if(!c(i))throw Error("object required");let n=o.get(i);if(n)return n;let l=d[0],p=new Set,g=(e,t=++d[0])=>{l!==t&&(l=t,p.forEach(r=>r(e,t)))},y=d[1],m=(e=++d[1])=>(y===e||p.size||(y=e,w.forEach(([t])=>{let r=t[1](e);r>l&&(l=r)})),l),b=e=>(t,r)=>{let i=[...t];i[1]=[e,...i[1]],g(i,r)},w=new Map,v=(e,t)=>{if(w.has(e))throw Error("prop listener already exists");if(p.size){let r=t[3](b(e));w.set(e,[t,r])}else w.set(e,[t])},E=e=>{var t;let r=w.get(e);r&&(w.delete(e),null==(t=r[1])||t.call(r))},A=e=>{p.add(e),1===p.size&&w.forEach(([e,t],r)=>{if(t)throw Error("remove already exists");let i=e[3](b(r));w.set(r,[e,i])});let t=()=>{p.delete(e),0===p.size&&w.forEach(([e,t],r)=>{t&&(t(),w.set(r,[e]))})};return t},x=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),I={deleteProperty(e,t){let r=Reflect.get(e,t);E(t);let i=Reflect.deleteProperty(e,t);return i&&g(["delete",[t],r]),i},set(t,i,n,s){let l=Reflect.has(t,i),d=Reflect.get(t,i,s);if(l&&(e(d,n)||o.has(n)&&e(d,o.get(n))))return!0;E(i),c(n)&&(n=a(n)||n);let p=n;if(n instanceof Promise)n.then(e=>{n.status="fulfilled",n.value=e,g(["resolve",[i],e])}).catch(e=>{n.status="rejected",n.reason=e,g(["reject",[i],e])});else{!u.has(n)&&r(n)&&(p=f(n));let e=!h.has(p)&&u.get(p);e&&v(i,e)}return Reflect.set(t,i,p,s),g(["set",[i],n,d]),!0}},T=t(x,I);o.set(i,T);let _=[x,m,s,A];return u.set(T,_),Reflect.ownKeys(i).forEach(e=>{let t=Object.getOwnPropertyDescriptor(i,e);"value"in t&&(T[e]=i[e],delete t.value,delete t.writable),Object.defineProperty(x,e,t)}),T})=>[f,u,h,e,t,r,i,n,s,o,d])();function f(e={}){return d(e)}function p(e,t,r){let i;let n=u.get(e);n||console.warn("Please use proxy object");let s=[],o=n[3],a=!1,l=o(e=>{if(s.push(e),r){t(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&t(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}var g=r(6593).lW;let y=f({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),m={state:y,subscribe:e=>p(y,()=>e(y)),push(e,t){e!==y.view&&(y.view=e,t&&(y.data=t),y.history.push(e))},reset(e){y.view=e,y.history=[e]},replace(e){y.history.length>1&&(y.history[y.history.length-1]=e,y.view=e)},goBack(){if(y.history.length>1){y.history.pop();let[e]=y.history.slice(-1);y.view=e}},setData(e){y.data=e}},b={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>"undefined"!=typeof window&&!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>b.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){let e=navigator.userAgent.toLowerCase();return b.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,isTelegram:()=>"undefined"!=typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto),formatNativeUrl(e,t,r){if(b.isHttpUrl(e))return this.formatUniversalUrl(e,t,r);let i=e;i.includes("://")||(i=e.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);let n=encodeURIComponent(t);return`${i}wc?uri=${n}`},formatUniversalUrl(e,t,r){if(!b.isHttpUrl(e))return this.formatNativeUrl(e,t,r);let i=e;if(i.startsWith("https://t.me")){let e=g.from(t).toString("base64").replace(/[=]/g,"");i.endsWith("/")&&(i=i.slice(0,-1)),this.setWalletConnectDeepLink(i,r);let n=new URL(i);return n.searchParams.set("startapp",e),n.toString()}i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);let n=encodeURIComponent(t);return`${i}wc?uri=${n}`},wait:async e=>new Promise(t=>{setTimeout(t,e)}),openHref(e,t){let r=this.isTelegram()?"_blank":t;window.open(e,r,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(b.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch(e){console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{let[t]=e.split("?");localStorage.setItem(b.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch(e){console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(b.WALLETCONNECT_DEEPLINK_CHOICE)}catch(e){console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{"undefined"!=typeof localStorage&&localStorage.setItem(b.WCM_VERSION,"2.7.0")}catch(e){console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;let t=null==(e=m.state.data)?void 0:e.Wallet;if(!t)throw Error('Missing "Wallet" view data');return t}},w=f({enabled:"undefined"!=typeof location&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),v={state:w,subscribe:e=>p(w.events,()=>e(function(e,t){let r=u.get(e);r||console.warn("Please use proxy object");let[i,n,s]=r;return s(i,n(),void 0)}(w.events[w.events.length-1]))),initialize(){w.enabled&&void 0!==(null==crypto?void 0:crypto.randomUUID)&&(w.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){w.connectedWalletId=e},click(e){if(w.enabled){let t={type:"CLICK",name:e.name,userSessionId:w.userSessionId,timestamp:Date.now(),data:e};w.events.push(t)}},track(e){if(w.enabled){let t={type:"TRACK",name:e.name,userSessionId:w.userSessionId,timestamp:Date.now(),data:e};w.events.push(t)}},view(e){if(w.enabled){let t={type:"VIEW",name:e.name,userSessionId:w.userSessionId,timestamp:Date.now(),data:e};w.events.push(t)}}},E=f({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),A={state:E,subscribe:e=>p(E,()=>e(E)),setChains(e){E.chains=e},setWalletConnectUri(e){E.walletConnectUri=e},setIsCustomDesktop(e){E.isCustomDesktop=e},setIsCustomMobile(e){E.isCustomMobile=e},setIsDataLoaded(e){E.isDataLoaded=e},setIsUiLoaded(e){E.isUiLoaded=e},setIsAuth(e){E.isAuth=e}},x=f({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),I={state:x,subscribe:e=>p(x,()=>e(x)),setConfig(e){var t,r;v.initialize(),A.setChains(e.chains),A.setIsAuth(!!e.enableAuthMode),A.setIsCustomMobile(!!(null==(t=e.mobileWallets)?void 0:t.length)),A.setIsCustomDesktop(!!(null==(r=e.desktopWallets)?void 0:r.length)),b.setModalVersionInStorage(),Object.assign(x,e)}};var T=Object.defineProperty,_=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&N(e,r,t[r]);if(_)for(var r of _(t))P.call(t,r)&&N(e,r,t[r]);return e};let k="https://explorer-api.walletconnect.com",C="js-2.7.0";async function B(e,t){let r=O({sdkType:"wcm",sdkVersion:C},t),i=new URL(e,k);return i.searchParams.append("projectId",I.state.projectId),Object.entries(r).forEach(([e,t])=>{t&&i.searchParams.append(e,String(t))}),(await fetch(i)).json()}let R={getDesktopListings:async e=>B("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>B("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>B("/w3m/v1/getInjectedListings",e),getAllListings:async e=>B("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${k}/w3m/v1/getWalletImage/${e}?projectId=${I.state.projectId}&sdkType=wcm&sdkVersion=${C}`,getAssetImageUrl:e=>`${k}/w3m/v1/getAssetImage/${e}?projectId=${I.state.projectId}&sdkType=wcm&sdkVersion=${C}`};var D=Object.defineProperty,L=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))U.call(t,r)&&F(e,r,t[r]);if(L)for(var r of L(t))M.call(t,r)&&F(e,r,t[r]);return e};let j=b.isMobile(),H=f({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),V={state:H,async getRecomendedWallets(){let{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=I.state;if("NONE"===e||"ALL"===t&&!e)return H.recomendedWallets;if(b.isArray(e)){let t=e.join(","),{listings:r}=await R.getAllListings({recommendedIds:t}),i=Object.values(r);i.sort((t,r)=>e.indexOf(t.id)-e.indexOf(r.id)),H.recomendedWallets=i}else{let{chains:e,isAuth:r}=A.state,i=null==e?void 0:e.join(","),n=b.isArray(t),s={page:1,sdks:r?"auth_v1":void 0,entries:b.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:n?t.join(","):void 0},{listings:o}=j?await R.getMobileListings(s):await R.getDesktopListings(s);H.recomendedWallets=Object.values(o)}return H.recomendedWallets},async getWallets(e){let t=$({},e),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:i}=I.state,{recomendedWallets:n}=H;if("ALL"===i)return H.wallets;n.length?t.excludedIds=n.map(e=>e.id).join(","):b.isArray(r)&&(t.excludedIds=r.join(",")),b.isArray(i)&&(t.excludedIds=[t.excludedIds,i].filter(Boolean).join(",")),A.state.isAuth&&(t.sdks="auth_v1");let{page:s,search:o}=e,{listings:a,total:l}=j?await R.getMobileListings(t):await R.getDesktopListings(t),c=Object.values(a),u=o?"search":"wallets";return H[u]={listings:[...H[u].listings,...c],total:l,page:null!=s?s:1},{listings:c,total:l}},getWalletImageUrl:e=>R.getWalletImageUrl(e),getAssetImageUrl:e=>R.getAssetImageUrl(e),resetSearch(){H.search={listings:[],total:0,page:1}}},z=f({open:!1}),G={state:z,subscribe:e=>p(z,()=>e(z)),open:async e=>new Promise(t=>{let{isUiLoaded:r,isDataLoaded:i}=A.state;if(b.removeWalletConnectDeepLink(),A.setWalletConnectUri(null==e?void 0:e.uri),A.setChains(null==e?void 0:e.chains),m.reset("ConnectWallet"),r&&i)z.open=!0,t();else{let e=setInterval(()=>{let r=A.state;r.isUiLoaded&&r.isDataLoaded&&(clearInterval(e),z.open=!0,t())},200)}}),close(){z.open=!1}};var q=Object.defineProperty,K=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,J=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&Y(e,r,t[r]);if(K)for(var r of K(t))Q.call(t,r)&&Y(e,r,t[r]);return e};let Z=f({themeMode:"undefined"!=typeof matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),X={state:Z,subscribe:e=>p(Z,()=>e(Z)),setThemeConfig(e){let{themeMode:t,themeVariables:r}=e;t&&(Z.themeMode=t),r&&(Z.themeVariables=J({},r))}},ee=f({open:!1,message:"",variant:"success"}),et={state:ee,subscribe:e=>p(ee,()=>e(ee)),openToast(e,t){ee.open=!0,ee.message=e,ee.variant=t},closeToast(){ee.open=!1}}},1268:function(e,t,r){"use strict";function i(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){n(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return o},eB:function(){return a},gk:function(){return n},k8:function(){return i},z3:function(){return s}})},1515:function(e,t,r){"use strict";r.d(t,{kb:function(){return d},l1:function(){return c},eV:function(){return h},GL:function(){return o},iA:function(){return l},O6:function(){return p},np:function(){return a},O0:function(){return u},Jq:function(){return s},hE:function(){return f}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(1268);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}let l=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function c(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function u(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,n.gk)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.gk)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class d{clone(){return this._cloneInto()}}function f(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function p(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},2840:function(e,t,r){"use strict";r.d(t,{Mo:function(){return i},Cb:function(){return a},IO:function(){return c}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let i=e=>(t,r)=>{void 0!==r?r.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)};var n=r(2846);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let s={attribute:!0,type:String,converter:n.Ts,reflect:!1,hasChanged:n.Qu},o=(e=s,t,r)=>{let{kind:i,metadata:n}=r,o=globalThis.litPropertyMetadata.get(n);if(void 0===o&&globalThis.litPropertyMetadata.set(n,o=new Map),"setter"===i&&((e=Object.create(e)).wrapped=!0),o.set(r.name,e),"accessor"===i){let{name:i}=r;return{set(r){let n=t.get.call(this);t.set.call(this,r),this.requestUpdate(i,n,e)},init(t){return void 0!==t&&this.C(i,void 0,e,t),t}}}if("setter"===i){let{name:i}=r;return function(r){let n=this[i];t.call(this,r),this.requestUpdate(i,n,e)}}throw Error("Unsupported decorator location: "+i)};function a(e){return(t,r)=>"object"==typeof r?o(e,t,r):((e,t,r)=>{let i=t.hasOwnProperty(r);return t.constructor.createProperty(r,e),i?Object.getOwnPropertyDescriptor(t,r):void 0})(e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let l=(e,t,r)=>(r.configurable=!0,r.enumerable=!0,Reflect.decorate&&"object"!=typeof t&&Object.defineProperty(e,t,r),r);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function c(e,t){return(r,i,n)=>{let s=t=>t.renderRoot?.querySelector(e)??null;if(t){let{get:e,set:t}="object"==typeof i?r:n??(()=>{let e=Symbol();return{get(){return this[e]},set(t){this[e]=t}}})();return l(r,i,{get(){let r=e.call(this);return void 0===r&&(null!==(r=s(this))||this.hasUpdated)&&t.call(this,r),r}})}return l(r,i,{get(){return s(this)}})}}},7515:function(e,t,r){"use strict";r.d(t,{oi:function(){return G},iv:function(){return i.iv},dy:function(){return T},Ld:function(){return P},YP:function(){return _}});var i=r(2846);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let n=globalThis,s=n.trustedTypes,o=s?s.createPolicy("lit-html",{createHTML:e=>e}):void 0,a="$lit$",l=`lit$${Math.random().toFixed(9).slice(2)}$`,c="?"+l,u=`<${c}>`,h=document,d=()=>h.createComment(""),f=e=>null===e||"object"!=typeof e&&"function"!=typeof e,p=Array.isArray,g=e=>p(e)||"function"==typeof e?.[Symbol.iterator],y="[ 	\n\f\r]",m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,b=/-->/g,w=/>/g,v=RegExp(`>|${y}(?:([^\\s"'>=/]+)(${y}*=${y}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),E=/'/g,A=/"/g,x=/^(?:script|style|textarea|title)$/i,I=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),T=I(1),_=I(2),S=(I(3),Symbol.for("lit-noChange")),P=Symbol.for("lit-nothing"),N=new WeakMap,O=h.createTreeWalker(h,129);function k(e,t){if(!p(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==o?o.createHTML(t):t}let C=(e,t)=>{let r=e.length-1,i=[],n,s=2===t?"<svg>":3===t?"<math>":"",o=m;for(let t=0;t<r;t++){let r=e[t],c,h,d=-1,f=0;for(;f<r.length&&(o.lastIndex=f,null!==(h=o.exec(r)));)f=o.lastIndex,o===m?"!--"===h[1]?o=b:void 0!==h[1]?o=w:void 0!==h[2]?(x.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=v):void 0!==h[3]&&(o=v):o===v?">"===h[0]?(o=n??m,d=-1):void 0===h[1]?d=-2:(d=o.lastIndex-h[2].length,c=h[1],o=void 0===h[3]?v:'"'===h[3]?A:E):o===A||o===E?o=v:o===b||o===w?o=m:(o=v,n=void 0);let p=o===v&&e[t+1].startsWith("/>")?" ":"";s+=o===m?r+u:d>=0?(i.push(c),r.slice(0,d)+a+r.slice(d)+l+p):r+l+(-2===d?t:p)}return[k(e,s+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),i]};class B{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let n=0,o=0,u=e.length-1,h=this.parts,[f,p]=C(e,t);if(this.el=B.createElement(f,r),O.currentNode=this.el.content,2===t||3===t){let e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=O.nextNode())&&h.length<u;){if(1===i.nodeType){if(i.hasAttributes())for(let e of i.getAttributeNames())if(e.endsWith(a)){let t=p[o++],r=i.getAttribute(e).split(l),s=/([.?@])?(.*)/.exec(t);h.push({type:1,index:n,name:s[2],strings:r,ctor:"."===s[1]?M:"?"===s[1]?F:"@"===s[1]?$:U}),i.removeAttribute(e)}else e.startsWith(l)&&(h.push({type:6,index:n}),i.removeAttribute(e));if(x.test(i.tagName)){let e=i.textContent.split(l),t=e.length-1;if(t>0){i.textContent=s?s.emptyScript:"";for(let r=0;r<t;r++)i.append(e[r],d()),O.nextNode(),h.push({type:2,index:++n});i.append(e[t],d())}}}else if(8===i.nodeType){if(i.data===c)h.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf(l,e+1));)h.push({type:7,index:n}),e+=l.length-1}}n++}}static createElement(e,t){let r=h.createElement("template");return r.innerHTML=e,r}}function R(e,t,r=e,i){if(t===S)return t;let n=void 0!==i?r._$Co?.[i]:r._$Cl,s=f(t)?void 0:t._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),void 0===s?n=void 0:(n=new s(e))._$AT(e,r,i),void 0!==i?(r._$Co??=[])[i]=n:r._$Cl=n),void 0!==n&&(t=R(e,n._$AS(e,t.values),n,i)),t}class D{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:r}=this._$AD,i=(e?.creationScope??h).importNode(t,!0);O.currentNode=i;let n=O.nextNode(),s=0,o=0,a=r[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new L(n,n.nextSibling,this,e):1===a.type?t=new a.ctor(n,a.name,a.strings,this,e):6===a.type&&(t=new j(n,this,e)),this._$AV.push(t),a=r[++o]}s!==a?.index&&(n=O.nextNode(),s++)}return O.currentNode=h,i}p(e){let t=0;for(let r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class L{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,i){this.type=2,this._$AH=P,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){f(e=R(this,e,t))?e===P||null==e||""===e?(this._$AH!==P&&this._$AR(),this._$AH=P):e!==this._$AH&&e!==S&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):g(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==P&&f(this._$AH)?this._$AA.nextSibling.data=e:this.T(h.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:r}=e,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=B.createElement(k(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(t);else{let e=new D(i,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=N.get(e.strings);return void 0===t&&N.set(e.strings,t=new B(e)),t}k(e){p(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,r,i=0;for(let n of e)i===t.length?t.push(r=new L(this.O(d()),this.O(d()),this,this.options)):r=t[i],r._$AI(n),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){let t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class U{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,i,n){this.type=1,this._$AH=P,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=P}_$AI(e,t=this,r,i){let n=this.strings,s=!1;if(void 0===n)(s=!f(e=R(this,e,t,0))||e!==this._$AH&&e!==S)&&(this._$AH=e);else{let i,o;let a=e;for(e=n[0],i=0;i<n.length-1;i++)(o=R(this,a[r+i],t,i))===S&&(o=this._$AH[i]),s||=!f(o)||o!==this._$AH[i],o===P?e=P:e!==P&&(e+=(o??"")+n[i+1]),this._$AH[i]=o}s&&!i&&this.j(e)}j(e){e===P?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class M extends U{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===P?void 0:e}}class F extends U{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==P)}}class $ extends U{constructor(e,t,r,i,n){super(e,t,r,i,n),this.type=5}_$AI(e,t=this){if((e=R(this,e,t,0)??P)===S)return;let r=this._$AH,i=e===P&&r!==P||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==P&&(r===P||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class j{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){R(this,e)}}let H=n.litHtmlPolyfillSupport;H?.(B,L),(n.litHtmlVersions??=[]).push("3.3.0");let V=(e,t,r)=>{let i=r?.renderBefore??t,n=i._$litPart$;if(void 0===n){let e=r?.renderBefore??null;i._$litPart$=n=new L(t.insertBefore(d(),e),e,void 0,r??{})}return n._$AI(e),n},z=globalThis;class G extends i.fl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=V(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return S}}G._$litElement$=!0,G.finalized=!0,z.litElementHydrateSupport?.({LitElement:G});let q=z.litElementPolyfillSupport;q?.({LitElement:G}),(z.litElementVersions??=[]).push("4.2.0")},9233:function(e,t,r){"use strict";r.d(t,{sj:function(){return f},Ld:function(){return p}}),Symbol();let i=Symbol(),n=Object.getPrototypeOf,s=new WeakMap,o=e=>e&&(s.has(e)?s.get(e):n(e)===Object.prototype||n(e)===Array.prototype),a=e=>o(e)&&e[i]||null,l=(e,t=!0)=>{s.set(e,t)},c=e=>"object"==typeof e&&null!==e,u=new WeakMap,h=new WeakSet,[d]=((e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>c(e)&&!h.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),i=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},n=new WeakMap,s=(e,t,r=i)=>{let o=n.get(e);if((null==o?void 0:o[0])===t)return o[1];let a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return l(a,!0),n.set(e,[t,a]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(a,t))return;let i=Reflect.get(e,t),{enumerable:n}=Reflect.getOwnPropertyDescriptor(e,t),o={value:i,enumerable:n,configurable:!0};if(h.has(i))l(i,!1);else if(i instanceof Promise)delete o.value,o.get=()=>r(i);else if(u.has(i)){let[e,t]=u.get(i);o.value=s(e,t(),r)}Object.defineProperty(a,t,o)}),Object.preventExtensions(a)},o=new WeakMap,d=[1,1],f=i=>{if(!c(i))throw Error("object required");let n=o.get(i);if(n)return n;let l=d[0],p=new Set,g=(e,t=++d[0])=>{l!==t&&(l=t,p.forEach(r=>r(e,t)))},y=d[1],m=(e=++d[1])=>(y===e||p.size||(y=e,w.forEach(([t])=>{let r=t[1](e);r>l&&(l=r)})),l),b=e=>(t,r)=>{let i=[...t];i[1]=[e,...i[1]],g(i,r)},w=new Map,v=(e,t)=>{if(w.has(e))throw Error("prop listener already exists");if(p.size){let r=t[3](b(e));w.set(e,[t,r])}else w.set(e,[t])},E=e=>{var t;let r=w.get(e);r&&(w.delete(e),null==(t=r[1])||t.call(r))},A=e=>{p.add(e),1===p.size&&w.forEach(([e,t],r)=>{if(t)throw Error("remove already exists");let i=e[3](b(r));w.set(r,[e,i])});let t=()=>{p.delete(e),0===p.size&&w.forEach(([e,t],r)=>{t&&(t(),w.set(r,[e]))})};return t},x=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),I={deleteProperty(e,t){let r=Reflect.get(e,t);E(t);let i=Reflect.deleteProperty(e,t);return i&&g(["delete",[t],r]),i},set(t,i,n,s){let l=Reflect.has(t,i),d=Reflect.get(t,i,s);if(l&&(e(d,n)||o.has(n)&&e(d,o.get(n))))return!0;E(i),c(n)&&(n=a(n)||n);let p=n;if(n instanceof Promise)n.then(e=>{n.status="fulfilled",n.value=e,g(["resolve",[i],e])}).catch(e=>{n.status="rejected",n.reason=e,g(["reject",[i],e])});else{!u.has(n)&&r(n)&&(p=f(n));let e=!h.has(p)&&u.get(p);e&&v(i,e)}return Reflect.set(t,i,p,s),g(["set",[i],n,d]),!0}},T=t(x,I);o.set(i,T);let _=[x,m,s,A];return u.set(T,_),Reflect.ownKeys(i).forEach(e=>{let t=Object.getOwnPropertyDescriptor(i,e);"value"in t&&(T[e]=i[e],delete t.value,delete t.writable),Object.defineProperty(x,e,t)}),T})=>[f,u,h,e,t,r,i,n,s,o,d])();function f(e={}){return d(e)}function p(e,t,r){let i;let n=u.get(e);n||console.warn("Please use proxy object");let s=[],o=n[3],a=!1,l=o(e=>{if(s.push(e),r){t(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&t(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}},8003:function(e,t,r){"use strict";r.d(t,{VW:function(){return n}});var i=r(9233);function n(e,t,r,n){let s=e[t];return(0,i.Ld)(e,()=>{let i=e[t];Object.is(s,i)||r(s=i)},n)}Symbol()},7925:function(e,t,r){"use strict";r.d(t,{CI:function(){return A},FM:function(){return h},Gy:function(){return v},KY:function(){return b},M4:function(){return c},MX:function(){return g},S4:function(){return m},SM:function(){return w},dh:function(){return E},eF:function(){return y},fs:function(){return u},gr:function(){return l},hn:function(){return x},lC:function(){return d},mv:function(){return f},wM:function(){return I},wb:function(){return a},xB:function(){return o},xL:function(){return p}});var i=r(3113),n=r(4419),s=r(1302);class o extends s.G{constructor({data:e,params:t,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${(0,i.h)(t,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=r}}class a extends s.G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class l extends s.G{constructor({expectedLength:e,givenLength:t,type:r}){super(`ABI encoding array length mismatch for type ${r}.
Expected length: ${e}
Given length: ${t}`,{name:"AbiEncodingArrayLengthMismatchError"})}}class c extends s.G{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${(0,n.d)(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class u extends s.G{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding params/values length mismatch.
Expected length (params): ${e}
Given length (values): ${t}`,{name:"AbiEncodingLengthMismatchError"})}}class h extends s.G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class d extends s.G{constructor(e,{docsPath:t}){super(`Encoded event signature "${e}" not found on ABI.
Make sure you are using the correct ABI and that the event exists on it.
You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`,{docsPath:t,name:"AbiEventSignatureNotFoundError"})}}class f extends s.G{constructor(e,{docsPath:t}={}){super(`Event ${e?`"${e}" `:""}not found on ABI.
Make sure you are using the correct ABI and that the event exists on it.`,{docsPath:t,name:"AbiEventNotFoundError"})}}class p extends s.G{constructor(e,{docsPath:t}={}){super(`Function ${e?`"${e}" `:""}not found on ABI.
Make sure you are using the correct ABI and that the function exists on it.`,{docsPath:t,name:"AbiFunctionNotFoundError"})}}class g extends s.G{constructor(e,{docsPath:t}){super(`Function "${e}" does not contain any \`outputs\` on ABI.
Cannot decode function result without knowing what the parameter types are.
Make sure you are using the correct ABI and that the function exists on it.`,{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class y extends s.G{constructor(e,{docsPath:t}){super(`Encoded function signature "${e}" not found on ABI.
Make sure you are using the correct ABI and that the function exists on it.
You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`,{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class m extends s.G{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${(0,i.t)(e.abiItem)}\`, and`,`\`${t.type}\` in \`${(0,i.t)(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class b extends s.G{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}}class w extends s.G{constructor({abiItem:e,data:t,params:r,size:n}){super(`Data size of ${n} bytes is too small for non-indexed event parameters.`,{metaMessages:[`Params: (${(0,i.h)(r,{includeName:!0})})`,`Data:   ${t} (${n} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=r,this.size=n}}class v extends s.G{constructor({abiItem:e,param:t}){super(`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${(0,i.t)(e,{includeName:!0})}".`,{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class E extends s.G{constructor(e,{docsPath:t}){super(`Type "${e}" is not a valid encoding type.
Please provide a valid ABI type.`,{docsPath:t,name:"InvalidAbiEncodingType"})}}class A extends s.G{constructor(e,{docsPath:t}){super(`Type "${e}" is not a valid decoding type.
Please provide a valid ABI type.`,{docsPath:t,name:"InvalidAbiDecodingType"})}}class x extends s.G{constructor(e){super(`Value "${e}" is not a valid array.`,{name:"InvalidArrayError"})}}class I extends s.G{constructor(e){super(`"${e}" is not a valid definition type.
Valid types: "function", "event", "error"`,{name:"InvalidDefinitionTypeError"})}}},5036:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var i=r(1302);class n extends i.G{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}},1302:function(e,t,r){"use strict";r.d(t,{G:function(){return s}});let i="2.31.4",n={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${i}`};class s extends Error{constructor(e,t={}){let r=t.cause instanceof s?t.cause.details:t.cause?.message?t.cause.message:t.details,o=t.cause instanceof s&&t.cause.docsPath||t.docsPath,a=n.getDocsUrl?.({...t,docsPath:o});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...n.version?[`Version: ${n.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=o,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=i}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&void 0!==t.cause?e(t.cause,r):r?null:t}(this,e)}}},731:function(e,t,r){"use strict";r.d(t,{$s:function(){return s},mV:function(){return n}});var i=r(1302);class n extends i.G{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}class s extends i.G{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}},9341:function(e,t,r){"use strict";r.d(t,{J5:function(){return n},M6:function(){return o},yr:function(){return s}});var i=r(1302);class n extends i.G{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number "${n}" is not in safe ${i?`${8*i}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class s extends i.G{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class o extends i.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}},5417:function(e,t,r){"use strict";r.d(t,{E:function(){return p},S:function(){return y}});var i=r(7925),n=r(5036),s=r(1302),o=r(9341),a=r(1880),l=r(1676),c=r(2826),u=r(4419),h=r(9272),d=r(6305),f=r(1660);function p(e,t){if(e.length!==t.length)throw new i.fs({expectedLength:e.length,givenLength:t.length});let r=g(function({params:e,values:t}){let r=[];for(let p=0;p<e.length;p++)r.push(function e({param:t,value:r}){let p=y(t.type);if(p){let[n,s]=p;return function(t,{length:r,param:n}){let s=null===r;if(!Array.isArray(t))throw new i.hn(t);if(!s&&t.length!==r)throw new i.gr({expectedLength:r,givenLength:t.length,type:`${n.type}[${r}]`});let o=!1,a=[];for(let r=0;r<t.length;r++){let i=e({param:n,value:t[r]});i.dynamic&&(o=!0),a.push(i)}if(s||o){let e=g(a);if(s){let t=(0,d.eC)(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?(0,l.zo)([t,e]):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,l.zo)(a.map(({encoded:e})=>e))}}(r,{length:n,param:{...t,type:s}})}if("tuple"===t.type)return function(t,{param:r}){let i=!1,n=[];for(let s=0;s<r.components.length;s++){let o=r.components[s],a=Array.isArray(t)?s:o.name,l=e({param:o,value:t[a]});n.push(l),l.dynamic&&(i=!0)}return{dynamic:i,encoded:i?g(n):(0,l.zo)(n.map(({encoded:e})=>e))}}(r,{param:t});if("address"===t.type)return function(e){if(!(0,a.U)(e))throw new n.b({address:e});return{dynamic:!1,encoded:(0,c.gc)(e.toLowerCase())}}(r);if("bool"===t.type)return function(e){if("boolean"!=typeof e)throw new s.G(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:(0,c.gc)((0,d.C4)(e))}}(r);if(t.type.startsWith("uint")||t.type.startsWith("int")){let e=t.type.startsWith("int"),[,,i="256"]=f.lh.exec(t.type)??[];return function(e,{signed:t,size:r=256}){if("number"==typeof r){let i=2n**(BigInt(r)-(t?1n:0n))-1n,n=t?-i-1n:0n;if(e>i||e<n)throw new o.J5({max:i.toString(),min:n.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:(0,d.eC)(e,{size:32,signed:t})}}(r,{signed:e,size:Number(i)})}if(t.type.startsWith("bytes"))return function(e,{param:t}){let[,r]=t.type.split("bytes"),n=(0,u.d)(e);if(!r){let t=e;return n%32!=0&&(t=(0,c.gc)(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:(0,l.zo)([(0,c.gc)((0,d.eC)(n,{size:32})),t])}}if(n!==Number.parseInt(r))throw new i.M4({expectedSize:Number.parseInt(r),value:e});return{dynamic:!1,encoded:(0,c.gc)(e,{dir:"right"})}}(r,{param:t});if("string"===t.type)return function(e){let t=(0,d.$G)(e),r=Math.ceil((0,u.d)(t)/32),i=[];for(let e=0;e<r;e++)i.push((0,c.gc)((0,h.tP)(t,32*e,(e+1)*32),{dir:"right"}));return{dynamic:!0,encoded:(0,l.zo)([(0,c.gc)((0,d.eC)((0,u.d)(t),{size:32})),...i])}}(r);throw new i.dh(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}({param:e[p],value:t[p]}));return r}({params:e,values:t}));return 0===r.length?"0x":r}function g(e){let t=0;for(let r=0;r<e.length;r++){let{dynamic:i,encoded:n}=e[r];i?t+=32:t+=(0,u.d)(n)}let r=[],i=[],n=0;for(let s=0;s<e.length;s++){let{dynamic:o,encoded:a}=e[s];o?(r.push((0,d.eC)(t+n,{size:32})),i.push(a),n+=(0,u.d)(a)):r.push(a)}return(0,l.zo)([...r,...i])}function y(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}},3113:function(e,t,r){"use strict";r.d(t,{h:function(){return s},t:function(){return n}});var i=r(7925);function n(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new i.wM(e.type);return`${e.name}(${s(e.inputs,{includeName:t})})`}function s(e,{includeName:t=!1}={}){return e?e.map(e=>(function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${s(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")})(e,{includeName:t})).join(t?", ":","):""}},5867:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var i=r(4269),n=r(8151);let s=new(r(6227)).k(8192);function o(e,t){if(s.has(`${e}.${t}`))return s.get(`${e}.${t}`);let r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),o=(0,n.w)((0,i.qX)(r),"bytes"),a=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)o[e>>1]>>4>=8&&a[e]&&(a[e]=a[e].toUpperCase()),(15&o[e>>1])>=8&&a[e+1]&&(a[e+1]=a[e+1].toUpperCase());let l=`0x${a.join("")}`;return s.set(`${e}.${t}`,l),l}},1880:function(e,t,r){"use strict";r.d(t,{U:function(){return a}});var i=r(6227),n=r(5867);let s=/^0x[a-fA-F0-9]{40}$/,o=new i.k(8192);function a(e,t){let{strict:r=!0}=t??{},i=`${e}.${r}`;if(o.has(i))return o.get(i);let a=!!s.test(e)&&(e.toLowerCase()===e||!r||(0,n.x)(e)===e);return o.set(i,a),a}},1676:function(e,t,r){"use strict";function i(e){return"string"==typeof e[0]?n(e):function(e){let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return r}(e)}function n(e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}r.d(t,{SM:function(){return n},zo:function(){return i}})},9067:function(e,t,r){"use strict";function i(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}r.d(t,{v:function(){return i}})},2826:function(e,t,r){"use strict";r.d(t,{gc:function(){return s},vk:function(){return n}});var i=r(731);function n(e,{dir:t,size:r=32}={}){return"string"==typeof e?s(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new i.$s({size:e.length,targetSize:r,type:"bytes"});let n=new Uint8Array(r);for(let i=0;i<r;i++){let s="right"===t;n[s?i:r-i-1]=e[s?i:e.length-i-1]}return n}(e,{dir:t,size:r})}function s(e,{dir:t,size:r=32}={}){if(null===r)return e;let n=e.replace("0x","");if(n.length>2*r)throw new i.$s({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}},4419:function(e,t,r){"use strict";r.d(t,{d:function(){return n}});var i=r(9067);function n(e){return(0,i.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},9272:function(e,t,r){"use strict";r.d(t,{T4:function(){return c},tP:function(){return o}});var i=r(731),n=r(9067),s=r(4419);function o(e,t,r,{strict:i}={}){return(0,n.v)(e,{strict:!1})?function(e,t,r,{strict:i}={}){a(e,t);let n=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return i&&l(n,t,r),n}(e,t,r,{strict:i}):c(e,t,r,{strict:i})}function a(e,t){if("number"==typeof t&&t>0&&t>(0,s.d)(e)-1)throw new i.mV({offset:t,position:"start",size:(0,s.d)(e)})}function l(e,t,r){if("number"==typeof t&&"number"==typeof r&&(0,s.d)(e)!==r-t)throw new i.mV({offset:r,position:"end",size:(0,s.d)(e)})}function c(e,t,r,{strict:i}={}){a(e,t);let n=e.slice(t,r);return i&&l(n,t,r),n}},129:function(e,t,r){"use strict";r.d(t,{Yf:function(){return s},ly:function(){return a},y_:function(){return o}});var i=r(9341),n=r(4419);function s(e,{size:t}){if((0,n.d)(e)>t)throw new i.M6({givenSize:(0,n.d)(e),maxSize:t})}function o(e,t={}){let{signed:r}=t;t.size&&s(e,{size:t.size});let i=BigInt(e);if(!r)return i;let n=(e.length-2)/2;return i<=(1n<<8n*BigInt(n)-1n)-1n?i:i-BigInt(`0x${"f".padStart(2*n,"f")}`)-1n}function a(e,t={}){return Number(o(e,t))}},4269:function(e,t,r){"use strict";r.d(t,{O0:function(){return c},nr:function(){return d},qX:function(){return f}});var i=r(1302),n=r(9067),s=r(2826),o=r(129),a=r(6305);let l=new TextEncoder;function c(e,t={}){return"number"==typeof e||"bigint"==typeof e?d((0,a.eC)(e,t)):"boolean"==typeof e?function(e,t={}){let r=new Uint8Array(1);return(r[0]=Number(e),"number"==typeof t.size)?((0,o.Yf)(r,{size:t.size}),(0,s.vk)(r,{size:t.size})):r}(e,t):(0,n.v)(e)?d(e,t):f(e,t)}let u={zero:48,nine:57,A:65,F:70,a:97,f:102};function h(e){return e>=u.zero&&e<=u.nine?e-u.zero:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function d(e,t={}){let r=e;t.size&&((0,o.Yf)(r,{size:t.size}),r=(0,s.vk)(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);let a=n.length/2,l=new Uint8Array(a);for(let e=0,t=0;e<a;e++){let r=h(n.charCodeAt(t++)),s=h(n.charCodeAt(t++));if(void 0===r||void 0===s)throw new i.G(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);l[e]=16*r+s}return l}function f(e,t={}){let r=l.encode(e);return"number"==typeof t.size?((0,o.Yf)(r,{size:t.size}),(0,s.vk)(r,{dir:"right",size:t.size})):r}},6305:function(e,t,r){"use strict";r.d(t,{$G:function(){return d},C4:function(){return l},NC:function(){return a},ci:function(){return c},eC:function(){return u}});var i=r(9341),n=r(2826),s=r(129);let o=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function a(e,t={}){return"number"==typeof e||"bigint"==typeof e?u(e,t):"string"==typeof e?d(e,t):"boolean"==typeof e?l(e,t):c(e,t)}function l(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?((0,s.Yf)(r,{size:t.size}),(0,n.vk)(r,{size:t.size})):r}function c(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=o[e[t]];let i=`0x${r}`;return"number"==typeof t.size?((0,s.Yf)(i,{size:t.size}),(0,n.vk)(i,{dir:"right",size:t.size})):i}function u(e,t={}){let r;let{signed:s,size:o}=t,a=BigInt(e);o?r=s?(1n<<8n*BigInt(o)-1n)-1n:2n**(8n*BigInt(o))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let l="bigint"==typeof r&&s?-r-1n:0;if(r&&a>r||a<l){let t="bigint"==typeof e?"n":"";throw new i.J5({max:r?`${r}${t}`:void 0,min:`${l}${t}`,signed:s,size:o,value:`${e}${t}`})}let c=`0x${(s&&a<0?(1n<<BigInt(8*o))+BigInt(a):a).toString(16)}`;return o?(0,n.vk)(c,{size:o}):c}let h=new TextEncoder;function d(e,t={}){return c(h.encode(e),t)}},8151:function(e,t,r){"use strict";r.d(t,{w:function(){return a}});var i=r(8183),n=r(9067),s=r(4269),o=r(6305);function a(e,t){let r=(0,i.fr)((0,n.v)(e,{strict:!1})?(0,s.O0)(e):e);return"bytes"===(t||"hex")?r:(0,o.NC)(r)}},6227:function(e,t,r){"use strict";r.d(t,{k:function(){return i}});class i extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}},1660:function(e,t,r){"use strict";r.d(t,{eL:function(){return i},lh:function(){return n}});let i=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,n=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/}}]);